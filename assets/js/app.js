jQuery( document ).ready( function( $ ) {

	// Read input.

	// Get RSS items from repo.


	// Break out data into musical logic.

	// Create Tone.js objects and timelines.


	// Render.

	// Business time.

} );

/**
 * Helpful utilities for projects
 *
 * @type {Object} commonAU object
 */
var commonAU = {
  debugger: function( errorMessage ) {
    errorMessage = '';
    return 'cAU: ' + '\n' + errorMessage;
    debugger;
  },
  debug: false
}

/**
 * A console.error prototype
 *
 * - Callable with `console.commonAU( "The error" )`
 *
 * @since  0.1
 *
 * @return {[console.error object]} [Error object and error message string]
 */
console.commonAU = function() {

  Array.prototype.unshift.call(

    arguments,
    commonAU.debugger() );

  console.error.apply( console, arguments );
};

!function(root){"use strict";function Main(t){Tone=t()}function Module(t){t(Tone)}var Tone;/**
	 *  Tone.js
	 *  @author Yotam Mann
	 *  @license http://opensource.org/licenses/MIT MIT License
	 *  @copyright 2014-2015 Yotam Mann
	 */
Main(function(){function t(t){return void 0===t}function e(t){return"function"==typeof t}var i,s,n,o;if(t(window.AudioContext)&&(window.AudioContext=window.webkitAudioContext),t(window.OfflineAudioContext)&&(window.OfflineAudioContext=window.webkitOfflineAudioContext),t(AudioContext))throw new Error("Web Audio is not supported in this browser");return i=new AudioContext,e(AudioContext.prototype.createGain)||(AudioContext.prototype.createGain=AudioContext.prototype.createGainNode),e(AudioContext.prototype.createDelay)||(AudioContext.prototype.createDelay=AudioContext.prototype.createDelayNode),e(AudioContext.prototype.createPeriodicWave)||(AudioContext.prototype.createPeriodicWave=AudioContext.prototype.createWaveTable),e(AudioBufferSourceNode.prototype.start)||(AudioBufferSourceNode.prototype.start=AudioBufferSourceNode.prototype.noteGrainOn),e(AudioBufferSourceNode.prototype.stop)||(AudioBufferSourceNode.prototype.stop=AudioBufferSourceNode.prototype.noteOff),e(OscillatorNode.prototype.start)||(OscillatorNode.prototype.start=OscillatorNode.prototype.noteOn),e(OscillatorNode.prototype.stop)||(OscillatorNode.prototype.stop=OscillatorNode.prototype.noteOff),e(OscillatorNode.prototype.setPeriodicWave)||(OscillatorNode.prototype.setPeriodicWave=OscillatorNode.prototype.setWaveTable),AudioNode.prototype._nativeConnect=AudioNode.prototype.connect,AudioNode.prototype.connect=function(e,i,s){if(e.input)Array.isArray(e.input)?(t(s)&&(s=0),this.connect(e.input[s])):this.connect(e.input,i,s);else try{e instanceof AudioNode?this._nativeConnect(e,i,s):this._nativeConnect(e,i)}catch(n){throw new Error("error connecting to node: "+e)}},s=function(e,i){t(e)||1===e?this.input=this.context.createGain():e>1&&(this.input=new Array(e)),t(i)||1===i?this.output=this.context.createGain():i>1&&(this.output=new Array(e))},s.prototype.set=function(e,i,n){var o,r,a,l,h,u;this.isObject(e)?n=i:this.isString(e)&&(o={},o[e]=i,e=o);for(r in e){if(i=e[r],a=this,-1!==r.indexOf(".")){for(l=r.split("."),h=0;h<l.length-1;h++)a=a[l[h]];r=l[l.length-1]}u=a[r],t(u)||(s.Signal&&u instanceof s.Signal||s.Param&&u instanceof s.Param?u.value!==i&&(t(n)?u.value=i:u.rampTo(i,n)):u instanceof AudioParam?u.value!==i&&(u.value=i):u instanceof s?u.set(i):u!==i&&(a[r]=i))}return this},s.prototype.get=function(i){var n,o,r,a,l,h,u,c,p;for(t(i)?i=this._collectDefaults(this.constructor):this.isString(i)&&(i=[i]),n={},o=0;o<i.length;o++){if(r=i[o],a=this,l=n,-1!==r.indexOf(".")){for(h=r.split("."),u=0;u<h.length-1;u++)c=h[u],l[c]=l[c]||{},l=l[c],a=a[c];r=h[h.length-1]}p=a[r],this.isObject(i[r])?l[r]=p.get():s.Signal&&p instanceof s.Signal?l[r]=p.value:s.Param&&p instanceof s.Param?l[r]=p.value:p instanceof AudioParam?l[r]=p.value:p instanceof s?l[r]=p.get():e(p)||t(p)||(l[r]=p)}return n},s.prototype._collectDefaults=function(e){var i,s,n=[];if(t(e.defaults)||(n=Object.keys(e.defaults)),!t(e._super))for(i=this._collectDefaults(e._super),s=0;s<i.length;s++)-1===n.indexOf(i[s])&&n.push(i[s]);return n},s.prototype.toString=function(){var t,i,n;for(t in s)if(i=t[0].match(/^[A-Z]$/),n=s[t]===this.constructor,e(s[t])&&i&&n)return t;return"Tone"},s.context=i,s.prototype.context=s.context,s.prototype.bufferSize=2048,s.prototype.blockTime=128/s.context.sampleRate,s.prototype.dispose=function(){return this.isUndef(this.input)||(this.input instanceof AudioNode&&this.input.disconnect(),this.input=null),this.isUndef(this.output)||(this.output instanceof AudioNode&&this.output.disconnect(),this.output=null),this},n=null,s.prototype.noGC=function(){return this.output.connect(n),this},AudioNode.prototype.noGC=function(){return this.connect(n),this},s.prototype.connect=function(t,e,i){return Array.isArray(this.output)?(e=this.defaultArg(e,0),this.output[e].connect(t,0,i)):this.output.connect(t,e,i),this},s.prototype.disconnect=function(t){return Array.isArray(this.output)?(t=this.defaultArg(t,0),this.output[t].disconnect()):this.output.disconnect(),this},s.prototype.connectSeries=function(){var t,e,i;if(arguments.length>1)for(t=arguments[0],e=1;e<arguments.length;e++)i=arguments[e],t.connect(i),t=i;return this},s.prototype.connectParallel=function(){var t,e,i=arguments[0];if(arguments.length>1)for(t=1;t<arguments.length;t++)e=arguments[t],i.connect(e);return this},s.prototype.chain=function(){var t,e,i;if(arguments.length>0)for(t=this,e=0;e<arguments.length;e++)i=arguments[e],t.connect(i),t=i;return this},s.prototype.fan=function(){if(arguments.length>0)for(var t=0;t<arguments.length;t++)this.connect(arguments[t]);return this},AudioNode.prototype.chain=s.prototype.chain,AudioNode.prototype.fan=s.prototype.fan,s.prototype.defaultArg=function(e,i){var s,n,o;if(this.isObject(e)&&this.isObject(i)){s={};for(n in e)s[n]=this.defaultArg(i[n],e[n]);for(o in i)s[o]=this.defaultArg(e[o],i[o]);return s}return t(e)?i:e},s.prototype.optionsObject=function(t,e,i){var s,n={};if(1===t.length&&this.isObject(t[0]))n=t[0];else for(s=0;s<e.length;s++)n[e[s]]=t[s];return this.isUndef(i)?n:this.defaultArg(n,i)},s.prototype.isUndef=t,s.prototype.isFunction=e,s.prototype.isNumber=function(t){return"number"==typeof t},s.prototype.isObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)&&t.constructor===Object},s.prototype.isBoolean=function(t){return"boolean"==typeof t},s.prototype.isArray=function(t){return Array.isArray(t)},s.prototype.isString=function(t){return"string"==typeof t},s.noOp=function(){},s.prototype._readOnly=function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this._readOnly(t[e]);else Object.defineProperty(this,t,{writable:!1,enumerable:!0})},s.prototype._writable=function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this._writable(t[e]);else Object.defineProperty(this,t,{writable:!0})},s.State={Started:"started",Stopped:"stopped",Paused:"paused"},s.prototype.equalPowerScale=function(t){var e=.5*Math.PI;return Math.sin(t*e)},s.prototype.dbToGain=function(t){return Math.pow(2,t/6)},s.prototype.gainToDb=function(t){return 20*(Math.log(t)/Math.LN10)},s.prototype.now=function(){return this.context.currentTime},s.extend=function(e,i){function n(){}t(i)&&(i=s),n.prototype=i.prototype,e.prototype=new n,e.prototype.constructor=e,e._super=i},o=[],s._initAudioContext=function(t){t(s.context),o.push(t)},s.setContext=function(t){s.prototype.context=t,s.context=t;for(var e=0;e<o.length;e++)o[e](t)},s.startMobile=function(){var t,e=s.context.createOscillator(),i=s.context.createGain();i.gain.value=0,e.connect(i),i.connect(s.context.destination),t=s.context.currentTime,e.start(t),e.stop(t+1)},s._initAudioContext(function(t){s.prototype.blockTime=128/t.sampleRate,n=t.createGain(),n.gain.value=0,n.connect(t.destination)}),s.version="r6",console.log("%c * Tone.js "+s.version+" * ","background: #000; color: #fff"),s}),Module(function(t){return t.SignalBase=function(){},t.extend(t.SignalBase),t.SignalBase.prototype.connect=function(e,i,s){return t.Signal&&t.Signal===e.constructor||t.Param&&t.Param===e.constructor||t.TimelineSignal&&t.TimelineSignal===e.constructor?(e._param.cancelScheduledValues(0),e._param.value=0,e.overridden=!0):e instanceof AudioParam&&(e.cancelScheduledValues(0),e.value=0),t.prototype.connect.call(this,e,i,s),this},t.SignalBase}),Module(function(t){return t.WaveShaper=function(t,e){this._shaper=this.input=this.output=this.context.createWaveShaper(),this._curve=null,Array.isArray(t)?this.curve=t:isFinite(t)||this.isUndef(t)?this._curve=new Float32Array(this.defaultArg(t,1024)):this.isFunction(t)&&(this._curve=new Float32Array(this.defaultArg(e,1024)),this.setMap(t))},t.extend(t.WaveShaper,t.SignalBase),t.WaveShaper.prototype.setMap=function(t){var e,i,s;for(e=0,i=this._curve.length;i>e;e++)s=e/i*2-1,this._curve[e]=t(s,e);return this._shaper.curve=this._curve,this},Object.defineProperty(t.WaveShaper.prototype,"curve",{get:function(){return this._shaper.curve},set:function(t){this._curve=new Float32Array(t),this._shaper.curve=this._curve}}),Object.defineProperty(t.WaveShaper.prototype,"oversample",{get:function(){return this._shaper.oversample},set:function(t){if(-1===["none","2x","4x"].indexOf(t))throw new Error("invalid oversampling: "+t);this._shaper.oversample=t}}),t.WaveShaper.prototype.dispose=function(){return t.prototype.dispose.call(this),this._shaper.disconnect(),this._shaper=null,this._curve=null,this},t.WaveShaper}),Module(function(Tone){function getTransportBpm(){return Tone.Transport&&Tone.Transport.bpm?Tone.Transport.bpm.value:120}function getTransportTimeSignature(){return Tone.Transport&&Tone.Transport.timeSignature?Tone.Transport.timeSignature:4}function toNotationHelper(t,e,i,s){var n,o,r,a,l=this.toSeconds(t),h=this.notationToSeconds(s[s.length-1],e,i),u="";for(n=0;n<s.length;n++)if(o=this.notationToSeconds(s[n],e,i),r=l/o,a=1e-6,a>1-r%1&&(r+=a),r=Math.floor(r),r>0){if(u+=1===r?s[n]:r.toString()+"*"+s[n],l-=r*o,h>l)break;u+=" + "}return""===u&&(u="0"),u}var noteToScaleIndex,scaleIndexToNote;return Tone.Type={Default:"number",Time:"time",Frequency:"frequency",NormalRange:"normalRange",AudioRange:"audioRange",Decibels:"db",Interval:"interval",BPM:"bpm",Positive:"positive",Cents:"cents",Degrees:"degrees",MIDI:"midi",TransportTime:"transportTime",Ticks:"tick",Note:"note",Milliseconds:"milliseconds",Notation:"notation"},Tone.prototype.isNowRelative=function(){var t=new RegExp(/^\s*\+(.)+/i);return function(e){return t.test(e)}}(),Tone.prototype.isTicks=function(){var t=new RegExp(/^\d+i$/i);return function(e){return t.test(e)}}(),Tone.prototype.isNotation=function(){var t=new RegExp(/^[0-9]+[mnt]$/i);return function(e){return t.test(e)}}(),Tone.prototype.isTransportTime=function(){var t=new RegExp(/^(\d+(\.\d+)?\:){1,2}(\d+(\.\d+)?)?$/i);return function(e){return t.test(e)}}(),Tone.prototype.isNote=function(){var t=new RegExp(/^[a-g]{1}(b|#|x|bb)?-?[0-9]+$/i);return function(e){return t.test(e)}}(),Tone.prototype.isFrequency=function(){var t=new RegExp(/^\d*\.?\d+hz$/i);return function(e){return t.test(e)}}(),Tone.prototype.notationToSeconds=function(t,e,i){var s,n,o,r;return e=this.defaultArg(e,getTransportBpm()),i=this.defaultArg(i,getTransportTimeSignature()),s=60/e,"1n"===t&&(t="1m"),n=parseInt(t,10),o=0,0===n&&(o=0),r=t.slice(-1),o="t"===r?4/n*2/3:"n"===r?4/n:"m"===r?n*i:0,s*o},Tone.prototype.transportTimeToSeconds=function(t,e,i){var s,n,o,r,a;return e=this.defaultArg(e,getTransportBpm()),i=this.defaultArg(i,getTransportTimeSignature()),s=0,n=0,o=0,r=t.split(":"),2===r.length?(s=parseFloat(r[0]),n=parseFloat(r[1])):1===r.length?n=parseFloat(r[0]):3===r.length&&(s=parseFloat(r[0]),n=parseFloat(r[1]),o=parseFloat(r[2])),a=s*i+n+o/4,a*(60/e)},Tone.prototype.ticksToSeconds=function(t,e){if(this.isUndef(Tone.Transport))return 0;t=parseFloat(t),e=this.defaultArg(e,getTransportBpm());var i=60/e/Tone.Transport.PPQ;return i*t},Tone.prototype.frequencyToSeconds=function(t){return 1/parseFloat(t)},Tone.prototype.samplesToSeconds=function(t){return t/this.context.sampleRate},Tone.prototype.secondsToSamples=function(t){return t*this.context.sampleRate},Tone.prototype.secondsToTransportTime=function(t,e,i){var s,n,o,r,a;return e=this.defaultArg(e,getTransportBpm()),i=this.defaultArg(i,getTransportTimeSignature()),s=60/e,n=t/s,o=Math.floor(n/i),r=n%1*4,n=Math.floor(n)%i,a=[o,n,r],a.join(":")},Tone.prototype.secondsToFrequency=function(t){return 1/t},Tone.prototype.toTransportTime=function(t,e,i){var s=this.toSeconds(t);return this.secondsToTransportTime(s,e,i)},Tone.prototype.toFrequency=function(t,e){return this.isFrequency(t)?parseFloat(t):this.isNotation(t)||this.isTransportTime(t)?this.secondsToFrequency(this.toSeconds(t,e)):this.isNote(t)?this.noteToFrequency(t):t},Tone.prototype.toTicks=function(t){var e,i,s,n,o,r;if(this.isUndef(Tone.Transport))return 0;if(e=Tone.Transport.bpm.value,i=0,this.isNowRelative(t))t=t.replace("+",""),i=Tone.Transport.ticks;else if(this.isUndef(t))return Tone.Transport.ticks;return s=this.toSeconds(t),n=60/e,o=s/n,r=o*Tone.Transport.PPQ,Math.round(r+i)},Tone.prototype.toSamples=function(t){var e=this.toSeconds(t);return Math.round(e*this.context.sampleRate)},Tone.prototype.toSeconds=function(time,now){var plusTime,betweenParens,j,symbol,symbolVal,quantizationSplit,toQuantize,subdivision,components,originalTime,i,symb,val;if(now=this.defaultArg(now,this.now()),this.isNumber(time))return time;if(this.isString(time)){if(plusTime=0,this.isNowRelative(time)&&(time=time.replace("+",""),plusTime=now),betweenParens=time.match(/\(([^)(]+)\)/g))for(j=0;j<betweenParens.length;j++)symbol=betweenParens[j].replace(/[\(\)]/g,""),symbolVal=this.toSeconds(symbol),time=time.replace(betweenParens[j],symbolVal);if(-1!==time.indexOf("@")){if(quantizationSplit=time.split("@"),this.isUndef(Tone.Transport))throw new Error("quantization requires Tone.Transport");toQuantize=quantizationSplit[0].trim(),""===toQuantize&&(toQuantize=void 0),plusTime>0&&(toQuantize="+"+toQuantize,plusTime=0),subdivision=quantizationSplit[1].trim(),time=Tone.Transport.quantize(toQuantize,subdivision)}else if(components=time.split(/[\(\)\-\+\/\*]/),components.length>1){for(originalTime=time,i=0;i<components.length;i++)symb=components[i].trim(),""!==symb&&(val=this.toSeconds(symb),time=time.replace(symb,val));try{time=eval(time)}catch(e){throw new EvalError("cannot evaluate Time: "+originalTime)}}else time=this.isNotation(time)?this.notationToSeconds(time):this.isTransportTime(time)?this.transportTimeToSeconds(time):this.isFrequency(time)?this.frequencyToSeconds(time):this.isTicks(time)?this.ticksToSeconds(time):parseFloat(time);return time+plusTime}return now},Tone.prototype.toNotation=function(t,e,i){var s=["1m","2n","4n","8n","16n","32n","64n","128n"],n=toNotationHelper.call(this,t,e,i,s),o=["1m","2n","2t","4n","4t","8n","8t","16n","16t","32n","32t","64n","64t","128n"],r=toNotationHelper.call(this,t,e,i,o);return r.split("+").length<n.split("+").length?r:n},Tone.prototype.fromUnits=function(t,e){if(!this.convert&&!this.isUndef(this.convert))return t;switch(e){case Tone.Type.Time:return this.toSeconds(t);case Tone.Type.Frequency:return this.toFrequency(t);case Tone.Type.Decibels:return this.dbToGain(t);case Tone.Type.NormalRange:return Math.min(Math.max(t,0),1);case Tone.Type.AudioRange:return Math.min(Math.max(t,-1),1);case Tone.Type.Positive:return Math.max(t,0);default:return t}},Tone.prototype.toUnits=function(t,e){if(!this.convert&&!this.isUndef(this.convert))return t;switch(e){case Tone.Type.Decibels:return this.gainToDb(t);default:return t}},noteToScaleIndex={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},scaleIndexToNote=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],Tone.A4=440,Tone.prototype.noteToFrequency=function(t){var e,i,s,n=t.split(/(-?\d+)/);return 3===n.length?(e=noteToScaleIndex[n[0].toLowerCase()],i=n[1],s=e+12*(parseInt(i,10)+1),this.midiToFrequency(s)):0},Tone.prototype.frequencyToNote=function(t){var e,i=Math.log(t/Tone.A4)/Math.LN2,s=Math.round(12*i)+57,n=Math.floor(s/12);return 0>n&&(s+=-12*n),e=scaleIndexToNote[s%12],e+n.toString()},Tone.prototype.intervalToFrequencyRatio=function(t){return Math.pow(2,t/12)},Tone.prototype.midiToNote=function(t){var e=Math.floor(t/12)-1,i=t%12;return scaleIndexToNote[i]+e},Tone.prototype.noteToMidi=function(t){var e,i,s=t.split(/(\d+)/);return 3===s.length?(e=noteToScaleIndex[s[0].toLowerCase()],i=s[1],e+12*(parseInt(i,10)+1)):0},Tone.prototype.midiToFrequency=function(t){return Tone.A4*Math.pow(2,(t-69)/12)},Tone}),Module(function(t){return t.Param=function(){var e=this.optionsObject(arguments,["param","units","convert"],t.Param.defaults);this._param=this.input=e.param,this.units=e.units,this.convert=e.convert,this.overridden=!1,this.isUndef(e.value)||(this.value=e.value)},t.extend(t.Param),t.Param.defaults={units:t.Type.Default,convert:!0,param:void 0},Object.defineProperty(t.Param.prototype,"value",{get:function(){return this._toUnits(this._param.value)},set:function(t){var e=this._fromUnits(t);this._param.value=e}}),t.Param.prototype._fromUnits=function(e){if(!this.convert&&!this.isUndef(this.convert))return e;switch(this.units){case t.Type.Time:return this.toSeconds(e);case t.Type.Frequency:return this.toFrequency(e);case t.Type.Decibels:return this.dbToGain(e);case t.Type.NormalRange:return Math.min(Math.max(e,0),1);case t.Type.AudioRange:return Math.min(Math.max(e,-1),1);case t.Type.Positive:return Math.max(e,0);default:return e}},t.Param.prototype._toUnits=function(e){if(!this.convert&&!this.isUndef(this.convert))return e;switch(this.units){case t.Type.Decibels:return this.gainToDb(e);default:return e}},t.Param.prototype._minOutput=1e-5,t.Param.prototype.setValueAtTime=function(t,e){return t=this._fromUnits(t),this._param.setValueAtTime(t,this.toSeconds(e)),this},t.Param.prototype.setRampPoint=function(t){t=this.defaultArg(t,this.now());var e=this._param.value;return this._param.setValueAtTime(e,t),this},t.Param.prototype.linearRampToValueAtTime=function(t,e){return t=this._fromUnits(t),this._param.linearRampToValueAtTime(t,this.toSeconds(e)),this},t.Param.prototype.exponentialRampToValueAtTime=function(t,e){return t=this._fromUnits(t),t=Math.max(this._minOutput,t),this._param.exponentialRampToValueAtTime(t,this.toSeconds(e)),this},t.Param.prototype.exponentialRampToValue=function(t,e){var i=this.now(),s=this.value;return this.setValueAtTime(Math.max(s,this._minOutput),i),this.exponentialRampToValueAtTime(t,i+this.toSeconds(e)),this},t.Param.prototype.linearRampToValue=function(t,e){var i=this.now();return this.setRampPoint(i),this.linearRampToValueAtTime(t,i+this.toSeconds(e)),this},t.Param.prototype.setTargetAtTime=function(t,e,i){return t=this._fromUnits(t),t=Math.max(this._minOutput,t),i=Math.max(this._minOutput,i),this._param.setTargetAtTime(t,this.toSeconds(e),i),this},t.Param.prototype.setValueCurveAtTime=function(t,e,i){for(var s=0;s<t.length;s++)t[s]=this._fromUnits(t[s]);return this._param.setValueCurveAtTime(t,this.toSeconds(e),this.toSeconds(i)),this},t.Param.prototype.cancelScheduledValues=function(t){return this._param.cancelScheduledValues(this.toSeconds(t)),this},t.Param.prototype.rampTo=function(e,i){return i=this.defaultArg(i,0),this.units===t.Type.Frequency||this.units===t.Type.BPM?this.exponentialRampToValue(e,i):this.linearRampToValue(e,i),this},t.Param.prototype.dispose=function(){return t.prototype.dispose.call(this),this._param=null,this},t.Param}),Module(function(t){return t.Gain=function(){var e=this.optionsObject(arguments,["gain","units"],t.Gain.defaults);this.input=this.output=this._gainNode=this.context.createGain(),this.gain=new t.Param({param:this._gainNode.gain,units:e.units,value:e.gain,convert:e.convert}),this._readOnly("gain")},t.extend(t.Gain),t.Gain.defaults={gain:1,convert:!0},t.Gain.prototype.dispose=function(){t.Param.prototype.dispose.call(this),this._gainNode.disconnect(),this._gainNode=null,this._writable("gain"),this.gain.dispose(),this.gain=null},t.Gain}),Module(function(t){return t.Signal=function(){var e=this.optionsObject(arguments,["value","units"],t.Signal.defaults);this.output=this._gain=this.context.createGain(),e.param=this._gain.gain,t.Param.call(this,e),this.input=this._param=this._gain.gain,t.Signal._constant.chain(this._gain)},t.extend(t.Signal,t.Param),t.Signal.defaults={value:0,units:t.Type.Default,convert:!0},t.Signal.prototype.connect=t.SignalBase.prototype.connect,t.Signal.prototype.dispose=function(){return t.Param.prototype.dispose.call(this),this._param=null,this._gain.disconnect(),this._gain=null,this},t.Signal._constant=null,t._initAudioContext(function(e){var i,s=e.createBuffer(1,128,e.sampleRate),n=s.getChannelData(0);for(i=0;i<n.length;i++)n[i]=1;t.Signal._constant=e.createBufferSource(),t.Signal._constant.channelCount=1,t.Signal._constant.channelCountMode="explicit",t.Signal._constant.buffer=s,t.Signal._constant.loop=!0,t.Signal._constant.start(0),t.Signal._constant.noGC()}),t.Signal}),Module(function(t){return t.Timeline=function(){var e=this.optionsObject(arguments,["memory"],t.Timeline.defaults);this._timeline=[],this._toRemove=[],this._iterating=!1,this.memory=e.memory},t.extend(t.Timeline),t.Timeline.defaults={memory:1/0},Object.defineProperty(t.Timeline.prototype,"length",{get:function(){return this._timeline.length}}),t.Timeline.prototype.addEvent=function(t){var e,i;if(this.isUndef(t.time))throw new Error("events must have a time attribute");return t.time=this.toSeconds(t.time),this._timeline.length?(e=this._search(t.time),this._timeline.splice(e+1,0,t)):this._timeline.push(t),this.length>this.memory&&(i=this.length-this.memory,this._timeline.splice(0,i)),this},t.Timeline.prototype.removeEvent=function(t){if(this._iterating)this._toRemove.push(t);else{var e=this._timeline.indexOf(t);-1!==e&&this._timeline.splice(e,1)}return this},t.Timeline.prototype.getEvent=function(t){t=this.toSeconds(t);var e=this._search(t);return-1!==e?this._timeline[e]:null},t.Timeline.prototype.getEventAfter=function(t){t=this.toSeconds(t);var e=this._search(t);return e+1<this._timeline.length?this._timeline[e+1]:null},t.Timeline.prototype.getEventBefore=function(t){t=this.toSeconds(t);var e=this._search(t);return e-1>=0?this._timeline[e-1]:null},t.Timeline.prototype.cancel=function(t){if(this._timeline.length>1){t=this.toSeconds(t);var e=this._search(t);this._timeline=e>=0?this._timeline.slice(0,e):[]}else 1===this._timeline.length&&this._timeline[0].time>=t&&(this._timeline=[]);return this},t.Timeline.prototype.cancelBefore=function(t){if(this._timeline.length){t=this.toSeconds(t);var e=this._search(t);e>=0&&(this._timeline=this._timeline.slice(e+1))}return this},t.Timeline.prototype._search=function(t){for(var e,i,s,n,o=0,r=this._timeline.length,a=r;a>=o&&r>o;){if(e=Math.floor(o+(a-o)/2),i=this._timeline[e],i.time===t){for(s=e;s<this._timeline.length;s++)n=this._timeline[s],n.time===t&&(e=s);return e}i.time>t?a=e-1:i.time<t&&(o=e+1)}return o-1},t.Timeline.prototype._iterate=function(t,e,i){var s,n,o;for(this._iterating=!0,e=this.defaultArg(e,0),i=this.defaultArg(i,this._timeline.length-1),s=e;i>=s;s++)t(this._timeline[s]);if(this._iterating=!1,this._toRemove.length>0){for(n=0;n<this._toRemove.length;n++)o=this._timeline.indexOf(this._toRemove[n]),-1!==o&&this._timeline.splice(o,1);this._toRemove=[]}},t.Timeline.prototype.forEach=function(t){return this._iterate(t),this},t.Timeline.prototype.forEachBefore=function(t,e){t=this.toSeconds(t);var i=this._search(t);return-1!==i&&this._iterate(e,0,i),this},t.Timeline.prototype.forEachAfter=function(t,e){t=this.toSeconds(t);var i=this._search(t);return this._iterate(e,i+1),this},t.Timeline.prototype.forEachFrom=function(t,e){t=this.toSeconds(t);for(var i=this._search(t);i>=0&&this._timeline[i].time>=t;)i--;return this._iterate(e,i+1),this},t.Timeline.prototype.forEachAtTime=function(t,e){t=this.toSeconds(t);var i=this._search(t);return-1!==i&&this._iterate(function(i){i.time===t&&e(i)},0,i),this},t.Timeline.prototype.dispose=function(){t.prototype.dispose.call(this),this._timeline=null,this._toRemove=null},t.Timeline}),Module(function(t){return t.TimelineSignal=function(){var e=this.optionsObject(arguments,["value","units"],t.Signal.defaults);t.Signal.apply(this,e),e.param=this._param,t.Param.call(this,e),this._events=new t.Timeline(10),this._initial=this._fromUnits(this._param.value)},t.extend(t.TimelineSignal,t.Param),t.TimelineSignal.Type={Linear:"linear",Exponential:"exponential",Target:"target",Set:"set"},Object.defineProperty(t.TimelineSignal.prototype,"value",{get:function(){return this._toUnits(this._param.value)},set:function(t){var e=this._fromUnits(t);this._initial=e,this._param.value=e}}),t.TimelineSignal.prototype.setValueAtTime=function(e,i){return e=this._fromUnits(e),i=this.toSeconds(i),this._events.addEvent({type:t.TimelineSignal.Type.Set,value:e,time:i}),this._param.setValueAtTime(e,i),this},t.TimelineSignal.prototype.linearRampToValueAtTime=function(e,i){return e=this._fromUnits(e),i=this.toSeconds(i),this._events.addEvent({type:t.TimelineSignal.Type.Linear,value:e,time:i}),this._param.linearRampToValueAtTime(e,i),this},t.TimelineSignal.prototype.exponentialRampToValueAtTime=function(e,i){return e=this._fromUnits(e),e=Math.max(this._minOutput,e),i=this.toSeconds(i),this._events.addEvent({type:t.TimelineSignal.Type.Exponential,value:e,time:i}),this._param.exponentialRampToValueAtTime(e,i),this},t.TimelineSignal.prototype.setTargetAtTime=function(e,i,s){return e=this._fromUnits(e),e=Math.max(this._minOutput,e),s=Math.max(this._minOutput,s),i=this.toSeconds(i),this._events.addEvent({type:t.TimelineSignal.Type.Target,value:e,time:i,constant:s}),this._param.setTargetAtTime(e,i,s),this},t.TimelineSignal.prototype.cancelScheduledValues=function(t){return this._events.cancel(t),this._param.cancelScheduledValues(this.toSeconds(t)),this},t.TimelineSignal.prototype.setRampPoint=function(e){var i,s;return e=this.toSeconds(e),i=this.getValueAtTime(e),s=this._searchAfter(e),s&&(this.cancelScheduledValues(e),s.type===t.TimelineSignal.Type.Linear?this.linearRampToValueAtTime(i,e):s.type===t.TimelineSignal.Type.Exponential&&this.exponentialRampToValueAtTime(i,e)),this.setValueAtTime(i,e),this},t.TimelineSignal.prototype.linearRampToValueBetween=function(t,e,i){return this.setRampPoint(e),this.linearRampToValueAtTime(t,i),this},t.TimelineSignal.prototype.exponentialRampToValueBetween=function(t,e,i){return this.setRampPoint(e),this.exponentialRampToValueAtTime(t,i),this},t.TimelineSignal.prototype._searchBefore=function(t){return this._events.getEvent(t)},t.TimelineSignal.prototype._searchAfter=function(t){return this._events.getEventAfter(t)},t.TimelineSignal.prototype.getValueAtTime=function(e){var i,s,n=this._searchAfter(e),o=this._searchBefore(e),r=this._initial;return null===o?r=this._initial:o.type===t.TimelineSignal.Type.Target?(i=this._events.getEventBefore(o.time),s=null===i?this._initial:i.value,r=this._exponentialApproach(o.time,s,o.value,o.constant,e)):r=null===n?o.value:n.type===t.TimelineSignal.Type.Linear?this._linearInterpolate(o.time,o.value,n.time,n.value,e):n.type===t.TimelineSignal.Type.Exponential?this._exponentialInterpolate(o.time,o.value,n.time,n.value,e):o.value,r},t.TimelineSignal.prototype.connect=t.SignalBase.prototype.connect,t.TimelineSignal.prototype._exponentialApproach=function(t,e,i,s,n){return i+(e-i)*Math.exp(-(n-t)/s)},t.TimelineSignal.prototype._linearInterpolate=function(t,e,i,s,n){return e+(s-e)*((n-t)/(i-t))},t.TimelineSignal.prototype._exponentialInterpolate=function(t,e,i,s,n){return e=Math.max(this._minOutput,e),e*Math.pow(s/e,(n-t)/(i-t))},t.TimelineSignal.prototype.dispose=function(){t.Signal.prototype.dispose.call(this),t.Param.prototype.dispose.call(this),this._events.dispose(),this._events=null},t.TimelineSignal}),Module(function(t){return t.Pow=function(e){this._exp=this.defaultArg(e,1),this._expScaler=this.input=this.output=new t.WaveShaper(this._expFunc(this._exp),8192)},t.extend(t.Pow,t.SignalBase),Object.defineProperty(t.Pow.prototype,"value",{get:function(){return this._exp},set:function(t){this._exp=t,this._expScaler.setMap(this._expFunc(this._exp))}}),t.Pow.prototype._expFunc=function(t){return function(e){return Math.pow(Math.abs(e),t)}},t.Pow.prototype.dispose=function(){return t.prototype.dispose.call(this),this._expScaler.dispose(),this._expScaler=null,this},t.Pow}),Module(function(t){return t.Envelope=function(){var e=this.optionsObject(arguments,["attack","decay","sustain","release"],t.Envelope.defaults);this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this._attackCurve=t.Envelope.Type.Linear,this._releaseCurve=t.Envelope.Type.Exponential,this._minOutput=1e-5,this._sig=this.output=new t.TimelineSignal,this._sig.setValueAtTime(this._minOutput,0),this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve},t.extend(t.Envelope),t.Envelope.defaults={attack:.01,decay:.1,sustain:.5,release:1,attackCurve:"linear",releaseCurve:"exponential"},t.Envelope.prototype._timeMult=.25,Object.defineProperty(t.Envelope.prototype,"value",{get:function(){return this._sig.value}}),Object.defineProperty(t.Envelope.prototype,"attackCurve",{get:function(){return this._attackCurve},set:function(e){if(e!==t.Envelope.Type.Linear&&e!==t.Envelope.Type.Exponential)throw Error('attackCurve must be either "linear" or "exponential". Invalid type: ',e);this._attackCurve=e}}),Object.defineProperty(t.Envelope.prototype,"releaseCurve",{get:function(){return this._releaseCurve},set:function(e){if(e!==t.Envelope.Type.Linear&&e!==t.Envelope.Type.Exponential)throw Error('releaseCurve must be either "linear" or "exponential". Invalid type: ',e);this._releaseCurve=e}}),t.Envelope.prototype.triggerAttack=function(e,i){var s,n,o=this.now()+this.blockTime;return e=this.toSeconds(e,o),s=this.toSeconds(this.attack)+e,n=this.toSeconds(this.decay),i=this.defaultArg(i,1),this._attackCurve===t.Envelope.Type.Linear?this._sig.linearRampToValueBetween(i,e,s):this._sig.exponentialRampToValueBetween(i,e,s),this._sig.setValueAtTime(i,s),this._sig.exponentialRampToValueAtTime(this.sustain*i,s+n),this},t.Envelope.prototype.triggerRelease=function(e){var i,s=this.now()+this.blockTime;return e=this.toSeconds(e,s),i=this.toSeconds(this.release),this._releaseCurve===t.Envelope.Type.Linear?this._sig.linearRampToValueBetween(this._minOutput,e,e+i):this._sig.exponentialRampToValueBetween(this._minOutput,e,i+e),this},t.Envelope.prototype.triggerAttackRelease=function(t,e,i){return e=this.toSeconds(e),this.triggerAttack(e,i),this.triggerRelease(e+this.toSeconds(t)),this},t.Envelope.prototype.connect=t.Signal.prototype.connect,t.Envelope.prototype.dispose=function(){return t.prototype.dispose.call(this),this._sig.dispose(),this._sig=null,this},t.Envelope.Phase={Attack:"attack",Decay:"decay",Sustain:"sustain",Release:"release",Standby:"standby"},t.Envelope.Type={Linear:"linear",Exponential:"exponential"},t.Envelope}),Module(function(t){return t.AmplitudeEnvelope=function(){t.Envelope.apply(this,arguments),this.input=this.output=new t.Gain,this._sig.connect(this.output.gain)},t.extend(t.AmplitudeEnvelope,t.Envelope),t.AmplitudeEnvelope.prototype.dispose=function(){return this.input.dispose(),this.input=null,t.Envelope.prototype.dispose.call(this),this},t.AmplitudeEnvelope}),Module(function(t){return t.Analyser=function(){var e=this.optionsObject(arguments,["size","type"],t.Analyser.defaults);this._analyser=this.input=this.context.createAnalyser(),this._type=e.type,this._returnType=e.returnType,this._buffer=null,this.size=e.size,this.type=e.type,this.returnType=e.returnType,this.minDecibels=e.minDecibels,this.maxDecibels=e.maxDecibels},t.extend(t.Analyser),t.Analyser.defaults={size:2048,returnType:"byte",type:"fft",smoothing:.8,maxDecibels:-30,minDecibels:-100},t.Analyser.Type={Waveform:"waveform",FFT:"fft"},t.Analyser.ReturnType={Byte:"byte",Float:"float"},t.Analyser.prototype.analyse=function(){return this._type===t.Analyser.Type.FFT?this._returnType===t.Analyser.ReturnType.Byte?this._analyser.getByteFrequencyData(this._buffer):this._analyser.getFloatFrequencyData(this._buffer):this._type===t.Analyser.Type.Waveform&&(this._returnType===t.Analyser.ReturnType.Byte?this._analyser.getByteTimeDomainData(this._buffer):this._analyser.getFloatTimeDomainData(this._buffer)),this._buffer},Object.defineProperty(t.Analyser.prototype,"size",{get:function(){return this._analyser.frequencyBinCount},set:function(t){this._analyser.fftSize=2*t,this.type=this._type}}),Object.defineProperty(t.Analyser.prototype,"returnType",{get:function(){return this._returnType},set:function(e){if(e===t.Analyser.ReturnType.Byte)this._buffer=new Uint8Array(this._analyser.frequencyBinCount);else{if(e!==t.Analyser.ReturnType.Float)throw new Error("Invalid Return Type: "+e);this._buffer=new Float32Array(this._analyser.frequencyBinCount)}this._returnType=e}}),Object.defineProperty(t.Analyser.prototype,"type",{get:function(){
return this._type},set:function(e){if(e!==t.Analyser.Type.Waveform&&e!==t.Analyser.Type.FFT)throw new Error("Invalid Type: "+e);this._type=e}}),Object.defineProperty(t.Analyser.prototype,"smoothing",{get:function(){return this._analyser.smoothingTimeConstant},set:function(t){this._analyser.smoothingTimeConstant=t}}),Object.defineProperty(t.Analyser.prototype,"minDecibels",{get:function(){return this._analyser.minDecibels},set:function(t){this._analyser.minDecibels=t}}),Object.defineProperty(t.Analyser.prototype,"maxDecibels",{get:function(){return this._analyser.maxDecibels},set:function(t){this._analyser.maxDecibels=t}}),t.Analyser.prototype.dispose=function(){t.prototype.dispose.call(this),this._analyser.disconnect(),this._analyser=null,this._buffer=null},t.Analyser}),Module(function(t){return t.Compressor=function(){var e=this.optionsObject(arguments,["threshold","ratio"],t.Compressor.defaults);this._compressor=this.input=this.output=this.context.createDynamicsCompressor(),this.threshold=this._compressor.threshold,this.attack=new t.Param(this._compressor.attack,t.Type.Time),this.release=new t.Param(this._compressor.release,t.Type.Time),this.knee=this._compressor.knee,this.ratio=this._compressor.ratio,this._readOnly(["knee","release","attack","ratio","threshold"]),this.set(e)},t.extend(t.Compressor),t.Compressor.defaults={ratio:12,threshold:-24,release:.25,attack:.003,knee:30},t.Compressor.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable(["knee","release","attack","ratio","threshold"]),this._compressor.disconnect(),this._compressor=null,this.attack.dispose(),this.attack=null,this.release.dispose(),this.release=null,this.threshold=null,this.ratio=null,this.knee=null,this},t.Compressor}),Module(function(t){return t.Add=function(e){t.call(this,2,0),this._sum=this.input[0]=this.input[1]=this.output=this.context.createGain(),this._param=this.input[1]=new t.Signal(e),this._param.connect(this._sum)},t.extend(t.Add,t.Signal),t.Add.prototype.dispose=function(){return t.prototype.dispose.call(this),this._sum.disconnect(),this._sum=null,this._param.dispose(),this._param=null,this},t.Add}),Module(function(t){return t.Multiply=function(e){t.call(this,2,0),this._mult=this.input[0]=this.output=this.context.createGain(),this._param=this.input[1]=this.output.gain,this._param.value=this.defaultArg(e,0)},t.extend(t.Multiply,t.Signal),t.Multiply.prototype.dispose=function(){return t.prototype.dispose.call(this),this._mult.disconnect(),this._mult=null,this._param=null,this},t.Multiply}),Module(function(t){return t.Negate=function(){this._multiply=this.input=this.output=new t.Multiply(-1)},t.extend(t.Negate,t.SignalBase),t.Negate.prototype.dispose=function(){return t.prototype.dispose.call(this),this._multiply.dispose(),this._multiply=null,this},t.Negate}),Module(function(t){return t.Subtract=function(e){t.call(this,2,0),this._sum=this.input[0]=this.output=this.context.createGain(),this._neg=new t.Negate,this._param=this.input[1]=new t.Signal(e),this._param.chain(this._neg,this._sum)},t.extend(t.Subtract,t.Signal),t.Subtract.prototype.dispose=function(){return t.prototype.dispose.call(this),this._neg.dispose(),this._neg=null,this._sum.disconnect(),this._sum=null,this._param.dispose(),this._param=null,this},t.Subtract}),Module(function(t){return t.GreaterThanZero=function(){this._thresh=this.output=new t.WaveShaper(function(t){return 0>=t?0:1}),this._scale=this.input=new t.Multiply(1e4),this._scale.connect(this._thresh)},t.extend(t.GreaterThanZero,t.SignalBase),t.GreaterThanZero.prototype.dispose=function(){return t.prototype.dispose.call(this),this._scale.dispose(),this._scale=null,this._thresh.dispose(),this._thresh=null,this},t.GreaterThanZero}),Module(function(t){return t.EqualZero=function(){this._scale=this.input=new t.Multiply(1e4),this._thresh=new t.WaveShaper(function(t){return 0===t?1:0},128),this._gtz=this.output=new t.GreaterThanZero,this._scale.chain(this._thresh,this._gtz)},t.extend(t.EqualZero,t.SignalBase),t.EqualZero.prototype.dispose=function(){return t.prototype.dispose.call(this),this._gtz.dispose(),this._gtz=null,this._scale.dispose(),this._scale=null,this._thresh.dispose(),this._thresh=null,this},t.EqualZero}),Module(function(t){return t.Equal=function(e){t.call(this,2,0),this._sub=this.input[0]=new t.Subtract(e),this._equals=this.output=new t.EqualZero,this._sub.connect(this._equals),this.input[1]=this._sub.input[1]},t.extend(t.Equal,t.SignalBase),Object.defineProperty(t.Equal.prototype,"value",{get:function(){return this._sub.value},set:function(t){this._sub.value=t}}),t.Equal.prototype.dispose=function(){return t.prototype.dispose.call(this),this._equals.dispose(),this._equals=null,this._sub.dispose(),this._sub=null,this},t.Equal}),Module(function(t){t.Select=function(i){var s,n;for(i=this.defaultArg(i,2),t.call(this,i,1),this.gate=new t.Signal(0),this._readOnly("gate"),s=0;i>s;s++)n=new e(s),this.input[s]=n,this.gate.connect(n.selecter),n.connect(this.output)},t.extend(t.Select,t.SignalBase),t.Select.prototype.select=function(t,e){return t=Math.floor(t),this.gate.setValueAtTime(t,this.toSeconds(e)),this},t.Select.prototype.dispose=function(){this._writable("gate"),this.gate.dispose(),this.gate=null;for(var e=0;e<this.input.length;e++)this.input[e].dispose(),this.input[e]=null;return t.prototype.dispose.call(this),this};var e=function(e){this.selecter=new t.Equal(e),this.gate=this.input=this.output=this.context.createGain(),this.selecter.connect(this.gate.gain)};return t.extend(e),e.prototype.dispose=function(){t.prototype.dispose.call(this),this.selecter.dispose(),this.gate.disconnect(),this.selecter=null,this.gate=null},t.Select}),Module(function(t){return t.IfThenElse=function(){t.call(this,3,0),this._selector=this.output=new t.Select(2),this["if"]=this.input[0]=this._selector.gate,this.then=this.input[1]=this._selector.input[1],this["else"]=this.input[2]=this._selector.input[0]},t.extend(t.IfThenElse,t.SignalBase),t.IfThenElse.prototype.dispose=function(){return t.prototype.dispose.call(this),this._selector.dispose(),this._selector=null,this["if"]=null,this.then=null,this["else"]=null,this},t.IfThenElse}),Module(function(t){return t.OR=function(e){e=this.defaultArg(e,2),t.call(this,e,0),this._sum=this.context.createGain(),this._gtz=this.output=new t.GreaterThanZero;for(var i=0;e>i;i++)this.input[i]=this._sum;this._sum.connect(this._gtz)},t.extend(t.OR,t.SignalBase),t.OR.prototype.dispose=function(){return t.prototype.dispose.call(this),this._gtz.dispose(),this._gtz=null,this._sum.disconnect(),this._sum=null,this},t.OR}),Module(function(t){return t.AND=function(e){e=this.defaultArg(e,2),t.call(this,e,0),this._equals=this.output=new t.Equal(e);for(var i=0;e>i;i++)this.input[i]=this._equals},t.extend(t.AND,t.SignalBase),t.AND.prototype.dispose=function(){return t.prototype.dispose.call(this),this._equals.dispose(),this._equals=null,this},t.AND}),Module(function(t){return t.NOT=t.EqualZero,t.NOT}),Module(function(t){return t.GreaterThan=function(e){t.call(this,2,0),this._param=this.input[0]=new t.Subtract(e),this.input[1]=this._param.input[1],this._gtz=this.output=new t.GreaterThanZero,this._param.connect(this._gtz)},t.extend(t.GreaterThan,t.Signal),t.GreaterThan.prototype.dispose=function(){return t.prototype.dispose.call(this),this._param.dispose(),this._param=null,this._gtz.dispose(),this._gtz=null,this},t.GreaterThan}),Module(function(t){return t.LessThan=function(e){t.call(this,2,0),this._neg=this.input[0]=new t.Negate,this._gt=this.output=new t.GreaterThan,this._rhNeg=new t.Negate,this._param=this.input[1]=new t.Signal(e),this._neg.connect(this._gt),this._param.connect(this._rhNeg),this._rhNeg.connect(this._gt,0,1)},t.extend(t.LessThan,t.Signal),t.LessThan.prototype.dispose=function(){return t.prototype.dispose.call(this),this._neg.dispose(),this._neg=null,this._gt.dispose(),this._gt=null,this._rhNeg.dispose(),this._rhNeg=null,this._param.dispose(),this._param=null,this},t.LessThan}),Module(function(t){return t.Abs=function(){t.call(this,1,0),this._ltz=new t.LessThan(0),this._switch=this.output=new t.Select(2),this._negate=new t.Negate,this.input.connect(this._switch,0,0),this.input.connect(this._negate),this._negate.connect(this._switch,0,1),this.input.chain(this._ltz,this._switch.gate)},t.extend(t.Abs,t.SignalBase),t.Abs.prototype.dispose=function(){return t.prototype.dispose.call(this),this._switch.dispose(),this._switch=null,this._ltz.dispose(),this._ltz=null,this._negate.dispose(),this._negate=null,this},t.Abs}),Module(function(t){return t.Max=function(e){t.call(this,2,0),this.input[0]=this.context.createGain(),this._param=this.input[1]=new t.Signal(e),this._ifThenElse=this.output=new t.IfThenElse,this._gt=new t.GreaterThan,this.input[0].chain(this._gt,this._ifThenElse["if"]),this.input[0].connect(this._ifThenElse.then),this._param.connect(this._ifThenElse["else"]),this._param.connect(this._gt,0,1)},t.extend(t.Max,t.Signal),t.Max.prototype.dispose=function(){return t.prototype.dispose.call(this),this._param.dispose(),this._ifThenElse.dispose(),this._gt.dispose(),this._param=null,this._ifThenElse=null,this._gt=null,this},t.Max}),Module(function(t){return t.Min=function(e){t.call(this,2,0),this.input[0]=this.context.createGain(),this._ifThenElse=this.output=new t.IfThenElse,this._lt=new t.LessThan,this._param=this.input[1]=new t.Signal(e),this.input[0].chain(this._lt,this._ifThenElse["if"]),this.input[0].connect(this._ifThenElse.then),this._param.connect(this._ifThenElse["else"]),this._param.connect(this._lt,0,1)},t.extend(t.Min,t.Signal),t.Min.prototype.dispose=function(){return t.prototype.dispose.call(this),this._param.dispose(),this._ifThenElse.dispose(),this._lt.dispose(),this._param=null,this._ifThenElse=null,this._lt=null,this},t.Min}),Module(function(t){return t.Modulo=function(e){t.call(this,1,1),this._shaper=new t.WaveShaper(Math.pow(2,16)),this._multiply=new t.Multiply,this._subtract=this.output=new t.Subtract,this._modSignal=new t.Signal(e),this.input.fan(this._shaper,this._subtract),this._modSignal.connect(this._multiply,0,0),this._shaper.connect(this._multiply,0,1),this._multiply.connect(this._subtract,0,1),this._setWaveShaper(e)},t.extend(t.Modulo,t.SignalBase),t.Modulo.prototype._setWaveShaper=function(t){this._shaper.setMap(function(e){var i=Math.floor((e+1e-4)/t);return i})},Object.defineProperty(t.Modulo.prototype,"value",{get:function(){return this._modSignal.value},set:function(t){this._modSignal.value=t,this._setWaveShaper(t)}}),t.Modulo.prototype.dispose=function(){return t.prototype.dispose.call(this),this._shaper.dispose(),this._shaper=null,this._multiply.dispose(),this._multiply=null,this._subtract.dispose(),this._subtract=null,this._modSignal.dispose(),this._modSignal=null,this},t.Modulo}),Module(function(t){return t.AudioToGain=function(){this._norm=this.input=this.output=new t.WaveShaper(function(t){return(t+1)/2})},t.extend(t.AudioToGain,t.SignalBase),t.AudioToGain.prototype.dispose=function(){return t.prototype.dispose.call(this),this._norm.dispose(),this._norm=null,this},t.AudioToGain}),Module(function(t){function e(t,e,i){var s=new t;return i._eval(e[0]).connect(s,0,0),i._eval(e[1]).connect(s,0,1),s}function i(t,e,i){var s=new t;return i._eval(e[0]).connect(s,0,0),s}function s(t){return t?parseFloat(t):void 0}function n(t){return t&&t.args?parseFloat(t.args):void 0}return t.Expr=function(){var t,e,i,s=this._replacements(Array.prototype.slice.call(arguments)),n=this._parseInputs(s);for(this._nodes=[],this.input=new Array(n),t=0;n>t;t++)this.input[t]=this.context.createGain();e=this._parseTree(s);try{i=this._eval(e)}catch(o){throw this._disposeNodes(),new Error("Could evaluate expression: "+s)}this.output=i},t.extend(t.Expr,t.SignalBase),t.Expr._Expressions={value:{signal:{regexp:/^\d+\.\d+|^\d+/,method:function(e){var i=new t.Signal(s(e));return i}},input:{regexp:/^\$\d/,method:function(t,e){return e.input[s(t.substr(1))]}}},glue:{"(":{regexp:/^\(/},")":{regexp:/^\)/},",":{regexp:/^,/}},func:{abs:{regexp:/^abs/,method:i.bind(this,t.Abs)},min:{regexp:/^min/,method:e.bind(this,t.Min)},max:{regexp:/^max/,method:e.bind(this,t.Max)},"if":{regexp:/^if/,method:function(e,i){var s=new t.IfThenElse;return i._eval(e[0]).connect(s["if"]),i._eval(e[1]).connect(s.then),i._eval(e[2]).connect(s["else"]),s}},gt0:{regexp:/^gt0/,method:i.bind(this,t.GreaterThanZero)},eq0:{regexp:/^eq0/,method:i.bind(this,t.EqualZero)},mod:{regexp:/^mod/,method:function(e,i){var s=n(e[1]),o=new t.Modulo(s);return i._eval(e[0]).connect(o),o}},pow:{regexp:/^pow/,method:function(e,i){var s=n(e[1]),o=new t.Pow(s);return i._eval(e[0]).connect(o),o}},a2g:{regexp:/^a2g/,method:function(e,i){var s=new t.AudioToGain;return i._eval(e[0]).connect(s),s}}},binary:{"+":{regexp:/^\+/,precedence:1,method:e.bind(this,t.Add)},"-":{regexp:/^\-/,precedence:1,method:function(s,n){return 1===s.length?i(t.Negate,s,n):e(t.Subtract,s,n)}},"*":{regexp:/^\*/,precedence:0,method:e.bind(this,t.Multiply)},">":{regexp:/^\>/,precedence:2,method:e.bind(this,t.GreaterThan)},"<":{regexp:/^</,precedence:2,method:e.bind(this,t.LessThan)},"==":{regexp:/^==/,precedence:3,method:e.bind(this,t.Equal)},"&&":{regexp:/^&&/,precedence:4,method:e.bind(this,t.AND)},"||":{regexp:/^\|\|/,precedence:5,method:e.bind(this,t.OR)}},unary:{"-":{regexp:/^\-/,method:i.bind(this,t.Negate)},"!":{regexp:/^\!/,method:i.bind(this,t.NOT)}}},t.Expr.prototype._parseInputs=function(t){var e,i,s=t.match(/\$\d/g),n=0;if(null!==s)for(e=0;e<s.length;e++)i=parseInt(s[e].substr(1))+1,n=Math.max(n,i);return n},t.Expr.prototype._replacements=function(t){var e,i=t.shift();for(e=0;e<t.length;e++)i=i.replace(/\%/i,t[e]);return i},t.Expr.prototype._tokenize=function(e){function i(e){var i,s,n,o,r,a;for(i in t.Expr._Expressions){s=t.Expr._Expressions[i];for(n in s)if(o=s[n],r=o.regexp,a=e.match(r),null!==a)return{type:i,value:a[0],method:o.method}}throw new SyntaxError("Unexpected token "+e)}for(var s,n=-1,o=[];e.length>0;)e=e.trim(),s=i(e),o.push(s),e=e.substr(s.value.length);return{next:function(){return o[++n]},peek:function(){return o[n+1]}}},t.Expr.prototype._parseTree=function(e){function i(t,e){return!u(t)&&"glue"===t.type&&t.value===e}function s(e,i,s){var n,o,r=!1,a=t.Expr._Expressions[i];if(!u(e))for(n in a)if(o=a[n],o.regexp.test(e.value)){if(u(s))return!0;if(o.precedence===s)return!0}return r}function n(t){var e,i;for(u(t)&&(t=5),e=0>t?o():n(t-1),i=h.peek();s(i,"binary",t);)i=h.next(),e={operator:i.value,method:i.method,args:[e,n(t)]},i=h.peek();return e}function o(){var t,e;return t=h.peek(),s(t,"unary")?(t=h.next(),e=o(),{operator:t.value,method:t.method,args:[e]}):r()}function r(){var t,e;if(t=h.peek(),u(t))throw new SyntaxError("Unexpected termination of expression");if("func"===t.type)return t=h.next(),a(t);if("value"===t.type)return t=h.next(),{method:t.method,args:t.value};if(i(t,"(")){if(h.next(),e=n(),t=h.next(),!i(t,")"))throw new SyntaxError("Expected )");return e}throw new SyntaxError("Parse error, cannot process token "+t.value)}function a(t){var e,s=[];if(e=h.next(),!i(e,"("))throw new SyntaxError('Expected ( in a function call "'+t.value+'"');if(e=h.peek(),i(e,")")||(s=l()),e=h.next(),!i(e,")"))throw new SyntaxError('Expected ) in a function call "'+t.value+'"');return{method:t.method,args:s,name:name}}function l(){for(var t,e,s=[];;){if(e=n(),u(e))break;if(s.push(e),t=h.peek(),!i(t,","))break;h.next()}return s}var h=this._tokenize(e),u=this.isUndef.bind(this);return n()},t.Expr.prototype._eval=function(t){if(!this.isUndef(t)){var e=t.method(t.args,this);return this._nodes.push(e),e}},t.Expr.prototype._disposeNodes=function(){var t,e;for(t=0;t<this._nodes.length;t++)e=this._nodes[t],this.isFunction(e.dispose)?e.dispose():this.isFunction(e.disconnect)&&e.disconnect(),e=null,this._nodes[t]=null;this._nodes=null},t.Expr.prototype.dispose=function(){t.prototype.dispose.call(this),this._disposeNodes()},t.Expr}),Module(function(t){return t.EqualPowerGain=function(){this._eqPower=this.input=this.output=new t.WaveShaper(function(t){return Math.abs(t)<.001?0:this.equalPowerScale(t)}.bind(this),4096)},t.extend(t.EqualPowerGain,t.SignalBase),t.EqualPowerGain.prototype.dispose=function(){return t.prototype.dispose.call(this),this._eqPower.dispose(),this._eqPower=null,this},t.EqualPowerGain}),Module(function(t){return t.CrossFade=function(e){t.call(this,2,1),this.a=this.input[0]=this.context.createGain(),this.b=this.input[1]=this.context.createGain(),this.fade=new t.Signal(this.defaultArg(e,.5),t.Type.NormalRange),this._equalPowerA=new t.EqualPowerGain,this._equalPowerB=new t.EqualPowerGain,this._invert=new t.Expr("1 - $0"),this.a.connect(this.output),this.b.connect(this.output),this.fade.chain(this._equalPowerB,this.b.gain),this.fade.chain(this._invert,this._equalPowerA,this.a.gain),this._readOnly("fade")},t.extend(t.CrossFade),t.CrossFade.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable("fade"),this._equalPowerA.dispose(),this._equalPowerA=null,this._equalPowerB.dispose(),this._equalPowerB=null,this.fade.dispose(),this.fade=null,this._invert.dispose(),this._invert=null,this.a.disconnect(),this.a=null,this.b.disconnect(),this.b=null,this},t.CrossFade}),Module(function(t){return t.Filter=function(){t.call(this);var e=this.optionsObject(arguments,["frequency","type","rolloff"],t.Filter.defaults);this._filters=[],this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.detune=new t.Signal(0,t.Type.Cents),this.gain=new t.Signal({value:e.gain,convert:!1}),this.Q=new t.Signal(e.Q),this._type=e.type,this._rolloff=e.rolloff,this.rolloff=e.rolloff,this._readOnly(["detune","frequency","gain","Q"])},t.extend(t.Filter),t.Filter.defaults={type:"lowpass",frequency:350,rolloff:-12,Q:1,gain:0},Object.defineProperty(t.Filter.prototype,"type",{get:function(){return this._type},set:function(t){var e,i=["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"];if(-1===i.indexOf(t))throw new Error("Tone.Filter does not have filter type "+t);for(this._type=t,e=0;e<this._filters.length;e++)this._filters[e].type=t}}),Object.defineProperty(t.Filter.prototype,"rolloff",{get:function(){return this._rolloff},set:function(t){var e,i,s,n,o,r;if(t=parseInt(t,10),e=[-12,-24,-48,-96],i=e.indexOf(t),-1===i)throw new Error("Filter rolloff can only be -12, -24, -48 or -96");for(i+=1,this._rolloff=t,this.input.disconnect(),s=0;s<this._filters.length;s++)this._filters[s].disconnect(),this._filters[s]=null;for(this._filters=new Array(i),n=0;i>n;n++)o=this.context.createBiquadFilter(),o.type=this._type,this.frequency.connect(o.frequency),this.detune.connect(o.detune),this.Q.connect(o.Q),this.gain.connect(o.gain),this._filters[n]=o;r=[this.input].concat(this._filters).concat([this.output]),this.connectSeries.apply(this,r)}}),t.Filter.prototype.dispose=function(){t.prototype.dispose.call(this);for(var e=0;e<this._filters.length;e++)this._filters[e].disconnect(),this._filters[e]=null;return this._filters=null,this._writable(["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.frequency=null,this.Q=null,this.detune.dispose(),this.detune=null,this.gain.dispose(),this.gain=null,this},t.Filter}),Module(function(t){return t.MultibandSplit=function(){var e=this.optionsObject(arguments,["lowFrequency","highFrequency"],t.MultibandSplit.defaults);this.input=this.context.createGain(),this.output=new Array(3),this.low=this.output[0]=new t.Filter(0,"lowpass"),this._lowMidFilter=new t.Filter(0,"highpass"),this.mid=this.output[1]=new t.Filter(0,"lowpass"),this.high=this.output[2]=new t.Filter(0,"highpass"),this.lowFrequency=new t.Signal(e.lowFrequency,t.Type.Frequency),this.highFrequency=new t.Signal(e.highFrequency,t.Type.Frequency),this.Q=new t.Signal(e.Q),this.input.fan(this.low,this.high),this.input.chain(this._lowMidFilter,this.mid),this.lowFrequency.connect(this.low.frequency),this.lowFrequency.connect(this._lowMidFilter.frequency),this.highFrequency.connect(this.mid.frequency),this.highFrequency.connect(this.high.frequency),this.Q.connect(this.low.Q),this.Q.connect(this._lowMidFilter.Q),this.Q.connect(this.mid.Q),this.Q.connect(this.high.Q),this._readOnly(["high","mid","low","highFrequency","lowFrequency"])},t.extend(t.MultibandSplit),t.MultibandSplit.defaults={lowFrequency:400,highFrequency:2500,Q:1},t.MultibandSplit.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable(["high","mid","low","highFrequency","lowFrequency"]),this.low.dispose(),this.low=null,this._lowMidFilter.dispose(),this._lowMidFilter=null,this.mid.dispose(),this.mid=null,this.high.dispose(),this.high=null,this.lowFrequency.dispose(),this.lowFrequency=null,this.highFrequency.dispose(),this.highFrequency=null,this.Q.dispose(),this.Q=null,this},t.MultibandSplit}),Module(function(t){return t.EQ3=function(){var e=this.optionsObject(arguments,["low","mid","high"],t.EQ3.defaults);this.output=this.context.createGain(),this._multibandSplit=this.input=new t.MultibandSplit({lowFrequency:e.lowFrequency,highFrequency:e.highFrequency}),this._lowGain=new t.Gain(e.low,t.Type.Decibels),this._midGain=new t.Gain(e.mid,t.Type.Decibels),this._highGain=new t.Gain(e.high,t.Type.Decibels),this.low=this._lowGain.gain,this.mid=this._midGain.gain,this.high=this._highGain.gain,this.Q=this._multibandSplit.Q,this.lowFrequency=this._multibandSplit.lowFrequency,this.highFrequency=this._multibandSplit.highFrequency,this._multibandSplit.low.chain(this._lowGain,this.output),this._multibandSplit.mid.chain(this._midGain,this.output),this._multibandSplit.high.chain(this._highGain,this.output),this._readOnly(["low","mid","high","lowFrequency","highFrequency"])},t.extend(t.EQ3),t.EQ3.defaults={low:0,mid:0,high:0,lowFrequency:400,highFrequency:2500},t.EQ3.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable(["low","mid","high","lowFrequency","highFrequency"]),this._multibandSplit.dispose(),this._multibandSplit=null,this.lowFrequency=null,this.highFrequency=null,this._lowGain.dispose(),this._lowGain=null,this._midGain.dispose(),this._midGain=null,this._highGain.dispose(),this._highGain=null,this.low=null,this.mid=null,this.high=null,this.Q=null,this},t.EQ3}),Module(function(t){return t.Scale=function(e,i){this._outputMin=this.defaultArg(e,0),this._outputMax=this.defaultArg(i,1),this._scale=this.input=new t.Multiply(1),this._add=this.output=new t.Add(0),this._scale.connect(this._add),this._setRange()},t.extend(t.Scale,t.SignalBase),Object.defineProperty(t.Scale.prototype,"min",{get:function(){return this._outputMin},set:function(t){this._outputMin=t,this._setRange()}}),Object.defineProperty(t.Scale.prototype,"max",{get:function(){return this._outputMax},set:function(t){this._outputMax=t,this._setRange()}}),t.Scale.prototype._setRange=function(){this._add.value=this._outputMin,this._scale.value=this._outputMax-this._outputMin},t.Scale.prototype.dispose=function(){return t.prototype.dispose.call(this),this._add.dispose(),this._add=null,this._scale.dispose(),this._scale=null,this},t.Scale}),Module(function(t){return t.ScaleExp=function(e,i,s){this._scale=this.output=new t.Scale(e,i),this._exp=this.input=new t.Pow(this.defaultArg(s,2)),this._exp.connect(this._scale)},t.extend(t.ScaleExp,t.SignalBase),Object.defineProperty(t.ScaleExp.prototype,"exponent",{get:function(){return this._exp.value},set:function(t){this._exp.value=t}}),Object.defineProperty(t.ScaleExp.prototype,"min",{get:function(){return this._scale.min},set:function(t){this._scale.min=t}}),Object.defineProperty(t.ScaleExp.prototype,"max",{get:function(){return this._scale.max},set:function(t){this._scale.max=t}}),t.ScaleExp.prototype.dispose=function(){return t.prototype.dispose.call(this),this._scale.dispose(),this._scale=null,this._exp.dispose(),this._exp=null,this},t.ScaleExp}),Module(function(t){return t.FeedbackCombFilter=function(){t.call(this);var e=this.optionsObject(arguments,["delayTime","resonance"],t.FeedbackCombFilter.defaults);this._delay=this.input=this.output=this.context.createDelay(1),this.delayTime=new t.Param({param:this._delay.delayTime,value:e.delayTime,units:t.Type.Time}),this._feedback=this.context.createGain(),this.resonance=new t.Param({param:this._feedback.gain,value:e.resonance,units:t.Type.NormalRange}),this._delay.chain(this._feedback,this._delay),this._readOnly(["resonance","delayTime"])},t.extend(t.FeedbackCombFilter),t.FeedbackCombFilter.defaults={delayTime:.1,resonance:.5},t.FeedbackCombFilter.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable(["resonance","delayTime"]),this._delay.disconnect(),this._delay=null,this.delayTime.dispose(),this.delayTime=null,this.resonance.dispose(),this.resonance=null,this._feedback.disconnect(),this._feedback=null,this},t.FeedbackCombFilter}),Module(function(t){return t.Follower=function(){t.call(this);var e=this.optionsObject(arguments,["attack","release"],t.Follower.defaults);this._abs=new t.Abs,this._filter=this.context.createBiquadFilter(),this._filter.type="lowpass",this._filter.frequency.value=0,this._filter.Q.value=-100,this._frequencyValues=new t.WaveShaper,this._sub=new t.Subtract,this._delay=this.context.createDelay(),this._delay.delayTime.value=this.blockTime,this._mult=new t.Multiply(1e4),this._attack=e.attack,this._release=e.release,this.input.chain(this._abs,this._filter,this.output),this._abs.connect(this._sub,0,1),this._filter.chain(this._delay,this._sub),this._sub.chain(this._mult,this._frequencyValues,this._filter.frequency),this._setAttackRelease(this._attack,this._release)},t.extend(t.Follower),t.Follower.defaults={attack:.05,release:.5},t.Follower.prototype._setAttackRelease=function(t,e){var i=this.blockTime;t=this.secondsToFrequency(this.toSeconds(t)),e=this.secondsToFrequency(this.toSeconds(e)),t=Math.max(t,i),e=Math.max(e,i),this._frequencyValues.setMap(function(i){return 0>=i?t:e})},Object.defineProperty(t.Follower.prototype,"attack",{get:function(){return this._attack},set:function(t){this._attack=t,this._setAttackRelease(this._attack,this._release)}}),Object.defineProperty(t.Follower.prototype,"release",{get:function(){return this._release},set:function(t){this._release=t,this._setAttackRelease(this._attack,this._release)}}),t.Follower.prototype.connect=t.Signal.prototype.connect,t.Follower.prototype.dispose=function(){return t.prototype.dispose.call(this),this._filter.disconnect(),this._filter=null,this._frequencyValues.disconnect(),this._frequencyValues=null,this._delay.disconnect(),this._delay=null,this._sub.disconnect(),this._sub=null,this._abs.dispose(),this._abs=null,this._mult.dispose(),this._mult=null,this._curve=null,this},t.Follower}),Module(function(t){return t.ScaledEnvelope=function(){var e=this.optionsObject(arguments,["attack","decay","sustain","release"],t.Envelope.defaults);t.Envelope.call(this,e),e=this.defaultArg(e,t.ScaledEnvelope.defaults),this._exp=this.output=new t.Pow(e.exponent),this._scale=this.output=new t.Scale(e.min,e.max),this._sig.chain(this._exp,this._scale)},t.extend(t.ScaledEnvelope,t.Envelope),t.ScaledEnvelope.defaults={min:0,max:1,exponent:1},Object.defineProperty(t.ScaledEnvelope.prototype,"min",{get:function(){return this._scale.min},set:function(t){this._scale.min=t}}),Object.defineProperty(t.ScaledEnvelope.prototype,"max",{get:function(){return this._scale.max},set:function(t){this._scale.max=t}}),Object.defineProperty(t.ScaledEnvelope.prototype,"exponent",{get:function(){return this._exp.value},set:function(t){this._exp.value=t}}),t.ScaledEnvelope.prototype.dispose=function(){return t.Envelope.prototype.dispose.call(this),this._scale.dispose(),this._scale=null,this._exp.dispose(),this._exp=null,this},t.ScaledEnvelope}),Module(function(t){return t.FrequencyEnvelope=function(){var e=this.optionsObject(arguments,["attack","decay","sustain","release"],t.Envelope.defaults);t.ScaledEnvelope.call(this,e),e=this.defaultArg(e,t.FrequencyEnvelope.defaults),this._octaves=e.octaves,this.baseFrequency=e.baseFrequency,this.octaves=e.octaves},t.extend(t.FrequencyEnvelope,t.Envelope),t.FrequencyEnvelope.defaults={baseFrequency:200,octaves:4,exponent:2},Object.defineProperty(t.FrequencyEnvelope.prototype,"baseFrequency",{get:function(){return this._scale.min},set:function(t){this._scale.min=this.toFrequency(t)}}),Object.defineProperty(t.FrequencyEnvelope.prototype,"octaves",{get:function(){return this._octaves},set:function(t){this._octaves=t,this._scale.max=this.baseFrequency*Math.pow(2,t)}}),Object.defineProperty(t.FrequencyEnvelope.prototype,"exponent",{get:function(){return this._exp.value},set:function(t){this._exp.value=t}}),t.FrequencyEnvelope.prototype.dispose=function(){return t.ScaledEnvelope.prototype.dispose.call(this),this},t.FrequencyEnvelope}),Module(function(t){return t.Gate=function(){t.call(this);var e=this.optionsObject(arguments,["threshold","attack","release"],t.Gate.defaults);this._follower=new t.Follower(e.attack,e.release),this._gt=new t.GreaterThan(this.dbToGain(e.threshold)),this.input.connect(this.output),this.input.chain(this._gt,this._follower,this.output.gain)},t.extend(t.Gate),t.Gate.defaults={attack:.1,release:.1,threshold:-40},Object.defineProperty(t.Gate.prototype,"threshold",{get:function(){return this.gainToDb(this._gt.value)},set:function(t){this._gt.value=this.dbToGain(t)}}),Object.defineProperty(t.Gate.prototype,"attack",{get:function(){return this._follower.attack},set:function(t){this._follower.attack=t}}),Object.defineProperty(t.Gate.prototype,"release",{get:function(){return this._follower.release},set:function(t){this._follower.release=t}}),t.Gate.prototype.dispose=function(){return t.prototype.dispose.call(this),this._follower.dispose(),this._gt.dispose(),this._follower=null,this._gt=null,this},t.Gate}),Module(function(t){return t.TimelineState=function(e){t.Timeline.call(this),this._initial=e},t.extend(t.TimelineState,t.Timeline),t.TimelineState.prototype.getStateAtTime=function(t){var e=this.getEvent(t);return null!==e?e.state:this._initial},t.TimelineState.prototype.setStateAtTime=function(t,e){this.addEvent({state:t,time:this.toSeconds(e)})},t.TimelineState}),Module(function(t){return t.Clock=function(){var e=this.optionsObject(arguments,["callback","frequency"],t.Clock.defaults);this.callback=e.callback,this._lookAhead="auto",this._computedLookAhead=1/60,this._threshold=.5,this._nextTick=-1,this._lastUpdate=0,this._loopID=-1,this.frequency=new t.TimelineSignal(e.frequency,t.Type.Frequency),this.ticks=0,this._state=new t.TimelineState(t.State.Stopped),this._boundLoop=this._loop.bind(this),this._readOnly("frequency"),this._loop()},t.extend(t.Clock),t.Clock.defaults={callback:t.noOp,frequency:1,lookAhead:"auto"},Object.defineProperty(t.Clock.prototype,"state",{get:function(){return this._state.getStateAtTime(this.now())}}),Object.defineProperty(t.Clock.prototype,"lookAhead",{get:function(){return this._lookAhead},set:function(t){this._lookAhead="auto"===t?"auto":this.toSeconds(t)}}),t.Clock.prototype.start=function(e,i){return e=this.toSeconds(e),this._state.getStateAtTime(e)!==t.State.Started&&this._state.addEvent({state:t.State.Started,time:e,offset:i}),this},t.Clock.prototype.stop=function(e){return e=this.toSeconds(e),this._state.getStateAtTime(e)!==t.State.Stopped&&this._state.setStateAtTime(t.State.Stopped,e),this},t.Clock.prototype.pause=function(e){return e=this.toSeconds(e),this._state.getStateAtTime(e)===t.State.Started&&this._state.setStateAtTime(t.State.Paused,e),this},t.Clock.prototype._loop=function(e){var i,s,n,o,r,a;if(this._loopID=requestAnimationFrame(this._boundLoop),"auto"===this._lookAhead?this.isUndef(e)||(i=(e-this._lastUpdate)/1e3,this._lastUpdate=e,i<this._threshold&&(this._computedLookAhead=(9*this._computedLookAhead+i)/10)):this._computedLookAhead=this._lookAhead,s=this.now(),n=2*this._computedLookAhead,o=this._state.getEvent(s+n),r=t.State.Stopped,o&&(r=o.state,-1===this._nextTick&&r===t.State.Started&&(this._nextTick=o.time,this.isUndef(o.offset)||(this.ticks=o.offset))),r===t.State.Started)for(;s+n>this._nextTick;)s>this._nextTick+this._threshold&&(this._nextTick=s),
a=this._nextTick,this._nextTick+=1/this.frequency.getValueAtTime(this._nextTick),this.callback(a),this.ticks++;else r===t.State.Stopped&&(this._nextTick=-1,this.ticks=0)},t.Clock.prototype.getStateAtTime=function(t){return this._state.getStateAtTime(t)},t.Clock.prototype.dispose=function(){cancelAnimationFrame(this._loopID),t.TimelineState.prototype.dispose.call(this),this._writable("frequency"),this.frequency.dispose(),this.frequency=null,this._boundLoop=t.noOp,this._nextTick=1/0,this.callback=null,this._state.dispose(),this._state=null},t.Clock}),Module(function(t){return t.Emitter=function(){this._events={}},t.extend(t.Emitter),t.Emitter.prototype.on=function(t,e){var i,s,n=t.split(/\W+/);for(i=0;i<n.length;i++)s=n[i],this._events.hasOwnProperty(s)||(this._events[s]=[]),this._events[s].push(e);return this},t.Emitter.prototype.off=function(e,i){var s,n,o,r=e.split(/\W+/);for(s=0;s<r.length;s++)if(e=r[s],this._events.hasOwnProperty(e))if(t.prototype.isUndef(i))this._events[e]=[];else for(n=this._events[e],o=0;o<n.length;o++)n[o]===i&&n.splice(o,1);return this},t.Emitter.prototype.trigger=function(t){var e,i,s,n;if(this._events&&(e=Array.prototype.slice.call(arguments,1),this._events.hasOwnProperty(t)))for(i=this._events[t],s=0,n=i.length;n>s;s++)i[s].apply(this,e);return this},t.Emitter.mixin=function(e){var i,s,n,o=["on","off","trigger"];for(e._events={},i=0;i<o.length;i++)s=o[i],n=t.Emitter.prototype[s],e[s]=n},t.Emitter.prototype.dispose=function(){return t.prototype.dispose.call(this),this._events=null,this},t.Emitter}),Module(function(t){t.IntervalTimeline=function(){this._root=null,this._length=0},t.extend(t.IntervalTimeline),t.IntervalTimeline.prototype.addEvent=function(t){if(this.isUndef(t.time)||this.isUndef(t.duration))throw new Error("events must have time and duration parameters");var i=new e(t.time,t.time+t.duration,t);for(null===this._root?this._root=i:this._root.insert(i),this._length++;null!==i;)i.updateHeight(),i.updateMax(),this._rebalance(i),i=i.parent;return this},t.IntervalTimeline.prototype.removeEvent=function(t){var e,i,s;if(null!==this._root)for(e=[],this._root.search(t.time,e),i=0;i<e.length;i++)if(s=e[i],s.event===t){this._removeNode(s),this._length--;break}return this},Object.defineProperty(t.IntervalTimeline.prototype,"length",{get:function(){return this._length}}),t.IntervalTimeline.prototype.cancel=function(t){return t=this.toSeconds(t),this.forEachAfter(t,function(t){this.removeEvent(t)}.bind(this)),this},t.IntervalTimeline.prototype._setRoot=function(t){this._root=t,null!==this._root&&(this._root.parent=null)},t.IntervalTimeline.prototype._replaceNodeInParent=function(t,e){null!==t.parent?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)},t.IntervalTimeline.prototype._removeNode=function(t){var e,i,s;if(null===t.left&&null===t.right)this._replaceNodeInParent(t,null);else if(null===t.right)this._replaceNodeInParent(t,t.left);else if(null===t.left)this._replaceNodeInParent(t,t.right);else{if(e=t.getBalance(),e>0)if(null===t.left.right)i=t.left,i.right=t.right,s=i;else{for(i=t.left.right;null!==i.right;)i=i.right;i.parent.right=i.left,s=i.parent,i.left=t.left,i.right=t.right}else if(null===t.right.left)i=t.right,i.left=t.left,s=i;else{for(i=t.right.left;null!==i.left;)i=i.left;i.parent=i.parent,i.parent.left=i.right,s=i.parent,i.left=t.left,i.right=t.right}null!==t.parent?t.isLeftChild()?t.parent.left=i:t.parent.right=i:this._setRoot(i),this._rebalance(s)}t.dispose()},t.IntervalTimeline.prototype._rotateLeft=function(t){var e=t.parent,i=t.isLeftChild(),s=t.right;t.right=s.left,s.left=t,null!==e?i?e.left=s:e.right=s:this._setRoot(s)},t.IntervalTimeline.prototype._rotateRight=function(t){var e=t.parent,i=t.isLeftChild(),s=t.left;t.left=s.right,s.right=t,null!==e?i?e.left=s:e.right=s:this._setRoot(s)},t.IntervalTimeline.prototype._rebalance=function(t){var e=t.getBalance();e>1?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):-1>e&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))},t.IntervalTimeline.prototype.getEvent=function(t){var e,i,s;if(null!==this._root&&(e=[],this._root.search(t,e),e.length>0)){for(i=e[0],s=1;s<e.length;s++)e[s].low>i.low&&(i=e[s]);return i.event}return null},t.IntervalTimeline.prototype.forEach=function(t){var e,i,s;if(null!==this._root)for(e=[],null!==this._root&&this._root.traverse(function(t){e.push(t)}),i=0;i<e.length;i++)s=e[i].event,s&&t(s);return this},t.IntervalTimeline.prototype.forEachOverlap=function(t,e){var i,s,n;if(t=this.toSeconds(t),null!==this._root)for(i=[],this._root.search(t,i),s=i.length-1;s>=0;s--)n=i[s].event,n&&e(n);return this},t.IntervalTimeline.prototype.forEachAfter=function(t,e){var i,s,n;if(t=this.toSeconds(t),null!==this._root)for(i=[],this._root.searchAfter(t,i),s=i.length-1;s>=0;s--)n=i[s].event,n&&e(n);return this},t.IntervalTimeline.prototype.dispose=function(){var t,e=[];for(null!==this._root&&this._root.traverse(function(t){e.push(t)}),t=0;t<e.length;t++)e[t].dispose();return e=null,this._root=null,this};var e=function(t,e,i){this.event=i,this.low=t,this.high=e,this.max=this.high,this._left=null,this._right=null,this.parent=null,this.height=0};return e.prototype.insert=function(t){t.low<=this.low?null===this.left?this.left=t:this.left.insert(t):null===this.right?this.right=t:this.right.insert(t)},e.prototype.search=function(t,e){t>this.max||(null!==this.left&&this.left.search(t,e),this.low<=t&&this.high>=t&&e.push(this),this.low>t||null!==this.right&&this.right.search(t,e))},e.prototype.searchAfter=function(t,e){this.low>=t&&(e.push(this),null!==this.left&&this.left.searchAfter(t,e)),null!==this.right&&this.right.searchAfter(t,e)},e.prototype.traverse=function(t){t(this),null!==this.left&&this.left.traverse(t),null!==this.right&&this.right.traverse(t)},e.prototype.updateHeight=function(){this.height=null!==this.left&&null!==this.right?Math.max(this.left.height,this.right.height)+1:null!==this.right?this.right.height+1:null!==this.left?this.left.height+1:0},e.prototype.updateMax=function(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))},e.prototype.getBalance=function(){var t=0;return null!==this.left&&null!==this.right?t=this.left.height-this.right.height:null!==this.left?t=this.left.height+1:null!==this.right&&(t=-(this.right.height+1)),t},e.prototype.isLeftChild=function(){return null!==this.parent&&this.parent.left===this},Object.defineProperty(e.prototype,"left",{get:function(){return this._left},set:function(t){this._left=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}}),Object.defineProperty(e.prototype,"right",{get:function(){return this._right},set:function(t){this._right=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}}),e.prototype.dispose=function(){this.parent=null,this._left=null,this._right=null,this.event=null},t.IntervalTimeline}),Module(function(t){t.Transport=function(){t.Emitter.call(this),this.loop=!1,this._loopStart=0,this._loopEnd=0,this._ppq=e.defaults.PPQ,this._clock=new t.Clock({callback:this._processTick.bind(this),frequency:0}),this.bpm=this._clock.frequency,this.bpm._toUnits=this._toUnits.bind(this),this.bpm._fromUnits=this._fromUnits.bind(this),this.bpm.units=t.Type.BPM,this.bpm.value=e.defaults.bpm,this._readOnly("bpm"),this._timeSignature=e.defaults.timeSignature,this._scheduledEvents={},this._eventID=0,this._timeline=new t.Timeline,this._repeatedEvents=new t.IntervalTimeline,this._onceEvents=new t.Timeline,this._syncedSignals=[];var i=this.notationToSeconds(e.defaults.swingSubdivision,e.defaults.bpm,e.defaults.timeSignature);this._swingTicks=i/(60/e.defaults.bpm)*this._ppq,this._swingAmount=0},t.extend(t.Transport,t.Emitter),t.Transport.defaults={bpm:120,swing:0,swingSubdivision:"16n",timeSignature:4,loopStart:0,loopEnd:"4m",PPQ:48},t.Transport.prototype._processTick=function(t){this._swingAmount>0&&this._clock.ticks%this._ppq!==0&&this._clock.ticks%this._swingTicks===0&&(t+=this.ticksToSeconds(this._swingTicks)*this._swingAmount),this.loop&&this._clock.ticks===this._loopEnd&&(this.ticks=this._loopStart,this.trigger("loop",t));var e=this._clock.ticks;this._timeline.forEachAtTime(e,function(e){e.callback(t)}),this._repeatedEvents.forEachOverlap(e,function(i){(e-i.time)%i.interval===0&&i.callback(t)}),this._onceEvents.forEachBefore(e,function(e){e.callback(t)}),this._onceEvents.cancelBefore(e)},t.Transport.prototype.schedule=function(t,e){var i={time:this.toTicks(e),callback:t},s=this._eventID++;return this._scheduledEvents[s.toString()]={event:i,timeline:this._timeline},this._timeline.addEvent(i),s},t.Transport.prototype.scheduleRepeat=function(t,e,i,s){var n,o;if(0>=e)throw new Error("repeat events must have an interval larger than 0");return n={time:this.toTicks(i),duration:this.toTicks(this.defaultArg(s,1/0)),interval:this.toTicks(e),callback:t},o=this._eventID++,this._scheduledEvents[o.toString()]={event:n,timeline:this._repeatedEvents},this._repeatedEvents.addEvent(n),o},t.Transport.prototype.scheduleOnce=function(t,e){var i={time:this.toTicks(e),callback:t},s=this._eventID++;return this._scheduledEvents[s.toString()]={event:i,timeline:this._onceEvents},this._onceEvents.addEvent(i),s},t.Transport.prototype.clear=function(t){if(this._scheduledEvents.hasOwnProperty(t)){var e=this._scheduledEvents[t.toString()];e.timeline.removeEvent(e.event),delete this._scheduledEvents[t.toString()]}return this},t.Transport.prototype.cancel=function(t){return t=this.defaultArg(t,0),t=this.toTicks(t),this._timeline.cancel(t),this._onceEvents.cancel(t),this._repeatedEvents.cancel(t),this},t.Transport.prototype.quantize=function(e,i){var s,n,o;return i=this.defaultArg(i,"4n"),s=this.toTicks(e),i=this.toTicks(i),n=i-s%i,n===i&&(n=0),o=this.now(),this.state===t.State.Started&&(o=this._clock._nextTick),this.toSeconds(e,o)+this.ticksToSeconds(n)},Object.defineProperty(t.Transport.prototype,"state",{get:function(){return this._clock.getStateAtTime(this.now())}}),t.Transport.prototype.start=function(t,e){return t=this.toSeconds(t),e=this.isUndef(e)?this.defaultArg(e,this._clock.ticks):this.toTicks(e),this._clock.start(t,e),this.trigger("start",t,this.ticksToSeconds(e)),this},t.Transport.prototype.stop=function(t){return t=this.toSeconds(t),this._clock.stop(t),this.trigger("stop",t),this},t.Transport.prototype.pause=function(t){return t=this.toSeconds(t),this._clock.pause(t),this.trigger("pause",t),this},Object.defineProperty(t.Transport.prototype,"timeSignature",{get:function(){return this._timeSignature},set:function(t){this.isArray(t)&&(t=t[0]/t[1]*4),this._timeSignature=t}}),Object.defineProperty(t.Transport.prototype,"loopStart",{get:function(){return this.ticksToSeconds(this._loopStart)},set:function(t){this._loopStart=this.toTicks(t)}}),Object.defineProperty(t.Transport.prototype,"loopEnd",{get:function(){return this.ticksToSeconds(this._loopEnd)},set:function(t){this._loopEnd=this.toTicks(t)}}),t.Transport.prototype.setLoopPoints=function(t,e){return this.loopStart=t,this.loopEnd=e,this},Object.defineProperty(t.Transport.prototype,"swing",{get:function(){return 2*this._swingAmount},set:function(t){this._swingAmount=.5*t}}),Object.defineProperty(t.Transport.prototype,"swingSubdivision",{get:function(){return this.toNotation(this._swingTicks+"i")},set:function(t){this._swingTicks=this.toTicks(t)}}),Object.defineProperty(t.Transport.prototype,"position",{get:function(){var t,e=this.ticks/this._ppq,i=Math.floor(e/this._timeSignature),s=e%1*4;return s%1>0&&(s=s.toFixed(3)),e=Math.floor(e)%this._timeSignature,t=[i,e,s],t.join(":")},set:function(t){var e=this.toTicks(t);this.ticks=e}}),Object.defineProperty(t.Transport.prototype,"progress",{get:function(){return this.loop?(this.ticks-this._loopStart)/(this._loopEnd-this._loopStart):0}}),Object.defineProperty(t.Transport.prototype,"ticks",{get:function(){return this._clock.ticks},set:function(t){this._clock.ticks=t}}),Object.defineProperty(t.Transport.prototype,"PPQ",{get:function(){return this._ppq},set:function(t){this._ppq=t,this.bpm.value=this.bpm.value}}),t.Transport.prototype._fromUnits=function(t){return 1/(60/t/this.PPQ)},t.Transport.prototype._toUnits=function(t){return t/this.PPQ*60},t.Transport.prototype.syncSignal=function(e,i){i||(i=0!==e._param.value?e._param.value/this.bpm._param.value:0);var s=new t.Gain(i);return this.bpm.chain(s,e._param),this._syncedSignals.push({ratio:s,signal:e,initial:e._param.value}),e._param.value=0,this},t.Transport.prototype.unsyncSignal=function(t){var e,i;for(e=this._syncedSignals.length-1;e>=0;e--)i=this._syncedSignals[e],i.signal===t&&(i.ratio.dispose(),i.signal._param.value=i.initial,this._syncedSignals.splice(e,1));return this},t.Transport.prototype.dispose=function(){return t.Emitter.prototype.dispose.call(this),this._clock.dispose(),this._clock=null,this._writable("bpm"),this.bpm=null,this._timeline.dispose(),this._timeline=null,this._onceEvents.dispose(),this._onceEvents=null,this._repeatedEvents.dispose(),this._repeatedEvents=null,this},t.Transport.prototype.setInterval=function(e,i){return console.warn("This method is deprecated. Use Tone.Transport.scheduleRepeat instead."),t.Transport.scheduleRepeat(e,i)},t.Transport.prototype.clearInterval=function(e){return console.warn("This method is deprecated. Use Tone.Transport.clear instead."),t.Transport.clear(e)},t.Transport.prototype.setTimeout=function(e,i){return console.warn("This method is deprecated. Use Tone.Transport.scheduleOnce instead."),t.Transport.scheduleOnce(e,i)},t.Transport.prototype.clearTimeout=function(e){return console.warn("This method is deprecated. Use Tone.Transport.clear instead."),t.Transport.clear(e)},t.Transport.prototype.setTimeline=function(e,i){return console.warn("This method is deprecated. Use Tone.Transport.schedule instead."),t.Transport.schedule(e,i)},t.Transport.prototype.clearTimeline=function(e){return console.warn("This method is deprecated. Use Tone.Transport.clear instead."),t.Transport.clear(e)};var e=t.Transport;return t._initAudioContext(function(){if("function"==typeof t.Transport)t.Transport=new t.Transport;else{t.Transport.stop();var i=t.Transport.get();t.Transport.dispose(),e.call(t.Transport),t.Transport.set(i)}}),t.Transport}),Module(function(t){return t.Volume=function(){var e=this.optionsObject(arguments,["volume"],t.Volume.defaults);this.output=this.input=new t.Gain(e.volume,t.Type.Decibels),this.volume=this.output.gain,this._readOnly("volume")},t.extend(t.Volume),t.Volume.defaults={volume:0},t.Volume.prototype.dispose=function(){return this.input.dispose(),t.prototype.dispose.call(this),this._writable("volume"),this.volume.dispose(),this.volume=null,this},t.Volume}),Module(function(t){return t.Source=function(e){t.call(this),e=this.defaultArg(e,t.Source.defaults),this._volume=this.output=new t.Volume(e.volume),this.volume=this._volume.volume,this._readOnly("volume"),this._state=new t.TimelineState(t.State.Stopped),this._syncStart=function(t,e){t=this.toSeconds(t),t+=this.toSeconds(this._startDelay),this.start(t,e)}.bind(this),this._syncStop=this.stop.bind(this),this._startDelay=0,this._volume.output.output.channelCount=2,this._volume.output.output.channelCountMode="explicit"},t.extend(t.Source),t.Source.defaults={volume:0},Object.defineProperty(t.Source.prototype,"state",{get:function(){return this._state.getStateAtTime(this.now())}}),t.Source.prototype.start=function(e){return e=this.toSeconds(e),(this._state.getStateAtTime(e)!==t.State.Started||this.retrigger)&&(this._state.setStateAtTime(t.State.Started,e),this._start&&this._start.apply(this,arguments)),this},t.Source.prototype.stop=function(e){return e=this.toSeconds(e),this._state.getStateAtTime(e)===t.State.Started&&(this._state.setStateAtTime(t.State.Stopped,e),this._stop&&this._stop.apply(this,arguments)),this},t.Source.prototype.sync=function(e){return this._startDelay=this.defaultArg(e,0),t.Transport.on("start",this._syncStart),t.Transport.on("stop pause",this._syncStop),this},t.Source.prototype.unsync=function(){return this._startDelay=0,t.Transport.off("start",this._syncStart),t.Transport.off("stop pause",this._syncStop),this},t.Source.prototype.dispose=function(){this.stop(),t.prototype.dispose.call(this),this.unsync(),this._writable("volume"),this._volume.dispose(),this._volume=null,this.volume=null,this._state.dispose(),this._state=null,this._syncStart=null,this._syncStart=null},t.Source}),Module(function(t){return t.Oscillator=function(){var e=this.optionsObject(arguments,["frequency","type"],t.Oscillator.defaults);t.Source.call(this,e),this._oscillator=null,this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.detune=new t.Signal(e.detune,t.Type.Cents),this._wave=null,this._partials=this.defaultArg(e.partials,[1]),this._phase=e.phase,this._type=null,this.type=e.type,this.phase=this._phase,this._readOnly(["frequency","detune"])},t.extend(t.Oscillator,t.Source),t.Oscillator.defaults={type:"sine",frequency:440,detune:0,phase:0,partials:[]},t.Oscillator.Type={Sine:"sine",Triangle:"triangle",Sawtooth:"sawtooth",Square:"square",Custom:"custom"},t.Oscillator.prototype._start=function(t){this._oscillator=this.context.createOscillator(),this._oscillator.setPeriodicWave(this._wave),this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(this.toSeconds(t))},t.Oscillator.prototype._stop=function(t){return this._oscillator&&(this._oscillator.stop(this.toSeconds(t)),this._oscillator=null),this},t.Oscillator.prototype.syncFrequency=function(){return t.Transport.syncSignal(this.frequency),this},t.Oscillator.prototype.unsyncFrequency=function(){return t.Transport.unsyncSignal(this.frequency),this},Object.defineProperty(t.Oscillator.prototype,"type",{get:function(){return this._type},set:function(t){var e=this._getRealImaginary(t,this._phase),i=this.context.createPeriodicWave(e[0],e[1]);this._wave=i,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave),this._type=t}}),t.Oscillator.prototype._getRealImaginary=function(e,i){var s,n,o,r,a=4096,l=a/2,h=new Float32Array(l),u=new Float32Array(l),c=1;for(e===t.Oscillator.Type.Custom?(c=this._partials.length+1,l=c):(s=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e),s&&(c=parseInt(s[2])+1,e=s[1],c=Math.max(c,2),l=c)),n=1;l>n;++n){switch(o=2/(n*Math.PI),e){case t.Oscillator.Type.Sine:r=c>=n?1:0;break;case t.Oscillator.Type.Square:r=1&n?2*o:0;break;case t.Oscillator.Type.Sawtooth:r=o*(1&n?1:-1);break;case t.Oscillator.Type.Triangle:r=1&n?2*o*o*(n-1>>1&1?-1:1):0;break;case t.Oscillator.Type.Custom:r=this._partials[n-1];break;default:throw new Error("invalid oscillator type: "+e)}0!==r?(h[n]=-r*Math.sin(i*n),u[n]=r*Math.cos(i*n)):(h[n]=0,u[n]=0)}return[h,u]},t.Oscillator.prototype._inverseFFT=function(t,e,i){var s,n=0,o=t.length;for(s=0;o>s;s++)n+=t[s]*Math.cos(s*i)+e[s]*Math.sin(s*i);return n},t.Oscillator.prototype._getInitialValue=function(){var t,e=this._getRealImaginary(this._type,0),i=e[0],s=e[1],n=0,o=2*Math.PI;for(t=0;8>t;t++)n=Math.max(this._inverseFFT(i,s,t/8*o),n);return-this._inverseFFT(i,s,this._phase)/n},Object.defineProperty(t.Oscillator.prototype,"partials",{get:function(){return this._type!==t.Oscillator.Type.Custom?[]:this._partials},set:function(e){this._partials=e,this.type=t.Oscillator.Type.Custom}}),Object.defineProperty(t.Oscillator.prototype,"phase",{get:function(){return this._phase*(180/Math.PI)},set:function(t){this._phase=t*Math.PI/180,this.type=this._type}}),t.Oscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),null!==this._oscillator&&(this._oscillator.disconnect(),this._oscillator=null),this._wave=null,this._writable(["frequency","detune"]),this.frequency.dispose(),this.frequency=null,this.detune.dispose(),this.detune=null,this._partials=null,this},t.Oscillator}),Module(function(t){return t.LFO=function(){var e=this.optionsObject(arguments,["frequency","min","max"],t.LFO.defaults);this._oscillator=new t.Oscillator({frequency:e.frequency,type:e.type}),this.frequency=this._oscillator.frequency,this.amplitude=this._oscillator.volume,this.amplitude.units=t.Type.NormalRange,this.amplitude.value=e.amplitude,this._stoppedSignal=new t.Signal(0,t.Type.AudioRange),this._stoppedValue=0,this._a2g=new t.AudioToGain,this._scaler=this.output=new t.Scale(e.min,e.max),this._units=t.Type.Default,this.units=e.units,this._oscillator.chain(this._a2g,this._scaler),this._stoppedSignal.connect(this._a2g),this._readOnly(["amplitude","frequency"]),this.phase=e.phase},t.extend(t.LFO,t.Oscillator),t.LFO.defaults={type:"sine",min:0,max:1,phase:0,frequency:"4n",amplitude:1,units:t.Type.Default},t.LFO.prototype.start=function(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(0,t),this._oscillator.start(t),this},t.LFO.prototype.stop=function(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(this._stoppedValue,t),this._oscillator.stop(t),this},t.LFO.prototype.sync=function(t){return this._oscillator.sync(t),this._oscillator.syncFrequency(),this},t.LFO.prototype.unsync=function(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this},Object.defineProperty(t.LFO.prototype,"min",{get:function(){return this._toUnits(this._scaler.min)},set:function(t){t=this._fromUnits(t),this._scaler.min=t}}),Object.defineProperty(t.LFO.prototype,"max",{get:function(){return this._toUnits(this._scaler.max)},set:function(t){t=this._fromUnits(t),this._scaler.max=t}}),Object.defineProperty(t.LFO.prototype,"type",{get:function(){return this._oscillator.type},set:function(t){this._oscillator.type=t,this._stoppedValue=this._oscillator._getInitialValue(),this._stoppedSignal.value=this._stoppedValue}}),Object.defineProperty(t.LFO.prototype,"phase",{get:function(){return this._oscillator.phase},set:function(t){this._oscillator.phase=t,this._stoppedValue=this._oscillator._getInitialValue(),this._stoppedSignal.value=this._stoppedValue}}),Object.defineProperty(t.LFO.prototype,"units",{get:function(){return this._units},set:function(t){var e=this.min,i=this.max;this._units=t,this.min=e,this.max=i}}),Object.defineProperty(t.LFO.prototype,"state",{get:function(){return this._oscillator.state}}),t.LFO.prototype.connect=function(e){return(e.constructor===t.Signal||e.constructor===t.Param||e.constructor===t.TimelineSignal)&&(this.convert=e.convert,this.units=e.units),t.Signal.prototype.connect.apply(this,arguments),this},t.LFO.prototype._fromUnits=t.Param.prototype._fromUnits,t.LFO.prototype._toUnits=t.Param.prototype._toUnits,t.LFO.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable(["amplitude","frequency"]),this._oscillator.dispose(),this._oscillator=null,this._stoppedSignal.dispose(),this._stoppedSignal=null,this._scaler.dispose(),this._scaler=null,this._a2g.dispose(),this._a2g=null,this.frequency=null,this.amplitude=null,this},t.LFO}),Module(function(t){return t.Limiter=function(){var e=this.optionsObject(arguments,["threshold"],t.Limiter.defaults);this._compressor=this.input=this.output=new t.Compressor({attack:.001,decay:.001,threshold:e.threshold}),this.threshold=this._compressor.threshold,this._readOnly("threshold")},t.extend(t.Limiter),t.Limiter.defaults={threshold:-12},t.Limiter.prototype.dispose=function(){return t.prototype.dispose.call(this),this._compressor.dispose(),this._compressor=null,this._writable("threshold"),this.threshold=null,this},t.Limiter}),Module(function(t){return t.LowpassCombFilter=function(){t.call(this);var e=this.optionsObject(arguments,["delayTime","resonance","dampening"],t.LowpassCombFilter.defaults);this._delay=this.input=this.context.createDelay(1),this.delayTime=new t.Signal(e.delayTime,t.Type.Time),this._lowpass=this.output=this.context.createBiquadFilter(),this._lowpass.Q.value=0,this._lowpass.type="lowpass",this.dampening=new t.Param({param:this._lowpass.frequency,units:t.Type.Frequency,value:e.dampening}),this._feedback=this.context.createGain(),this.resonance=new t.Param({param:this._feedback.gain,units:t.Type.NormalRange,value:e.resonance}),this._delay.chain(this._lowpass,this._feedback,this._delay),this.delayTime.connect(this._delay.delayTime),this._readOnly(["dampening","resonance","delayTime"])},t.extend(t.LowpassCombFilter),t.LowpassCombFilter.defaults={delayTime:.1,resonance:.5,dampening:3e3},t.LowpassCombFilter.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable(["dampening","resonance","delayTime"]),this.dampening.dispose(),this.dampening=null,this.resonance.dispose(),this.resonance=null,this._delay.disconnect(),this._delay=null,this._lowpass.disconnect(),this._lowpass=null,this._feedback.disconnect(),this._feedback=null,this.delayTime.dispose(),this.delayTime=null,this},t.LowpassCombFilter}),Module(function(t){return t.Merge=function(){t.call(this,2,0),this.left=this.input[0]=this.context.createGain(),this.right=this.input[1]=this.context.createGain(),this._merger=this.output=this.context.createChannelMerger(2),this.left.connect(this._merger,0,0),this.right.connect(this._merger,0,1),this.left.channelCount=1,this.right.channelCount=1,this.left.channelCountMode="explicit",this.right.channelCountMode="explicit"},t.extend(t.Merge),t.Merge.prototype.dispose=function(){return t.prototype.dispose.call(this),this.left.disconnect(),this.left=null,this.right.disconnect(),this.right=null,this._merger.disconnect(),this._merger=null,this},t.Merge}),Module(function(t){return t.Meter=function(){var e,i,s=this.optionsObject(arguments,["channels","smoothing"],t.Meter.defaults);for(t.call(this),this._channels=s.channels,this.smoothing=s.smoothing,this.clipMemory=s.clipMemory,this.clipLevel=s.clipLevel,this._volume=new Array(this._channels),this._values=new Array(this._channels),e=0;e<this._channels;e++)this._volume[e]=0,this._values[e]=0;for(this._lastClip=new Array(this._channels),i=0;i<this._lastClip.length;i++)this._lastClip[i]=0;this._jsNode=this.context.createScriptProcessor(s.bufferSize,this._channels,1),this._jsNode.onaudioprocess=this._onprocess.bind(this),this._jsNode.noGC(),this.input.connect(this.output),this.input.connect(this._jsNode)},t.extend(t.Meter),t.Meter.defaults={smoothing:.8,bufferSize:1024,clipMemory:.5,clipLevel:.9,channels:1},t.Meter.prototype._onprocess=function(t){var e,i,s,n,o,r,a,l,h=this._jsNode.bufferSize,u=this.smoothing;for(e=0;e<this._channels;e++){for(i=t.inputBuffer.getChannelData(e),s=0,n=0,r=0;h>r;r++)o=i[r],n+=o,s+=o*o;a=n/h,l=Math.sqrt(s/h),l>.9&&(this._lastClip[e]=Date.now()),this._volume[e]=Math.max(l,this._volume[e]*u),this._values[e]=a}},t.Meter.prototype.getLevel=function(t){t=this.defaultArg(t,0);var e=this._volume[t];return 1e-5>e?0:e},t.Meter.prototype.getValue=function(t){return t=this.defaultArg(t,0),this._values[t]},t.Meter.prototype.getDb=function(t){return this.gainToDb(this.getLevel(t))},t.Meter.prototype.isClipped=function(t){return t=this.defaultArg(t,0),Date.now()-this._lastClip[t]<1e3*this._clipMemory},t.Meter.prototype.dispose=function(){return t.prototype.dispose.call(this),this._jsNode.disconnect(),this._jsNode.onaudioprocess=null,this._jsNode=null,this._volume=null,this._values=null,this._lastClip=null,this},t.Meter}),Module(function(t){return t.Split=function(){t.call(this,0,2),this._splitter=this.input=this.context.createChannelSplitter(2),this.left=this.output[0]=this.context.createGain(),this.right=this.output[1]=this.context.createGain(),this._splitter.connect(this.left,0,0),this._splitter.connect(this.right,1,0)},t.extend(t.Split),t.Split.prototype.dispose=function(){return t.prototype.dispose.call(this),this._splitter.disconnect(),this.left.disconnect(),this.right.disconnect(),this.left=null,this.right=null,this._splitter=null,this},t.Split}),Module(function(t){t.MidSideSplit=function(){t.call(this,0,2),this._split=this.input=new t.Split,this.mid=this.output[0]=new t.Expr("($0 + $1) * $2"),this.side=this.output[1]=new t.Expr("($0 - $1) * $2"),this._split.connect(this.mid,0,0),this._split.connect(this.mid,1,1),this._split.connect(this.side,0,0),this._split.connect(this.side,1,1),e.connect(this.mid,0,2),e.connect(this.side,0,2)},t.extend(t.MidSideSplit);var e=null;return t._initAudioContext(function(){e=new t.Signal(1/Math.sqrt(2))}),t.MidSideSplit.prototype.dispose=function(){return t.prototype.dispose.call(this),this.mid.dispose(),this.mid=null,this.side.dispose(),this.side=null,this._split.dispose(),this._split=null,this},t.MidSideSplit}),Module(function(t){t.MidSideMerge=function(){t.call(this,2,0),this.mid=this.input[0]=this.context.createGain(),this._left=new t.Expr("($0 + $1) * $2"),this.side=this.input[1]=this.context.createGain(),this._right=new t.Expr("($0 - $1) * $2"),this._merge=this.output=new t.Merge,this.mid.connect(this._left,0,0),this.side.connect(this._left,0,1),this.mid.connect(this._right,0,0),this.side.connect(this._right,0,1),this._left.connect(this._merge,0,0),this._right.connect(this._merge,0,1),e.connect(this._left,0,2),e.connect(this._right,0,2)},t.extend(t.MidSideMerge);var e=null;return t._initAudioContext(function(){e=new t.Signal(1/Math.sqrt(2))}),t.MidSideMerge.prototype.dispose=function(){return t.prototype.dispose.call(this),this.mid.disconnect(),this.mid=null,this.side.disconnect(),this.side=null,this._left.dispose(),this._left=null,this._right.dispose(),this._right=null,this._merge.dispose(),this._merge=null,this},t.MidSideMerge}),Module(function(t){return t.MidSideCompressor=function(e){e=this.defaultArg(e,t.MidSideCompressor.defaults),this._midSideSplit=this.input=new t.MidSideSplit,this._midSideMerge=this.output=new t.MidSideMerge,this.mid=new t.Compressor(e.mid),this.side=new t.Compressor(e.side),this._midSideSplit.mid.chain(this.mid,this._midSideMerge.mid),this._midSideSplit.side.chain(this.side,this._midSideMerge.side),this._readOnly(["mid","side"])},t.extend(t.MidSideCompressor),t.MidSideCompressor.defaults={mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},side:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10}},t.MidSideCompressor.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable(["mid","side"]),this.mid.dispose(),this.mid=null,this.side.dispose(),this.side=null,this._midSideSplit.dispose(),this._midSideSplit=null,this._midSideMerge.dispose(),this._midSideMerge=null,this},t.MidSideCompressor}),Module(function(t){return t.Mono=function(){t.call(this,1,0),this._merge=this.output=new t.Merge,this.input.connect(this._merge,0,0),this.input.connect(this._merge,0,1),this.input.gain.value=this.dbToGain(-10)},t.extend(t.Mono),t.Mono.prototype.dispose=function(){return t.prototype.dispose.call(this),this._merge.dispose(),this._merge=null,this},t.Mono}),Module(function(t){return t.MultibandCompressor=function(e){e=this.defaultArg(arguments,t.MultibandCompressor.defaults),this._splitter=this.input=new t.MultibandSplit({lowFrequency:e.lowFrequency,highFrequency:e.highFrequency}),this.lowFrequency=this._splitter.lowFrequency,this.highFrequency=this._splitter.highFrequency,this.output=this.context.createGain(),this.low=new t.Compressor(e.low),this.mid=new t.Compressor(e.mid),this.high=new t.Compressor(e.high),this._splitter.low.chain(this.low,this.output),this._splitter.mid.chain(this.mid,this.output),this._splitter.high.chain(this.high,this.output),this._readOnly(["high","mid","low","highFrequency","lowFrequency"])},t.extend(t.MultibandCompressor),t.MultibandCompressor.defaults={low:t.Compressor.defaults,mid:t.Compressor.defaults,high:t.Compressor.defaults,lowFrequency:250,highFrequency:2e3},t.MultibandCompressor.prototype.dispose=function(){return t.prototype.dispose.call(this),this._splitter.dispose(),this._writable(["high","mid","low","highFrequency","lowFrequency"]),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this._splitter=null,this.low=null,this.mid=null,this.high=null,this.lowFrequency=null,this.highFrequency=null,this},t.MultibandCompressor}),Module(function(t){
return t.GainToAudio=function(){this._norm=this.input=this.output=new t.WaveShaper(function(t){return 2*Math.abs(t)-1})},t.extend(t.GainToAudio,t.SignalBase),t.GainToAudio.prototype.dispose=function(){return t.prototype.dispose.call(this),this._norm.dispose(),this._norm=null,this},t.GainToAudio}),Module(function(t){return t.Panner=function(e){t.call(this),this._hasStereoPanner=this.isFunction(this.context.createStereoPanner),this._hasStereoPanner?(this._panner=this.input=this.output=this.context.createStereoPanner(),this.pan=new t.Signal(0,t.Type.NormalRange),this._scalePan=new t.GainToAudio,this.pan.chain(this._scalePan,this._panner.pan)):(this._crossFade=new t.CrossFade,this._merger=this.output=new t.Merge,this._splitter=this.input=new t.Split,this.pan=this._crossFade.fade,this._splitter.connect(this._crossFade,0,0),this._splitter.connect(this._crossFade,1,1),this._crossFade.a.connect(this._merger,0,0),this._crossFade.b.connect(this._merger,0,1)),this.pan.value=this.defaultArg(e,.5),this._readOnly("pan")},t.extend(t.Panner),t.Panner.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable("pan"),this._hasStereoPanner?(this._panner.disconnect(),this._panner=null,this.pan.dispose(),this.pan=null,this._scalePan.dispose(),this._scalePan=null):(this._crossFade.dispose(),this._crossFade=null,this._splitter.dispose(),this._splitter=null,this._merger.dispose(),this._merger=null,this.pan=null),this},t.Panner}),Module(function(t){return t.PanVol=function(){var e=this.optionsObject(arguments,["pan","volume"],t.PanVol.defaults);this._panner=this.input=new t.Panner(e.pan),this.pan=this._panner.pan,this._volume=this.output=new t.Volume(e.volume),this.volume=this._volume.volume,this._panner.connect(this._volume),this._readOnly(["pan","volume"])},t.extend(t.PanVol),t.PanVol.defaults={pan:.5,volume:0},t.PanVol.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable(["pan","volume"]),this._panner.dispose(),this._panner=null,this.pan=null,this._volume.dispose(),this._volume=null,this.volume=null,this},t.PanVol}),Module(function(t){return t.CtrlInterpolate=function(){var e=this.optionsObject(arguments,["values","index"],t.CtrlInterpolate.defaults);this.values=e.values,this.index=e.index},t.extend(t.CtrlInterpolate),t.CtrlInterpolate.defaults={index:0,values:[]},Object.defineProperty(t.CtrlInterpolate.prototype,"value",{get:function(){var t,e,i,s=this.index;return s=Math.min(s,this.values.length-1),t=Math.floor(s),e=this.values[t],i=this.values[Math.ceil(s)],this._interpolate(s-t,e,i)}}),t.CtrlInterpolate.prototype._interpolate=function(t,e,i){var s,n,o,r;if(this.isArray(e)){for(s=[],n=0;n<e.length;n++)s[n]=this._interpolate(t,e[n],i[n]);return s}if(this.isObject(e)){o={};for(r in e)o[r]=this._interpolate(t,e[r],i[r]);return o}return e=this._toNumber(e),i=this._toNumber(i),(1-t)*e+t*i},t.CtrlInterpolate.prototype._toNumber=function(t){return this.isNumber(t)?t:this.isNote(t)?this.toFrequency(t):this.toSeconds(t)},t.CtrlInterpolate.prototype.dispose=function(){this.values=null},t.CtrlInterpolate}),Module(function(t){return t.CtrlMarkov=function(t,e){this.values=this.defaultArg(t,{}),this.value=this.defaultArg(e,Object.keys(this.values)[0])},t.extend(t.CtrlMarkov),t.CtrlMarkov.prototype.next=function(){var t,e,i,s,n,o,r;if(this.values.hasOwnProperty(this.value))if(t=this.values[this.value],this.isArray(t))for(e=this._getProbDistribution(t),i=Math.random(),s=0,n=0;n<e.length;n++)o=e[n],i>s&&s+o>i&&(r=t[n],this.value=this.isObject(r)?r.value:r),s+=o;else this.value=t;return this.value},t.CtrlMarkov.prototype._getProbDistribution=function(t){var e,i,s,n=[],o=0,r=!1;for(e=0;e<t.length;e++)i=t[e],this.isObject(i)?(r=!0,n[e]=i.probability):n[e]=1/t.length,o+=n[e];if(r)for(s=0;s<n.length;s++)n[s]=n[s]/o;return n},t.CtrlMarkov.prototype.dispose=function(){this.values=null},t.CtrlMarkov}),Module(function(t){return t.CtrlPattern=function(){var e=this.optionsObject(arguments,["values","type"],t.CtrlPattern.defaults);this.values=e.values,this.index=0,this._type=null,this._shuffled=null,this._direction=null,this.type=e.type},t.extend(t.CtrlPattern),t.CtrlPattern.Type={Up:"up",Down:"down",UpDown:"upDown",DownUp:"downUp",AlternateUp:"alternateUp",AlternateDown:"alternateDown",Random:"random",RandomWalk:"randomWalk",RandomOnce:"randomOnce"},t.CtrlPattern.defaults={type:t.CtrlPattern.Type.Up,values:[]},Object.defineProperty(t.CtrlPattern.prototype,"value",{get:function(){if(0!==this.values.length){if(1===this.values.length)return this.values[0];this.index=Math.min(this.index,this.values.length-1);var e=this.values[this.index];return this.type===t.CtrlPattern.Type.RandomOnce&&(this.values.length!==this._shuffled.length&&this._shuffleValues(),e=this.values[this._shuffled[this.index]]),e}}}),Object.defineProperty(t.CtrlPattern.prototype,"type",{get:function(){return this._type},set:function(e){this._type=e,this._shuffled=null,this._type===t.CtrlPattern.Type.Up||this._type===t.CtrlPattern.Type.UpDown||this._type===t.CtrlPattern.Type.RandomOnce||this._type===t.CtrlPattern.Type.AlternateUp?this.index=0:(this._type===t.CtrlPattern.Type.Down||this._type===t.CtrlPattern.Type.DownUp||this._type===t.CtrlPattern.Type.AlternateDown)&&(this.index=this.values.length-1),this._type===t.CtrlPattern.Type.UpDown||this._type===t.CtrlPattern.Type.AlternateUp?this._direction=t.CtrlPattern.Type.Up:(this._type===t.CtrlPattern.Type.DownUp||this._type===t.CtrlPattern.Type.AlternateDown)&&(this._direction=t.CtrlPattern.Type.Down),this._type===t.CtrlPattern.Type.RandomOnce?this._shuffleValues():this._type===t.CtrlPattern.Random&&(this.index=Math.floor(Math.random()*this.values.length))}}),t.CtrlPattern.prototype.next=function(){var e=this.type;return e===t.CtrlPattern.Type.Up?(this.index++,this.index>=this.values.length&&(this.index=0)):e===t.CtrlPattern.Type.Down?(this.index--,this.index<0&&(this.index=this.values.length-1)):e===t.CtrlPattern.Type.UpDown||e===t.CtrlPattern.Type.DownUp?(this._direction===t.CtrlPattern.Type.Up?this.index++:this.index--,this.index<0?(this.index=1,this._direction=t.CtrlPattern.Type.Up):this.index>=this.values.length&&(this.index=this.values.length-2,this._direction=t.CtrlPattern.Type.Down)):e===t.CtrlPattern.Type.Random?this.index=Math.floor(Math.random()*this.values.length):e===t.CtrlPattern.Type.RandomWalk?Math.random()<.5?(this.index--,this.index=Math.max(this.index,0)):(this.index++,this.index=Math.min(this.index,this.values.length-1)):e===t.CtrlPattern.Type.RandomOnce?(this.index++,this.index>=this.values.length&&(this.index=0,this._shuffleValues())):e===t.CtrlPattern.Type.AlternateUp?(this._direction===t.CtrlPattern.Type.Up?(this.index+=2,this._direction=t.CtrlPattern.Type.Down):(this.index-=1,this._direction=t.CtrlPattern.Type.Up),this.index>=this.values.length&&(this.index=0,this._direction=t.CtrlPattern.Type.Up)):e===t.CtrlPattern.Type.AlternateDown&&(this._direction===t.CtrlPattern.Type.Up?(this.index+=1,this._direction=t.CtrlPattern.Type.Down):(this.index-=2,this._direction=t.CtrlPattern.Type.Up),this.index<0&&(this.index=this.values.length-1,this._direction=t.CtrlPattern.Type.Down)),this.value},t.CtrlPattern.prototype._shuffleValues=function(){var t,e,i=[];for(this._shuffled=[],t=0;t<this.values.length;t++)i[t]=t;for(;i.length>0;)e=i.splice(Math.floor(i.length*Math.random()),1),this._shuffled.push(e[0])},t.CtrlPattern.prototype.dispose=function(){this._shuffled=null,this.values=null},t.CtrlPattern}),Module(function(t){return t.CtrlRandom=function(){var e=this.optionsObject(arguments,["min","max"],t.CtrlRandom.defaults);this.min=e.min,this.max=e.max,this.integer=e.integer},t.extend(t.CtrlRandom),t.CtrlRandom.defaults={min:0,max:1,integer:!1},Object.defineProperty(t.CtrlRandom.prototype,"value",{get:function(){var t=this.toSeconds(this.min),e=this.toSeconds(this.max),i=Math.random(),s=i*t+(1-i)*e;return this.integer&&(s=Math.floor(s)),s}}),t.CtrlRandom}),Module(function(t){return t.Buffer=function(){var e=this.optionsObject(arguments,["url","onload"],t.Buffer.defaults);this._buffer=null,this._reversed=e.reverse,this.url=void 0,this.loaded=!1,this.onload=e.onload.bind(this,this),e.url instanceof AudioBuffer||e.url instanceof t.Buffer?(this.set(e.url),this.onload(this)):this.isString(e.url)&&(this.url=e.url,t.Buffer._addToQueue(e.url,this))},t.extend(t.Buffer),t.Buffer.defaults={url:void 0,onload:t.noOp,reverse:!1},t.Buffer.prototype.set=function(e){return this._buffer=e instanceof t.Buffer?e.get():e,this.loaded=!0,this},t.Buffer.prototype.get=function(){return this._buffer},t.Buffer.prototype.load=function(e,i){return this.url=e,this.onload=this.defaultArg(i,this.onload),t.Buffer._addToQueue(e,this),this},t.Buffer.prototype.dispose=function(){return t.prototype.dispose.call(this),t.Buffer._removeFromQueue(this),this._buffer=null,this.onload=t.Buffer.defaults.onload,this},Object.defineProperty(t.Buffer.prototype,"duration",{get:function(){return this._buffer?this._buffer.duration:0}}),t.Buffer.prototype._reverse=function(){if(this.loaded)for(var t=0;t<this._buffer.numberOfChannels;t++)Array.prototype.reverse.call(this._buffer.getChannelData(t));return this},Object.defineProperty(t.Buffer.prototype,"reverse",{get:function(){return this._reversed},set:function(t){this._reversed!==t&&(this._reversed=t,this._reverse())}}),t.Emitter.mixin(t.Buffer),t.Buffer._queue=[],t.Buffer._currentDownloads=[],t.Buffer._totalDownloads=0,t.Buffer.MAX_SIMULTANEOUS_DOWNLOADS=6,t.Buffer._addToQueue=function(e,i){t.Buffer._queue.push({url:e,Buffer:i,progress:0,xhr:null}),this._totalDownloads++,t.Buffer._next()},t.Buffer._removeFromQueue=function(e){var i,s,n;for(i=0;i<t.Buffer._queue.length;i++)s=t.Buffer._queue[i],s.Buffer===e&&t.Buffer._queue.splice(i,1);for(i=0;i<t.Buffer._currentDownloads.length;i++)n=t.Buffer._currentDownloads[i],n.Buffer===e&&(t.Buffer._currentDownloads.splice(i,1),n.xhr.abort(),n.xhr.onprogress=null,n.xhr.onload=null,n.xhr.onerror=null)},t.Buffer._next=function(){if(t.Buffer._queue.length>0){if(t.Buffer._currentDownloads.length<t.Buffer.MAX_SIMULTANEOUS_DOWNLOADS){var e=t.Buffer._queue.shift();t.Buffer._currentDownloads.push(e),e.xhr=t.Buffer.load(e.url,function(i){var s=t.Buffer._currentDownloads.indexOf(e);t.Buffer._currentDownloads.splice(s,1),e.Buffer.set(i),e.Buffer._reversed&&e.Buffer._reverse(),e.Buffer.onload(e.Buffer),t.Buffer._onprogress(),t.Buffer._next()}),e.xhr.onprogress=function(i){e.progress=i.loaded/i.total,t.Buffer._onprogress()},e.xhr.onerror=function(e){t.Buffer.trigger("error",e)}}}else 0===t.Buffer._currentDownloads.length&&(t.Buffer.trigger("load"),t.Buffer._totalDownloads=0)},t.Buffer._onprogress=function(){var e,i,s,n,o=0,r=t.Buffer._currentDownloads.length,a=0;if(r>0){for(e=0;r>e;e++)i=t.Buffer._currentDownloads[e],o+=i.progress;a=o}s=r-a,n=t.Buffer._totalDownloads-t.Buffer._queue.length-s,t.Buffer.trigger("progress",n/t.Buffer._totalDownloads)},t.Buffer.load=function(e,i){var s=new XMLHttpRequest;return s.open("GET",e,!0),s.responseType="arraybuffer",s.onload=function(){t.context.decodeAudioData(s.response,function(t){if(!t)throw new Error("could not decode audio data:"+e);i(t)})},s.send(),s},Object.defineProperty(t.Buffer,"onload",{set:function(e){console.warn("Tone.Buffer.onload is deprecated, use Tone.Buffer.on('load', callback)"),t.Buffer.on("load",e)}}),Object.defineProperty(t.Buffer,"onprogress",{set:function(e){console.warn("Tone.Buffer.onprogress is deprecated, use Tone.Buffer.on('progress', callback)"),t.Buffer.on("progress",e)}}),Object.defineProperty(t.Buffer,"onerror",{set:function(e){console.warn("Tone.Buffer.onerror is deprecated, use Tone.Buffer.on('error', callback)"),t.Buffer.on("error",e)}}),t.Buffer}),Module(function(t){var e={};return t.prototype.send=function(t,i){e.hasOwnProperty(t)||(e[t]=this.context.createGain());var s=this.context.createGain();return s.gain.value=this.dbToGain(this.defaultArg(i,1)),this.output.chain(s,e[t]),s},t.prototype.receive=function(t,i){return e.hasOwnProperty(t)||(e[t]=this.context.createGain()),this.isUndef(i)&&(i=this.input),e[t].connect(i),this},t}),Module(function(t){return t.Delay=function(){var e=this.optionsObject(arguments,["delayTime","maxDelay"],t.Delay.defaults);this._delayNode=this.input=this.output=this.context.createDelay(this.toSeconds(e.maxDelay)),this.delayTime=new t.Param({param:this._delayNode.delayTime,units:t.Type.Time,value:e.delayTime}),this._readOnly("delayTime")},t.extend(t.Delay),t.Delay.defaults={maxDelay:1,delayTime:0},t.Delay.prototype.dispose=function(){return t.Param.prototype.dispose.call(this),this._delayNode.disconnect(),this._delayNode=null,this._writable("delayTime"),this.delayTime=null,this},t.Delay}),Module(function(t){t.Master=function(){t.call(this),this._unmutedVolume=1,this._muted=!1,this._volume=this.output=new t.Volume,this.volume=this._volume.volume,this._readOnly("volume"),this.input.chain(this.output,this.context.destination)},t.extend(t.Master),t.Master.defaults={volume:0,mute:!1},Object.defineProperty(t.Master.prototype,"mute",{get:function(){return this._muted},set:function(t){!this._muted&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-(1/0)):this._muted&&!t&&(this.volume.value=this._unmutedVolume),this._muted=t}}),t.Master.prototype.chain=function(){this.input.disconnect(),this.input.chain.apply(this.input,arguments),arguments[arguments.length-1].connect(this.output)},t.Master.prototype.dispose=function(){t.prototype.dispose.call(this),this._writable("volume"),this._volume.dispose(),this._volume=null,this.volume=null},t.prototype.toMaster=function(){return this.connect(t.Master),this},AudioNode.prototype.toMaster=function(){return this.connect(t.Master),this};var e=t.Master;return t._initAudioContext(function(){t.prototype.isUndef(t.Master)?(e.prototype.dispose.call(t.Master),e.call(t.Master)):t.Master=new e}),t.Master}),Module(function(t){function e(t,e,s){var n,o,r,a;if(i.hasOwnProperty(t))for(n=i[t],o=0,r=n.length;r>o;o++)a=n[o],Array.isArray(s)?a.apply(window,[e].concat(s)):a(e,s)}t.Note=function(e,i,s){this.value=s,this._channel=e,this._timelineID=t.Transport.setTimeline(this._trigger.bind(this),i)},t.Note.prototype._trigger=function(t){e(this._channel,t,this.value)},t.Note.prototype.dispose=function(){return t.Transport.clearTimeline(this._timelineID),this.value=null,this};var i={};return t.Note.route=function(t,e){i.hasOwnProperty(t)?i[t].push(e):i[t]=[e]},t.Note.unroute=function(t,e){var s,n;i.hasOwnProperty(t)&&(s=i[t],n=s.indexOf(e),-1!==n&&i[t].splice(n,1))},t.Note.parseScore=function(e){var i,s,n,o,r,a,l,h=[];for(i in e)if(s=e[i],"tempo"===i)t.Transport.bpm.value=s;else if("timeSignature"===i)t.Transport.timeSignature=s[0]/(s[1]/4);else{if(!Array.isArray(s))throw new TypeError("score parts must be Arrays");for(n=0;n<s.length;n++)o=s[n],Array.isArray(o)?(a=o[0],l=o.slice(1),r=new t.Note(i,a,l)):r="object"==typeof o?new t.Note(i,o.time,o):new t.Note(i,o),h.push(r)}return h},t.Note}),Module(function(t){return t.Effect=function(){t.call(this);var e=this.optionsObject(arguments,["wet"],t.Effect.defaults);this._dryWet=new t.CrossFade(e.wet),this.wet=this._dryWet.fade,this.effectSend=this.context.createGain(),this.effectReturn=this.context.createGain(),this.input.connect(this._dryWet.a),this.input.connect(this.effectSend),this.effectReturn.connect(this._dryWet.b),this._dryWet.connect(this.output),this._readOnly(["wet"])},t.extend(t.Effect),t.Effect.defaults={wet:1},t.Effect.prototype.connectEffect=function(t){return this.effectSend.chain(t,this.effectReturn),this},t.Effect.prototype.dispose=function(){return t.prototype.dispose.call(this),this._dryWet.dispose(),this._dryWet=null,this.effectSend.disconnect(),this.effectSend=null,this.effectReturn.disconnect(),this.effectReturn=null,this._writable(["wet"]),this.wet=null,this},t.Effect}),Module(function(t){return t.AutoFilter=function(){var e=this.optionsObject(arguments,["frequency","baseFrequency","octaves"],t.AutoFilter.defaults);t.Effect.call(this,e),this._lfo=new t.LFO({frequency:e.frequency,amplitude:e.depth}),this.depth=this._lfo.amplitude,this.frequency=this._lfo.frequency,this.filter=new t.Filter(e.filter),this._octaves=0,this.connectEffect(this.filter),this._lfo.connect(this.filter.frequency),this.type=e.type,this._readOnly(["frequency","depth"]),this.octaves=e.octaves,this.baseFrequency=e.baseFrequency},t.extend(t.AutoFilter,t.Effect),t.AutoFilter.defaults={frequency:1,type:"sine",depth:1,baseFrequency:200,octaves:2.6,filter:{type:"lowpass",rolloff:-12,Q:1}},t.AutoFilter.prototype.start=function(t){return this._lfo.start(t),this},t.AutoFilter.prototype.stop=function(t){return this._lfo.stop(t),this},t.AutoFilter.prototype.sync=function(t){return this._lfo.sync(t),this},t.AutoFilter.prototype.unsync=function(){return this._lfo.unsync(),this},Object.defineProperty(t.AutoFilter.prototype,"type",{get:function(){return this._lfo.type},set:function(t){this._lfo.type=t}}),Object.defineProperty(t.AutoFilter.prototype,"baseFrequency",{get:function(){return this._lfo.min},set:function(t){this._lfo.min=this.toFrequency(t)}}),Object.defineProperty(t.AutoFilter.prototype,"octaves",{get:function(){return this._octaves},set:function(t){this._octaves=t,this._lfo.max=this.baseFrequency*Math.pow(2,t)}}),t.AutoFilter.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._lfo.dispose(),this._lfo=null,this.filter.dispose(),this.filter=null,this._writable(["frequency","depth"]),this.frequency=null,this.depth=null,this},t.AutoFilter}),Module(function(t){return t.AutoPanner=function(){var e=this.optionsObject(arguments,["frequency"],t.AutoPanner.defaults);t.Effect.call(this,e),this._lfo=new t.LFO({frequency:e.frequency,amplitude:e.depth,min:0,max:1}),this.depth=this._lfo.amplitude,this._panner=new t.Panner,this.frequency=this._lfo.frequency,this.connectEffect(this._panner),this._lfo.connect(this._panner.pan),this.type=e.type,this._readOnly(["depth","frequency"])},t.extend(t.AutoPanner,t.Effect),t.AutoPanner.defaults={frequency:1,type:"sine",depth:1},t.AutoPanner.prototype.start=function(t){return this._lfo.start(t),this},t.AutoPanner.prototype.stop=function(t){return this._lfo.stop(t),this},t.AutoPanner.prototype.sync=function(t){return this._lfo.sync(t),this},t.AutoPanner.prototype.unsync=function(){return this._lfo.unsync(),this},Object.defineProperty(t.AutoPanner.prototype,"type",{get:function(){return this._lfo.type},set:function(t){this._lfo.type=t}}),t.AutoPanner.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._lfo.dispose(),this._lfo=null,this._panner.dispose(),this._panner=null,this._writable(["depth","frequency"]),this.frequency=null,this.depth=null,this},t.AutoPanner}),Module(function(t){return t.AutoWah=function(){var e=this.optionsObject(arguments,["baseFrequency","octaves","sensitivity"],t.AutoWah.defaults);t.Effect.call(this,e),this.follower=new t.Follower(e.follower),this._sweepRange=new t.ScaleExp(0,1,.5),this._baseFrequency=e.baseFrequency,this._octaves=e.octaves,this._inputBoost=this.context.createGain(),this._bandpass=new t.Filter({rolloff:-48,frequency:0,Q:e.Q}),this._peaking=new t.Filter(0,"peaking"),this._peaking.gain.value=e.gain,this.gain=this._peaking.gain,this.Q=this._bandpass.Q,this.effectSend.chain(this._inputBoost,this.follower,this._sweepRange),this._sweepRange.connect(this._bandpass.frequency),this._sweepRange.connect(this._peaking.frequency),this.effectSend.chain(this._bandpass,this._peaking,this.effectReturn),this._setSweepRange(),this.sensitivity=e.sensitivity,this._readOnly(["gain","Q"])},t.extend(t.AutoWah,t.Effect),t.AutoWah.defaults={baseFrequency:100,octaves:6,sensitivity:0,Q:2,gain:2,follower:{attack:.3,release:.5}},Object.defineProperty(t.AutoWah.prototype,"octaves",{get:function(){return this._octaves},set:function(t){this._octaves=t,this._setSweepRange()}}),Object.defineProperty(t.AutoWah.prototype,"baseFrequency",{get:function(){return this._baseFrequency},set:function(t){this._baseFrequency=t,this._setSweepRange()}}),Object.defineProperty(t.AutoWah.prototype,"sensitivity",{get:function(){return this.gainToDb(1/this._inputBoost.gain.value)},set:function(t){this._inputBoost.gain.value=1/this.dbToGain(t)}}),t.AutoWah.prototype._setSweepRange=function(){this._sweepRange.min=this._baseFrequency,this._sweepRange.max=Math.min(this._baseFrequency*Math.pow(2,this._octaves),this.context.sampleRate/2)},t.AutoWah.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this.follower.dispose(),this.follower=null,this._sweepRange.dispose(),this._sweepRange=null,this._bandpass.dispose(),this._bandpass=null,this._peaking.dispose(),this._peaking=null,this._inputBoost.disconnect(),this._inputBoost=null,this._writable(["gain","Q"]),this.gain=null,this.Q=null,this},t.AutoWah}),Module(function(t){return t.BitCrusher=function(){var e,i=this.optionsObject(arguments,["bits"],t.BitCrusher.defaults);t.Effect.call(this,i),e=1/Math.pow(2,i.bits-1),this._subtract=new t.Subtract,this._modulo=new t.Modulo(e),this._bits=i.bits,this.effectSend.fan(this._subtract,this._modulo),this._modulo.connect(this._subtract,0,1),this._subtract.connect(this.effectReturn)},t.extend(t.BitCrusher,t.Effect),t.BitCrusher.defaults={bits:4},Object.defineProperty(t.BitCrusher.prototype,"bits",{get:function(){return this._bits},set:function(t){this._bits=t;var e=1/Math.pow(2,t-1);this._modulo.value=e}}),t.BitCrusher.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._subtract.dispose(),this._subtract=null,this._modulo.dispose(),this._modulo=null,this},t.BitCrusher}),Module(function(t){return t.Chebyshev=function(){var e=this.optionsObject(arguments,["order"],t.Chebyshev.defaults);t.Effect.call(this,e),this._shaper=new t.WaveShaper(4096),this._order=e.order,this.connectEffect(this._shaper),this.order=e.order,this.oversample=e.oversample},t.extend(t.Chebyshev,t.Effect),t.Chebyshev.defaults={order:1,oversample:"none"},t.Chebyshev.prototype._getCoefficient=function(t,e,i){return i.hasOwnProperty(e)?i[e]:(i[e]=0===e?0:1===e?t:2*t*this._getCoefficient(t,e-1,i)-this._getCoefficient(t,e-2,i),i[e])},Object.defineProperty(t.Chebyshev.prototype,"order",{get:function(){return this._order},set:function(t){var e,i,s,n;for(this._order=t,e=new Array(4096),i=e.length,s=0;i>s;++s)n=2*s/i-1,e[s]=0===n?0:this._getCoefficient(n,t,{});this._shaper.curve=e}}),Object.defineProperty(t.Chebyshev.prototype,"oversample",{get:function(){return this._shaper.oversample},set:function(t){this._shaper.oversample=t}}),t.Chebyshev.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._shaper.dispose(),this._shaper=null,this},t.Chebyshev}),Module(function(t){return t.StereoEffect=function(){t.call(this);var e=this.optionsObject(arguments,["wet"],t.Effect.defaults);this._dryWet=new t.CrossFade(e.wet),this.wet=this._dryWet.fade,this._split=new t.Split,this.effectSendL=this._split.left,this.effectSendR=this._split.right,this._merge=new t.Merge,this.effectReturnL=this._merge.left,this.effectReturnR=this._merge.right,this.input.connect(this._split),this.input.connect(this._dryWet,0,0),this._merge.connect(this._dryWet,0,1),this._dryWet.connect(this.output),this._readOnly(["wet"])},t.extend(t.StereoEffect,t.Effect),t.StereoEffect.prototype.dispose=function(){return t.prototype.dispose.call(this),this._dryWet.dispose(),this._dryWet=null,this._split.dispose(),this._split=null,this._merge.dispose(),this._merge=null,this.effectSendL=null,this.effectSendR=null,this.effectReturnL=null,this.effectReturnR=null,this._writable(["wet"]),this.wet=null,this},t.StereoEffect}),Module(function(t){return t.FeedbackEffect=function(){var e=this.optionsObject(arguments,["feedback"]);e=this.defaultArg(e,t.FeedbackEffect.defaults),t.Effect.call(this,e),this.feedback=new t.Signal(e.feedback,t.Type.NormalRange),this._feedbackGain=this.context.createGain(),this.effectReturn.chain(this._feedbackGain,this.effectSend),this.feedback.connect(this._feedbackGain.gain),this._readOnly(["feedback"])},t.extend(t.FeedbackEffect,t.Effect),t.FeedbackEffect.defaults={feedback:.125},t.FeedbackEffect.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._writable(["feedback"]),this.feedback.dispose(),this.feedback=null,this._feedbackGain.disconnect(),this._feedbackGain=null,this},t.FeedbackEffect}),Module(function(t){return t.StereoXFeedbackEffect=function(){var e=this.optionsObject(arguments,["feedback"],t.FeedbackEffect.defaults);t.StereoEffect.call(this,e),this.feedback=new t.Signal(e.feedback,t.Type.NormalRange),this._feedbackLR=this.context.createGain(),this._feedbackRL=this.context.createGain(),this.effectReturnL.chain(this._feedbackLR,this.effectSendR),this.effectReturnR.chain(this._feedbackRL,this.effectSendL),this.feedback.fan(this._feedbackLR.gain,this._feedbackRL.gain),this._readOnly(["feedback"])},t.extend(t.StereoXFeedbackEffect,t.FeedbackEffect),t.StereoXFeedbackEffect.prototype.dispose=function(){return t.StereoEffect.prototype.dispose.call(this),this._writable(["feedback"]),this.feedback.dispose(),this.feedback=null,this._feedbackLR.disconnect(),this._feedbackLR=null,this._feedbackRL.disconnect(),this._feedbackRL=null,this},t.StereoXFeedbackEffect}),Module(function(t){return t.Chorus=function(){var e=this.optionsObject(arguments,["frequency","delayTime","depth"],t.Chorus.defaults);t.StereoXFeedbackEffect.call(this,e),this._depth=e.depth,this._delayTime=e.delayTime/1e3,this._lfoL=new t.LFO({frequency:e.frequency,min:0,max:1}),this._lfoR=new t.LFO({frequency:e.frequency,min:0,max:1,phase:180}),this._delayNodeL=this.context.createDelay(),this._delayNodeR=this.context.createDelay(),this.frequency=this._lfoL.frequency,this.effectSendL.chain(this._delayNodeL,this.effectReturnL),this.effectSendR.chain(this._delayNodeR,this.effectReturnR),this.effectSendL.connect(this.effectReturnL),this.effectSendR.connect(this.effectReturnR),this._lfoL.connect(this._delayNodeL.delayTime),this._lfoR.connect(this._delayNodeR.delayTime),this._lfoL.start(),this._lfoR.start(),this._lfoL.frequency.connect(this._lfoR.frequency),this.depth=this._depth,this.frequency.value=e.frequency,this.type=e.type,this._readOnly(["frequency"]),this.spread=e.spread},t.extend(t.Chorus,t.StereoXFeedbackEffect),t.Chorus.defaults={frequency:1.5,delayTime:3.5,depth:.7,feedback:.1,type:"sine",spread:180},Object.defineProperty(t.Chorus.prototype,"depth",{get:function(){return this._depth},set:function(t){this._depth=t;var e=this._delayTime*t;this._lfoL.min=Math.max(this._delayTime-e,0),this._lfoL.max=this._delayTime+e,this._lfoR.min=Math.max(this._delayTime-e,0),this._lfoR.max=this._delayTime+e}}),Object.defineProperty(t.Chorus.prototype,"delayTime",{get:function(){return 1e3*this._delayTime},set:function(t){this._delayTime=t/1e3,this.depth=this._depth}}),Object.defineProperty(t.Chorus.prototype,"type",{get:function(){return this._lfoL.type},set:function(t){this._lfoL.type=t,this._lfoR.type=t}}),Object.defineProperty(t.Chorus.prototype,"spread",{get:function(){return this._lfoR.phase-this._lfoL.phase},set:function(t){this._lfoL.phase=90-t/2,this._lfoR.phase=t/2+90}}),t.Chorus.prototype.dispose=function(){return t.StereoXFeedbackEffect.prototype.dispose.call(this),this._lfoL.dispose(),this._lfoL=null,this._lfoR.dispose(),this._lfoR=null,this._delayNodeL.disconnect(),this._delayNodeL=null,this._delayNodeR.disconnect(),this._delayNodeR=null,this._writable("frequency"),this.frequency=null,this},t.Chorus}),Module(function(t){return t.Convolver=function(){var e=this.optionsObject(arguments,["url"],t.Convolver.defaults);t.Effect.call(this,e),this._convolver=this.context.createConvolver(),this._buffer=new t.Buffer(e.url,function(t){this.buffer=t,e.onload()}.bind(this)),this.connectEffect(this._convolver)},t.extend(t.Convolver,t.Effect),t.Convolver.defaults={url:"",onload:t.noOp},Object.defineProperty(t.Convolver.prototype,"buffer",{get:function(){return this._buffer.get()},set:function(t){this._buffer.set(t),this._convolver.buffer=this._buffer.get()}}),t.Convolver.prototype.load=function(t,e){return this._buffer.load(t,function(t){this.buffer=t,e&&e()}.bind(this)),this},t.Convolver.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._convolver.disconnect(),this._convolver=null,this._buffer.dispose(),this._buffer=null,this},t.Convolver}),Module(function(t){return t.Distortion=function(){var e=this.optionsObject(arguments,["distortion"],t.Distortion.defaults);t.Effect.call(this,e),this._shaper=new t.WaveShaper(4096),this._distortion=e.distortion,this.connectEffect(this._shaper),this.distortion=e.distortion,this.oversample=e.oversample},t.extend(t.Distortion,t.Effect),t.Distortion.defaults={distortion:.4,oversample:"none"},Object.defineProperty(t.Distortion.prototype,"distortion",{get:function(){return this._distortion},set:function(t){var e,i;this._distortion=t,e=100*t,i=Math.PI/180,this._shaper.setMap(function(t){return Math.abs(t)<.001?0:(3+e)*t*20*i/(Math.PI+e*Math.abs(t))})}}),Object.defineProperty(t.Distortion.prototype,"oversample",{get:function(){return this._shaper.oversample},set:function(t){this._shaper.oversample=t}}),t.Distortion.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._shaper.dispose(),this._shaper=null,this},t.Distortion}),Module(function(t){return t.FeedbackDelay=function(){var e=this.optionsObject(arguments,["delayTime","feedback"],t.FeedbackDelay.defaults);t.FeedbackEffect.call(this,e),this.delayTime=new t.Signal(e.delayTime,t.Type.Time),this._delayNode=this.context.createDelay(4),this.connectEffect(this._delayNode),this.delayTime.connect(this._delayNode.delayTime),this._readOnly(["delayTime"])},t.extend(t.FeedbackDelay,t.FeedbackEffect),t.FeedbackDelay.defaults={delayTime:.25},t.FeedbackDelay.prototype.dispose=function(){return t.FeedbackEffect.prototype.dispose.call(this),this.delayTime.dispose(),this._delayNode.disconnect(),this._delayNode=null,this._writable(["delayTime"]),this.delayTime=null,this},t.FeedbackDelay}),Module(function(t){var e=[1557/44100,1617/44100,1491/44100,1422/44100,1277/44100,1356/44100,1188/44100,1116/44100],i=[225,556,441,341];return t.Freeverb=function(){var s,n,o,r,a,l,h=this.optionsObject(arguments,["roomSize","dampening"],t.Freeverb.defaults);for(t.StereoEffect.call(this,h),this.roomSize=new t.Signal(h.roomSize,t.Type.NormalRange),this.dampening=new t.Signal(h.dampening,t.Type.Frequency),this._combFilters=[],this._allpassFiltersL=[],this._allpassFiltersR=[],s=0;s<i.length;s++)n=this.context.createBiquadFilter(),n.type="allpass",n.frequency.value=i[s],this._allpassFiltersL.push(n);for(o=0;o<i.length;o++)r=this.context.createBiquadFilter(),r.type="allpass",r.frequency.value=i[o],this._allpassFiltersR.push(r);for(a=0;a<e.length;a++)l=new t.LowpassCombFilter(e[a]),a<e.length/2?this.effectSendL.chain(l,this._allpassFiltersL[0]):this.effectSendR.chain(l,this._allpassFiltersR[0]),this.roomSize.connect(l.resonance),this.dampening.connect(l.dampening),this._combFilters.push(l);this.connectSeries.apply(this,this._allpassFiltersL),this.connectSeries.apply(this,this._allpassFiltersR),this._allpassFiltersL[this._allpassFiltersL.length-1].connect(this.effectReturnL),this._allpassFiltersR[this._allpassFiltersR.length-1].connect(this.effectReturnR),this._readOnly(["roomSize","dampening"])},t.extend(t.Freeverb,t.StereoEffect),t.Freeverb.defaults={roomSize:.7,dampening:3e3},t.Freeverb.prototype.dispose=function(){var e,i,s;for(t.StereoEffect.prototype.dispose.call(this),e=0;e<this._allpassFiltersL.length;e++)this._allpassFiltersL[e].disconnect(),this._allpassFiltersL[e]=null;for(this._allpassFiltersL=null,i=0;i<this._allpassFiltersR.length;i++)this._allpassFiltersR[i].disconnect(),this._allpassFiltersR[i]=null;for(this._allpassFiltersR=null,s=0;s<this._combFilters.length;s++)this._combFilters[s].dispose(),this._combFilters[s]=null;return this._combFilters=null,this._writable(["roomSize","dampening"]),this.roomSize.dispose(),this.roomSize=null,this.dampening.dispose(),this.dampening=null,
this},t.Freeverb}),Module(function(t){var e=[.06748,.06404,.08212,.09004],i=[.773,.802,.753,.733],s=[347,113,37];return t.JCReverb=function(){var n,o,r,a,l=this.optionsObject(arguments,["roomSize"],t.JCReverb.defaults);for(t.StereoEffect.call(this,l),this.roomSize=new t.Signal(l.roomSize,t.Type.NormalRange),this._scaleRoomSize=new t.Scale(-.733,.197),this._allpassFilters=[],this._feedbackCombFilters=[],n=0;n<s.length;n++)o=this.context.createBiquadFilter(),o.type="allpass",o.frequency.value=s[n],this._allpassFilters.push(o);for(r=0;r<e.length;r++)a=new t.FeedbackCombFilter(e[r],.1),this._scaleRoomSize.connect(a.resonance),a.resonance.value=i[r],this._allpassFilters[this._allpassFilters.length-1].connect(a),a.connect(r<e.length/2?this.effectReturnL:this.effectReturnR),this._feedbackCombFilters.push(a);this.roomSize.connect(this._scaleRoomSize),this.connectSeries.apply(this,this._allpassFilters),this.effectSendL.connect(this._allpassFilters[0]),this.effectSendR.connect(this._allpassFilters[0]),this._readOnly(["roomSize"])},t.extend(t.JCReverb,t.StereoEffect),t.JCReverb.defaults={roomSize:.5},t.JCReverb.prototype.dispose=function(){var e,i;for(t.StereoEffect.prototype.dispose.call(this),e=0;e<this._allpassFilters.length;e++)this._allpassFilters[e].disconnect(),this._allpassFilters[e]=null;for(this._allpassFilters=null,i=0;i<this._feedbackCombFilters.length;i++)this._feedbackCombFilters[i].dispose(),this._feedbackCombFilters[i]=null;return this._feedbackCombFilters=null,this._writable(["roomSize"]),this.roomSize.dispose(),this.roomSize=null,this._scaleRoomSize.dispose(),this._scaleRoomSize=null,this},t.JCReverb}),Module(function(t){return t.MidSideEffect=function(){t.Effect.apply(this,arguments),this._midSideSplit=new t.MidSideSplit,this._midSideMerge=new t.MidSideMerge,this.midSend=this._midSideSplit.mid,this.sideSend=this._midSideSplit.side,this.midReturn=this._midSideMerge.mid,this.sideReturn=this._midSideMerge.side,this.effectSend.connect(this._midSideSplit),this._midSideMerge.connect(this.effectReturn)},t.extend(t.MidSideEffect,t.Effect),t.MidSideEffect.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._midSideSplit.dispose(),this._midSideSplit=null,this._midSideMerge.dispose(),this._midSideMerge=null,this.midSend=null,this.sideSend=null,this.midReturn=null,this.sideReturn=null,this},t.MidSideEffect}),Module(function(t){return t.Phaser=function(){var e=this.optionsObject(arguments,["frequency","octaves","baseFrequency"],t.Phaser.defaults);t.StereoEffect.call(this,e),this._lfoL=new t.LFO(e.frequency,0,1),this._lfoR=new t.LFO(e.frequency,0,1),this._lfoR.phase=180,this._baseFrequency=e.baseFrequency,this._octaves=e.octaves,this.Q=new t.Signal(e.Q,t.Type.Positive),this._filtersL=this._makeFilters(e.stages,this._lfoL,this.Q),this._filtersR=this._makeFilters(e.stages,this._lfoR,this.Q),this.frequency=this._lfoL.frequency,this.frequency.value=e.frequency,this.effectSendL.connect(this._filtersL[0]),this.effectSendR.connect(this._filtersR[0]),this._filtersL[e.stages-1].connect(this.effectReturnL),this._filtersR[e.stages-1].connect(this.effectReturnR),this._lfoL.frequency.connect(this._lfoR.frequency),this.baseFrequency=e.baseFrequency,this.octaves=e.octaves,this._lfoL.start(),this._lfoR.start(),this._readOnly(["frequency","Q"])},t.extend(t.Phaser,t.StereoEffect),t.Phaser.defaults={frequency:.5,octaves:3,stages:10,Q:10,baseFrequency:350},t.Phaser.prototype._makeFilters=function(t,e,i){var s,n,o=new Array(t);for(s=0;t>s;s++)n=this.context.createBiquadFilter(),n.type="allpass",i.connect(n.Q),e.connect(n.frequency),o[s]=n;return this.connectSeries.apply(this,o),o},Object.defineProperty(t.Phaser.prototype,"octaves",{get:function(){return this._octaves},set:function(t){this._octaves=t;var e=this._baseFrequency*Math.pow(2,t);this._lfoL.max=e,this._lfoR.max=e}}),Object.defineProperty(t.Phaser.prototype,"baseFrequency",{get:function(){return this._baseFrequency},set:function(t){this._baseFrequency=t,this._lfoL.min=t,this._lfoR.min=t,this.octaves=this._octaves}}),t.Phaser.prototype.dispose=function(){var e,i;for(t.StereoEffect.prototype.dispose.call(this),this._writable(["frequency","Q"]),this.Q.dispose(),this.Q=null,this._lfoL.dispose(),this._lfoL=null,this._lfoR.dispose(),this._lfoR=null,e=0;e<this._filtersL.length;e++)this._filtersL[e].disconnect(),this._filtersL[e]=null;for(this._filtersL=null,i=0;i<this._filtersR.length;i++)this._filtersR[i].disconnect(),this._filtersR[i]=null;return this._filtersR=null,this.frequency=null,this},t.Phaser}),Module(function(t){return t.PingPongDelay=function(){var e=this.optionsObject(arguments,["delayTime","feedback"],t.PingPongDelay.defaults);t.StereoXFeedbackEffect.call(this,e),this._leftDelay=this.context.createDelay(e.maxDelayTime),this._rightDelay=this.context.createDelay(e.maxDelayTime),this._rightPreDelay=this.context.createDelay(e.maxDelayTime),this.delayTime=new t.Signal(e.delayTime,t.Type.Time),this.effectSendL.chain(this._leftDelay,this.effectReturnL),this.effectSendR.chain(this._rightPreDelay,this._rightDelay,this.effectReturnR),this.delayTime.fan(this._leftDelay.delayTime,this._rightDelay.delayTime,this._rightPreDelay.delayTime),this._feedbackLR.disconnect(),this._feedbackLR.connect(this._rightDelay),this._readOnly(["delayTime"])},t.extend(t.PingPongDelay,t.StereoXFeedbackEffect),t.PingPongDelay.defaults={delayTime:.25,maxDelayTime:1},t.PingPongDelay.prototype.dispose=function(){return t.StereoXFeedbackEffect.prototype.dispose.call(this),this._leftDelay.disconnect(),this._leftDelay=null,this._rightDelay.disconnect(),this._rightDelay=null,this._rightPreDelay.disconnect(),this._rightPreDelay=null,this._writable(["delayTime"]),this.delayTime.dispose(),this.delayTime=null,this},t.PingPongDelay}),Module(function(t){return t.PitchShift=function(){var e,i=this.optionsObject(arguments,["pitch"],t.PitchShift.defaults);t.FeedbackEffect.call(this,i),this._frequency=new t.Signal(0),this._delayA=new t.Delay(0,1),this._lfoA=new t.LFO({min:0,max:.1,type:"sawtooth"}).connect(this._delayA.delayTime),this._delayB=new t.Delay(0,1),this._lfoB=new t.LFO({min:0,max:.1,type:"sawtooth",phase:180}).connect(this._delayB.delayTime),this._crossFade=new t.CrossFade,this._crossFadeLFO=new t.LFO({min:0,max:1,type:"triangle",phase:90}).connect(this._crossFade.fade),this._feedbackDelay=new t.Delay(i.delayTime),this.delayTime=this._feedbackDelay.delayTime,this._readOnly("delayTime"),this._pitch=i.pitch,this._windowSize=i.windowSize,this._delayA.connect(this._crossFade.a),this._delayB.connect(this._crossFade.b),this._frequency.fan(this._lfoA.frequency,this._lfoB.frequency,this._crossFadeLFO.frequency),this.effectSend.fan(this._delayA,this._delayB),this._crossFade.chain(this._feedbackDelay,this.effectReturn),e=this.now(),this._lfoA.start(e),this._lfoB.start(e),this._crossFadeLFO.start(e),this.windowSize=this._windowSize},t.extend(t.PitchShift,t.FeedbackEffect),t.PitchShift.defaults={pitch:0,windowSize:.1,delayTime:0,feedback:0},Object.defineProperty(t.PitchShift.prototype,"pitch",{get:function(){return this._pitch},set:function(t){this._pitch=t;var e=0;0>t?(this._lfoA.min=0,this._lfoA.max=this._windowSize,this._lfoB.min=0,this._lfoB.max=this._windowSize,e=this.intervalToFrequencyRatio(t-1)+1):(this._lfoA.min=this._windowSize,this._lfoA.max=0,this._lfoB.min=this._windowSize,this._lfoB.max=0,e=this.intervalToFrequencyRatio(t)-1),this._frequency.value=e*(1.2/this._windowSize)}}),Object.defineProperty(t.PitchShift.prototype,"windowSize",{get:function(){return this._windowSize},set:function(t){this._windowSize=this.toSeconds(t),this.pitch=this._pitch}}),t.PitchShift.prototype.dispose=function(){return t.FeedbackEffect.prototype.dispose.call(this),this._frequency.dispose(),this._frequency=null,this._delayA.disconnect(),this._delayA=null,this._delayB.disconnect(),this._delayB=null,this._lfoA.dispose(),this._lfoA=null,this._lfoB.dispose(),this._lfoB=null,this._crossFade.dispose(),this._crossFade=null,this._crossFadeLFO.dispose(),this._crossFadeLFO=null,this._writable("delayTime"),this._feedbackDelay.dispose(),this._feedbackDelay=null,this.delayTime=null,this},t.PitchShift}),Module(function(t){return t.StereoFeedbackEffect=function(){var e=this.optionsObject(arguments,["feedback"],t.FeedbackEffect.defaults);t.StereoEffect.call(this,e),this.feedback=new t.Signal(e.feedback,t.Type.NormalRange),this._feedbackL=this.context.createGain(),this._feedbackR=this.context.createGain(),this.effectReturnL.chain(this._feedbackL,this.effectSendL),this.effectReturnR.chain(this._feedbackR,this.effectSendR),this.feedback.fan(this._feedbackL.gain,this._feedbackR.gain),this._readOnly(["feedback"])},t.extend(t.StereoFeedbackEffect,t.FeedbackEffect),t.StereoFeedbackEffect.prototype.dispose=function(){return t.StereoEffect.prototype.dispose.call(this),this._writable(["feedback"]),this.feedback.dispose(),this.feedback=null,this._feedbackL.disconnect(),this._feedbackL=null,this._feedbackR.disconnect(),this._feedbackR=null,this},t.StereoFeedbackEffect}),Module(function(t){return t.StereoWidener=function(){var e=this.optionsObject(arguments,["width"],t.StereoWidener.defaults);t.MidSideEffect.call(this,e),this.width=new t.Signal(e.width,t.Type.NormalRange),this._midMult=new t.Expr("$0 * ($1 * (1 - $2))"),this._sideMult=new t.Expr("$0 * ($1 * $2)"),this._two=new t.Signal(2),this._two.connect(this._midMult,0,1),this.width.connect(this._midMult,0,2),this._two.connect(this._sideMult,0,1),this.width.connect(this._sideMult,0,2),this.midSend.chain(this._midMult,this.midReturn),this.sideSend.chain(this._sideMult,this.sideReturn),this._readOnly(["width"])},t.extend(t.StereoWidener,t.MidSideEffect),t.StereoWidener.defaults={width:.5},t.StereoWidener.prototype.dispose=function(){return t.MidSideEffect.prototype.dispose.call(this),this._writable(["width"]),this.width.dispose(),this.width=null,this._midMult.dispose(),this._midMult=null,this._sideMult.dispose(),this._sideMult=null,this._two.dispose(),this._two=null,this},t.StereoWidener}),Module(function(t){return t.Tremolo=function(){var e=this.optionsObject(arguments,["frequency","depth"],t.Tremolo.defaults);t.StereoEffect.call(this,e),this._lfoL=new t.LFO({phase:e.spread,min:1,max:0}),this._lfoR=new t.LFO({phase:e.spread,min:1,max:0}),this._amplitudeL=new t.Gain,this._amplitudeR=new t.Gain,this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.depth=new t.Signal(e.depth,t.Type.NormalRange),this._readOnly(["frequency","depth"]),this.effectSendL.chain(this._amplitudeL,this.effectReturnL),this.effectSendR.chain(this._amplitudeR,this.effectReturnR),this._lfoL.connect(this._amplitudeL.gain),this._lfoR.connect(this._amplitudeR.gain),this.frequency.fan(this._lfoL.frequency,this._lfoR.frequency),this.depth.fan(this._lfoR.amplitude,this._lfoL.amplitude),this.type=e.type,this.spread=e.spread},t.extend(t.Tremolo,t.StereoEffect),t.Tremolo.defaults={frequency:10,type:"sine",depth:.5,spread:180},t.Tremolo.prototype.start=function(t){return this._lfoL.start(t),this._lfoR.start(t),this},t.Tremolo.prototype.stop=function(t){return this._lfoL.stop(t),this._lfoR.stop(t),this},t.Tremolo.prototype.sync=function(t){return this._lfoL.sync(t),this._lfoR.sync(t),this},t.Tremolo.prototype.unsync=function(){return this._lfoL.unsync(),this._lfoR.unsync(),this},Object.defineProperty(t.Tremolo.prototype,"type",{get:function(){return this._lfoL.type},set:function(t){this._lfoL.type=t,this._lfoR.type=t}}),Object.defineProperty(t.Tremolo.prototype,"spread",{get:function(){return this._lfoR.phase-this._lfoL.phase},set:function(t){this._lfoL.phase=90-t/2,this._lfoR.phase=t/2+90}}),t.Tremolo.prototype.dispose=function(){return t.StereoEffect.prototype.dispose.call(this),this._writable(["frequency","depth"]),this._lfoL.dispose(),this._lfoL=null,this._lfoR.dispose(),this._lfoR=null,this._amplitudeL.dispose(),this._amplitudeL=null,this._amplitudeR.dispose(),this._amplitudeR=null,this.frequency=null,this.depth=null,this},t.Tremolo}),Module(function(t){return t.Vibrato=function(){var e=this.optionsObject(arguments,["frequency","depth"],t.Vibrato.defaults);t.Effect.call(this,e),this._delayNode=new t.Delay(0,e.maxDelay),this._lfo=new t.LFO({type:e.type,min:0,max:e.maxDelay,frequency:e.frequency,phase:-90}).start().connect(this._delayNode.delayTime),this.frequency=this._lfo.frequency,this.depth=this._lfo.amplitude,this.depth.value=e.depth,this._readOnly(["frequency","depth"]),this.effectSend.chain(this._delayNode,this.effectReturn)},t.extend(t.Vibrato,t.Effect),t.Vibrato.defaults={maxDelay:.005,frequency:5,depth:.1,type:"sine"},Object.defineProperty(t.Vibrato.prototype,"type",{get:function(){return this._lfo.type},set:function(t){this._lfo.type=t}}),t.Vibrato.prototype.dispose=function(){t.Effect.prototype.dispose.call(this),this._delayNode.dispose(),this._delayNode=null,this._lfo.dispose(),this._lfo=null,this._writable(["frequency","depth"]),this.frequency=null,this.depth=null},t.Vibrato}),Module(function(t){return t.Event=function(){var e=this.optionsObject(arguments,["callback","value"],t.Event.defaults);this._loop=e.loop,this.callback=e.callback,this.value=e.value,this._loopStart=this.toTicks(e.loopStart),this._loopEnd=this.toTicks(e.loopEnd),this._state=new t.TimelineState(t.State.Stopped),this._playbackRate=1,this._startOffset=0,this.probability=e.probability,this.humanize=e.humanize,this.mute=e.mute,this.playbackRate=e.playbackRate},t.extend(t.Event),t.Event.defaults={callback:t.noOp,loop:!1,loopEnd:"1m",loopStart:0,playbackRate:1,value:null,probability:1,mute:!1,humanize:!1},t.Event.prototype._rescheduleEvents=function(e){return e=this.defaultArg(e,-1),this._state.forEachFrom(e,function(e){var i,s,n;e.state===t.State.Started&&(this.isUndef(e.id)||t.Transport.clear(e.id),s=e.time+Math.round(this.startOffset/this._playbackRate),this._loop?(i=1/0,this.isNumber(this._loop)&&(i=(this._loop-1)*this._getLoopDuration()),n=this._state.getEventAfter(s),null!==n&&(i=Math.min(i,n.time-s)),i!==1/0&&(this._state.setStateAtTime(t.State.Stopped,s+i+1),i+="i"),e.id=t.Transport.scheduleRepeat(this._tick.bind(this),this._getLoopDuration().toString()+"i",s+"i",i)):e.id=t.Transport.schedule(this._tick.bind(this),s+"i"))}.bind(this)),this},Object.defineProperty(t.Event.prototype,"state",{get:function(){return this._state.getStateAtTime(t.Transport.ticks)}}),Object.defineProperty(t.Event.prototype,"startOffset",{get:function(){return this._startOffset},set:function(t){this._startOffset=t}}),t.Event.prototype.start=function(e){return e=this.toTicks(e),this._state.getStateAtTime(e)===t.State.Stopped&&(this._state.addEvent({state:t.State.Started,time:e,id:void 0}),this._rescheduleEvents(e)),this},t.Event.prototype.stop=function(e){var i,s;return this.cancel(e),e=this.toTicks(e),this._state.getStateAtTime(e)===t.State.Started&&(this._state.setStateAtTime(t.State.Stopped,e),i=this._state.getEventBefore(e),s=e,null!==i&&(s=i.time),this._rescheduleEvents(s)),this},t.Event.prototype.cancel=function(e){return e=this.defaultArg(e,-(1/0)),e=this.toTicks(e),this._state.forEachFrom(e,function(e){t.Transport.clear(e.id)}),this._state.cancel(e),this},t.Event.prototype._tick=function(e){if(!this.mute&&this._state.getStateAtTime(t.Transport.ticks)===t.State.Started){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){var i=.02;this.isBoolean(this.humanize)||(i=this.toSeconds(this.humanize)),e+=(2*Math.random()-1)*i}this.callback(e,this.value)}},t.Event.prototype._getLoopDuration=function(){return Math.round((this._loopEnd-this._loopStart)/this._playbackRate)},Object.defineProperty(t.Event.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this._rescheduleEvents()}}),Object.defineProperty(t.Event.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._rescheduleEvents()}}),Object.defineProperty(t.Event.prototype,"loopEnd",{get:function(){return this.toNotation(this._loopEnd+"i")},set:function(t){this._loopEnd=this.toTicks(t),this._loop&&this._rescheduleEvents()}}),Object.defineProperty(t.Event.prototype,"loopStart",{get:function(){return this.toNotation(this._loopStart+"i")},set:function(t){this._loopStart=this.toTicks(t),this._loop&&this._rescheduleEvents()}}),Object.defineProperty(t.Event.prototype,"progress",{get:function(){var e,i,s,n;return this._loop?(e=t.Transport.ticks,i=this._state.getEvent(e),null!==i&&i.state===t.State.Started?(s=this._getLoopDuration(),n=(e-i.time)%s,n/s):0):0}}),t.Event.prototype.dispose=function(){this.cancel(),this._state.dispose(),this._state=null,this.callback=null,this.value=null},t.Event}),Module(function(t){return t.Loop=function(){var e=this.optionsObject(arguments,["callback","interval"],t.Loop.defaults);this._event=new t.Event({callback:this._tick.bind(this),loop:!0,loopEnd:e.interval,playbackRate:e.playbackRate,probability:e.probability}),this.callback=e.callback,this.iterations=e.iterations},t.extend(t.Loop),t.Loop.defaults={interval:"4n",callback:t.noOp,playbackRate:1,iterations:1/0,probability:!0,mute:!1},t.Loop.prototype.start=function(t){return this._event.start(t),this},t.Loop.prototype.stop=function(t){return this._event.stop(t),this},t.Loop.prototype.cancel=function(t){return this._event.cancel(t),this},t.Loop.prototype._tick=function(t){this.callback(t)},Object.defineProperty(t.Loop.prototype,"state",{get:function(){return this._event.state}}),Object.defineProperty(t.Loop.prototype,"progress",{get:function(){return this._event.progress}}),Object.defineProperty(t.Loop.prototype,"interval",{get:function(){return this._event.loopEnd},set:function(t){this._event.loopEnd=t}}),Object.defineProperty(t.Loop.prototype,"playbackRate",{get:function(){return this._event.playbackRate},set:function(t){this._event.playbackRate=t}}),Object.defineProperty(t.Loop.prototype,"humanize",{get:function(){return this._event.humanize},set:function(t){this._event.humanize=t}}),Object.defineProperty(t.Loop.prototype,"probability",{get:function(){return this._event.probability},set:function(t){this._event.probability=t}}),Object.defineProperty(t.Loop.prototype,"mute",{get:function(){return this._event.mute},set:function(t){this._event.mute=t}}),Object.defineProperty(t.Loop.prototype,"iterations",{get:function(){return this._event.loop===!0?1/0:this._event.loop},set:function(t){this._event.loop=t===1/0?!0:t}}),t.Loop.prototype.dispose=function(){this._event.dispose(),this._event=null,this.callback=null},t.Loop}),Module(function(t){return t.Part=function(){var e,i,s=this.optionsObject(arguments,["callback","events"],t.Part.defaults);if(this._loop=s.loop,this._loopStart=this.toTicks(s.loopStart),this._loopEnd=this.toTicks(s.loopEnd),this._playbackRate=s.playbackRate,this._probability=s.probability,this._humanize=s.humanize,this._startOffset=0,this._state=new t.TimelineState(t.State.Stopped),this._events=[],this.callback=s.callback,this.mute=s.mute,e=this.defaultArg(s.events,[]),!this.isUndef(s.events))for(i=0;i<e.length;i++)Array.isArray(e[i])?this.add(e[i][0],e[i][1]):this.add(e[i])},t.extend(t.Part,t.Event),t.Part.defaults={callback:t.noOp,loop:!1,loopEnd:"1m",loopStart:0,playbackRate:1,probability:1,humanize:!1,mute:!1},t.Part.prototype.start=function(e,i){var s=this.toTicks(e);return this._state.getStateAtTime(s)!==t.State.Started&&(i=this.defaultArg(i,0),i=this.toTicks(i),this._state.addEvent({state:t.State.Started,time:s,offset:i}),this._forEach(function(t){this._startNote(t,s,i)})),this},t.Part.prototype._startNote=function(t,e,i){e-=i,this._loop?t.startOffset>=this._loopStart&&t.startOffset<this._loopEnd&&(t.startOffset<i&&(e+=this._getLoopDuration()),t.start(e+"i")):t.startOffset>=i&&t.start(e+"i")},Object.defineProperty(t.Part.prototype,"startOffset",{get:function(){return this._startOffset},set:function(t){this._startOffset=t,this._forEach(function(t){t.startOffset+=this._startOffset})}}),t.Part.prototype.stop=function(e){var i=this.toTicks(e);return this._state.getStateAtTime(i)===t.State.Started&&(this._state.setStateAtTime(t.State.Stopped,i),this._forEach(function(t){t.stop(e)})),this},t.Part.prototype.at=function(t,e){var i,s,n;for(t=this.toTicks(t),i=this.ticksToSeconds(1),s=0;s<this._events.length;s++)if(n=this._events[s],Math.abs(t-n.startOffset)<i)return this.isUndef(e)||(n.value=e),n;return this.isUndef(e)?null:(this.add(t+"i",e),this._events[this._events.length-1])},t.Part.prototype.add=function(e,i){this.isObject(e)&&e.hasOwnProperty("time")&&(i=e,e=i.time,delete i.time),e=this.toTicks(e);var s;return i instanceof t.Event?(s=i,s.callback=this._tick.bind(this)):s=new t.Event({callback:this._tick.bind(this),value:i}),s.startOffset=e,s.set({loopEnd:this.loopEnd,loopStart:this.loopStart,loop:this.loop,humanize:this.humanize,playbackRate:this.playbackRate,probability:this.probability}),this._events.push(s),this._restartEvent(s),this},t.Part.prototype._restartEvent=function(e){var i=this._state.getEvent(this.now());i&&i.state===t.State.Started&&this._startNote(e,i.time,i.offset)},t.Part.prototype.remove=function(e,i){var s,n;for(this.isObject(e)&&e.hasOwnProperty("time")&&(i=e,e=i.time),e=this.toTicks(e),s=this._events.length-1;s>=0;s--)n=this._events[s],n instanceof t.Part?n.remove(e,i):n.startOffset===e&&(this.isUndef(i)||!this.isUndef(i)&&n.value===i)&&(this._events.splice(s,1),n.dispose());return this},t.Part.prototype.removeAll=function(){return this._forEach(function(t){t.dispose()}),this._events=[],this},t.Part.prototype.cancel=function(t){return this._forEach(function(e){e.cancel(t)}),this._state.cancel(t),this},t.Part.prototype._forEach=function(e,i){var s,n;for(i=this.defaultArg(i,this),s=this._events.length-1;s>=0;s--)n=this._events[s],n instanceof t.Part?n._forEach(e,i):e.call(i,n);return this},t.Part.prototype._setAll=function(t,e){this._forEach(function(i){i[t]=e})},t.Part.prototype._tick=function(t,e){this.mute||this.callback(t,e)},t.Part.prototype._testLoopBoundries=function(e){e.startOffset<this._loopStart||e.startOffset>=this._loopEnd?e.cancel():e.state===t.State.Stopped&&this._restartEvent(e)},Object.defineProperty(t.Part.prototype,"probability",{get:function(){return this._probability},set:function(t){this._probability=t,this._setAll("probability",t)}}),Object.defineProperty(t.Part.prototype,"humanize",{get:function(){return this._humanize},set:function(t){this._humanize=t,this._setAll("humanize",t)}}),Object.defineProperty(t.Part.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this._forEach(function(e){e._loopStart=this._loopStart,e._loopEnd=this._loopEnd,e.loop=t,this._testLoopBoundries(e)})}}),Object.defineProperty(t.Part.prototype,"loopEnd",{get:function(){return this.toNotation(this._loopEnd+"i")},set:function(t){this._loopEnd=this.toTicks(t),this._loop&&this._forEach(function(t){t.loopEnd=this.loopEnd,this._testLoopBoundries(t)})}}),Object.defineProperty(t.Part.prototype,"loopStart",{get:function(){return this.toNotation(this._loopStart+"i")},set:function(t){this._loopStart=this.toTicks(t),this._loop&&this._forEach(function(t){t.loopStart=this.loopStart,this._testLoopBoundries(t)})}}),Object.defineProperty(t.Part.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._setAll("playbackRate",t)}}),Object.defineProperty(t.Part.prototype,"length",{get:function(){return this._events.length}}),t.Part.prototype.dispose=function(){return this.removeAll(),this._state.dispose(),this._state=null,this.callback=null,this._events=null,this},t.Part}),Module(function(t){return t.Pattern=function(){var e=this.optionsObject(arguments,["callback","events","pattern"],t.Pattern.defaults);t.Loop.call(this,e),this._pattern=new t.CtrlPattern({values:e.events,type:e.pattern,index:e.index})},t.extend(t.Pattern,t.Loop),t.Pattern.defaults={pattern:t.CtrlPattern.Type.Up,events:[]},t.Pattern.prototype._tick=function(t){this.callback(t,this._pattern.value),this._pattern.next()},Object.defineProperty(t.Pattern.prototype,"index",{get:function(){return this._pattern.index},set:function(t){this._pattern.index=t}}),Object.defineProperty(t.Pattern.prototype,"events",{get:function(){return this._pattern.values},set:function(t){this._pattern.values=t}}),Object.defineProperty(t.Pattern.prototype,"value",{get:function(){return this._pattern.value}}),Object.defineProperty(t.Pattern.prototype,"pattern",{get:function(){return this._pattern.type},set:function(t){this._pattern.type=t}}),t.Pattern.prototype.dispose=function(){t.Loop.prototype.dispose.call(this),this._pattern.dispose(),this._pattern=null},t.Pattern}),Module(function(t){return t.Sequence=function(){var e,i=this.optionsObject(arguments,["callback","events","subdivision"],t.Sequence.defaults),s=i.events;if(delete i.events,t.Part.call(this,i),this._subdivision=this.toTicks(i.subdivision),this.isUndef(i.loopEnd)&&!this.isUndef(s)&&(this._loopEnd=s.length*this._subdivision),this._loop=!0,!this.isUndef(s))for(e=0;e<s.length;e++)this.add(e,s[e])},t.extend(t.Sequence,t.Part),t.Sequence.defaults={subdivision:"4n"},Object.defineProperty(t.Sequence.prototype,"subdivision",{get:function(){return this.toNotation(this._subdivision+"i")}}),t.Sequence.prototype.at=function(e,i){return this.isArray(i)&&this.remove(e),t.Part.prototype.at.call(this,this._indexTime(e),i)},t.Sequence.prototype.add=function(e,i){if(null===i)return this;if(this.isArray(i)){var s=Math.round(this._subdivision/i.length)+"i";i=new t.Sequence(this._tick.bind(this),i,s)}return t.Part.prototype.add.call(this,this._indexTime(e),i),this},t.Sequence.prototype.remove=function(e,i){return t.Part.prototype.remove.call(this,this._indexTime(e),i),this},t.Sequence.prototype._indexTime=function(t){return this.isTicks(t)?t:t*this._subdivision+this.startOffset+"i"},t.Sequence.prototype.dispose=function(){return t.Part.prototype.dispose.call(this),this},t.Sequence}),Module(function(t){return t.PulseOscillator=function(){var e=this.optionsObject(arguments,["frequency","width"],t.Oscillator.defaults);t.Source.call(this,e),this.width=new t.Signal(e.width,t.Type.NormalRange),this._widthGate=this.context.createGain(),this._sawtooth=new t.Oscillator({frequency:e.frequency,detune:e.detune,type:"sawtooth",phase:e.phase}),this.frequency=this._sawtooth.frequency,this.detune=this._sawtooth.detune,this._thresh=new t.WaveShaper(function(t){return 0>t?-1:1}),this._sawtooth.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),this._readOnly(["width","frequency","detune"])},t.extend(t.PulseOscillator,t.Oscillator),t.PulseOscillator.defaults={frequency:440,detune:0,phase:0,width:.2},t.PulseOscillator.prototype._start=function(t){t=this.toSeconds(t),this._sawtooth.start(t),this._widthGate.gain.setValueAtTime(1,t)},t.PulseOscillator.prototype._stop=function(t){t=this.toSeconds(t),this._sawtooth.stop(t),this._widthGate.gain.setValueAtTime(0,t)},Object.defineProperty(t.PulseOscillator.prototype,"phase",{get:function(){return this._sawtooth.phase},set:function(t){this._sawtooth.phase=t}}),Object.defineProperty(t.PulseOscillator.prototype,"type",{get:function(){return"pulse"}}),Object.defineProperty(t.PulseOscillator.prototype,"partials",{get:function(){return[]}}),t.PulseOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._sawtooth.dispose(),this._sawtooth=null,this._writable(["width","frequency","detune"]),this.width.dispose(),this.width=null,this._widthGate.disconnect(),this._widthGate=null,this._widthGate=null,this._thresh.disconnect(),this._thresh=null,this.frequency=null,this.detune=null,this},t.PulseOscillator}),Module(function(t){return t.PWMOscillator=function(){var e=this.optionsObject(arguments,["frequency","modulationFrequency"],t.PWMOscillator.defaults);t.Source.call(this,e),this._pulse=new t.PulseOscillator(e.modulationFrequency),this._pulse._sawtooth.type="sine",this._modulator=new t.Oscillator({frequency:e.frequency,detune:e.detune,phase:e.phase}),this._scale=new t.Multiply(1.01),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this.modulationFrequency=this._pulse.frequency,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),this._readOnly(["modulationFrequency","frequency","detune"])},t.extend(t.PWMOscillator,t.Oscillator),t.PWMOscillator.defaults={frequency:440,detune:0,phase:0,modulationFrequency:.4},t.PWMOscillator.prototype._start=function(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)},t.PWMOscillator.prototype._stop=function(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)},Object.defineProperty(t.PWMOscillator.prototype,"type",{get:function(){return"pwm"}}),Object.defineProperty(t.PWMOscillator.prototype,"partials",{get:function(){return[]}}),Object.defineProperty(t.PWMOscillator.prototype,"phase",{get:function(){return this._modulator.phase},set:function(t){this._modulator.phase=t}}),t.PWMOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._pulse.dispose(),this._pulse=null,this._scale.dispose(),this._scale=null,this._modulator.dispose(),this._modulator=null,this._writable(["modulationFrequency","frequency","detune"]),this.frequency=null,this.detune=null,this.modulationFrequency=null,this},t.PWMOscillator}),Module(function(t){t.OmniOscillator=function(){var e=this.optionsObject(arguments,["frequency","type"],t.OmniOscillator.defaults);t.Source.call(this,e),this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.detune=new t.Signal(e.detune,t.Type.Cents),this._sourceType=void 0,this._oscillator=null,this.type=e.type,this.phase=e.phase,this._readOnly(["frequency","detune"]),this.isArray(e.partials)&&(this.partials=e.partials)},t.extend(t.OmniOscillator,t.Oscillator),t.OmniOscillator.defaults={frequency:440,detune:0,type:"sine",phase:0,width:.4,modulationFrequency:.4};var e={PulseOscillator:"PulseOscillator",PWMOscillator:"PWMOscillator",Oscillator:"Oscillator"};return t.OmniOscillator.prototype._start=function(t){this._oscillator.start(t)},t.OmniOscillator.prototype._stop=function(t){this._oscillator.stop(t)},Object.defineProperty(t.OmniOscillator.prototype,"type",{get:function(){return this._oscillator.type},set:function(i){if(0===i.indexOf("sine")||0===i.indexOf("square")||0===i.indexOf("triangle")||0===i.indexOf("sawtooth")||i===t.Oscillator.Type.Custom)this._sourceType!==e.Oscillator&&(this._sourceType=e.Oscillator,this._createNewOscillator(t.Oscillator)),this._oscillator.type=i;else if("pwm"===i)this._sourceType!==e.PWMOscillator&&(this._sourceType=e.PWMOscillator,this._createNewOscillator(t.PWMOscillator));else{if("pulse"!==i)throw new Error("Tone.OmniOscillator does not support type "+i);this._sourceType!==e.PulseOscillator&&(this._sourceType=e.PulseOscillator,this._createNewOscillator(t.PulseOscillator))}}}),Object.defineProperty(t.OmniOscillator.prototype,"partials",{get:function(){return this._oscillator.partials},set:function(i){this._sourceType!==e.Oscillator&&(this.type=t.Oscillator.Type.Custom),this._oscillator.partials=i}}),t.OmniOscillator.prototype._createNewOscillator=function(e){var i,s=this.now()+this.blockTime;null!==this._oscillator&&(i=this._oscillator,i.stop(s),setTimeout(function(){i.dispose(),i=null},1e3*this.blockTime)),this._oscillator=new e,this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this.state===t.State.Started&&this._oscillator.start(s)},Object.defineProperty(t.OmniOscillator.prototype,"phase",{get:function(){return this._oscillator.phase},set:function(t){this._oscillator.phase=t}}),Object.defineProperty(t.OmniOscillator.prototype,"width",{get:function(){return this._sourceType===e.PulseOscillator?this._oscillator.width:void 0}}),Object.defineProperty(t.OmniOscillator.prototype,"modulationFrequency",{get:function(){return this._sourceType===e.PWMOscillator?this._oscillator.modulationFrequency:void 0}}),t.OmniOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),
this._writable(["frequency","detune"]),this.detune.dispose(),this.detune=null,this.frequency.dispose(),this.frequency=null,this._oscillator.dispose(),this._oscillator=null,this._sourceType=null,this},t.OmniOscillator}),Module(function(t){return t.Instrument=function(e){e=this.defaultArg(e,t.Instrument.defaults),this._volume=this.output=new t.Volume(e.volume),this.volume=this._volume.volume,this._readOnly("volume")},t.extend(t.Instrument),t.Instrument.defaults={volume:0},t.Instrument.prototype.triggerAttack=t.noOp,t.Instrument.prototype.triggerRelease=t.noOp,t.Instrument.prototype.triggerAttackRelease=function(t,e,i,s){return i=this.toSeconds(i),e=this.toSeconds(e),this.triggerAttack(t,i,s),this.triggerRelease(i+e),this},t.Instrument.prototype.dispose=function(){return t.prototype.dispose.call(this),this._volume.dispose(),this._volume=null,this._writable(["volume"]),this.volume=null,this},t.Instrument}),Module(function(t){return t.Monophonic=function(e){e=this.defaultArg(e,t.Monophonic.defaults),t.Instrument.call(this,e),this.portamento=e.portamento},t.extend(t.Monophonic,t.Instrument),t.Monophonic.defaults={portamento:0},t.Monophonic.prototype.triggerAttack=function(t,e,i){return e=this.toSeconds(e),this._triggerEnvelopeAttack(e,i),this.setNote(t,e),this},t.Monophonic.prototype.triggerRelease=function(t){return this._triggerEnvelopeRelease(t),this},t.Monophonic.prototype._triggerEnvelopeAttack=function(){},t.Monophonic.prototype._triggerEnvelopeRelease=function(){},t.Monophonic.prototype.setNote=function(t,e){var i,s;return e=this.toSeconds(e),this.portamento>0?(i=this.frequency.value,this.frequency.setValueAtTime(i,e),s=this.toSeconds(this.portamento),this.frequency.exponentialRampToValueAtTime(t,e+s)):this.frequency.setValueAtTime(t,e),this},t.Monophonic}),Module(function(t){return t.MonoSynth=function(e){e=this.defaultArg(e,t.MonoSynth.defaults),t.Monophonic.call(this,e),this.oscillator=new t.OmniOscillator(e.oscillator),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new t.Filter(e.filter),this.filterEnvelope=new t.FrequencyEnvelope(e.filterEnvelope),this.envelope=new t.AmplitudeEnvelope(e.envelope),this.oscillator.chain(this.filter,this.envelope,this.output),this.oscillator.start(),this.filterEnvelope.connect(this.filter.frequency),this._readOnly(["oscillator","frequency","detune","filter","filterEnvelope","envelope"])},t.extend(t.MonoSynth,t.Monophonic),t.MonoSynth.defaults={frequency:"C4",detune:0,oscillator:{type:"square"},filter:{Q:6,type:"lowpass",rolloff:-24},envelope:{attack:.005,decay:.1,sustain:.9,release:1},filterEnvelope:{attack:.06,decay:.2,sustain:.5,release:2,baseFrequency:200,octaves:7,exponent:2}},t.MonoSynth.prototype._triggerEnvelopeAttack=function(t,e){return this.envelope.triggerAttack(t,e),this.filterEnvelope.triggerAttack(t),this},t.MonoSynth.prototype._triggerEnvelopeRelease=function(t){return this.envelope.triggerRelease(t),this.filterEnvelope.triggerRelease(t),this},t.MonoSynth.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable(["oscillator","frequency","detune","filter","filterEnvelope","envelope"]),this.oscillator.dispose(),this.oscillator=null,this.envelope.dispose(),this.envelope=null,this.filterEnvelope.dispose(),this.filterEnvelope=null,this.filter.dispose(),this.filter=null,this.frequency=null,this.detune=null,this},t.MonoSynth}),Module(function(t){return t.AMSynth=function(e){e=this.defaultArg(e,t.AMSynth.defaults),t.Monophonic.call(this,e),this.carrier=new t.MonoSynth(e.carrier),this.carrier.volume.value=-10,this.modulator=new t.MonoSynth(e.modulator),this.modulator.volume.value=-10,this.frequency=new t.Signal(440,t.Type.Frequency),this.harmonicity=new t.Multiply(e.harmonicity),this.harmonicity.units=t.Type.Positive,this._modulationScale=new t.AudioToGain,this._modulationNode=this.context.createGain(),this.frequency.connect(this.carrier.frequency),this.frequency.chain(this.harmonicity,this.modulator.frequency),this.modulator.chain(this._modulationScale,this._modulationNode.gain),this.carrier.chain(this._modulationNode,this.output),this._readOnly(["carrier","modulator","frequency","harmonicity"])},t.extend(t.AMSynth,t.Monophonic),t.AMSynth.defaults={harmonicity:3,carrier:{volume:-10,oscillator:{type:"sine"},envelope:{attack:.01,decay:.01,sustain:1,release:.5},filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5,baseFrequency:2e4,octaves:0},filter:{Q:6,type:"lowpass",rolloff:-24}},modulator:{volume:-10,oscillator:{type:"square"},envelope:{attack:2,decay:0,sustain:1,release:.5},filterEnvelope:{attack:4,decay:.2,sustain:.5,release:.5,baseFrequency:20,octaves:6},filter:{Q:6,type:"lowpass",rolloff:-24}}},t.AMSynth.prototype._triggerEnvelopeAttack=function(t,e){return t=this.toSeconds(t),this.carrier.envelope.triggerAttack(t,e),this.modulator.envelope.triggerAttack(t),this.carrier.filterEnvelope.triggerAttack(t),this.modulator.filterEnvelope.triggerAttack(t),this},t.AMSynth.prototype._triggerEnvelopeRelease=function(t){return this.carrier.triggerRelease(t),this.modulator.triggerRelease(t),this},t.AMSynth.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable(["carrier","modulator","frequency","harmonicity"]),this.carrier.dispose(),this.carrier=null,this.modulator.dispose(),this.modulator=null,this.frequency.dispose(),this.frequency=null,this.harmonicity.dispose(),this.harmonicity=null,this._modulationScale.dispose(),this._modulationScale=null,this._modulationNode.disconnect(),this._modulationNode=null,this},t.AMSynth}),Module(function(t){return t.DrumSynth=function(e){e=this.defaultArg(e,t.DrumSynth.defaults),t.Instrument.call(this,e),this.oscillator=new t.Oscillator(e.oscillator).start(),this.envelope=new t.AmplitudeEnvelope(e.envelope),this.octaves=e.octaves,this.pitchDecay=e.pitchDecay,this.oscillator.chain(this.envelope,this.output),this._readOnly(["oscillator","envelope"])},t.extend(t.DrumSynth,t.Instrument),t.DrumSynth.defaults={pitchDecay:.05,octaves:10,oscillator:{type:"sine"},envelope:{attack:.001,decay:.4,sustain:.01,release:1.4,attackCurve:"exponential"}},t.DrumSynth.prototype.triggerAttack=function(t,e,i){e=this.toSeconds(e),t=this.toFrequency(t);var s=t*this.octaves;return this.oscillator.frequency.setValueAtTime(s,e),this.oscillator.frequency.exponentialRampToValueAtTime(t,e+this.toSeconds(this.pitchDecay)),this.envelope.triggerAttack(e,i),this},t.DrumSynth.prototype.triggerRelease=function(t){return this.envelope.triggerRelease(t),this},t.DrumSynth.prototype.dispose=function(){return t.Instrument.prototype.dispose.call(this),this._writable(["oscillator","envelope"]),this.oscillator.dispose(),this.oscillator=null,this.envelope.dispose(),this.envelope=null,this},t.DrumSynth}),Module(function(t){return t.DuoSynth=function(e){e=this.defaultArg(e,t.DuoSynth.defaults),t.Monophonic.call(this,e),this.voice0=new t.MonoSynth(e.voice0),this.voice0.volume.value=-10,this.voice1=new t.MonoSynth(e.voice1),this.voice1.volume.value=-10,this._vibrato=new t.LFO(e.vibratoRate,-50,50),this._vibrato.start(),this.vibratoRate=this._vibrato.frequency,this._vibratoGain=this.context.createGain(),this.vibratoAmount=new t.Param({param:this._vibratoGain.gain,units:t.Type.Positive,value:e.vibratoAmount}),this._vibratoDelay=this.toSeconds(e.vibratoDelay),this.frequency=new t.Signal(440,t.Type.Frequency),this.harmonicity=new t.Multiply(e.harmonicity),this.harmonicity.units=t.Type.Positive,this.frequency.connect(this.voice0.frequency),this.frequency.chain(this.harmonicity,this.voice1.frequency),this._vibrato.connect(this._vibratoGain),this._vibratoGain.fan(this.voice0.detune,this.voice1.detune),this.voice0.connect(this.output),this.voice1.connect(this.output),this._readOnly(["voice0","voice1","frequency","vibratoAmount","vibratoRate"])},t.extend(t.DuoSynth,t.Monophonic),t.DuoSynth.defaults={vibratoAmount:.5,vibratoRate:5,vibratoDelay:1,harmonicity:1.5,voice0:{volume:-10,portamento:0,oscillator:{type:"sine"},filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}},voice1:{volume:-10,portamento:0,oscillator:{type:"sine"},filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}}},t.DuoSynth.prototype._triggerEnvelopeAttack=function(t,e){return t=this.toSeconds(t),this.voice0.envelope.triggerAttack(t,e),this.voice1.envelope.triggerAttack(t,e),this.voice0.filterEnvelope.triggerAttack(t),this.voice1.filterEnvelope.triggerAttack(t),this},t.DuoSynth.prototype._triggerEnvelopeRelease=function(t){return this.voice0.triggerRelease(t),this.voice1.triggerRelease(t),this},t.DuoSynth.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable(["voice0","voice1","frequency","vibratoAmount","vibratoRate"]),this.voice0.dispose(),this.voice0=null,this.voice1.dispose(),this.voice1=null,this.frequency.dispose(),this.frequency=null,this._vibrato.dispose(),this._vibrato=null,this._vibratoGain.disconnect(),this._vibratoGain=null,this.harmonicity.dispose(),this.harmonicity=null,this.vibratoAmount.dispose(),this.vibratoAmount=null,this.vibratoRate=null,this},t.DuoSynth}),Module(function(t){return t.FMSynth=function(e){e=this.defaultArg(e,t.FMSynth.defaults),t.Monophonic.call(this,e),this.carrier=new t.MonoSynth(e.carrier),this.carrier.volume.value=-10,this.modulator=new t.MonoSynth(e.modulator),this.modulator.volume.value=-10,this.frequency=new t.Signal(440,t.Type.Frequency),this.harmonicity=new t.Multiply(e.harmonicity),this.harmonicity.units=t.Type.Positive,this.modulationIndex=new t.Multiply(e.modulationIndex),this.modulationIndex.units=t.Type.Positive,this._modulationNode=this.context.createGain(),this.frequency.connect(this.carrier.frequency),this.frequency.chain(this.harmonicity,this.modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this.modulator.connect(this._modulationNode.gain),this._modulationNode.gain.value=0,this._modulationNode.connect(this.carrier.frequency),this.carrier.connect(this.output),this._readOnly(["carrier","modulator","frequency","harmonicity","modulationIndex"])},t.extend(t.FMSynth,t.Monophonic),t.FMSynth.defaults={harmonicity:3,modulationIndex:10,carrier:{volume:-10,portamento:0,oscillator:{type:"sine"},envelope:{attack:.01,decay:0,sustain:1,release:.5},filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5,baseFrequency:200,octaves:8}},modulator:{volume:-10,portamento:0,oscillator:{type:"triangle"},envelope:{attack:.01,decay:0,sustain:1,release:.5},filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5,baseFrequency:600,octaves:5}}},t.FMSynth.prototype._triggerEnvelopeAttack=function(t,e){return t=this.toSeconds(t),this.carrier.envelope.triggerAttack(t,e),this.modulator.envelope.triggerAttack(t),this.carrier.filterEnvelope.triggerAttack(t),this.modulator.filterEnvelope.triggerAttack(t),this},t.FMSynth.prototype._triggerEnvelopeRelease=function(t){return this.carrier.triggerRelease(t),this.modulator.triggerRelease(t),this},t.FMSynth.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable(["carrier","modulator","frequency","harmonicity","modulationIndex"]),this.carrier.dispose(),this.carrier=null,this.modulator.dispose(),this.modulator=null,this.frequency.dispose(),this.frequency=null,this.modulationIndex.dispose(),this.modulationIndex=null,this.harmonicity.dispose(),this.harmonicity=null,this._modulationNode.disconnect(),this._modulationNode=null,this},t.FMSynth}),Module(function(t){t.Noise=function(){var e=this.optionsObject(arguments,["type"],t.Noise.defaults);t.Source.call(this,e),this._source=null,this._buffer=null,this._playbackRate=e.playbackRate,this.type=e.type},t.extend(t.Noise,t.Source),t.Noise.defaults={type:"white",playbackRate:1},Object.defineProperty(t.Noise.prototype,"type",{get:function(){return this._buffer===s?"white":this._buffer===i?"brown":this._buffer===e?"pink":void 0},set:function(n){if(this.type!==n){switch(n){case"white":this._buffer=s;break;case"pink":this._buffer=e;break;case"brown":this._buffer=i;break;default:throw new Error("invalid noise type: "+n)}if(this.state===t.State.Started){var o=this.now()+this.blockTime;this._stop(o),this._start(o)}}}}),Object.defineProperty(t.Noise.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._source&&(this._source.playbackRate.value=t)}}),t.Noise.prototype._start=function(t){this._source=this.context.createBufferSource(),this._source.buffer=this._buffer,this._source.loop=!0,this._source.playbackRate.value=this._playbackRate,this._source.connect(this.output),this._source.start(this.toSeconds(t))},t.Noise.prototype._stop=function(t){this._source&&this._source.stop(this.toSeconds(t))},t.Noise.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),null!==this._source&&(this._source.disconnect(),this._source=null),this._buffer=null,this};var e=null,i=null,s=null;return t._initAudioContext(function(t){var n=t.sampleRate,o=4*n;e=function(){var e,i,s,r,a,l,h,u,c,p,f,d=t.createBuffer(2,o,n);for(e=0;e<d.numberOfChannels;e++)for(i=d.getChannelData(e),s=r=a=l=h=u=c=0,p=0;o>p;p++)f=2*Math.random()-1,s=.99886*s+.0555179*f,r=.99332*r+.0750759*f,a=.969*a+.153852*f,l=.8665*l+.3104856*f,h=.55*h+.5329522*f,u=-.7616*u-.016898*f,i[p]=s+r+a+l+h+u+c+.5362*f,i[p]*=.11,c=.115926*f;return d}(),i=function(){var e,i,s,r,a,l=t.createBuffer(2,o,n);for(e=0;e<l.numberOfChannels;e++)for(i=l.getChannelData(e),s=0,r=0;o>r;r++)a=2*Math.random()-1,i[r]=(s+.02*a)/1.02,s=i[r],i[r]*=3.5;return l}(),s=function(){var e,i,s,r=t.createBuffer(2,o,n);for(e=0;e<r.numberOfChannels;e++)for(i=r.getChannelData(e),s=0;o>s;s++)i[s]=2*Math.random()-1;return r}()}),t.Noise}),Module(function(t){return t.NoiseSynth=function(e){e=this.defaultArg(e,t.NoiseSynth.defaults),t.Instrument.call(this,e),this.noise=new t.Noise,this.filter=new t.Filter(e.filter),this.filterEnvelope=new t.FrequencyEnvelope(e.filterEnvelope),this.envelope=new t.AmplitudeEnvelope(e.envelope),this.noise.chain(this.filter,this.envelope,this.output),this.noise.start(),this.filterEnvelope.connect(this.filter.frequency),this._readOnly(["noise","filter","filterEnvelope","envelope"])},t.extend(t.NoiseSynth,t.Instrument),t.NoiseSynth.defaults={noise:{type:"white"},filter:{Q:6,type:"highpass",rolloff:-24},envelope:{attack:.005,decay:.1,sustain:0},filterEnvelope:{attack:.06,decay:.2,sustain:0,release:2,baseFrequency:20,octaves:5}},t.NoiseSynth.prototype.triggerAttack=function(t,e){return this.envelope.triggerAttack(t,e),this.filterEnvelope.triggerAttack(t),this},t.NoiseSynth.prototype.triggerRelease=function(t){return this.envelope.triggerRelease(t),this.filterEnvelope.triggerRelease(t),this},t.NoiseSynth.prototype.triggerAttackRelease=function(t,e,i){return e=this.toSeconds(e),t=this.toSeconds(t),this.triggerAttack(e,i),this.triggerRelease(e+t),this},t.NoiseSynth.prototype.dispose=function(){return t.Instrument.prototype.dispose.call(this),this._writable(["noise","filter","filterEnvelope","envelope"]),this.noise.dispose(),this.noise=null,this.envelope.dispose(),this.envelope=null,this.filterEnvelope.dispose(),this.filterEnvelope=null,this.filter.dispose(),this.filter=null,this},t.NoiseSynth}),Module(function(t){return t.PluckSynth=function(e){e=this.defaultArg(e,t.PluckSynth.defaults),t.Instrument.call(this,e),this._noise=new t.Noise("pink"),this.attackNoise=1,this._lfcf=new t.LowpassCombFilter({resonance:e.resonance,dampening:e.dampening}),this.resonance=this._lfcf.resonance,this.dampening=this._lfcf.dampening,this._noise.connect(this._lfcf),this._lfcf.connect(this.output),this._readOnly(["resonance","dampening"])},t.extend(t.PluckSynth,t.Instrument),t.PluckSynth.defaults={attackNoise:1,dampening:4e3,resonance:.9},t.PluckSynth.prototype.triggerAttack=function(t,e){t=this.toFrequency(t),e=this.toSeconds(e);var i=1/t;return this._lfcf.delayTime.setValueAtTime(i,e),this._noise.start(e),this._noise.stop(e+i*this.attackNoise),this},t.PluckSynth.prototype.dispose=function(){return t.Instrument.prototype.dispose.call(this),this._noise.dispose(),this._lfcf.dispose(),this._noise=null,this._lfcf=null,this._writable(["resonance","dampening"]),this.dampening=null,this.resonance=null,this},t.PluckSynth}),Module(function(t){return t.PolySynth=function(){var e,i,s;for(t.Instrument.call(this),e=this.optionsObject(arguments,["polyphony","voice"],t.PolySynth.defaults),this.voices=new Array(e.polyphony),this.stealVoices=!0,this._freeVoices=[],this._activeVoices={},i=0;i<e.polyphony;i++)s=new e.voice(arguments[2],arguments[3]),this.voices[i]=s,s.connect(this.output);this._freeVoices=this.voices.slice(0)},t.extend(t.PolySynth,t.Instrument),t.PolySynth.defaults={polyphony:4,voice:t.MonoSynth},t.PolySynth.prototype.triggerAttack=function(t,e,i){var s,n,o,r,a;for(Array.isArray(t)||(t=[t]),s=0;s<t.length;s++)if(n=t[s],o=JSON.stringify(n),this._activeVoices.hasOwnProperty(o))this._activeVoices[o].triggerAttack(n,e,i);else if(this._freeVoices.length>0)r=this._freeVoices.shift(),r.triggerAttack(n,e,i),this._activeVoices[o]=r;else if(this.stealVoices)for(a in this._activeVoices){this._activeVoices[a].triggerAttack(n,e,i);break}return this},t.PolySynth.prototype.triggerAttackRelease=function(t,e,i,s){return i=this.toSeconds(i),this.triggerAttack(t,i,s),this.triggerRelease(t,i+this.toSeconds(e)),this},t.PolySynth.prototype.triggerRelease=function(t,e){var i,s,n;for(Array.isArray(t)||(t=[t]),i=0;i<t.length;i++)s=JSON.stringify(t[i]),n=this._activeVoices[s],n&&(n.triggerRelease(e),this._freeVoices.push(n),delete this._activeVoices[s],n=null);return this},t.PolySynth.prototype.set=function(t,e,i){for(var s=0;s<this.voices.length;s++)this.voices[s].set(t,e,i);return this},t.PolySynth.prototype.get=function(t){return this.voices[0].get(t)},t.PolySynth.prototype.releaseAll=function(t){for(var e=0;e<this.voices.length;e++)this.voices[e].triggerRelease(t);return this},t.PolySynth.prototype.dispose=function(){t.Instrument.prototype.dispose.call(this);for(var e=0;e<this.voices.length;e++)this.voices[e].dispose(),this.voices[e]=null;return this.voices=null,this._activeVoices=null,this._freeVoices=null,this},t.PolySynth}),Module(function(t){return t.Player=function(e){var i;e instanceof t.Buffer?(e=e.get(),i=t.Player.defaults):i=this.optionsObject(arguments,["url","onload"],t.Player.defaults),t.Source.call(this,i),this._source=null,this.autostart=i.autostart,this._buffer=new t.Buffer({url:i.url,onload:this._onload.bind(this,i.onload),reverse:i.reverse}),e instanceof AudioBuffer&&this._buffer.set(e),this._loop=i.loop,this._loopStart=i.loopStart,this._loopEnd=i.loopEnd,this._playbackRate=i.playbackRate,this.retrigger=i.retrigger},t.extend(t.Player,t.Source),t.Player.defaults={onload:t.noOp,playbackRate:1,loop:!1,autostart:!1,loopStart:0,loopEnd:0,retrigger:!1,reverse:!1},t.Player.prototype.load=function(t,e){return this._buffer.load(t,this._onload.bind(this,e)),this},t.Player.prototype._onload=function(t){t(this),this.autostart&&this.start()},t.Player.prototype._start=function(e,i,s){if(!this._buffer.loaded)throw Error("tried to start Player before the buffer was loaded");return i=this._loop?this.defaultArg(i,this._loopStart):this.defaultArg(i,0),i=this.toSeconds(i),s=this.defaultArg(s,this._buffer.duration-i),e=this.toSeconds(e),s=this.toSeconds(s),this._source=this.context.createBufferSource(),this._source.buffer=this._buffer.get(),this._loop?(this._source.loop=this._loop,this._source.loopStart=this.toSeconds(this._loopStart),this._source.loopEnd=this.toSeconds(this._loopEnd)):this._state.setStateAtTime(t.State.Stopped,e+s),this._source.playbackRate.value=this._playbackRate,this._source.connect(this.output),this._loop?this._source.start(e,i):this._source.start(e,i,s),this},t.Player.prototype._stop=function(t){return this._source&&(this._source.stop(this.toSeconds(t)),this._source=null),this},t.Player.prototype.setLoopPoints=function(t,e){return this.loopStart=t,this.loopEnd=e,this},Object.defineProperty(t.Player.prototype,"loopStart",{get:function(){return this._loopStart},set:function(t){this._loopStart=t,this._source&&(this._source.loopStart=this.toSeconds(t))}}),Object.defineProperty(t.Player.prototype,"loopEnd",{get:function(){return this._loopEnd},set:function(t){this._loopEnd=t,this._source&&(this._source.loopEnd=this.toSeconds(t))}}),Object.defineProperty(t.Player.prototype,"buffer",{get:function(){return this._buffer},set:function(t){this._buffer.set(t)}}),Object.defineProperty(t.Player.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this._source&&(this._source.loop=t)}}),Object.defineProperty(t.Player.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._source&&(this._source.playbackRate.value=t)}}),Object.defineProperty(t.Player.prototype,"reverse",{get:function(){return this._buffer.reverse},set:function(t){this._buffer.reverse=t}}),t.Player.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),null!==this._source&&(this._source.disconnect(),this._source=null),this._buffer.dispose(),this._buffer=null,this},t.Player}),Module(function(t){return t.Sampler=function(e,i){i=this.defaultArg(i,t.Sampler.defaults),t.Instrument.call(this,i),this.player=new t.Player(i.player),this.player.retrigger=!0,this._buffers={},this.envelope=new t.AmplitudeEnvelope(i.envelope),this.filterEnvelope=new t.FrequencyEnvelope(i.filterEnvelope),this._sample=i.sample,this._pitch=i.pitch,this.filter=new t.Filter(i.filter),this._loadBuffers(e),this.pitch=i.pitch,this.player.chain(this.filter,this.envelope,this.output),this.filterEnvelope.connect(this.filter.frequency),this._readOnly(["player","filterEnvelope","envelope","filter"])},t.extend(t.Sampler,t.Instrument),t.Sampler.defaults={sample:0,pitch:0,player:{loop:!1},envelope:{attack:.001,decay:0,sustain:1,release:.1},filterEnvelope:{attack:.001,decay:.001,sustain:1,release:.5,baseFrequency:20,octaves:10},filter:{type:"lowpass"}},t.Sampler.prototype._loadBuffers=function(e){var i,s;if(this.isString(e))this._buffers[0]=new t.Buffer(e,function(){this.sample="0"}.bind(this));else{e=this._flattenUrls(e);for(i in e)this._sample=i,s=e[i],this._buffers[i]=new t.Buffer(s)}},t.Sampler.prototype._flattenUrls=function(t){var e,i,s,n={};for(e in t)if(t.hasOwnProperty(e))if(this.isObject(t[e])){i=this._flattenUrls(t[e]);for(s in i)i.hasOwnProperty(s)&&(n[e+"."+s]=i[s])}else n[e]=t[e];return n},t.Sampler.prototype.triggerAttack=function(t,e,i){return e=this.toSeconds(e),t&&(this.sample=t),this.player.start(e),this.envelope.triggerAttack(e,i),this.filterEnvelope.triggerAttack(e),this},t.Sampler.prototype.triggerRelease=function(t){return t=this.toSeconds(t),this.filterEnvelope.triggerRelease(t),this.envelope.triggerRelease(t),this.player.stop(this.toSeconds(this.envelope.release)+t),this},Object.defineProperty(t.Sampler.prototype,"sample",{get:function(){return this._sample},set:function(t){if(!this._buffers.hasOwnProperty(t))throw new Error("Sampler does not have a sample named "+t);this._sample=t,this.player.buffer=this._buffers[t]}}),Object.defineProperty(t.Sampler.prototype,"reverse",{get:function(){for(var t in this._buffers)return this._buffers[t].reverse},set:function(t){for(var e in this._buffers)this._buffers[e].reverse=t}}),Object.defineProperty(t.Sampler.prototype,"pitch",{get:function(){return this._pitch},set:function(t){this._pitch=t,this.player.playbackRate=this.intervalToFrequencyRatio(t)}}),t.Sampler.prototype.dispose=function(){t.Instrument.prototype.dispose.call(this),this._writable(["player","filterEnvelope","envelope","filter"]),this.player.dispose(),this.filterEnvelope.dispose(),this.envelope.dispose(),this.filter.dispose(),this.player=null,this.filterEnvelope=null,this.envelope=null,this.filter=null;for(var e in this._buffers)this._buffers[e].dispose(),this._buffers[e]=null;return this._buffers=null,this},t.Sampler}),Module(function(t){return t.SimpleSynth=function(e){e=this.defaultArg(e,t.SimpleSynth.defaults),t.Monophonic.call(this,e),this.oscillator=new t.OmniOscillator(e.oscillator),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new t.AmplitudeEnvelope(e.envelope),this.oscillator.chain(this.envelope,this.output),this.oscillator.start(),this._readOnly(["oscillator","frequency","detune","envelope"])},t.extend(t.SimpleSynth,t.Monophonic),t.SimpleSynth.defaults={oscillator:{type:"triangle"},envelope:{attack:.005,decay:.1,sustain:.3,release:1}},t.SimpleSynth.prototype._triggerEnvelopeAttack=function(t,e){return this.envelope.triggerAttack(t,e),this},t.SimpleSynth.prototype._triggerEnvelopeRelease=function(t){return this.envelope.triggerRelease(t),this},t.SimpleSynth.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable(["oscillator","frequency","detune","envelope"]),this.oscillator.dispose(),this.oscillator=null,this.envelope.dispose(),this.envelope=null,this.frequency=null,this.detune=null,this},t.SimpleSynth}),Module(function(t){return t.SimpleAM=function(e){e=this.defaultArg(e,t.SimpleAM.defaults),t.Monophonic.call(this,e),this.carrier=new t.SimpleSynth(e.carrier),this.modulator=new t.SimpleSynth(e.modulator),this.frequency=new t.Signal(440,t.Type.Frequency),this.harmonicity=new t.Multiply(e.harmonicity),this.harmonicity.units=t.Type.Positive,this._modulationScale=new t.AudioToGain,this._modulationNode=this.context.createGain(),this.frequency.connect(this.carrier.frequency),this.frequency.chain(this.harmonicity,this.modulator.frequency),this.modulator.chain(this._modulationScale,this._modulationNode.gain),this.carrier.chain(this._modulationNode,this.output),this._readOnly(["carrier","modulator","frequency","harmonicity"])},t.extend(t.SimpleAM,t.Monophonic),t.SimpleAM.defaults={harmonicity:3,carrier:{volume:-10,portamento:0,oscillator:{type:"sine"},envelope:{attack:.01,decay:.01,sustain:1,release:.5}},modulator:{volume:-10,portamento:0,oscillator:{type:"sine"},envelope:{attack:.5,decay:.1,sustain:1,release:.5}}},t.SimpleAM.prototype._triggerEnvelopeAttack=function(t,e){return t=this.toSeconds(t),this.carrier.envelope.triggerAttack(t,e),this.modulator.envelope.triggerAttack(t),this},t.SimpleAM.prototype._triggerEnvelopeRelease=function(t){return this.carrier.triggerRelease(t),this.modulator.triggerRelease(t),this},t.SimpleAM.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable(["carrier","modulator","frequency","harmonicity"]),this.carrier.dispose(),this.carrier=null,this.modulator.dispose(),this.modulator=null,this.frequency.dispose(),this.frequency=null,this.harmonicity.dispose(),this.harmonicity=null,this._modulationScale.dispose(),this._modulationScale=null,this._modulationNode.disconnect(),this._modulationNode=null,this},t.SimpleAM}),Module(function(t){return t.SimpleFM=function(e){e=this.defaultArg(e,t.SimpleFM.defaults),t.Monophonic.call(this,e),this.carrier=new t.SimpleSynth(e.carrier),this.carrier.volume.value=-10,this.modulator=new t.SimpleSynth(e.modulator),this.modulator.volume.value=-10,this.frequency=new t.Signal(440,t.Type.Frequency),this.harmonicity=new t.Multiply(e.harmonicity),this.harmonicity.units=t.Type.Positive,this.modulationIndex=new t.Multiply(e.modulationIndex),this.modulationIndex.units=t.Type.Positive,this._modulationNode=this.context.createGain(),this.frequency.connect(this.carrier.frequency),this.frequency.chain(this.harmonicity,this.modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this.modulator.connect(this._modulationNode.gain),this._modulationNode.gain.value=0,this._modulationNode.connect(this.carrier.frequency),this.carrier.connect(this.output),this._readOnly(["carrier","modulator","frequency","harmonicity","modulationIndex"])},t.extend(t.SimpleFM,t.Monophonic),t.SimpleFM.defaults={harmonicity:3,modulationIndex:10,carrier:{volume:-10,portamento:0,oscillator:{type:"sine"},envelope:{attack:.01,decay:0,sustain:1,release:.5}},modulator:{volume:-10,portamento:0,oscillator:{type:"triangle"},envelope:{attack:.01,decay:0,sustain:1,release:.5}}},t.SimpleFM.prototype._triggerEnvelopeAttack=function(t,e){return t=this.toSeconds(t),this.carrier.envelope.triggerAttack(t,e),this.modulator.envelope.triggerAttack(t),this},t.SimpleFM.prototype._triggerEnvelopeRelease=function(t){return this.carrier.triggerRelease(t),this.modulator.triggerRelease(t),this},t.SimpleFM.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable(["carrier","modulator","frequency","harmonicity","modulationIndex"]),this.carrier.dispose(),this.carrier=null,this.modulator.dispose(),this.modulator=null,this.frequency.dispose(),this.frequency=null,this.modulationIndex.dispose(),this.modulationIndex=null,this.harmonicity.dispose(),this.harmonicity=null,this._modulationNode.disconnect(),this._modulationNode=null,this},t.SimpleFM}),Module(function(t){return navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,t.ExternalInput=function(){var e=this.optionsObject(arguments,["inputNum"],t.ExternalInput.defaults);t.Source.call(this,e),this._mediaStream=null,this._stream=null,this._constraints={audio:!0},this._inputNum=e.inputNum,this._gate=new t.Gain(0).connect(this.output)},t.extend(t.ExternalInput,t.Source),t.ExternalInput.defaults={inputNum:0},t.ExternalInput.prototype._getUserMedia=function(e){if(!t.ExternalInput.supported)throw new Error("browser does not support 'getUserMedia'");t.ExternalInput.sources[this._inputNum]&&(this._constraints={audio:{optional:[{sourceId:t.ExternalInput.sources[this._inputNum].id}]}}),navigator.getUserMedia(this._constraints,function(t){this._onStream(t),e()}.bind(this),function(t){e(t)})},t.ExternalInput.prototype._onStream=function(t){if(!this.isFunction(this.context.createMediaStreamSource))throw new Error("browser does not support the 'MediaStreamSourceNode'");this._stream||(this._stream=t,this._mediaStream=this.context.createMediaStreamSource(t),this._mediaStream.connect(this._gate))},t.ExternalInput.prototype.open=function(e){return e=this.defaultArg(e,t.noOp),t.ExternalInput.getSources(function(){this._getUserMedia(e)}.bind(this)),this},t.ExternalInput.prototype.close=function(){if(this._stream){var t=this._stream.getTracks()[this._inputNum];this.isUndef(t)||t.stop(),this._stream=null}return this},t.ExternalInput.prototype._start=function(t){return t=this.toSeconds(t),this._gate.gain.setValueAtTime(1,t),this},t.ExternalInput.prototype._stop=function(t){return t=this.toSeconds(t),this._gate.gain.setValueAtTime(0,t),this},t.ExternalInput.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this.close(),this._mediaStream&&(this._mediaStream.disconnect(),this._mediaStream=null),this._constraints=null,this._gate.dispose(),this._gate=null,this},t.ExternalInput.sources=[],t.ExternalInput._canGetSources=!t.prototype.isUndef(window.MediaStreamTrack)&&t.prototype.isFunction(MediaStreamTrack.getSources),Object.defineProperty(t.ExternalInput,"supported",{get:function(){return t.prototype.isFunction(navigator.getUserMedia)}}),t.ExternalInput.getSources=function(e){return 0===t.ExternalInput.sources.length&&t.ExternalInput._canGetSources?MediaStreamTrack.getSources(function(i){for(var s=0;s<i.length;s++)"audio"===i[s].kind&&(t.ExternalInput.sources[s]=i[s]);e(t.ExternalInput.sources)}):e(t.ExternalInput.sources),this},t.ExternalInput}),Module(function(t){return t.Microphone=function(){t.ExternalInput.call(this,0)},t.extend(t.Microphone,t.ExternalInput),Object.defineProperty(t.Microphone,"supported",{get:function(){return t.ExternalInput.supported}}),t.Microphone}),Module(function(t){return t.Clip=function(e,i){if(e>i){var s=e;e=i,i=s}this.min=this.input=new t.Min(i),this._readOnly("min"),this.max=this.output=new t.Max(e),this._readOnly("max"),this.min.connect(this.max)},t.extend(t.Clip,t.SignalBase),
t.Clip.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable("min"),this.min.dispose(),this.min=null,this._writable("max"),this.max.dispose(),this.max=null,this},t.Clip}),Module(function(t){return t.Normalize=function(e,i){this._inputMin=this.defaultArg(e,0),this._inputMax=this.defaultArg(i,1),this._sub=this.input=new t.Add(0),this._div=this.output=new t.Multiply(1),this._sub.connect(this._div),this._setRange()},t.extend(t.Normalize,t.SignalBase),Object.defineProperty(t.Normalize.prototype,"min",{get:function(){return this._inputMin},set:function(t){this._inputMin=t,this._setRange()}}),Object.defineProperty(t.Normalize.prototype,"max",{get:function(){return this._inputMax},set:function(t){this._inputMax=t,this._setRange()}}),t.Normalize.prototype._setRange=function(){this._sub.value=-this._inputMin,this._div.value=1/(this._inputMax-this._inputMin)},t.Normalize.prototype.dispose=function(){return t.prototype.dispose.call(this),this._sub.dispose(),this._sub=null,this._div.dispose(),this._div=null,this},t.Normalize}),Module(function(t){t.Route=function(i){var s,n;for(i=this.defaultArg(i,2),t.call(this,1,i),this.gate=new t.Signal(0),this._readOnly("gate"),s=0;i>s;s++)n=new e(s),this.output[s]=n,this.gate.connect(n.selecter),this.input.connect(n)},t.extend(t.Route,t.SignalBase),t.Route.prototype.select=function(t,e){return t=Math.floor(t),this.gate.setValueAtTime(t,this.toSeconds(e)),this},t.Route.prototype.dispose=function(){this._writable("gate"),this.gate.dispose(),this.gate=null;for(var e=0;e<this.output.length;e++)this.output[e].dispose(),this.output[e]=null;return t.prototype.dispose.call(this),this};var e=function(e){this.selecter=new t.Equal(e),this.gate=this.input=this.output=this.context.createGain(),this.selecter.connect(this.gate.gain)};return t.extend(e),e.prototype.dispose=function(){t.prototype.dispose.call(this),this.selecter.dispose(),this.selecter=null,this.gate.disconnect(),this.gate=null},t.Route}),Module(function(t){return t.Switch=function(e){e=this.defaultArg(e,!1),t.call(this),this.gate=new t.Signal(0),this._readOnly("gate"),this._thresh=new t.GreaterThan(.5),this.input.connect(this.output),this.gate.chain(this._thresh,this.output.gain),e&&this.open()},t.extend(t.Switch,t.SignalBase),t.Switch.prototype.open=function(t){return this.gate.setValueAtTime(1,this.toSeconds(t)),this},t.Switch.prototype.close=function(t){return this.gate.setValueAtTime(0,this.toSeconds(t)),this},t.Switch.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable("gate"),this.gate.dispose(),this.gate=null,this._thresh.dispose(),this._thresh=null,this},t.Switch}),"function"==typeof define&&define.amd?define(function(){return Tone}):"object"==typeof module?module.exports=Tone:root.Tone=Tone}(this);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNvbW1vbmdvbGQudXRpbGl0eS5qcyIsInRvbmUubWluLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2pCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNoQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsialF1ZXJ5KCBkb2N1bWVudCApLnJlYWR5KCBmdW5jdGlvbiggJCApIHtcblxuXHQvLyBSZWFkIGlucHV0LlxuXG5cdC8vIEdldCBSU1MgaXRlbXMgZnJvbSByZXBvLlxuXG5cblx0Ly8gQnJlYWsgb3V0IGRhdGEgaW50byBtdXNpY2FsIGxvZ2ljLlxuXG5cdC8vIENyZWF0ZSBUb25lLmpzIG9iamVjdHMgYW5kIHRpbWVsaW5lcy5cblxuXG5cdC8vIFJlbmRlci5cblxuXHQvLyBCdXNpbmVzcyB0aW1lLlxuXG59ICk7XG4iLCIvKipcbiAqIEhlbHBmdWwgdXRpbGl0aWVzIGZvciBwcm9qZWN0c1xuICpcbiAqIEB0eXBlIHtPYmplY3R9IGNvbW1vbkFVIG9iamVjdFxuICovXG52YXIgY29tbW9uQVUgPSB7XG4gIGRlYnVnZ2VyOiBmdW5jdGlvbiggZXJyb3JNZXNzYWdlICkge1xuICAgIGVycm9yTWVzc2FnZSA9ICcnO1xuICAgIHJldHVybiAnY0FVOiAnICsgJ1xcbicgKyBlcnJvck1lc3NhZ2U7XG4gICAgZGVidWdnZXI7XG4gIH0sXG4gIGRlYnVnOiBmYWxzZVxufVxuXG4vKipcbiAqIEEgY29uc29sZS5lcnJvciBwcm90b3R5cGVcbiAqXG4gKiAtIENhbGxhYmxlIHdpdGggYGNvbnNvbGUuY29tbW9uQVUoIFwiVGhlIGVycm9yXCIgKWBcbiAqXG4gKiBAc2luY2UgIDAuMVxuICpcbiAqIEByZXR1cm4ge1tjb25zb2xlLmVycm9yIG9iamVjdF19IFtFcnJvciBvYmplY3QgYW5kIGVycm9yIG1lc3NhZ2Ugc3RyaW5nXVxuICovXG5jb25zb2xlLmNvbW1vbkFVID0gZnVuY3Rpb24oKSB7XG5cbiAgQXJyYXkucHJvdG90eXBlLnVuc2hpZnQuY2FsbChcblxuICAgIGFyZ3VtZW50cyxcbiAgICBjb21tb25BVS5kZWJ1Z2dlcigpICk7XG5cbiAgY29uc29sZS5lcnJvci5hcHBseSggY29uc29sZSwgYXJndW1lbnRzICk7XG59O1xuIiwiIWZ1bmN0aW9uKHJvb3Qpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIE1haW4odCl7VG9uZT10KCl9ZnVuY3Rpb24gTW9kdWxlKHQpe3QoVG9uZSl9dmFyIFRvbmU7LyoqXG5cdCAqICBUb25lLmpzXG5cdCAqICBAYXV0aG9yIFlvdGFtIE1hbm5cblx0ICogIEBsaWNlbnNlIGh0dHA6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVQgTUlUIExpY2Vuc2Vcblx0ICogIEBjb3B5cmlnaHQgMjAxNC0yMDE1IFlvdGFtIE1hbm5cblx0ICovXG5NYWluKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXtyZXR1cm4gdm9pZCAwPT09dH1mdW5jdGlvbiBlKHQpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIHR9dmFyIGkscyxuLG87aWYodCh3aW5kb3cuQXVkaW9Db250ZXh0KSYmKHdpbmRvdy5BdWRpb0NvbnRleHQ9d2luZG93LndlYmtpdEF1ZGlvQ29udGV4dCksdCh3aW5kb3cuT2ZmbGluZUF1ZGlvQ29udGV4dCkmJih3aW5kb3cuT2ZmbGluZUF1ZGlvQ29udGV4dD13aW5kb3cud2Via2l0T2ZmbGluZUF1ZGlvQ29udGV4dCksdChBdWRpb0NvbnRleHQpKXRocm93IG5ldyBFcnJvcihcIldlYiBBdWRpbyBpcyBub3Qgc3VwcG9ydGVkIGluIHRoaXMgYnJvd3NlclwiKTtyZXR1cm4gaT1uZXcgQXVkaW9Db250ZXh0LGUoQXVkaW9Db250ZXh0LnByb3RvdHlwZS5jcmVhdGVHYWluKXx8KEF1ZGlvQ29udGV4dC5wcm90b3R5cGUuY3JlYXRlR2Fpbj1BdWRpb0NvbnRleHQucHJvdG90eXBlLmNyZWF0ZUdhaW5Ob2RlKSxlKEF1ZGlvQ29udGV4dC5wcm90b3R5cGUuY3JlYXRlRGVsYXkpfHwoQXVkaW9Db250ZXh0LnByb3RvdHlwZS5jcmVhdGVEZWxheT1BdWRpb0NvbnRleHQucHJvdG90eXBlLmNyZWF0ZURlbGF5Tm9kZSksZShBdWRpb0NvbnRleHQucHJvdG90eXBlLmNyZWF0ZVBlcmlvZGljV2F2ZSl8fChBdWRpb0NvbnRleHQucHJvdG90eXBlLmNyZWF0ZVBlcmlvZGljV2F2ZT1BdWRpb0NvbnRleHQucHJvdG90eXBlLmNyZWF0ZVdhdmVUYWJsZSksZShBdWRpb0J1ZmZlclNvdXJjZU5vZGUucHJvdG90eXBlLnN0YXJ0KXx8KEF1ZGlvQnVmZmVyU291cmNlTm9kZS5wcm90b3R5cGUuc3RhcnQ9QXVkaW9CdWZmZXJTb3VyY2VOb2RlLnByb3RvdHlwZS5ub3RlR3JhaW5PbiksZShBdWRpb0J1ZmZlclNvdXJjZU5vZGUucHJvdG90eXBlLnN0b3ApfHwoQXVkaW9CdWZmZXJTb3VyY2VOb2RlLnByb3RvdHlwZS5zdG9wPUF1ZGlvQnVmZmVyU291cmNlTm9kZS5wcm90b3R5cGUubm90ZU9mZiksZShPc2NpbGxhdG9yTm9kZS5wcm90b3R5cGUuc3RhcnQpfHwoT3NjaWxsYXRvck5vZGUucHJvdG90eXBlLnN0YXJ0PU9zY2lsbGF0b3JOb2RlLnByb3RvdHlwZS5ub3RlT24pLGUoT3NjaWxsYXRvck5vZGUucHJvdG90eXBlLnN0b3ApfHwoT3NjaWxsYXRvck5vZGUucHJvdG90eXBlLnN0b3A9T3NjaWxsYXRvck5vZGUucHJvdG90eXBlLm5vdGVPZmYpLGUoT3NjaWxsYXRvck5vZGUucHJvdG90eXBlLnNldFBlcmlvZGljV2F2ZSl8fChPc2NpbGxhdG9yTm9kZS5wcm90b3R5cGUuc2V0UGVyaW9kaWNXYXZlPU9zY2lsbGF0b3JOb2RlLnByb3RvdHlwZS5zZXRXYXZlVGFibGUpLEF1ZGlvTm9kZS5wcm90b3R5cGUuX25hdGl2ZUNvbm5lY3Q9QXVkaW9Ob2RlLnByb3RvdHlwZS5jb25uZWN0LEF1ZGlvTm9kZS5wcm90b3R5cGUuY29ubmVjdD1mdW5jdGlvbihlLGkscyl7aWYoZS5pbnB1dClBcnJheS5pc0FycmF5KGUuaW5wdXQpPyh0KHMpJiYocz0wKSx0aGlzLmNvbm5lY3QoZS5pbnB1dFtzXSkpOnRoaXMuY29ubmVjdChlLmlucHV0LGkscyk7ZWxzZSB0cnl7ZSBpbnN0YW5jZW9mIEF1ZGlvTm9kZT90aGlzLl9uYXRpdmVDb25uZWN0KGUsaSxzKTp0aGlzLl9uYXRpdmVDb25uZWN0KGUsaSl9Y2F0Y2gobil7dGhyb3cgbmV3IEVycm9yKFwiZXJyb3IgY29ubmVjdGluZyB0byBub2RlOiBcIitlKX19LHM9ZnVuY3Rpb24oZSxpKXt0KGUpfHwxPT09ZT90aGlzLmlucHV0PXRoaXMuY29udGV4dC5jcmVhdGVHYWluKCk6ZT4xJiYodGhpcy5pbnB1dD1uZXcgQXJyYXkoZSkpLHQoaSl8fDE9PT1pP3RoaXMub3V0cHV0PXRoaXMuY29udGV4dC5jcmVhdGVHYWluKCk6aT4xJiYodGhpcy5vdXRwdXQ9bmV3IEFycmF5KGUpKX0scy5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKGUsaSxuKXt2YXIgbyxyLGEsbCxoLHU7dGhpcy5pc09iamVjdChlKT9uPWk6dGhpcy5pc1N0cmluZyhlKSYmKG89e30sb1tlXT1pLGU9byk7Zm9yKHIgaW4gZSl7aWYoaT1lW3JdLGE9dGhpcywtMSE9PXIuaW5kZXhPZihcIi5cIikpe2ZvcihsPXIuc3BsaXQoXCIuXCIpLGg9MDtoPGwubGVuZ3RoLTE7aCsrKWE9YVtsW2hdXTtyPWxbbC5sZW5ndGgtMV19dT1hW3JdLHQodSl8fChzLlNpZ25hbCYmdSBpbnN0YW5jZW9mIHMuU2lnbmFsfHxzLlBhcmFtJiZ1IGluc3RhbmNlb2Ygcy5QYXJhbT91LnZhbHVlIT09aSYmKHQobik/dS52YWx1ZT1pOnUucmFtcFRvKGksbikpOnUgaW5zdGFuY2VvZiBBdWRpb1BhcmFtP3UudmFsdWUhPT1pJiYodS52YWx1ZT1pKTp1IGluc3RhbmNlb2Ygcz91LnNldChpKTp1IT09aSYmKGFbcl09aSkpfXJldHVybiB0aGlzfSxzLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oaSl7dmFyIG4sbyxyLGEsbCxoLHUsYyxwO2Zvcih0KGkpP2k9dGhpcy5fY29sbGVjdERlZmF1bHRzKHRoaXMuY29uc3RydWN0b3IpOnRoaXMuaXNTdHJpbmcoaSkmJihpPVtpXSksbj17fSxvPTA7bzxpLmxlbmd0aDtvKyspe2lmKHI9aVtvXSxhPXRoaXMsbD1uLC0xIT09ci5pbmRleE9mKFwiLlwiKSl7Zm9yKGg9ci5zcGxpdChcIi5cIiksdT0wO3U8aC5sZW5ndGgtMTt1KyspYz1oW3VdLGxbY109bFtjXXx8e30sbD1sW2NdLGE9YVtjXTtyPWhbaC5sZW5ndGgtMV19cD1hW3JdLHRoaXMuaXNPYmplY3QoaVtyXSk/bFtyXT1wLmdldCgpOnMuU2lnbmFsJiZwIGluc3RhbmNlb2Ygcy5TaWduYWw/bFtyXT1wLnZhbHVlOnMuUGFyYW0mJnAgaW5zdGFuY2VvZiBzLlBhcmFtP2xbcl09cC52YWx1ZTpwIGluc3RhbmNlb2YgQXVkaW9QYXJhbT9sW3JdPXAudmFsdWU6cCBpbnN0YW5jZW9mIHM/bFtyXT1wLmdldCgpOmUocCl8fHQocCl8fChsW3JdPXApfXJldHVybiBufSxzLnByb3RvdHlwZS5fY29sbGVjdERlZmF1bHRzPWZ1bmN0aW9uKGUpe3ZhciBpLHMsbj1bXTtpZih0KGUuZGVmYXVsdHMpfHwobj1PYmplY3Qua2V5cyhlLmRlZmF1bHRzKSksIXQoZS5fc3VwZXIpKWZvcihpPXRoaXMuX2NvbGxlY3REZWZhdWx0cyhlLl9zdXBlcikscz0wO3M8aS5sZW5ndGg7cysrKS0xPT09bi5pbmRleE9mKGlbc10pJiZuLnB1c2goaVtzXSk7cmV0dXJuIG59LHMucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7dmFyIHQsaSxuO2Zvcih0IGluIHMpaWYoaT10WzBdLm1hdGNoKC9eW0EtWl0kLyksbj1zW3RdPT09dGhpcy5jb25zdHJ1Y3RvcixlKHNbdF0pJiZpJiZuKXJldHVybiB0O3JldHVyblwiVG9uZVwifSxzLmNvbnRleHQ9aSxzLnByb3RvdHlwZS5jb250ZXh0PXMuY29udGV4dCxzLnByb3RvdHlwZS5idWZmZXJTaXplPTIwNDgscy5wcm90b3R5cGUuYmxvY2tUaW1lPTEyOC9zLmNvbnRleHQuc2FtcGxlUmF0ZSxzLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNVbmRlZih0aGlzLmlucHV0KXx8KHRoaXMuaW5wdXQgaW5zdGFuY2VvZiBBdWRpb05vZGUmJnRoaXMuaW5wdXQuZGlzY29ubmVjdCgpLHRoaXMuaW5wdXQ9bnVsbCksdGhpcy5pc1VuZGVmKHRoaXMub3V0cHV0KXx8KHRoaXMub3V0cHV0IGluc3RhbmNlb2YgQXVkaW9Ob2RlJiZ0aGlzLm91dHB1dC5kaXNjb25uZWN0KCksdGhpcy5vdXRwdXQ9bnVsbCksdGhpc30sbj1udWxsLHMucHJvdG90eXBlLm5vR0M9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vdXRwdXQuY29ubmVjdChuKSx0aGlzfSxBdWRpb05vZGUucHJvdG90eXBlLm5vR0M9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25uZWN0KG4pLHRoaXN9LHMucHJvdG90eXBlLmNvbm5lY3Q9ZnVuY3Rpb24odCxlLGkpe3JldHVybiBBcnJheS5pc0FycmF5KHRoaXMub3V0cHV0KT8oZT10aGlzLmRlZmF1bHRBcmcoZSwwKSx0aGlzLm91dHB1dFtlXS5jb25uZWN0KHQsMCxpKSk6dGhpcy5vdXRwdXQuY29ubmVjdCh0LGUsaSksdGhpc30scy5wcm90b3R5cGUuZGlzY29ubmVjdD1mdW5jdGlvbih0KXtyZXR1cm4gQXJyYXkuaXNBcnJheSh0aGlzLm91dHB1dCk/KHQ9dGhpcy5kZWZhdWx0QXJnKHQsMCksdGhpcy5vdXRwdXRbdF0uZGlzY29ubmVjdCgpKTp0aGlzLm91dHB1dC5kaXNjb25uZWN0KCksdGhpc30scy5wcm90b3R5cGUuY29ubmVjdFNlcmllcz1mdW5jdGlvbigpe3ZhciB0LGUsaTtpZihhcmd1bWVudHMubGVuZ3RoPjEpZm9yKHQ9YXJndW1lbnRzWzBdLGU9MTtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKWk9YXJndW1lbnRzW2VdLHQuY29ubmVjdChpKSx0PWk7cmV0dXJuIHRoaXN9LHMucHJvdG90eXBlLmNvbm5lY3RQYXJhbGxlbD1mdW5jdGlvbigpe3ZhciB0LGUsaT1hcmd1bWVudHNbMF07aWYoYXJndW1lbnRzLmxlbmd0aD4xKWZvcih0PTE7dDxhcmd1bWVudHMubGVuZ3RoO3QrKyllPWFyZ3VtZW50c1t0XSxpLmNvbm5lY3QoZSk7cmV0dXJuIHRoaXN9LHMucHJvdG90eXBlLmNoYWluPWZ1bmN0aW9uKCl7dmFyIHQsZSxpO2lmKGFyZ3VtZW50cy5sZW5ndGg+MClmb3IodD10aGlzLGU9MDtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKWk9YXJndW1lbnRzW2VdLHQuY29ubmVjdChpKSx0PWk7cmV0dXJuIHRoaXN9LHMucHJvdG90eXBlLmZhbj1mdW5jdGlvbigpe2lmKGFyZ3VtZW50cy5sZW5ndGg+MClmb3IodmFyIHQ9MDt0PGFyZ3VtZW50cy5sZW5ndGg7dCsrKXRoaXMuY29ubmVjdChhcmd1bWVudHNbdF0pO3JldHVybiB0aGlzfSxBdWRpb05vZGUucHJvdG90eXBlLmNoYWluPXMucHJvdG90eXBlLmNoYWluLEF1ZGlvTm9kZS5wcm90b3R5cGUuZmFuPXMucHJvdG90eXBlLmZhbixzLnByb3RvdHlwZS5kZWZhdWx0QXJnPWZ1bmN0aW9uKGUsaSl7dmFyIHMsbixvO2lmKHRoaXMuaXNPYmplY3QoZSkmJnRoaXMuaXNPYmplY3QoaSkpe3M9e307Zm9yKG4gaW4gZSlzW25dPXRoaXMuZGVmYXVsdEFyZyhpW25dLGVbbl0pO2ZvcihvIGluIGkpc1tvXT10aGlzLmRlZmF1bHRBcmcoZVtvXSxpW29dKTtyZXR1cm4gc31yZXR1cm4gdChlKT9pOmV9LHMucHJvdG90eXBlLm9wdGlvbnNPYmplY3Q9ZnVuY3Rpb24odCxlLGkpe3ZhciBzLG49e307aWYoMT09PXQubGVuZ3RoJiZ0aGlzLmlzT2JqZWN0KHRbMF0pKW49dFswXTtlbHNlIGZvcihzPTA7czxlLmxlbmd0aDtzKyspbltlW3NdXT10W3NdO3JldHVybiB0aGlzLmlzVW5kZWYoaSk/bjp0aGlzLmRlZmF1bHRBcmcobixpKX0scy5wcm90b3R5cGUuaXNVbmRlZj10LHMucHJvdG90eXBlLmlzRnVuY3Rpb249ZSxzLnByb3RvdHlwZS5pc051bWJlcj1mdW5jdGlvbih0KXtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgdH0scy5wcm90b3R5cGUuaXNPYmplY3Q9ZnVuY3Rpb24odCl7cmV0dXJuXCJbb2JqZWN0IE9iamVjdF1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KSYmdC5jb25zdHJ1Y3Rvcj09PU9iamVjdH0scy5wcm90b3R5cGUuaXNCb29sZWFuPWZ1bmN0aW9uKHQpe3JldHVyblwiYm9vbGVhblwiPT10eXBlb2YgdH0scy5wcm90b3R5cGUuaXNBcnJheT1mdW5jdGlvbih0KXtyZXR1cm4gQXJyYXkuaXNBcnJheSh0KX0scy5wcm90b3R5cGUuaXNTdHJpbmc9ZnVuY3Rpb24odCl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIHR9LHMubm9PcD1mdW5jdGlvbigpe30scy5wcm90b3R5cGUuX3JlYWRPbmx5PWZ1bmN0aW9uKHQpe2lmKEFycmF5LmlzQXJyYXkodCkpZm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspdGhpcy5fcmVhZE9ubHkodFtlXSk7ZWxzZSBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyx0LHt3cml0YWJsZTohMSxlbnVtZXJhYmxlOiEwfSl9LHMucHJvdG90eXBlLl93cml0YWJsZT1mdW5jdGlvbih0KXtpZihBcnJheS5pc0FycmF5KHQpKWZvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKXRoaXMuX3dyaXRhYmxlKHRbZV0pO2Vsc2UgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsdCx7d3JpdGFibGU6ITB9KX0scy5TdGF0ZT17U3RhcnRlZDpcInN0YXJ0ZWRcIixTdG9wcGVkOlwic3RvcHBlZFwiLFBhdXNlZDpcInBhdXNlZFwifSxzLnByb3RvdHlwZS5lcXVhbFBvd2VyU2NhbGU9ZnVuY3Rpb24odCl7dmFyIGU9LjUqTWF0aC5QSTtyZXR1cm4gTWF0aC5zaW4odCplKX0scy5wcm90b3R5cGUuZGJUb0dhaW49ZnVuY3Rpb24odCl7cmV0dXJuIE1hdGgucG93KDIsdC82KX0scy5wcm90b3R5cGUuZ2FpblRvRGI9ZnVuY3Rpb24odCl7cmV0dXJuIDIwKihNYXRoLmxvZyh0KS9NYXRoLkxOMTApfSxzLnByb3RvdHlwZS5ub3c9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZXh0LmN1cnJlbnRUaW1lfSxzLmV4dGVuZD1mdW5jdGlvbihlLGkpe2Z1bmN0aW9uIG4oKXt9dChpKSYmKGk9cyksbi5wcm90b3R5cGU9aS5wcm90b3R5cGUsZS5wcm90b3R5cGU9bmV3IG4sZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLl9zdXBlcj1pfSxvPVtdLHMuX2luaXRBdWRpb0NvbnRleHQ9ZnVuY3Rpb24odCl7dChzLmNvbnRleHQpLG8ucHVzaCh0KX0scy5zZXRDb250ZXh0PWZ1bmN0aW9uKHQpe3MucHJvdG90eXBlLmNvbnRleHQ9dCxzLmNvbnRleHQ9dDtmb3IodmFyIGU9MDtlPG8ubGVuZ3RoO2UrKylvW2VdKHQpfSxzLnN0YXJ0TW9iaWxlPWZ1bmN0aW9uKCl7dmFyIHQsZT1zLmNvbnRleHQuY3JlYXRlT3NjaWxsYXRvcigpLGk9cy5jb250ZXh0LmNyZWF0ZUdhaW4oKTtpLmdhaW4udmFsdWU9MCxlLmNvbm5lY3QoaSksaS5jb25uZWN0KHMuY29udGV4dC5kZXN0aW5hdGlvbiksdD1zLmNvbnRleHQuY3VycmVudFRpbWUsZS5zdGFydCh0KSxlLnN0b3AodCsxKX0scy5faW5pdEF1ZGlvQ29udGV4dChmdW5jdGlvbih0KXtzLnByb3RvdHlwZS5ibG9ja1RpbWU9MTI4L3Quc2FtcGxlUmF0ZSxuPXQuY3JlYXRlR2FpbigpLG4uZ2Fpbi52YWx1ZT0wLG4uY29ubmVjdCh0LmRlc3RpbmF0aW9uKX0pLHMudmVyc2lvbj1cInI2XCIsY29uc29sZS5sb2coXCIlYyAqIFRvbmUuanMgXCIrcy52ZXJzaW9uK1wiICogXCIsXCJiYWNrZ3JvdW5kOiAjMDAwOyBjb2xvcjogI2ZmZlwiKSxzfSksTW9kdWxlKGZ1bmN0aW9uKHQpe3JldHVybiB0LlNpZ25hbEJhc2U9ZnVuY3Rpb24oKXt9LHQuZXh0ZW5kKHQuU2lnbmFsQmFzZSksdC5TaWduYWxCYXNlLnByb3RvdHlwZS5jb25uZWN0PWZ1bmN0aW9uKGUsaSxzKXtyZXR1cm4gdC5TaWduYWwmJnQuU2lnbmFsPT09ZS5jb25zdHJ1Y3Rvcnx8dC5QYXJhbSYmdC5QYXJhbT09PWUuY29uc3RydWN0b3J8fHQuVGltZWxpbmVTaWduYWwmJnQuVGltZWxpbmVTaWduYWw9PT1lLmNvbnN0cnVjdG9yPyhlLl9wYXJhbS5jYW5jZWxTY2hlZHVsZWRWYWx1ZXMoMCksZS5fcGFyYW0udmFsdWU9MCxlLm92ZXJyaWRkZW49ITApOmUgaW5zdGFuY2VvZiBBdWRpb1BhcmFtJiYoZS5jYW5jZWxTY2hlZHVsZWRWYWx1ZXMoMCksZS52YWx1ZT0wKSx0LnByb3RvdHlwZS5jb25uZWN0LmNhbGwodGhpcyxlLGkscyksdGhpc30sdC5TaWduYWxCYXNlfSksTW9kdWxlKGZ1bmN0aW9uKHQpe3JldHVybiB0LldhdmVTaGFwZXI9ZnVuY3Rpb24odCxlKXt0aGlzLl9zaGFwZXI9dGhpcy5pbnB1dD10aGlzLm91dHB1dD10aGlzLmNvbnRleHQuY3JlYXRlV2F2ZVNoYXBlcigpLHRoaXMuX2N1cnZlPW51bGwsQXJyYXkuaXNBcnJheSh0KT90aGlzLmN1cnZlPXQ6aXNGaW5pdGUodCl8fHRoaXMuaXNVbmRlZih0KT90aGlzLl9jdXJ2ZT1uZXcgRmxvYXQzMkFycmF5KHRoaXMuZGVmYXVsdEFyZyh0LDEwMjQpKTp0aGlzLmlzRnVuY3Rpb24odCkmJih0aGlzLl9jdXJ2ZT1uZXcgRmxvYXQzMkFycmF5KHRoaXMuZGVmYXVsdEFyZyhlLDEwMjQpKSx0aGlzLnNldE1hcCh0KSl9LHQuZXh0ZW5kKHQuV2F2ZVNoYXBlcix0LlNpZ25hbEJhc2UpLHQuV2F2ZVNoYXBlci5wcm90b3R5cGUuc2V0TWFwPWZ1bmN0aW9uKHQpe3ZhciBlLGkscztmb3IoZT0wLGk9dGhpcy5fY3VydmUubGVuZ3RoO2k+ZTtlKyspcz1lL2kqMi0xLHRoaXMuX2N1cnZlW2VdPXQocyxlKTtyZXR1cm4gdGhpcy5fc2hhcGVyLmN1cnZlPXRoaXMuX2N1cnZlLHRoaXN9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LldhdmVTaGFwZXIucHJvdG90eXBlLFwiY3VydmVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NoYXBlci5jdXJ2ZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2N1cnZlPW5ldyBGbG9hdDMyQXJyYXkodCksdGhpcy5fc2hhcGVyLmN1cnZlPXRoaXMuX2N1cnZlfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LldhdmVTaGFwZXIucHJvdG90eXBlLFwib3ZlcnNhbXBsZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2hhcGVyLm92ZXJzYW1wbGV9LHNldDpmdW5jdGlvbih0KXtpZigtMT09PVtcIm5vbmVcIixcIjJ4XCIsXCI0eFwiXS5pbmRleE9mKHQpKXRocm93IG5ldyBFcnJvcihcImludmFsaWQgb3ZlcnNhbXBsaW5nOiBcIit0KTt0aGlzLl9zaGFwZXIub3ZlcnNhbXBsZT10fX0pLHQuV2F2ZVNoYXBlci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fc2hhcGVyLmRpc2Nvbm5lY3QoKSx0aGlzLl9zaGFwZXI9bnVsbCx0aGlzLl9jdXJ2ZT1udWxsLHRoaXN9LHQuV2F2ZVNoYXBlcn0pLE1vZHVsZShmdW5jdGlvbihUb25lKXtmdW5jdGlvbiBnZXRUcmFuc3BvcnRCcG0oKXtyZXR1cm4gVG9uZS5UcmFuc3BvcnQmJlRvbmUuVHJhbnNwb3J0LmJwbT9Ub25lLlRyYW5zcG9ydC5icG0udmFsdWU6MTIwfWZ1bmN0aW9uIGdldFRyYW5zcG9ydFRpbWVTaWduYXR1cmUoKXtyZXR1cm4gVG9uZS5UcmFuc3BvcnQmJlRvbmUuVHJhbnNwb3J0LnRpbWVTaWduYXR1cmU/VG9uZS5UcmFuc3BvcnQudGltZVNpZ25hdHVyZTo0fWZ1bmN0aW9uIHRvTm90YXRpb25IZWxwZXIodCxlLGkscyl7dmFyIG4sbyxyLGEsbD10aGlzLnRvU2Vjb25kcyh0KSxoPXRoaXMubm90YXRpb25Ub1NlY29uZHMoc1tzLmxlbmd0aC0xXSxlLGkpLHU9XCJcIjtmb3Iobj0wO248cy5sZW5ndGg7bisrKWlmKG89dGhpcy5ub3RhdGlvblRvU2Vjb25kcyhzW25dLGUsaSkscj1sL28sYT0xZS02LGE+MS1yJTEmJihyKz1hKSxyPU1hdGguZmxvb3Iocikscj4wKXtpZih1Kz0xPT09cj9zW25dOnIudG9TdHJpbmcoKStcIipcIitzW25dLGwtPXIqbyxoPmwpYnJlYWs7dSs9XCIgKyBcIn1yZXR1cm5cIlwiPT09dSYmKHU9XCIwXCIpLHV9dmFyIG5vdGVUb1NjYWxlSW5kZXgsc2NhbGVJbmRleFRvTm90ZTtyZXR1cm4gVG9uZS5UeXBlPXtEZWZhdWx0OlwibnVtYmVyXCIsVGltZTpcInRpbWVcIixGcmVxdWVuY3k6XCJmcmVxdWVuY3lcIixOb3JtYWxSYW5nZTpcIm5vcm1hbFJhbmdlXCIsQXVkaW9SYW5nZTpcImF1ZGlvUmFuZ2VcIixEZWNpYmVsczpcImRiXCIsSW50ZXJ2YWw6XCJpbnRlcnZhbFwiLEJQTTpcImJwbVwiLFBvc2l0aXZlOlwicG9zaXRpdmVcIixDZW50czpcImNlbnRzXCIsRGVncmVlczpcImRlZ3JlZXNcIixNSURJOlwibWlkaVwiLFRyYW5zcG9ydFRpbWU6XCJ0cmFuc3BvcnRUaW1lXCIsVGlja3M6XCJ0aWNrXCIsTm90ZTpcIm5vdGVcIixNaWxsaXNlY29uZHM6XCJtaWxsaXNlY29uZHNcIixOb3RhdGlvbjpcIm5vdGF0aW9uXCJ9LFRvbmUucHJvdG90eXBlLmlzTm93UmVsYXRpdmU9ZnVuY3Rpb24oKXt2YXIgdD1uZXcgUmVnRXhwKC9eXFxzKlxcKyguKSsvaSk7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiB0LnRlc3QoZSl9fSgpLFRvbmUucHJvdG90eXBlLmlzVGlja3M9ZnVuY3Rpb24oKXt2YXIgdD1uZXcgUmVnRXhwKC9eXFxkK2kkL2kpO3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gdC50ZXN0KGUpfX0oKSxUb25lLnByb3RvdHlwZS5pc05vdGF0aW9uPWZ1bmN0aW9uKCl7dmFyIHQ9bmV3IFJlZ0V4cCgvXlswLTldK1ttbnRdJC9pKTtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIHQudGVzdChlKX19KCksVG9uZS5wcm90b3R5cGUuaXNUcmFuc3BvcnRUaW1lPWZ1bmN0aW9uKCl7dmFyIHQ9bmV3IFJlZ0V4cCgvXihcXGQrKFxcLlxcZCspP1xcOil7MSwyfShcXGQrKFxcLlxcZCspPyk/JC9pKTtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIHQudGVzdChlKX19KCksVG9uZS5wcm90b3R5cGUuaXNOb3RlPWZ1bmN0aW9uKCl7dmFyIHQ9bmV3IFJlZ0V4cCgvXlthLWddezF9KGJ8I3x4fGJiKT8tP1swLTldKyQvaSk7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiB0LnRlc3QoZSl9fSgpLFRvbmUucHJvdG90eXBlLmlzRnJlcXVlbmN5PWZ1bmN0aW9uKCl7dmFyIHQ9bmV3IFJlZ0V4cCgvXlxcZCpcXC4/XFxkK2h6JC9pKTtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIHQudGVzdChlKX19KCksVG9uZS5wcm90b3R5cGUubm90YXRpb25Ub1NlY29uZHM9ZnVuY3Rpb24odCxlLGkpe3ZhciBzLG4sbyxyO3JldHVybiBlPXRoaXMuZGVmYXVsdEFyZyhlLGdldFRyYW5zcG9ydEJwbSgpKSxpPXRoaXMuZGVmYXVsdEFyZyhpLGdldFRyYW5zcG9ydFRpbWVTaWduYXR1cmUoKSkscz02MC9lLFwiMW5cIj09PXQmJih0PVwiMW1cIiksbj1wYXJzZUludCh0LDEwKSxvPTAsMD09PW4mJihvPTApLHI9dC5zbGljZSgtMSksbz1cInRcIj09PXI/NC9uKjIvMzpcIm5cIj09PXI/NC9uOlwibVwiPT09cj9uKmk6MCxzKm99LFRvbmUucHJvdG90eXBlLnRyYW5zcG9ydFRpbWVUb1NlY29uZHM9ZnVuY3Rpb24odCxlLGkpe3ZhciBzLG4sbyxyLGE7cmV0dXJuIGU9dGhpcy5kZWZhdWx0QXJnKGUsZ2V0VHJhbnNwb3J0QnBtKCkpLGk9dGhpcy5kZWZhdWx0QXJnKGksZ2V0VHJhbnNwb3J0VGltZVNpZ25hdHVyZSgpKSxzPTAsbj0wLG89MCxyPXQuc3BsaXQoXCI6XCIpLDI9PT1yLmxlbmd0aD8ocz1wYXJzZUZsb2F0KHJbMF0pLG49cGFyc2VGbG9hdChyWzFdKSk6MT09PXIubGVuZ3RoP249cGFyc2VGbG9hdChyWzBdKTozPT09ci5sZW5ndGgmJihzPXBhcnNlRmxvYXQoclswXSksbj1wYXJzZUZsb2F0KHJbMV0pLG89cGFyc2VGbG9hdChyWzJdKSksYT1zKmkrbitvLzQsYSooNjAvZSl9LFRvbmUucHJvdG90eXBlLnRpY2tzVG9TZWNvbmRzPWZ1bmN0aW9uKHQsZSl7aWYodGhpcy5pc1VuZGVmKFRvbmUuVHJhbnNwb3J0KSlyZXR1cm4gMDt0PXBhcnNlRmxvYXQodCksZT10aGlzLmRlZmF1bHRBcmcoZSxnZXRUcmFuc3BvcnRCcG0oKSk7dmFyIGk9NjAvZS9Ub25lLlRyYW5zcG9ydC5QUFE7cmV0dXJuIGkqdH0sVG9uZS5wcm90b3R5cGUuZnJlcXVlbmN5VG9TZWNvbmRzPWZ1bmN0aW9uKHQpe3JldHVybiAxL3BhcnNlRmxvYXQodCl9LFRvbmUucHJvdG90eXBlLnNhbXBsZXNUb1NlY29uZHM9ZnVuY3Rpb24odCl7cmV0dXJuIHQvdGhpcy5jb250ZXh0LnNhbXBsZVJhdGV9LFRvbmUucHJvdG90eXBlLnNlY29uZHNUb1NhbXBsZXM9ZnVuY3Rpb24odCl7cmV0dXJuIHQqdGhpcy5jb250ZXh0LnNhbXBsZVJhdGV9LFRvbmUucHJvdG90eXBlLnNlY29uZHNUb1RyYW5zcG9ydFRpbWU9ZnVuY3Rpb24odCxlLGkpe3ZhciBzLG4sbyxyLGE7cmV0dXJuIGU9dGhpcy5kZWZhdWx0QXJnKGUsZ2V0VHJhbnNwb3J0QnBtKCkpLGk9dGhpcy5kZWZhdWx0QXJnKGksZ2V0VHJhbnNwb3J0VGltZVNpZ25hdHVyZSgpKSxzPTYwL2Usbj10L3Msbz1NYXRoLmZsb29yKG4vaSkscj1uJTEqNCxuPU1hdGguZmxvb3IobiklaSxhPVtvLG4scl0sYS5qb2luKFwiOlwiKX0sVG9uZS5wcm90b3R5cGUuc2Vjb25kc1RvRnJlcXVlbmN5PWZ1bmN0aW9uKHQpe3JldHVybiAxL3R9LFRvbmUucHJvdG90eXBlLnRvVHJhbnNwb3J0VGltZT1mdW5jdGlvbih0LGUsaSl7dmFyIHM9dGhpcy50b1NlY29uZHModCk7cmV0dXJuIHRoaXMuc2Vjb25kc1RvVHJhbnNwb3J0VGltZShzLGUsaSl9LFRvbmUucHJvdG90eXBlLnRvRnJlcXVlbmN5PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuaXNGcmVxdWVuY3kodCk/cGFyc2VGbG9hdCh0KTp0aGlzLmlzTm90YXRpb24odCl8fHRoaXMuaXNUcmFuc3BvcnRUaW1lKHQpP3RoaXMuc2Vjb25kc1RvRnJlcXVlbmN5KHRoaXMudG9TZWNvbmRzKHQsZSkpOnRoaXMuaXNOb3RlKHQpP3RoaXMubm90ZVRvRnJlcXVlbmN5KHQpOnR9LFRvbmUucHJvdG90eXBlLnRvVGlja3M9ZnVuY3Rpb24odCl7dmFyIGUsaSxzLG4sbyxyO2lmKHRoaXMuaXNVbmRlZihUb25lLlRyYW5zcG9ydCkpcmV0dXJuIDA7aWYoZT1Ub25lLlRyYW5zcG9ydC5icG0udmFsdWUsaT0wLHRoaXMuaXNOb3dSZWxhdGl2ZSh0KSl0PXQucmVwbGFjZShcIitcIixcIlwiKSxpPVRvbmUuVHJhbnNwb3J0LnRpY2tzO2Vsc2UgaWYodGhpcy5pc1VuZGVmKHQpKXJldHVybiBUb25lLlRyYW5zcG9ydC50aWNrcztyZXR1cm4gcz10aGlzLnRvU2Vjb25kcyh0KSxuPTYwL2Usbz1zL24scj1vKlRvbmUuVHJhbnNwb3J0LlBQUSxNYXRoLnJvdW5kKHIraSl9LFRvbmUucHJvdG90eXBlLnRvU2FtcGxlcz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLnRvU2Vjb25kcyh0KTtyZXR1cm4gTWF0aC5yb3VuZChlKnRoaXMuY29udGV4dC5zYW1wbGVSYXRlKX0sVG9uZS5wcm90b3R5cGUudG9TZWNvbmRzPWZ1bmN0aW9uKHRpbWUsbm93KXt2YXIgcGx1c1RpbWUsYmV0d2VlblBhcmVucyxqLHN5bWJvbCxzeW1ib2xWYWwscXVhbnRpemF0aW9uU3BsaXQsdG9RdWFudGl6ZSxzdWJkaXZpc2lvbixjb21wb25lbnRzLG9yaWdpbmFsVGltZSxpLHN5bWIsdmFsO2lmKG5vdz10aGlzLmRlZmF1bHRBcmcobm93LHRoaXMubm93KCkpLHRoaXMuaXNOdW1iZXIodGltZSkpcmV0dXJuIHRpbWU7aWYodGhpcy5pc1N0cmluZyh0aW1lKSl7aWYocGx1c1RpbWU9MCx0aGlzLmlzTm93UmVsYXRpdmUodGltZSkmJih0aW1lPXRpbWUucmVwbGFjZShcIitcIixcIlwiKSxwbHVzVGltZT1ub3cpLGJldHdlZW5QYXJlbnM9dGltZS5tYXRjaCgvXFwoKFteKShdKylcXCkvZykpZm9yKGo9MDtqPGJldHdlZW5QYXJlbnMubGVuZ3RoO2orKylzeW1ib2w9YmV0d2VlblBhcmVuc1tqXS5yZXBsYWNlKC9bXFwoXFwpXS9nLFwiXCIpLHN5bWJvbFZhbD10aGlzLnRvU2Vjb25kcyhzeW1ib2wpLHRpbWU9dGltZS5yZXBsYWNlKGJldHdlZW5QYXJlbnNbal0sc3ltYm9sVmFsKTtpZigtMSE9PXRpbWUuaW5kZXhPZihcIkBcIikpe2lmKHF1YW50aXphdGlvblNwbGl0PXRpbWUuc3BsaXQoXCJAXCIpLHRoaXMuaXNVbmRlZihUb25lLlRyYW5zcG9ydCkpdGhyb3cgbmV3IEVycm9yKFwicXVhbnRpemF0aW9uIHJlcXVpcmVzIFRvbmUuVHJhbnNwb3J0XCIpO3RvUXVhbnRpemU9cXVhbnRpemF0aW9uU3BsaXRbMF0udHJpbSgpLFwiXCI9PT10b1F1YW50aXplJiYodG9RdWFudGl6ZT12b2lkIDApLHBsdXNUaW1lPjAmJih0b1F1YW50aXplPVwiK1wiK3RvUXVhbnRpemUscGx1c1RpbWU9MCksc3ViZGl2aXNpb249cXVhbnRpemF0aW9uU3BsaXRbMV0udHJpbSgpLHRpbWU9VG9uZS5UcmFuc3BvcnQucXVhbnRpemUodG9RdWFudGl6ZSxzdWJkaXZpc2lvbil9ZWxzZSBpZihjb21wb25lbnRzPXRpbWUuc3BsaXQoL1tcXChcXClcXC1cXCtcXC9cXCpdLyksY29tcG9uZW50cy5sZW5ndGg+MSl7Zm9yKG9yaWdpbmFsVGltZT10aW1lLGk9MDtpPGNvbXBvbmVudHMubGVuZ3RoO2krKylzeW1iPWNvbXBvbmVudHNbaV0udHJpbSgpLFwiXCIhPT1zeW1iJiYodmFsPXRoaXMudG9TZWNvbmRzKHN5bWIpLHRpbWU9dGltZS5yZXBsYWNlKHN5bWIsdmFsKSk7dHJ5e3RpbWU9ZXZhbCh0aW1lKX1jYXRjaChlKXt0aHJvdyBuZXcgRXZhbEVycm9yKFwiY2Fubm90IGV2YWx1YXRlIFRpbWU6IFwiK29yaWdpbmFsVGltZSl9fWVsc2UgdGltZT10aGlzLmlzTm90YXRpb24odGltZSk/dGhpcy5ub3RhdGlvblRvU2Vjb25kcyh0aW1lKTp0aGlzLmlzVHJhbnNwb3J0VGltZSh0aW1lKT90aGlzLnRyYW5zcG9ydFRpbWVUb1NlY29uZHModGltZSk6dGhpcy5pc0ZyZXF1ZW5jeSh0aW1lKT90aGlzLmZyZXF1ZW5jeVRvU2Vjb25kcyh0aW1lKTp0aGlzLmlzVGlja3ModGltZSk/dGhpcy50aWNrc1RvU2Vjb25kcyh0aW1lKTpwYXJzZUZsb2F0KHRpbWUpO3JldHVybiB0aW1lK3BsdXNUaW1lfXJldHVybiBub3d9LFRvbmUucHJvdG90eXBlLnRvTm90YXRpb249ZnVuY3Rpb24odCxlLGkpe3ZhciBzPVtcIjFtXCIsXCIyblwiLFwiNG5cIixcIjhuXCIsXCIxNm5cIixcIjMyblwiLFwiNjRuXCIsXCIxMjhuXCJdLG49dG9Ob3RhdGlvbkhlbHBlci5jYWxsKHRoaXMsdCxlLGkscyksbz1bXCIxbVwiLFwiMm5cIixcIjJ0XCIsXCI0blwiLFwiNHRcIixcIjhuXCIsXCI4dFwiLFwiMTZuXCIsXCIxNnRcIixcIjMyblwiLFwiMzJ0XCIsXCI2NG5cIixcIjY0dFwiLFwiMTI4blwiXSxyPXRvTm90YXRpb25IZWxwZXIuY2FsbCh0aGlzLHQsZSxpLG8pO3JldHVybiByLnNwbGl0KFwiK1wiKS5sZW5ndGg8bi5zcGxpdChcIitcIikubGVuZ3RoP3I6bn0sVG9uZS5wcm90b3R5cGUuZnJvbVVuaXRzPWZ1bmN0aW9uKHQsZSl7aWYoIXRoaXMuY29udmVydCYmIXRoaXMuaXNVbmRlZih0aGlzLmNvbnZlcnQpKXJldHVybiB0O3N3aXRjaChlKXtjYXNlIFRvbmUuVHlwZS5UaW1lOnJldHVybiB0aGlzLnRvU2Vjb25kcyh0KTtjYXNlIFRvbmUuVHlwZS5GcmVxdWVuY3k6cmV0dXJuIHRoaXMudG9GcmVxdWVuY3kodCk7Y2FzZSBUb25lLlR5cGUuRGVjaWJlbHM6cmV0dXJuIHRoaXMuZGJUb0dhaW4odCk7Y2FzZSBUb25lLlR5cGUuTm9ybWFsUmFuZ2U6cmV0dXJuIE1hdGgubWluKE1hdGgubWF4KHQsMCksMSk7Y2FzZSBUb25lLlR5cGUuQXVkaW9SYW5nZTpyZXR1cm4gTWF0aC5taW4oTWF0aC5tYXgodCwtMSksMSk7Y2FzZSBUb25lLlR5cGUuUG9zaXRpdmU6cmV0dXJuIE1hdGgubWF4KHQsMCk7ZGVmYXVsdDpyZXR1cm4gdH19LFRvbmUucHJvdG90eXBlLnRvVW5pdHM9ZnVuY3Rpb24odCxlKXtpZighdGhpcy5jb252ZXJ0JiYhdGhpcy5pc1VuZGVmKHRoaXMuY29udmVydCkpcmV0dXJuIHQ7c3dpdGNoKGUpe2Nhc2UgVG9uZS5UeXBlLkRlY2liZWxzOnJldHVybiB0aGlzLmdhaW5Ub0RiKHQpO2RlZmF1bHQ6cmV0dXJuIHR9fSxub3RlVG9TY2FsZUluZGV4PXtjYmI6LTIsY2I6LTEsYzowLFwiYyNcIjoxLGN4OjIsZGJiOjAsZGI6MSxkOjIsXCJkI1wiOjMsZHg6NCxlYmI6MixlYjozLGU6NCxcImUjXCI6NSxleDo2LGZiYjozLGZiOjQsZjo1LFwiZiNcIjo2LGZ4OjcsZ2JiOjUsZ2I6NixnOjcsXCJnI1wiOjgsZ3g6OSxhYmI6NyxhYjo4LGE6OSxcImEjXCI6MTAsYXg6MTEsYmJiOjksYmI6MTAsYjoxMSxcImIjXCI6MTIsYng6MTN9LHNjYWxlSW5kZXhUb05vdGU9W1wiQ1wiLFwiQyNcIixcIkRcIixcIkQjXCIsXCJFXCIsXCJGXCIsXCJGI1wiLFwiR1wiLFwiRyNcIixcIkFcIixcIkEjXCIsXCJCXCJdLFRvbmUuQTQ9NDQwLFRvbmUucHJvdG90eXBlLm5vdGVUb0ZyZXF1ZW5jeT1mdW5jdGlvbih0KXt2YXIgZSxpLHMsbj10LnNwbGl0KC8oLT9cXGQrKS8pO3JldHVybiAzPT09bi5sZW5ndGg/KGU9bm90ZVRvU2NhbGVJbmRleFtuWzBdLnRvTG93ZXJDYXNlKCldLGk9blsxXSxzPWUrMTIqKHBhcnNlSW50KGksMTApKzEpLHRoaXMubWlkaVRvRnJlcXVlbmN5KHMpKTowfSxUb25lLnByb3RvdHlwZS5mcmVxdWVuY3lUb05vdGU9ZnVuY3Rpb24odCl7dmFyIGUsaT1NYXRoLmxvZyh0L1RvbmUuQTQpL01hdGguTE4yLHM9TWF0aC5yb3VuZCgxMippKSs1NyxuPU1hdGguZmxvb3Iocy8xMik7cmV0dXJuIDA+biYmKHMrPS0xMipuKSxlPXNjYWxlSW5kZXhUb05vdGVbcyUxMl0sZStuLnRvU3RyaW5nKCl9LFRvbmUucHJvdG90eXBlLmludGVydmFsVG9GcmVxdWVuY3lSYXRpbz1mdW5jdGlvbih0KXtyZXR1cm4gTWF0aC5wb3coMix0LzEyKX0sVG9uZS5wcm90b3R5cGUubWlkaVRvTm90ZT1mdW5jdGlvbih0KXt2YXIgZT1NYXRoLmZsb29yKHQvMTIpLTEsaT10JTEyO3JldHVybiBzY2FsZUluZGV4VG9Ob3RlW2ldK2V9LFRvbmUucHJvdG90eXBlLm5vdGVUb01pZGk9ZnVuY3Rpb24odCl7dmFyIGUsaSxzPXQuc3BsaXQoLyhcXGQrKS8pO3JldHVybiAzPT09cy5sZW5ndGg/KGU9bm90ZVRvU2NhbGVJbmRleFtzWzBdLnRvTG93ZXJDYXNlKCldLGk9c1sxXSxlKzEyKihwYXJzZUludChpLDEwKSsxKSk6MH0sVG9uZS5wcm90b3R5cGUubWlkaVRvRnJlcXVlbmN5PWZ1bmN0aW9uKHQpe3JldHVybiBUb25lLkE0Kk1hdGgucG93KDIsKHQtNjkpLzEyKX0sVG9uZX0pLE1vZHVsZShmdW5jdGlvbih0KXtyZXR1cm4gdC5QYXJhbT1mdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9uc09iamVjdChhcmd1bWVudHMsW1wicGFyYW1cIixcInVuaXRzXCIsXCJjb252ZXJ0XCJdLHQuUGFyYW0uZGVmYXVsdHMpO3RoaXMuX3BhcmFtPXRoaXMuaW5wdXQ9ZS5wYXJhbSx0aGlzLnVuaXRzPWUudW5pdHMsdGhpcy5jb252ZXJ0PWUuY29udmVydCx0aGlzLm92ZXJyaWRkZW49ITEsdGhpcy5pc1VuZGVmKGUudmFsdWUpfHwodGhpcy52YWx1ZT1lLnZhbHVlKX0sdC5leHRlbmQodC5QYXJhbSksdC5QYXJhbS5kZWZhdWx0cz17dW5pdHM6dC5UeXBlLkRlZmF1bHQsY29udmVydDohMCxwYXJhbTp2b2lkIDB9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlBhcmFtLnByb3RvdHlwZSxcInZhbHVlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90b1VuaXRzKHRoaXMuX3BhcmFtLnZhbHVlKX0sc2V0OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2Zyb21Vbml0cyh0KTt0aGlzLl9wYXJhbS52YWx1ZT1lfX0pLHQuUGFyYW0ucHJvdG90eXBlLl9mcm9tVW5pdHM9ZnVuY3Rpb24oZSl7aWYoIXRoaXMuY29udmVydCYmIXRoaXMuaXNVbmRlZih0aGlzLmNvbnZlcnQpKXJldHVybiBlO3N3aXRjaCh0aGlzLnVuaXRzKXtjYXNlIHQuVHlwZS5UaW1lOnJldHVybiB0aGlzLnRvU2Vjb25kcyhlKTtjYXNlIHQuVHlwZS5GcmVxdWVuY3k6cmV0dXJuIHRoaXMudG9GcmVxdWVuY3koZSk7Y2FzZSB0LlR5cGUuRGVjaWJlbHM6cmV0dXJuIHRoaXMuZGJUb0dhaW4oZSk7Y2FzZSB0LlR5cGUuTm9ybWFsUmFuZ2U6cmV0dXJuIE1hdGgubWluKE1hdGgubWF4KGUsMCksMSk7Y2FzZSB0LlR5cGUuQXVkaW9SYW5nZTpyZXR1cm4gTWF0aC5taW4oTWF0aC5tYXgoZSwtMSksMSk7Y2FzZSB0LlR5cGUuUG9zaXRpdmU6cmV0dXJuIE1hdGgubWF4KGUsMCk7ZGVmYXVsdDpyZXR1cm4gZX19LHQuUGFyYW0ucHJvdG90eXBlLl90b1VuaXRzPWZ1bmN0aW9uKGUpe2lmKCF0aGlzLmNvbnZlcnQmJiF0aGlzLmlzVW5kZWYodGhpcy5jb252ZXJ0KSlyZXR1cm4gZTtzd2l0Y2godGhpcy51bml0cyl7Y2FzZSB0LlR5cGUuRGVjaWJlbHM6cmV0dXJuIHRoaXMuZ2FpblRvRGIoZSk7ZGVmYXVsdDpyZXR1cm4gZX19LHQuUGFyYW0ucHJvdG90eXBlLl9taW5PdXRwdXQ9MWUtNSx0LlBhcmFtLnByb3RvdHlwZS5zZXRWYWx1ZUF0VGltZT1mdW5jdGlvbih0LGUpe3JldHVybiB0PXRoaXMuX2Zyb21Vbml0cyh0KSx0aGlzLl9wYXJhbS5zZXRWYWx1ZUF0VGltZSh0LHRoaXMudG9TZWNvbmRzKGUpKSx0aGlzfSx0LlBhcmFtLnByb3RvdHlwZS5zZXRSYW1wUG9pbnQ9ZnVuY3Rpb24odCl7dD10aGlzLmRlZmF1bHRBcmcodCx0aGlzLm5vdygpKTt2YXIgZT10aGlzLl9wYXJhbS52YWx1ZTtyZXR1cm4gdGhpcy5fcGFyYW0uc2V0VmFsdWVBdFRpbWUoZSx0KSx0aGlzfSx0LlBhcmFtLnByb3RvdHlwZS5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZT1mdW5jdGlvbih0LGUpe3JldHVybiB0PXRoaXMuX2Zyb21Vbml0cyh0KSx0aGlzLl9wYXJhbS5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZSh0LHRoaXMudG9TZWNvbmRzKGUpKSx0aGlzfSx0LlBhcmFtLnByb3RvdHlwZS5leHBvbmVudGlhbFJhbXBUb1ZhbHVlQXRUaW1lPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ9dGhpcy5fZnJvbVVuaXRzKHQpLHQ9TWF0aC5tYXgodGhpcy5fbWluT3V0cHV0LHQpLHRoaXMuX3BhcmFtLmV4cG9uZW50aWFsUmFtcFRvVmFsdWVBdFRpbWUodCx0aGlzLnRvU2Vjb25kcyhlKSksdGhpc30sdC5QYXJhbS5wcm90b3R5cGUuZXhwb25lbnRpYWxSYW1wVG9WYWx1ZT1mdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMubm93KCkscz10aGlzLnZhbHVlO3JldHVybiB0aGlzLnNldFZhbHVlQXRUaW1lKE1hdGgubWF4KHMsdGhpcy5fbWluT3V0cHV0KSxpKSx0aGlzLmV4cG9uZW50aWFsUmFtcFRvVmFsdWVBdFRpbWUodCxpK3RoaXMudG9TZWNvbmRzKGUpKSx0aGlzfSx0LlBhcmFtLnByb3RvdHlwZS5saW5lYXJSYW1wVG9WYWx1ZT1mdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMubm93KCk7cmV0dXJuIHRoaXMuc2V0UmFtcFBvaW50KGkpLHRoaXMubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUodCxpK3RoaXMudG9TZWNvbmRzKGUpKSx0aGlzfSx0LlBhcmFtLnByb3RvdHlwZS5zZXRUYXJnZXRBdFRpbWU9ZnVuY3Rpb24odCxlLGkpe3JldHVybiB0PXRoaXMuX2Zyb21Vbml0cyh0KSx0PU1hdGgubWF4KHRoaXMuX21pbk91dHB1dCx0KSxpPU1hdGgubWF4KHRoaXMuX21pbk91dHB1dCxpKSx0aGlzLl9wYXJhbS5zZXRUYXJnZXRBdFRpbWUodCx0aGlzLnRvU2Vjb25kcyhlKSxpKSx0aGlzfSx0LlBhcmFtLnByb3RvdHlwZS5zZXRWYWx1ZUN1cnZlQXRUaW1lPWZ1bmN0aW9uKHQsZSxpKXtmb3IodmFyIHM9MDtzPHQubGVuZ3RoO3MrKyl0W3NdPXRoaXMuX2Zyb21Vbml0cyh0W3NdKTtyZXR1cm4gdGhpcy5fcGFyYW0uc2V0VmFsdWVDdXJ2ZUF0VGltZSh0LHRoaXMudG9TZWNvbmRzKGUpLHRoaXMudG9TZWNvbmRzKGkpKSx0aGlzfSx0LlBhcmFtLnByb3RvdHlwZS5jYW5jZWxTY2hlZHVsZWRWYWx1ZXM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3BhcmFtLmNhbmNlbFNjaGVkdWxlZFZhbHVlcyh0aGlzLnRvU2Vjb25kcyh0KSksdGhpc30sdC5QYXJhbS5wcm90b3R5cGUucmFtcFRvPWZ1bmN0aW9uKGUsaSl7cmV0dXJuIGk9dGhpcy5kZWZhdWx0QXJnKGksMCksdGhpcy51bml0cz09PXQuVHlwZS5GcmVxdWVuY3l8fHRoaXMudW5pdHM9PT10LlR5cGUuQlBNP3RoaXMuZXhwb25lbnRpYWxSYW1wVG9WYWx1ZShlLGkpOnRoaXMubGluZWFyUmFtcFRvVmFsdWUoZSxpKSx0aGlzfSx0LlBhcmFtLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9wYXJhbT1udWxsLHRoaXN9LHQuUGFyYW19KSxNb2R1bGUoZnVuY3Rpb24odCl7cmV0dXJuIHQuR2Fpbj1mdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9uc09iamVjdChhcmd1bWVudHMsW1wiZ2FpblwiLFwidW5pdHNcIl0sdC5HYWluLmRlZmF1bHRzKTt0aGlzLmlucHV0PXRoaXMub3V0cHV0PXRoaXMuX2dhaW5Ob2RlPXRoaXMuY29udGV4dC5jcmVhdGVHYWluKCksdGhpcy5nYWluPW5ldyB0LlBhcmFtKHtwYXJhbTp0aGlzLl9nYWluTm9kZS5nYWluLHVuaXRzOmUudW5pdHMsdmFsdWU6ZS5nYWluLGNvbnZlcnQ6ZS5jb252ZXJ0fSksdGhpcy5fcmVhZE9ubHkoXCJnYWluXCIpfSx0LmV4dGVuZCh0LkdhaW4pLHQuR2Fpbi5kZWZhdWx0cz17Z2FpbjoxLGNvbnZlcnQ6ITB9LHQuR2Fpbi5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3QuUGFyYW0ucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9nYWluTm9kZS5kaXNjb25uZWN0KCksdGhpcy5fZ2Fpbk5vZGU9bnVsbCx0aGlzLl93cml0YWJsZShcImdhaW5cIiksdGhpcy5nYWluLmRpc3Bvc2UoKSx0aGlzLmdhaW49bnVsbH0sdC5HYWlufSksTW9kdWxlKGZ1bmN0aW9uKHQpe3JldHVybiB0LlNpZ25hbD1mdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9uc09iamVjdChhcmd1bWVudHMsW1widmFsdWVcIixcInVuaXRzXCJdLHQuU2lnbmFsLmRlZmF1bHRzKTt0aGlzLm91dHB1dD10aGlzLl9nYWluPXRoaXMuY29udGV4dC5jcmVhdGVHYWluKCksZS5wYXJhbT10aGlzLl9nYWluLmdhaW4sdC5QYXJhbS5jYWxsKHRoaXMsZSksdGhpcy5pbnB1dD10aGlzLl9wYXJhbT10aGlzLl9nYWluLmdhaW4sdC5TaWduYWwuX2NvbnN0YW50LmNoYWluKHRoaXMuX2dhaW4pfSx0LmV4dGVuZCh0LlNpZ25hbCx0LlBhcmFtKSx0LlNpZ25hbC5kZWZhdWx0cz17dmFsdWU6MCx1bml0czp0LlR5cGUuRGVmYXVsdCxjb252ZXJ0OiEwfSx0LlNpZ25hbC5wcm90b3R5cGUuY29ubmVjdD10LlNpZ25hbEJhc2UucHJvdG90eXBlLmNvbm5lY3QsdC5TaWduYWwucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5QYXJhbS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3BhcmFtPW51bGwsdGhpcy5fZ2Fpbi5kaXNjb25uZWN0KCksdGhpcy5fZ2Fpbj1udWxsLHRoaXN9LHQuU2lnbmFsLl9jb25zdGFudD1udWxsLHQuX2luaXRBdWRpb0NvbnRleHQoZnVuY3Rpb24oZSl7dmFyIGkscz1lLmNyZWF0ZUJ1ZmZlcigxLDEyOCxlLnNhbXBsZVJhdGUpLG49cy5nZXRDaGFubmVsRGF0YSgwKTtmb3IoaT0wO2k8bi5sZW5ndGg7aSsrKW5baV09MTt0LlNpZ25hbC5fY29uc3RhbnQ9ZS5jcmVhdGVCdWZmZXJTb3VyY2UoKSx0LlNpZ25hbC5fY29uc3RhbnQuY2hhbm5lbENvdW50PTEsdC5TaWduYWwuX2NvbnN0YW50LmNoYW5uZWxDb3VudE1vZGU9XCJleHBsaWNpdFwiLHQuU2lnbmFsLl9jb25zdGFudC5idWZmZXI9cyx0LlNpZ25hbC5fY29uc3RhbnQubG9vcD0hMCx0LlNpZ25hbC5fY29uc3RhbnQuc3RhcnQoMCksdC5TaWduYWwuX2NvbnN0YW50Lm5vR0MoKX0pLHQuU2lnbmFsfSksTW9kdWxlKGZ1bmN0aW9uKHQpe3JldHVybiB0LlRpbWVsaW5lPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zT2JqZWN0KGFyZ3VtZW50cyxbXCJtZW1vcnlcIl0sdC5UaW1lbGluZS5kZWZhdWx0cyk7dGhpcy5fdGltZWxpbmU9W10sdGhpcy5fdG9SZW1vdmU9W10sdGhpcy5faXRlcmF0aW5nPSExLHRoaXMubWVtb3J5PWUubWVtb3J5fSx0LmV4dGVuZCh0LlRpbWVsaW5lKSx0LlRpbWVsaW5lLmRlZmF1bHRzPXttZW1vcnk6MS8wfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5UaW1lbGluZS5wcm90b3R5cGUsXCJsZW5ndGhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RpbWVsaW5lLmxlbmd0aH19KSx0LlRpbWVsaW5lLnByb3RvdHlwZS5hZGRFdmVudD1mdW5jdGlvbih0KXt2YXIgZSxpO2lmKHRoaXMuaXNVbmRlZih0LnRpbWUpKXRocm93IG5ldyBFcnJvcihcImV2ZW50cyBtdXN0IGhhdmUgYSB0aW1lIGF0dHJpYnV0ZVwiKTtyZXR1cm4gdC50aW1lPXRoaXMudG9TZWNvbmRzKHQudGltZSksdGhpcy5fdGltZWxpbmUubGVuZ3RoPyhlPXRoaXMuX3NlYXJjaCh0LnRpbWUpLHRoaXMuX3RpbWVsaW5lLnNwbGljZShlKzEsMCx0KSk6dGhpcy5fdGltZWxpbmUucHVzaCh0KSx0aGlzLmxlbmd0aD50aGlzLm1lbW9yeSYmKGk9dGhpcy5sZW5ndGgtdGhpcy5tZW1vcnksdGhpcy5fdGltZWxpbmUuc3BsaWNlKDAsaSkpLHRoaXN9LHQuVGltZWxpbmUucHJvdG90eXBlLnJlbW92ZUV2ZW50PWZ1bmN0aW9uKHQpe2lmKHRoaXMuX2l0ZXJhdGluZyl0aGlzLl90b1JlbW92ZS5wdXNoKHQpO2Vsc2V7dmFyIGU9dGhpcy5fdGltZWxpbmUuaW5kZXhPZih0KTstMSE9PWUmJnRoaXMuX3RpbWVsaW5lLnNwbGljZShlLDEpfXJldHVybiB0aGlzfSx0LlRpbWVsaW5lLnByb3RvdHlwZS5nZXRFdmVudD1mdW5jdGlvbih0KXt0PXRoaXMudG9TZWNvbmRzKHQpO3ZhciBlPXRoaXMuX3NlYXJjaCh0KTtyZXR1cm4tMSE9PWU/dGhpcy5fdGltZWxpbmVbZV06bnVsbH0sdC5UaW1lbGluZS5wcm90b3R5cGUuZ2V0RXZlbnRBZnRlcj1mdW5jdGlvbih0KXt0PXRoaXMudG9TZWNvbmRzKHQpO3ZhciBlPXRoaXMuX3NlYXJjaCh0KTtyZXR1cm4gZSsxPHRoaXMuX3RpbWVsaW5lLmxlbmd0aD90aGlzLl90aW1lbGluZVtlKzFdOm51bGx9LHQuVGltZWxpbmUucHJvdG90eXBlLmdldEV2ZW50QmVmb3JlPWZ1bmN0aW9uKHQpe3Q9dGhpcy50b1NlY29uZHModCk7dmFyIGU9dGhpcy5fc2VhcmNoKHQpO3JldHVybiBlLTE+PTA/dGhpcy5fdGltZWxpbmVbZS0xXTpudWxsfSx0LlRpbWVsaW5lLnByb3RvdHlwZS5jYW5jZWw9ZnVuY3Rpb24odCl7aWYodGhpcy5fdGltZWxpbmUubGVuZ3RoPjEpe3Q9dGhpcy50b1NlY29uZHModCk7dmFyIGU9dGhpcy5fc2VhcmNoKHQpO3RoaXMuX3RpbWVsaW5lPWU+PTA/dGhpcy5fdGltZWxpbmUuc2xpY2UoMCxlKTpbXX1lbHNlIDE9PT10aGlzLl90aW1lbGluZS5sZW5ndGgmJnRoaXMuX3RpbWVsaW5lWzBdLnRpbWU+PXQmJih0aGlzLl90aW1lbGluZT1bXSk7cmV0dXJuIHRoaXN9LHQuVGltZWxpbmUucHJvdG90eXBlLmNhbmNlbEJlZm9yZT1mdW5jdGlvbih0KXtpZih0aGlzLl90aW1lbGluZS5sZW5ndGgpe3Q9dGhpcy50b1NlY29uZHModCk7dmFyIGU9dGhpcy5fc2VhcmNoKHQpO2U+PTAmJih0aGlzLl90aW1lbGluZT10aGlzLl90aW1lbGluZS5zbGljZShlKzEpKX1yZXR1cm4gdGhpc30sdC5UaW1lbGluZS5wcm90b3R5cGUuX3NlYXJjaD1mdW5jdGlvbih0KXtmb3IodmFyIGUsaSxzLG4sbz0wLHI9dGhpcy5fdGltZWxpbmUubGVuZ3RoLGE9cjthPj1vJiZyPm87KXtpZihlPU1hdGguZmxvb3IobysoYS1vKS8yKSxpPXRoaXMuX3RpbWVsaW5lW2VdLGkudGltZT09PXQpe2ZvcihzPWU7czx0aGlzLl90aW1lbGluZS5sZW5ndGg7cysrKW49dGhpcy5fdGltZWxpbmVbc10sbi50aW1lPT09dCYmKGU9cyk7cmV0dXJuIGV9aS50aW1lPnQ/YT1lLTE6aS50aW1lPHQmJihvPWUrMSl9cmV0dXJuIG8tMX0sdC5UaW1lbGluZS5wcm90b3R5cGUuX2l0ZXJhdGU9ZnVuY3Rpb24odCxlLGkpe3ZhciBzLG4sbztmb3IodGhpcy5faXRlcmF0aW5nPSEwLGU9dGhpcy5kZWZhdWx0QXJnKGUsMCksaT10aGlzLmRlZmF1bHRBcmcoaSx0aGlzLl90aW1lbGluZS5sZW5ndGgtMSkscz1lO2k+PXM7cysrKXQodGhpcy5fdGltZWxpbmVbc10pO2lmKHRoaXMuX2l0ZXJhdGluZz0hMSx0aGlzLl90b1JlbW92ZS5sZW5ndGg+MCl7Zm9yKG49MDtuPHRoaXMuX3RvUmVtb3ZlLmxlbmd0aDtuKyspbz10aGlzLl90aW1lbGluZS5pbmRleE9mKHRoaXMuX3RvUmVtb3ZlW25dKSwtMSE9PW8mJnRoaXMuX3RpbWVsaW5lLnNwbGljZShvLDEpO3RoaXMuX3RvUmVtb3ZlPVtdfX0sdC5UaW1lbGluZS5wcm90b3R5cGUuZm9yRWFjaD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5faXRlcmF0ZSh0KSx0aGlzfSx0LlRpbWVsaW5lLnByb3RvdHlwZS5mb3JFYWNoQmVmb3JlPWZ1bmN0aW9uKHQsZSl7dD10aGlzLnRvU2Vjb25kcyh0KTt2YXIgaT10aGlzLl9zZWFyY2godCk7cmV0dXJuLTEhPT1pJiZ0aGlzLl9pdGVyYXRlKGUsMCxpKSx0aGlzfSx0LlRpbWVsaW5lLnByb3RvdHlwZS5mb3JFYWNoQWZ0ZXI9ZnVuY3Rpb24odCxlKXt0PXRoaXMudG9TZWNvbmRzKHQpO3ZhciBpPXRoaXMuX3NlYXJjaCh0KTtyZXR1cm4gdGhpcy5faXRlcmF0ZShlLGkrMSksdGhpc30sdC5UaW1lbGluZS5wcm90b3R5cGUuZm9yRWFjaEZyb209ZnVuY3Rpb24odCxlKXt0PXRoaXMudG9TZWNvbmRzKHQpO2Zvcih2YXIgaT10aGlzLl9zZWFyY2godCk7aT49MCYmdGhpcy5fdGltZWxpbmVbaV0udGltZT49dDspaS0tO3JldHVybiB0aGlzLl9pdGVyYXRlKGUsaSsxKSx0aGlzfSx0LlRpbWVsaW5lLnByb3RvdHlwZS5mb3JFYWNoQXRUaW1lPWZ1bmN0aW9uKHQsZSl7dD10aGlzLnRvU2Vjb25kcyh0KTt2YXIgaT10aGlzLl9zZWFyY2godCk7cmV0dXJuLTEhPT1pJiZ0aGlzLl9pdGVyYXRlKGZ1bmN0aW9uKGkpe2kudGltZT09PXQmJmUoaSl9LDAsaSksdGhpc30sdC5UaW1lbGluZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3QucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl90aW1lbGluZT1udWxsLHRoaXMuX3RvUmVtb3ZlPW51bGx9LHQuVGltZWxpbmV9KSxNb2R1bGUoZnVuY3Rpb24odCl7cmV0dXJuIHQuVGltZWxpbmVTaWduYWw9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnNPYmplY3QoYXJndW1lbnRzLFtcInZhbHVlXCIsXCJ1bml0c1wiXSx0LlNpZ25hbC5kZWZhdWx0cyk7dC5TaWduYWwuYXBwbHkodGhpcyxlKSxlLnBhcmFtPXRoaXMuX3BhcmFtLHQuUGFyYW0uY2FsbCh0aGlzLGUpLHRoaXMuX2V2ZW50cz1uZXcgdC5UaW1lbGluZSgxMCksdGhpcy5faW5pdGlhbD10aGlzLl9mcm9tVW5pdHModGhpcy5fcGFyYW0udmFsdWUpfSx0LmV4dGVuZCh0LlRpbWVsaW5lU2lnbmFsLHQuUGFyYW0pLHQuVGltZWxpbmVTaWduYWwuVHlwZT17TGluZWFyOlwibGluZWFyXCIsRXhwb25lbnRpYWw6XCJleHBvbmVudGlhbFwiLFRhcmdldDpcInRhcmdldFwiLFNldDpcInNldFwifSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5UaW1lbGluZVNpZ25hbC5wcm90b3R5cGUsXCJ2YWx1ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdG9Vbml0cyh0aGlzLl9wYXJhbS52YWx1ZSl9LHNldDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9mcm9tVW5pdHModCk7dGhpcy5faW5pdGlhbD1lLHRoaXMuX3BhcmFtLnZhbHVlPWV9fSksdC5UaW1lbGluZVNpZ25hbC5wcm90b3R5cGUuc2V0VmFsdWVBdFRpbWU9ZnVuY3Rpb24oZSxpKXtyZXR1cm4gZT10aGlzLl9mcm9tVW5pdHMoZSksaT10aGlzLnRvU2Vjb25kcyhpKSx0aGlzLl9ldmVudHMuYWRkRXZlbnQoe3R5cGU6dC5UaW1lbGluZVNpZ25hbC5UeXBlLlNldCx2YWx1ZTplLHRpbWU6aX0pLHRoaXMuX3BhcmFtLnNldFZhbHVlQXRUaW1lKGUsaSksdGhpc30sdC5UaW1lbGluZVNpZ25hbC5wcm90b3R5cGUubGluZWFyUmFtcFRvVmFsdWVBdFRpbWU9ZnVuY3Rpb24oZSxpKXtyZXR1cm4gZT10aGlzLl9mcm9tVW5pdHMoZSksaT10aGlzLnRvU2Vjb25kcyhpKSx0aGlzLl9ldmVudHMuYWRkRXZlbnQoe3R5cGU6dC5UaW1lbGluZVNpZ25hbC5UeXBlLkxpbmVhcix2YWx1ZTplLHRpbWU6aX0pLHRoaXMuX3BhcmFtLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKGUsaSksdGhpc30sdC5UaW1lbGluZVNpZ25hbC5wcm90b3R5cGUuZXhwb25lbnRpYWxSYW1wVG9WYWx1ZUF0VGltZT1mdW5jdGlvbihlLGkpe3JldHVybiBlPXRoaXMuX2Zyb21Vbml0cyhlKSxlPU1hdGgubWF4KHRoaXMuX21pbk91dHB1dCxlKSxpPXRoaXMudG9TZWNvbmRzKGkpLHRoaXMuX2V2ZW50cy5hZGRFdmVudCh7dHlwZTp0LlRpbWVsaW5lU2lnbmFsLlR5cGUuRXhwb25lbnRpYWwsdmFsdWU6ZSx0aW1lOml9KSx0aGlzLl9wYXJhbS5leHBvbmVudGlhbFJhbXBUb1ZhbHVlQXRUaW1lKGUsaSksdGhpc30sdC5UaW1lbGluZVNpZ25hbC5wcm90b3R5cGUuc2V0VGFyZ2V0QXRUaW1lPWZ1bmN0aW9uKGUsaSxzKXtyZXR1cm4gZT10aGlzLl9mcm9tVW5pdHMoZSksZT1NYXRoLm1heCh0aGlzLl9taW5PdXRwdXQsZSkscz1NYXRoLm1heCh0aGlzLl9taW5PdXRwdXQscyksaT10aGlzLnRvU2Vjb25kcyhpKSx0aGlzLl9ldmVudHMuYWRkRXZlbnQoe3R5cGU6dC5UaW1lbGluZVNpZ25hbC5UeXBlLlRhcmdldCx2YWx1ZTplLHRpbWU6aSxjb25zdGFudDpzfSksdGhpcy5fcGFyYW0uc2V0VGFyZ2V0QXRUaW1lKGUsaSxzKSx0aGlzfSx0LlRpbWVsaW5lU2lnbmFsLnByb3RvdHlwZS5jYW5jZWxTY2hlZHVsZWRWYWx1ZXM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2V2ZW50cy5jYW5jZWwodCksdGhpcy5fcGFyYW0uY2FuY2VsU2NoZWR1bGVkVmFsdWVzKHRoaXMudG9TZWNvbmRzKHQpKSx0aGlzfSx0LlRpbWVsaW5lU2lnbmFsLnByb3RvdHlwZS5zZXRSYW1wUG9pbnQ9ZnVuY3Rpb24oZSl7dmFyIGkscztyZXR1cm4gZT10aGlzLnRvU2Vjb25kcyhlKSxpPXRoaXMuZ2V0VmFsdWVBdFRpbWUoZSkscz10aGlzLl9zZWFyY2hBZnRlcihlKSxzJiYodGhpcy5jYW5jZWxTY2hlZHVsZWRWYWx1ZXMoZSkscy50eXBlPT09dC5UaW1lbGluZVNpZ25hbC5UeXBlLkxpbmVhcj90aGlzLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKGksZSk6cy50eXBlPT09dC5UaW1lbGluZVNpZ25hbC5UeXBlLkV4cG9uZW50aWFsJiZ0aGlzLmV4cG9uZW50aWFsUmFtcFRvVmFsdWVBdFRpbWUoaSxlKSksdGhpcy5zZXRWYWx1ZUF0VGltZShpLGUpLHRoaXN9LHQuVGltZWxpbmVTaWduYWwucHJvdG90eXBlLmxpbmVhclJhbXBUb1ZhbHVlQmV0d2Vlbj1mdW5jdGlvbih0LGUsaSl7cmV0dXJuIHRoaXMuc2V0UmFtcFBvaW50KGUpLHRoaXMubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUodCxpKSx0aGlzfSx0LlRpbWVsaW5lU2lnbmFsLnByb3RvdHlwZS5leHBvbmVudGlhbFJhbXBUb1ZhbHVlQmV0d2Vlbj1mdW5jdGlvbih0LGUsaSl7cmV0dXJuIHRoaXMuc2V0UmFtcFBvaW50KGUpLHRoaXMuZXhwb25lbnRpYWxSYW1wVG9WYWx1ZUF0VGltZSh0LGkpLHRoaXN9LHQuVGltZWxpbmVTaWduYWwucHJvdG90eXBlLl9zZWFyY2hCZWZvcmU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2V2ZW50cy5nZXRFdmVudCh0KX0sdC5UaW1lbGluZVNpZ25hbC5wcm90b3R5cGUuX3NlYXJjaEFmdGVyPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9ldmVudHMuZ2V0RXZlbnRBZnRlcih0KX0sdC5UaW1lbGluZVNpZ25hbC5wcm90b3R5cGUuZ2V0VmFsdWVBdFRpbWU9ZnVuY3Rpb24oZSl7dmFyIGkscyxuPXRoaXMuX3NlYXJjaEFmdGVyKGUpLG89dGhpcy5fc2VhcmNoQmVmb3JlKGUpLHI9dGhpcy5faW5pdGlhbDtyZXR1cm4gbnVsbD09PW8/cj10aGlzLl9pbml0aWFsOm8udHlwZT09PXQuVGltZWxpbmVTaWduYWwuVHlwZS5UYXJnZXQ/KGk9dGhpcy5fZXZlbnRzLmdldEV2ZW50QmVmb3JlKG8udGltZSkscz1udWxsPT09aT90aGlzLl9pbml0aWFsOmkudmFsdWUscj10aGlzLl9leHBvbmVudGlhbEFwcHJvYWNoKG8udGltZSxzLG8udmFsdWUsby5jb25zdGFudCxlKSk6cj1udWxsPT09bj9vLnZhbHVlOm4udHlwZT09PXQuVGltZWxpbmVTaWduYWwuVHlwZS5MaW5lYXI/dGhpcy5fbGluZWFySW50ZXJwb2xhdGUoby50aW1lLG8udmFsdWUsbi50aW1lLG4udmFsdWUsZSk6bi50eXBlPT09dC5UaW1lbGluZVNpZ25hbC5UeXBlLkV4cG9uZW50aWFsP3RoaXMuX2V4cG9uZW50aWFsSW50ZXJwb2xhdGUoby50aW1lLG8udmFsdWUsbi50aW1lLG4udmFsdWUsZSk6by52YWx1ZSxyfSx0LlRpbWVsaW5lU2lnbmFsLnByb3RvdHlwZS5jb25uZWN0PXQuU2lnbmFsQmFzZS5wcm90b3R5cGUuY29ubmVjdCx0LlRpbWVsaW5lU2lnbmFsLnByb3RvdHlwZS5fZXhwb25lbnRpYWxBcHByb2FjaD1mdW5jdGlvbih0LGUsaSxzLG4pe3JldHVybiBpKyhlLWkpKk1hdGguZXhwKC0obi10KS9zKX0sdC5UaW1lbGluZVNpZ25hbC5wcm90b3R5cGUuX2xpbmVhckludGVycG9sYXRlPWZ1bmN0aW9uKHQsZSxpLHMsbil7cmV0dXJuIGUrKHMtZSkqKChuLXQpLyhpLXQpKX0sdC5UaW1lbGluZVNpZ25hbC5wcm90b3R5cGUuX2V4cG9uZW50aWFsSW50ZXJwb2xhdGU9ZnVuY3Rpb24odCxlLGkscyxuKXtyZXR1cm4gZT1NYXRoLm1heCh0aGlzLl9taW5PdXRwdXQsZSksZSpNYXRoLnBvdyhzL2UsKG4tdCkvKGktdCkpfSx0LlRpbWVsaW5lU2lnbmFsLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dC5TaWduYWwucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0LlBhcmFtLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fZXZlbnRzLmRpc3Bvc2UoKSx0aGlzLl9ldmVudHM9bnVsbH0sdC5UaW1lbGluZVNpZ25hbH0pLE1vZHVsZShmdW5jdGlvbih0KXtyZXR1cm4gdC5Qb3c9ZnVuY3Rpb24oZSl7dGhpcy5fZXhwPXRoaXMuZGVmYXVsdEFyZyhlLDEpLHRoaXMuX2V4cFNjYWxlcj10aGlzLmlucHV0PXRoaXMub3V0cHV0PW5ldyB0LldhdmVTaGFwZXIodGhpcy5fZXhwRnVuYyh0aGlzLl9leHApLDgxOTIpfSx0LmV4dGVuZCh0LlBvdyx0LlNpZ25hbEJhc2UpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlBvdy5wcm90b3R5cGUsXCJ2YWx1ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZXhwfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fZXhwPXQsdGhpcy5fZXhwU2NhbGVyLnNldE1hcCh0aGlzLl9leHBGdW5jKHRoaXMuX2V4cCkpfX0pLHQuUG93LnByb3RvdHlwZS5fZXhwRnVuYz1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIE1hdGgucG93KE1hdGguYWJzKGUpLHQpfX0sdC5Qb3cucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX2V4cFNjYWxlci5kaXNwb3NlKCksdGhpcy5fZXhwU2NhbGVyPW51bGwsdGhpc30sdC5Qb3d9KSxNb2R1bGUoZnVuY3Rpb24odCl7cmV0dXJuIHQuRW52ZWxvcGU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnNPYmplY3QoYXJndW1lbnRzLFtcImF0dGFja1wiLFwiZGVjYXlcIixcInN1c3RhaW5cIixcInJlbGVhc2VcIl0sdC5FbnZlbG9wZS5kZWZhdWx0cyk7dGhpcy5hdHRhY2s9ZS5hdHRhY2ssdGhpcy5kZWNheT1lLmRlY2F5LHRoaXMuc3VzdGFpbj1lLnN1c3RhaW4sdGhpcy5yZWxlYXNlPWUucmVsZWFzZSx0aGlzLl9hdHRhY2tDdXJ2ZT10LkVudmVsb3BlLlR5cGUuTGluZWFyLHRoaXMuX3JlbGVhc2VDdXJ2ZT10LkVudmVsb3BlLlR5cGUuRXhwb25lbnRpYWwsdGhpcy5fbWluT3V0cHV0PTFlLTUsdGhpcy5fc2lnPXRoaXMub3V0cHV0PW5ldyB0LlRpbWVsaW5lU2lnbmFsLHRoaXMuX3NpZy5zZXRWYWx1ZUF0VGltZSh0aGlzLl9taW5PdXRwdXQsMCksdGhpcy5hdHRhY2tDdXJ2ZT1lLmF0dGFja0N1cnZlLHRoaXMucmVsZWFzZUN1cnZlPWUucmVsZWFzZUN1cnZlfSx0LmV4dGVuZCh0LkVudmVsb3BlKSx0LkVudmVsb3BlLmRlZmF1bHRzPXthdHRhY2s6LjAxLGRlY2F5Oi4xLHN1c3RhaW46LjUscmVsZWFzZToxLGF0dGFja0N1cnZlOlwibGluZWFyXCIscmVsZWFzZUN1cnZlOlwiZXhwb25lbnRpYWxcIn0sdC5FbnZlbG9wZS5wcm90b3R5cGUuX3RpbWVNdWx0PS4yNSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5FbnZlbG9wZS5wcm90b3R5cGUsXCJ2YWx1ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2lnLnZhbHVlfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkVudmVsb3BlLnByb3RvdHlwZSxcImF0dGFja0N1cnZlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hdHRhY2tDdXJ2ZX0sc2V0OmZ1bmN0aW9uKGUpe2lmKGUhPT10LkVudmVsb3BlLlR5cGUuTGluZWFyJiZlIT09dC5FbnZlbG9wZS5UeXBlLkV4cG9uZW50aWFsKXRocm93IEVycm9yKCdhdHRhY2tDdXJ2ZSBtdXN0IGJlIGVpdGhlciBcImxpbmVhclwiIG9yIFwiZXhwb25lbnRpYWxcIi4gSW52YWxpZCB0eXBlOiAnLGUpO3RoaXMuX2F0dGFja0N1cnZlPWV9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuRW52ZWxvcGUucHJvdG90eXBlLFwicmVsZWFzZUN1cnZlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZWxlYXNlQ3VydmV9LHNldDpmdW5jdGlvbihlKXtpZihlIT09dC5FbnZlbG9wZS5UeXBlLkxpbmVhciYmZSE9PXQuRW52ZWxvcGUuVHlwZS5FeHBvbmVudGlhbCl0aHJvdyBFcnJvcigncmVsZWFzZUN1cnZlIG11c3QgYmUgZWl0aGVyIFwibGluZWFyXCIgb3IgXCJleHBvbmVudGlhbFwiLiBJbnZhbGlkIHR5cGU6ICcsZSk7dGhpcy5fcmVsZWFzZUN1cnZlPWV9fSksdC5FbnZlbG9wZS5wcm90b3R5cGUudHJpZ2dlckF0dGFjaz1mdW5jdGlvbihlLGkpe3ZhciBzLG4sbz10aGlzLm5vdygpK3RoaXMuYmxvY2tUaW1lO3JldHVybiBlPXRoaXMudG9TZWNvbmRzKGUsbykscz10aGlzLnRvU2Vjb25kcyh0aGlzLmF0dGFjaykrZSxuPXRoaXMudG9TZWNvbmRzKHRoaXMuZGVjYXkpLGk9dGhpcy5kZWZhdWx0QXJnKGksMSksdGhpcy5fYXR0YWNrQ3VydmU9PT10LkVudmVsb3BlLlR5cGUuTGluZWFyP3RoaXMuX3NpZy5saW5lYXJSYW1wVG9WYWx1ZUJldHdlZW4oaSxlLHMpOnRoaXMuX3NpZy5leHBvbmVudGlhbFJhbXBUb1ZhbHVlQmV0d2VlbihpLGUscyksdGhpcy5fc2lnLnNldFZhbHVlQXRUaW1lKGkscyksdGhpcy5fc2lnLmV4cG9uZW50aWFsUmFtcFRvVmFsdWVBdFRpbWUodGhpcy5zdXN0YWluKmkscytuKSx0aGlzfSx0LkVudmVsb3BlLnByb3RvdHlwZS50cmlnZ2VyUmVsZWFzZT1mdW5jdGlvbihlKXt2YXIgaSxzPXRoaXMubm93KCkrdGhpcy5ibG9ja1RpbWU7cmV0dXJuIGU9dGhpcy50b1NlY29uZHMoZSxzKSxpPXRoaXMudG9TZWNvbmRzKHRoaXMucmVsZWFzZSksdGhpcy5fcmVsZWFzZUN1cnZlPT09dC5FbnZlbG9wZS5UeXBlLkxpbmVhcj90aGlzLl9zaWcubGluZWFyUmFtcFRvVmFsdWVCZXR3ZWVuKHRoaXMuX21pbk91dHB1dCxlLGUraSk6dGhpcy5fc2lnLmV4cG9uZW50aWFsUmFtcFRvVmFsdWVCZXR3ZWVuKHRoaXMuX21pbk91dHB1dCxlLGkrZSksdGhpc30sdC5FbnZlbG9wZS5wcm90b3R5cGUudHJpZ2dlckF0dGFja1JlbGVhc2U9ZnVuY3Rpb24odCxlLGkpe3JldHVybiBlPXRoaXMudG9TZWNvbmRzKGUpLHRoaXMudHJpZ2dlckF0dGFjayhlLGkpLHRoaXMudHJpZ2dlclJlbGVhc2UoZSt0aGlzLnRvU2Vjb25kcyh0KSksdGhpc30sdC5FbnZlbG9wZS5wcm90b3R5cGUuY29ubmVjdD10LlNpZ25hbC5wcm90b3R5cGUuY29ubmVjdCx0LkVudmVsb3BlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9zaWcuZGlzcG9zZSgpLHRoaXMuX3NpZz1udWxsLHRoaXN9LHQuRW52ZWxvcGUuUGhhc2U9e0F0dGFjazpcImF0dGFja1wiLERlY2F5OlwiZGVjYXlcIixTdXN0YWluOlwic3VzdGFpblwiLFJlbGVhc2U6XCJyZWxlYXNlXCIsU3RhbmRieTpcInN0YW5kYnlcIn0sdC5FbnZlbG9wZS5UeXBlPXtMaW5lYXI6XCJsaW5lYXJcIixFeHBvbmVudGlhbDpcImV4cG9uZW50aWFsXCJ9LHQuRW52ZWxvcGV9KSxNb2R1bGUoZnVuY3Rpb24odCl7cmV0dXJuIHQuQW1wbGl0dWRlRW52ZWxvcGU9ZnVuY3Rpb24oKXt0LkVudmVsb3BlLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLmlucHV0PXRoaXMub3V0cHV0PW5ldyB0LkdhaW4sdGhpcy5fc2lnLmNvbm5lY3QodGhpcy5vdXRwdXQuZ2Fpbil9LHQuZXh0ZW5kKHQuQW1wbGl0dWRlRW52ZWxvcGUsdC5FbnZlbG9wZSksdC5BbXBsaXR1ZGVFbnZlbG9wZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlucHV0LmRpc3Bvc2UoKSx0aGlzLmlucHV0PW51bGwsdC5FbnZlbG9wZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXN9LHQuQW1wbGl0dWRlRW52ZWxvcGV9KSxNb2R1bGUoZnVuY3Rpb24odCl7cmV0dXJuIHQuQW5hbHlzZXI9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnNPYmplY3QoYXJndW1lbnRzLFtcInNpemVcIixcInR5cGVcIl0sdC5BbmFseXNlci5kZWZhdWx0cyk7dGhpcy5fYW5hbHlzZXI9dGhpcy5pbnB1dD10aGlzLmNvbnRleHQuY3JlYXRlQW5hbHlzZXIoKSx0aGlzLl90eXBlPWUudHlwZSx0aGlzLl9yZXR1cm5UeXBlPWUucmV0dXJuVHlwZSx0aGlzLl9idWZmZXI9bnVsbCx0aGlzLnNpemU9ZS5zaXplLHRoaXMudHlwZT1lLnR5cGUsdGhpcy5yZXR1cm5UeXBlPWUucmV0dXJuVHlwZSx0aGlzLm1pbkRlY2liZWxzPWUubWluRGVjaWJlbHMsdGhpcy5tYXhEZWNpYmVscz1lLm1heERlY2liZWxzfSx0LmV4dGVuZCh0LkFuYWx5c2VyKSx0LkFuYWx5c2VyLmRlZmF1bHRzPXtzaXplOjIwNDgscmV0dXJuVHlwZTpcImJ5dGVcIix0eXBlOlwiZmZ0XCIsc21vb3RoaW5nOi44LG1heERlY2liZWxzOi0zMCxtaW5EZWNpYmVsczotMTAwfSx0LkFuYWx5c2VyLlR5cGU9e1dhdmVmb3JtOlwid2F2ZWZvcm1cIixGRlQ6XCJmZnRcIn0sdC5BbmFseXNlci5SZXR1cm5UeXBlPXtCeXRlOlwiYnl0ZVwiLEZsb2F0OlwiZmxvYXRcIn0sdC5BbmFseXNlci5wcm90b3R5cGUuYW5hbHlzZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl90eXBlPT09dC5BbmFseXNlci5UeXBlLkZGVD90aGlzLl9yZXR1cm5UeXBlPT09dC5BbmFseXNlci5SZXR1cm5UeXBlLkJ5dGU/dGhpcy5fYW5hbHlzZXIuZ2V0Qnl0ZUZyZXF1ZW5jeURhdGEodGhpcy5fYnVmZmVyKTp0aGlzLl9hbmFseXNlci5nZXRGbG9hdEZyZXF1ZW5jeURhdGEodGhpcy5fYnVmZmVyKTp0aGlzLl90eXBlPT09dC5BbmFseXNlci5UeXBlLldhdmVmb3JtJiYodGhpcy5fcmV0dXJuVHlwZT09PXQuQW5hbHlzZXIuUmV0dXJuVHlwZS5CeXRlP3RoaXMuX2FuYWx5c2VyLmdldEJ5dGVUaW1lRG9tYWluRGF0YSh0aGlzLl9idWZmZXIpOnRoaXMuX2FuYWx5c2VyLmdldEZsb2F0VGltZURvbWFpbkRhdGEodGhpcy5fYnVmZmVyKSksdGhpcy5fYnVmZmVyfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5BbmFseXNlci5wcm90b3R5cGUsXCJzaXplXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hbmFseXNlci5mcmVxdWVuY3lCaW5Db3VudH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2FuYWx5c2VyLmZmdFNpemU9Mip0LHRoaXMudHlwZT10aGlzLl90eXBlfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkFuYWx5c2VyLnByb3RvdHlwZSxcInJldHVyblR5cGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JldHVyblR5cGV9LHNldDpmdW5jdGlvbihlKXtpZihlPT09dC5BbmFseXNlci5SZXR1cm5UeXBlLkJ5dGUpdGhpcy5fYnVmZmVyPW5ldyBVaW50OEFycmF5KHRoaXMuX2FuYWx5c2VyLmZyZXF1ZW5jeUJpbkNvdW50KTtlbHNle2lmKGUhPT10LkFuYWx5c2VyLlJldHVyblR5cGUuRmxvYXQpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBSZXR1cm4gVHlwZTogXCIrZSk7dGhpcy5fYnVmZmVyPW5ldyBGbG9hdDMyQXJyYXkodGhpcy5fYW5hbHlzZXIuZnJlcXVlbmN5QmluQ291bnQpfXRoaXMuX3JldHVyblR5cGU9ZX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5BbmFseXNlci5wcm90b3R5cGUsXCJ0eXBlXCIse2dldDpmdW5jdGlvbigpe1xucmV0dXJuIHRoaXMuX3R5cGV9LHNldDpmdW5jdGlvbihlKXtpZihlIT09dC5BbmFseXNlci5UeXBlLldhdmVmb3JtJiZlIT09dC5BbmFseXNlci5UeXBlLkZGVCl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIFR5cGU6IFwiK2UpO3RoaXMuX3R5cGU9ZX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5BbmFseXNlci5wcm90b3R5cGUsXCJzbW9vdGhpbmdcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FuYWx5c2VyLnNtb290aGluZ1RpbWVDb25zdGFudH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2FuYWx5c2VyLnNtb290aGluZ1RpbWVDb25zdGFudD10fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkFuYWx5c2VyLnByb3RvdHlwZSxcIm1pbkRlY2liZWxzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hbmFseXNlci5taW5EZWNpYmVsc30sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2FuYWx5c2VyLm1pbkRlY2liZWxzPXR9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuQW5hbHlzZXIucHJvdG90eXBlLFwibWF4RGVjaWJlbHNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FuYWx5c2VyLm1heERlY2liZWxzfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fYW5hbHlzZXIubWF4RGVjaWJlbHM9dH19KSx0LkFuYWx5c2VyLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX2FuYWx5c2VyLmRpc2Nvbm5lY3QoKSx0aGlzLl9hbmFseXNlcj1udWxsLHRoaXMuX2J1ZmZlcj1udWxsfSx0LkFuYWx5c2VyfSksTW9kdWxlKGZ1bmN0aW9uKHQpe3JldHVybiB0LkNvbXByZXNzb3I9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnNPYmplY3QoYXJndW1lbnRzLFtcInRocmVzaG9sZFwiLFwicmF0aW9cIl0sdC5Db21wcmVzc29yLmRlZmF1bHRzKTt0aGlzLl9jb21wcmVzc29yPXRoaXMuaW5wdXQ9dGhpcy5vdXRwdXQ9dGhpcy5jb250ZXh0LmNyZWF0ZUR5bmFtaWNzQ29tcHJlc3NvcigpLHRoaXMudGhyZXNob2xkPXRoaXMuX2NvbXByZXNzb3IudGhyZXNob2xkLHRoaXMuYXR0YWNrPW5ldyB0LlBhcmFtKHRoaXMuX2NvbXByZXNzb3IuYXR0YWNrLHQuVHlwZS5UaW1lKSx0aGlzLnJlbGVhc2U9bmV3IHQuUGFyYW0odGhpcy5fY29tcHJlc3Nvci5yZWxlYXNlLHQuVHlwZS5UaW1lKSx0aGlzLmtuZWU9dGhpcy5fY29tcHJlc3Nvci5rbmVlLHRoaXMucmF0aW89dGhpcy5fY29tcHJlc3Nvci5yYXRpbyx0aGlzLl9yZWFkT25seShbXCJrbmVlXCIsXCJyZWxlYXNlXCIsXCJhdHRhY2tcIixcInJhdGlvXCIsXCJ0aHJlc2hvbGRcIl0pLHRoaXMuc2V0KGUpfSx0LmV4dGVuZCh0LkNvbXByZXNzb3IpLHQuQ29tcHJlc3Nvci5kZWZhdWx0cz17cmF0aW86MTIsdGhyZXNob2xkOi0yNCxyZWxlYXNlOi4yNSxhdHRhY2s6LjAwMyxrbmVlOjMwfSx0LkNvbXByZXNzb3IucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3dyaXRhYmxlKFtcImtuZWVcIixcInJlbGVhc2VcIixcImF0dGFja1wiLFwicmF0aW9cIixcInRocmVzaG9sZFwiXSksdGhpcy5fY29tcHJlc3Nvci5kaXNjb25uZWN0KCksdGhpcy5fY29tcHJlc3Nvcj1udWxsLHRoaXMuYXR0YWNrLmRpc3Bvc2UoKSx0aGlzLmF0dGFjaz1udWxsLHRoaXMucmVsZWFzZS5kaXNwb3NlKCksdGhpcy5yZWxlYXNlPW51bGwsdGhpcy50aHJlc2hvbGQ9bnVsbCx0aGlzLnJhdGlvPW51bGwsdGhpcy5rbmVlPW51bGwsdGhpc30sdC5Db21wcmVzc29yfSksTW9kdWxlKGZ1bmN0aW9uKHQpe3JldHVybiB0LkFkZD1mdW5jdGlvbihlKXt0LmNhbGwodGhpcywyLDApLHRoaXMuX3N1bT10aGlzLmlucHV0WzBdPXRoaXMuaW5wdXRbMV09dGhpcy5vdXRwdXQ9dGhpcy5jb250ZXh0LmNyZWF0ZUdhaW4oKSx0aGlzLl9wYXJhbT10aGlzLmlucHV0WzFdPW5ldyB0LlNpZ25hbChlKSx0aGlzLl9wYXJhbS5jb25uZWN0KHRoaXMuX3N1bSl9LHQuZXh0ZW5kKHQuQWRkLHQuU2lnbmFsKSx0LkFkZC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fc3VtLmRpc2Nvbm5lY3QoKSx0aGlzLl9zdW09bnVsbCx0aGlzLl9wYXJhbS5kaXNwb3NlKCksdGhpcy5fcGFyYW09bnVsbCx0aGlzfSx0LkFkZH0pLE1vZHVsZShmdW5jdGlvbih0KXtyZXR1cm4gdC5NdWx0aXBseT1mdW5jdGlvbihlKXt0LmNhbGwodGhpcywyLDApLHRoaXMuX211bHQ9dGhpcy5pbnB1dFswXT10aGlzLm91dHB1dD10aGlzLmNvbnRleHQuY3JlYXRlR2FpbigpLHRoaXMuX3BhcmFtPXRoaXMuaW5wdXRbMV09dGhpcy5vdXRwdXQuZ2Fpbix0aGlzLl9wYXJhbS52YWx1ZT10aGlzLmRlZmF1bHRBcmcoZSwwKX0sdC5leHRlbmQodC5NdWx0aXBseSx0LlNpZ25hbCksdC5NdWx0aXBseS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fbXVsdC5kaXNjb25uZWN0KCksdGhpcy5fbXVsdD1udWxsLHRoaXMuX3BhcmFtPW51bGwsdGhpc30sdC5NdWx0aXBseX0pLE1vZHVsZShmdW5jdGlvbih0KXtyZXR1cm4gdC5OZWdhdGU9ZnVuY3Rpb24oKXt0aGlzLl9tdWx0aXBseT10aGlzLmlucHV0PXRoaXMub3V0cHV0PW5ldyB0Lk11bHRpcGx5KC0xKX0sdC5leHRlbmQodC5OZWdhdGUsdC5TaWduYWxCYXNlKSx0Lk5lZ2F0ZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fbXVsdGlwbHkuZGlzcG9zZSgpLHRoaXMuX211bHRpcGx5PW51bGwsdGhpc30sdC5OZWdhdGV9KSxNb2R1bGUoZnVuY3Rpb24odCl7cmV0dXJuIHQuU3VidHJhY3Q9ZnVuY3Rpb24oZSl7dC5jYWxsKHRoaXMsMiwwKSx0aGlzLl9zdW09dGhpcy5pbnB1dFswXT10aGlzLm91dHB1dD10aGlzLmNvbnRleHQuY3JlYXRlR2FpbigpLHRoaXMuX25lZz1uZXcgdC5OZWdhdGUsdGhpcy5fcGFyYW09dGhpcy5pbnB1dFsxXT1uZXcgdC5TaWduYWwoZSksdGhpcy5fcGFyYW0uY2hhaW4odGhpcy5fbmVnLHRoaXMuX3N1bSl9LHQuZXh0ZW5kKHQuU3VidHJhY3QsdC5TaWduYWwpLHQuU3VidHJhY3QucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX25lZy5kaXNwb3NlKCksdGhpcy5fbmVnPW51bGwsdGhpcy5fc3VtLmRpc2Nvbm5lY3QoKSx0aGlzLl9zdW09bnVsbCx0aGlzLl9wYXJhbS5kaXNwb3NlKCksdGhpcy5fcGFyYW09bnVsbCx0aGlzfSx0LlN1YnRyYWN0fSksTW9kdWxlKGZ1bmN0aW9uKHQpe3JldHVybiB0LkdyZWF0ZXJUaGFuWmVybz1mdW5jdGlvbigpe3RoaXMuX3RocmVzaD10aGlzLm91dHB1dD1uZXcgdC5XYXZlU2hhcGVyKGZ1bmN0aW9uKHQpe3JldHVybiAwPj10PzA6MX0pLHRoaXMuX3NjYWxlPXRoaXMuaW5wdXQ9bmV3IHQuTXVsdGlwbHkoMWU0KSx0aGlzLl9zY2FsZS5jb25uZWN0KHRoaXMuX3RocmVzaCl9LHQuZXh0ZW5kKHQuR3JlYXRlclRoYW5aZXJvLHQuU2lnbmFsQmFzZSksdC5HcmVhdGVyVGhhblplcm8ucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3NjYWxlLmRpc3Bvc2UoKSx0aGlzLl9zY2FsZT1udWxsLHRoaXMuX3RocmVzaC5kaXNwb3NlKCksdGhpcy5fdGhyZXNoPW51bGwsdGhpc30sdC5HcmVhdGVyVGhhblplcm99KSxNb2R1bGUoZnVuY3Rpb24odCl7cmV0dXJuIHQuRXF1YWxaZXJvPWZ1bmN0aW9uKCl7dGhpcy5fc2NhbGU9dGhpcy5pbnB1dD1uZXcgdC5NdWx0aXBseSgxZTQpLHRoaXMuX3RocmVzaD1uZXcgdC5XYXZlU2hhcGVyKGZ1bmN0aW9uKHQpe3JldHVybiAwPT09dD8xOjB9LDEyOCksdGhpcy5fZ3R6PXRoaXMub3V0cHV0PW5ldyB0LkdyZWF0ZXJUaGFuWmVybyx0aGlzLl9zY2FsZS5jaGFpbih0aGlzLl90aHJlc2gsdGhpcy5fZ3R6KX0sdC5leHRlbmQodC5FcXVhbFplcm8sdC5TaWduYWxCYXNlKSx0LkVxdWFsWmVyby5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fZ3R6LmRpc3Bvc2UoKSx0aGlzLl9ndHo9bnVsbCx0aGlzLl9zY2FsZS5kaXNwb3NlKCksdGhpcy5fc2NhbGU9bnVsbCx0aGlzLl90aHJlc2guZGlzcG9zZSgpLHRoaXMuX3RocmVzaD1udWxsLHRoaXN9LHQuRXF1YWxaZXJvfSksTW9kdWxlKGZ1bmN0aW9uKHQpe3JldHVybiB0LkVxdWFsPWZ1bmN0aW9uKGUpe3QuY2FsbCh0aGlzLDIsMCksdGhpcy5fc3ViPXRoaXMuaW5wdXRbMF09bmV3IHQuU3VidHJhY3QoZSksdGhpcy5fZXF1YWxzPXRoaXMub3V0cHV0PW5ldyB0LkVxdWFsWmVybyx0aGlzLl9zdWIuY29ubmVjdCh0aGlzLl9lcXVhbHMpLHRoaXMuaW5wdXRbMV09dGhpcy5fc3ViLmlucHV0WzFdfSx0LmV4dGVuZCh0LkVxdWFsLHQuU2lnbmFsQmFzZSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuRXF1YWwucHJvdG90eXBlLFwidmFsdWVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N1Yi52YWx1ZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3N1Yi52YWx1ZT10fX0pLHQuRXF1YWwucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX2VxdWFscy5kaXNwb3NlKCksdGhpcy5fZXF1YWxzPW51bGwsdGhpcy5fc3ViLmRpc3Bvc2UoKSx0aGlzLl9zdWI9bnVsbCx0aGlzfSx0LkVxdWFsfSksTW9kdWxlKGZ1bmN0aW9uKHQpe3QuU2VsZWN0PWZ1bmN0aW9uKGkpe3ZhciBzLG47Zm9yKGk9dGhpcy5kZWZhdWx0QXJnKGksMiksdC5jYWxsKHRoaXMsaSwxKSx0aGlzLmdhdGU9bmV3IHQuU2lnbmFsKDApLHRoaXMuX3JlYWRPbmx5KFwiZ2F0ZVwiKSxzPTA7aT5zO3MrKyluPW5ldyBlKHMpLHRoaXMuaW5wdXRbc109bix0aGlzLmdhdGUuY29ubmVjdChuLnNlbGVjdGVyKSxuLmNvbm5lY3QodGhpcy5vdXRwdXQpfSx0LmV4dGVuZCh0LlNlbGVjdCx0LlNpZ25hbEJhc2UpLHQuU2VsZWN0LnByb3RvdHlwZS5zZWxlY3Q9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdD1NYXRoLmZsb29yKHQpLHRoaXMuZ2F0ZS5zZXRWYWx1ZUF0VGltZSh0LHRoaXMudG9TZWNvbmRzKGUpKSx0aGlzfSx0LlNlbGVjdC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMuX3dyaXRhYmxlKFwiZ2F0ZVwiKSx0aGlzLmdhdGUuZGlzcG9zZSgpLHRoaXMuZ2F0ZT1udWxsO2Zvcih2YXIgZT0wO2U8dGhpcy5pbnB1dC5sZW5ndGg7ZSsrKXRoaXMuaW5wdXRbZV0uZGlzcG9zZSgpLHRoaXMuaW5wdXRbZV09bnVsbDtyZXR1cm4gdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXN9O3ZhciBlPWZ1bmN0aW9uKGUpe3RoaXMuc2VsZWN0ZXI9bmV3IHQuRXF1YWwoZSksdGhpcy5nYXRlPXRoaXMuaW5wdXQ9dGhpcy5vdXRwdXQ9dGhpcy5jb250ZXh0LmNyZWF0ZUdhaW4oKSx0aGlzLnNlbGVjdGVyLmNvbm5lY3QodGhpcy5nYXRlLmdhaW4pfTtyZXR1cm4gdC5leHRlbmQoZSksZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3QucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLnNlbGVjdGVyLmRpc3Bvc2UoKSx0aGlzLmdhdGUuZGlzY29ubmVjdCgpLHRoaXMuc2VsZWN0ZXI9bnVsbCx0aGlzLmdhdGU9bnVsbH0sdC5TZWxlY3R9KSxNb2R1bGUoZnVuY3Rpb24odCl7cmV0dXJuIHQuSWZUaGVuRWxzZT1mdW5jdGlvbigpe3QuY2FsbCh0aGlzLDMsMCksdGhpcy5fc2VsZWN0b3I9dGhpcy5vdXRwdXQ9bmV3IHQuU2VsZWN0KDIpLHRoaXNbXCJpZlwiXT10aGlzLmlucHV0WzBdPXRoaXMuX3NlbGVjdG9yLmdhdGUsdGhpcy50aGVuPXRoaXMuaW5wdXRbMV09dGhpcy5fc2VsZWN0b3IuaW5wdXRbMV0sdGhpc1tcImVsc2VcIl09dGhpcy5pbnB1dFsyXT10aGlzLl9zZWxlY3Rvci5pbnB1dFswXX0sdC5leHRlbmQodC5JZlRoZW5FbHNlLHQuU2lnbmFsQmFzZSksdC5JZlRoZW5FbHNlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9zZWxlY3Rvci5kaXNwb3NlKCksdGhpcy5fc2VsZWN0b3I9bnVsbCx0aGlzW1wiaWZcIl09bnVsbCx0aGlzLnRoZW49bnVsbCx0aGlzW1wiZWxzZVwiXT1udWxsLHRoaXN9LHQuSWZUaGVuRWxzZX0pLE1vZHVsZShmdW5jdGlvbih0KXtyZXR1cm4gdC5PUj1mdW5jdGlvbihlKXtlPXRoaXMuZGVmYXVsdEFyZyhlLDIpLHQuY2FsbCh0aGlzLGUsMCksdGhpcy5fc3VtPXRoaXMuY29udGV4dC5jcmVhdGVHYWluKCksdGhpcy5fZ3R6PXRoaXMub3V0cHV0PW5ldyB0LkdyZWF0ZXJUaGFuWmVybztmb3IodmFyIGk9MDtlPmk7aSsrKXRoaXMuaW5wdXRbaV09dGhpcy5fc3VtO3RoaXMuX3N1bS5jb25uZWN0KHRoaXMuX2d0eil9LHQuZXh0ZW5kKHQuT1IsdC5TaWduYWxCYXNlKSx0Lk9SLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9ndHouZGlzcG9zZSgpLHRoaXMuX2d0ej1udWxsLHRoaXMuX3N1bS5kaXNjb25uZWN0KCksdGhpcy5fc3VtPW51bGwsdGhpc30sdC5PUn0pLE1vZHVsZShmdW5jdGlvbih0KXtyZXR1cm4gdC5BTkQ9ZnVuY3Rpb24oZSl7ZT10aGlzLmRlZmF1bHRBcmcoZSwyKSx0LmNhbGwodGhpcyxlLDApLHRoaXMuX2VxdWFscz10aGlzLm91dHB1dD1uZXcgdC5FcXVhbChlKTtmb3IodmFyIGk9MDtlPmk7aSsrKXRoaXMuaW5wdXRbaV09dGhpcy5fZXF1YWxzfSx0LmV4dGVuZCh0LkFORCx0LlNpZ25hbEJhc2UpLHQuQU5ELnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9lcXVhbHMuZGlzcG9zZSgpLHRoaXMuX2VxdWFscz1udWxsLHRoaXN9LHQuQU5EfSksTW9kdWxlKGZ1bmN0aW9uKHQpe3JldHVybiB0Lk5PVD10LkVxdWFsWmVybyx0Lk5PVH0pLE1vZHVsZShmdW5jdGlvbih0KXtyZXR1cm4gdC5HcmVhdGVyVGhhbj1mdW5jdGlvbihlKXt0LmNhbGwodGhpcywyLDApLHRoaXMuX3BhcmFtPXRoaXMuaW5wdXRbMF09bmV3IHQuU3VidHJhY3QoZSksdGhpcy5pbnB1dFsxXT10aGlzLl9wYXJhbS5pbnB1dFsxXSx0aGlzLl9ndHo9dGhpcy5vdXRwdXQ9bmV3IHQuR3JlYXRlclRoYW5aZXJvLHRoaXMuX3BhcmFtLmNvbm5lY3QodGhpcy5fZ3R6KX0sdC5leHRlbmQodC5HcmVhdGVyVGhhbix0LlNpZ25hbCksdC5HcmVhdGVyVGhhbi5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fcGFyYW0uZGlzcG9zZSgpLHRoaXMuX3BhcmFtPW51bGwsdGhpcy5fZ3R6LmRpc3Bvc2UoKSx0aGlzLl9ndHo9bnVsbCx0aGlzfSx0LkdyZWF0ZXJUaGFufSksTW9kdWxlKGZ1bmN0aW9uKHQpe3JldHVybiB0Lkxlc3NUaGFuPWZ1bmN0aW9uKGUpe3QuY2FsbCh0aGlzLDIsMCksdGhpcy5fbmVnPXRoaXMuaW5wdXRbMF09bmV3IHQuTmVnYXRlLHRoaXMuX2d0PXRoaXMub3V0cHV0PW5ldyB0LkdyZWF0ZXJUaGFuLHRoaXMuX3JoTmVnPW5ldyB0Lk5lZ2F0ZSx0aGlzLl9wYXJhbT10aGlzLmlucHV0WzFdPW5ldyB0LlNpZ25hbChlKSx0aGlzLl9uZWcuY29ubmVjdCh0aGlzLl9ndCksdGhpcy5fcGFyYW0uY29ubmVjdCh0aGlzLl9yaE5lZyksdGhpcy5fcmhOZWcuY29ubmVjdCh0aGlzLl9ndCwwLDEpfSx0LmV4dGVuZCh0Lkxlc3NUaGFuLHQuU2lnbmFsKSx0Lkxlc3NUaGFuLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9uZWcuZGlzcG9zZSgpLHRoaXMuX25lZz1udWxsLHRoaXMuX2d0LmRpc3Bvc2UoKSx0aGlzLl9ndD1udWxsLHRoaXMuX3JoTmVnLmRpc3Bvc2UoKSx0aGlzLl9yaE5lZz1udWxsLHRoaXMuX3BhcmFtLmRpc3Bvc2UoKSx0aGlzLl9wYXJhbT1udWxsLHRoaXN9LHQuTGVzc1RoYW59KSxNb2R1bGUoZnVuY3Rpb24odCl7cmV0dXJuIHQuQWJzPWZ1bmN0aW9uKCl7dC5jYWxsKHRoaXMsMSwwKSx0aGlzLl9sdHo9bmV3IHQuTGVzc1RoYW4oMCksdGhpcy5fc3dpdGNoPXRoaXMub3V0cHV0PW5ldyB0LlNlbGVjdCgyKSx0aGlzLl9uZWdhdGU9bmV3IHQuTmVnYXRlLHRoaXMuaW5wdXQuY29ubmVjdCh0aGlzLl9zd2l0Y2gsMCwwKSx0aGlzLmlucHV0LmNvbm5lY3QodGhpcy5fbmVnYXRlKSx0aGlzLl9uZWdhdGUuY29ubmVjdCh0aGlzLl9zd2l0Y2gsMCwxKSx0aGlzLmlucHV0LmNoYWluKHRoaXMuX2x0eix0aGlzLl9zd2l0Y2guZ2F0ZSl9LHQuZXh0ZW5kKHQuQWJzLHQuU2lnbmFsQmFzZSksdC5BYnMucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3N3aXRjaC5kaXNwb3NlKCksdGhpcy5fc3dpdGNoPW51bGwsdGhpcy5fbHR6LmRpc3Bvc2UoKSx0aGlzLl9sdHo9bnVsbCx0aGlzLl9uZWdhdGUuZGlzcG9zZSgpLHRoaXMuX25lZ2F0ZT1udWxsLHRoaXN9LHQuQWJzfSksTW9kdWxlKGZ1bmN0aW9uKHQpe3JldHVybiB0Lk1heD1mdW5jdGlvbihlKXt0LmNhbGwodGhpcywyLDApLHRoaXMuaW5wdXRbMF09dGhpcy5jb250ZXh0LmNyZWF0ZUdhaW4oKSx0aGlzLl9wYXJhbT10aGlzLmlucHV0WzFdPW5ldyB0LlNpZ25hbChlKSx0aGlzLl9pZlRoZW5FbHNlPXRoaXMub3V0cHV0PW5ldyB0LklmVGhlbkVsc2UsdGhpcy5fZ3Q9bmV3IHQuR3JlYXRlclRoYW4sdGhpcy5pbnB1dFswXS5jaGFpbih0aGlzLl9ndCx0aGlzLl9pZlRoZW5FbHNlW1wiaWZcIl0pLHRoaXMuaW5wdXRbMF0uY29ubmVjdCh0aGlzLl9pZlRoZW5FbHNlLnRoZW4pLHRoaXMuX3BhcmFtLmNvbm5lY3QodGhpcy5faWZUaGVuRWxzZVtcImVsc2VcIl0pLHRoaXMuX3BhcmFtLmNvbm5lY3QodGhpcy5fZ3QsMCwxKX0sdC5leHRlbmQodC5NYXgsdC5TaWduYWwpLHQuTWF4LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9wYXJhbS5kaXNwb3NlKCksdGhpcy5faWZUaGVuRWxzZS5kaXNwb3NlKCksdGhpcy5fZ3QuZGlzcG9zZSgpLHRoaXMuX3BhcmFtPW51bGwsdGhpcy5faWZUaGVuRWxzZT1udWxsLHRoaXMuX2d0PW51bGwsdGhpc30sdC5NYXh9KSxNb2R1bGUoZnVuY3Rpb24odCl7cmV0dXJuIHQuTWluPWZ1bmN0aW9uKGUpe3QuY2FsbCh0aGlzLDIsMCksdGhpcy5pbnB1dFswXT10aGlzLmNvbnRleHQuY3JlYXRlR2FpbigpLHRoaXMuX2lmVGhlbkVsc2U9dGhpcy5vdXRwdXQ9bmV3IHQuSWZUaGVuRWxzZSx0aGlzLl9sdD1uZXcgdC5MZXNzVGhhbix0aGlzLl9wYXJhbT10aGlzLmlucHV0WzFdPW5ldyB0LlNpZ25hbChlKSx0aGlzLmlucHV0WzBdLmNoYWluKHRoaXMuX2x0LHRoaXMuX2lmVGhlbkVsc2VbXCJpZlwiXSksdGhpcy5pbnB1dFswXS5jb25uZWN0KHRoaXMuX2lmVGhlbkVsc2UudGhlbiksdGhpcy5fcGFyYW0uY29ubmVjdCh0aGlzLl9pZlRoZW5FbHNlW1wiZWxzZVwiXSksdGhpcy5fcGFyYW0uY29ubmVjdCh0aGlzLl9sdCwwLDEpfSx0LmV4dGVuZCh0Lk1pbix0LlNpZ25hbCksdC5NaW4ucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3BhcmFtLmRpc3Bvc2UoKSx0aGlzLl9pZlRoZW5FbHNlLmRpc3Bvc2UoKSx0aGlzLl9sdC5kaXNwb3NlKCksdGhpcy5fcGFyYW09bnVsbCx0aGlzLl9pZlRoZW5FbHNlPW51bGwsdGhpcy5fbHQ9bnVsbCx0aGlzfSx0Lk1pbn0pLE1vZHVsZShmdW5jdGlvbih0KXtyZXR1cm4gdC5Nb2R1bG89ZnVuY3Rpb24oZSl7dC5jYWxsKHRoaXMsMSwxKSx0aGlzLl9zaGFwZXI9bmV3IHQuV2F2ZVNoYXBlcihNYXRoLnBvdygyLDE2KSksdGhpcy5fbXVsdGlwbHk9bmV3IHQuTXVsdGlwbHksdGhpcy5fc3VidHJhY3Q9dGhpcy5vdXRwdXQ9bmV3IHQuU3VidHJhY3QsdGhpcy5fbW9kU2lnbmFsPW5ldyB0LlNpZ25hbChlKSx0aGlzLmlucHV0LmZhbih0aGlzLl9zaGFwZXIsdGhpcy5fc3VidHJhY3QpLHRoaXMuX21vZFNpZ25hbC5jb25uZWN0KHRoaXMuX211bHRpcGx5LDAsMCksdGhpcy5fc2hhcGVyLmNvbm5lY3QodGhpcy5fbXVsdGlwbHksMCwxKSx0aGlzLl9tdWx0aXBseS5jb25uZWN0KHRoaXMuX3N1YnRyYWN0LDAsMSksdGhpcy5fc2V0V2F2ZVNoYXBlcihlKX0sdC5leHRlbmQodC5Nb2R1bG8sdC5TaWduYWxCYXNlKSx0Lk1vZHVsby5wcm90b3R5cGUuX3NldFdhdmVTaGFwZXI9ZnVuY3Rpb24odCl7dGhpcy5fc2hhcGVyLnNldE1hcChmdW5jdGlvbihlKXt2YXIgaT1NYXRoLmZsb29yKChlKzFlLTQpL3QpO3JldHVybiBpfSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0Lk1vZHVsby5wcm90b3R5cGUsXCJ2YWx1ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbW9kU2lnbmFsLnZhbHVlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbW9kU2lnbmFsLnZhbHVlPXQsdGhpcy5fc2V0V2F2ZVNoYXBlcih0KX19KSx0Lk1vZHVsby5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fc2hhcGVyLmRpc3Bvc2UoKSx0aGlzLl9zaGFwZXI9bnVsbCx0aGlzLl9tdWx0aXBseS5kaXNwb3NlKCksdGhpcy5fbXVsdGlwbHk9bnVsbCx0aGlzLl9zdWJ0cmFjdC5kaXNwb3NlKCksdGhpcy5fc3VidHJhY3Q9bnVsbCx0aGlzLl9tb2RTaWduYWwuZGlzcG9zZSgpLHRoaXMuX21vZFNpZ25hbD1udWxsLHRoaXN9LHQuTW9kdWxvfSksTW9kdWxlKGZ1bmN0aW9uKHQpe3JldHVybiB0LkF1ZGlvVG9HYWluPWZ1bmN0aW9uKCl7dGhpcy5fbm9ybT10aGlzLmlucHV0PXRoaXMub3V0cHV0PW5ldyB0LldhdmVTaGFwZXIoZnVuY3Rpb24odCl7cmV0dXJuKHQrMSkvMn0pfSx0LmV4dGVuZCh0LkF1ZGlvVG9HYWluLHQuU2lnbmFsQmFzZSksdC5BdWRpb1RvR2Fpbi5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fbm9ybS5kaXNwb3NlKCksdGhpcy5fbm9ybT1udWxsLHRoaXN9LHQuQXVkaW9Ub0dhaW59KSxNb2R1bGUoZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSh0LGUsaSl7dmFyIHM9bmV3IHQ7cmV0dXJuIGkuX2V2YWwoZVswXSkuY29ubmVjdChzLDAsMCksaS5fZXZhbChlWzFdKS5jb25uZWN0KHMsMCwxKSxzfWZ1bmN0aW9uIGkodCxlLGkpe3ZhciBzPW5ldyB0O3JldHVybiBpLl9ldmFsKGVbMF0pLmNvbm5lY3QocywwLDApLHN9ZnVuY3Rpb24gcyh0KXtyZXR1cm4gdD9wYXJzZUZsb2F0KHQpOnZvaWQgMH1mdW5jdGlvbiBuKHQpe3JldHVybiB0JiZ0LmFyZ3M/cGFyc2VGbG9hdCh0LmFyZ3MpOnZvaWQgMH1yZXR1cm4gdC5FeHByPWZ1bmN0aW9uKCl7dmFyIHQsZSxpLHM9dGhpcy5fcmVwbGFjZW1lbnRzKEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykpLG49dGhpcy5fcGFyc2VJbnB1dHMocyk7Zm9yKHRoaXMuX25vZGVzPVtdLHRoaXMuaW5wdXQ9bmV3IEFycmF5KG4pLHQ9MDtuPnQ7dCsrKXRoaXMuaW5wdXRbdF09dGhpcy5jb250ZXh0LmNyZWF0ZUdhaW4oKTtlPXRoaXMuX3BhcnNlVHJlZShzKTt0cnl7aT10aGlzLl9ldmFsKGUpfWNhdGNoKG8pe3Rocm93IHRoaXMuX2Rpc3Bvc2VOb2RlcygpLG5ldyBFcnJvcihcIkNvdWxkIGV2YWx1YXRlIGV4cHJlc3Npb246IFwiK3MpfXRoaXMub3V0cHV0PWl9LHQuZXh0ZW5kKHQuRXhwcix0LlNpZ25hbEJhc2UpLHQuRXhwci5fRXhwcmVzc2lvbnM9e3ZhbHVlOntzaWduYWw6e3JlZ2V4cDovXlxcZCtcXC5cXGQrfF5cXGQrLyxtZXRob2Q6ZnVuY3Rpb24oZSl7dmFyIGk9bmV3IHQuU2lnbmFsKHMoZSkpO3JldHVybiBpfX0saW5wdXQ6e3JlZ2V4cDovXlxcJFxcZC8sbWV0aG9kOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUuaW5wdXRbcyh0LnN1YnN0cigxKSldfX19LGdsdWU6e1wiKFwiOntyZWdleHA6L15cXCgvfSxcIilcIjp7cmVnZXhwOi9eXFwpL30sXCIsXCI6e3JlZ2V4cDovXiwvfX0sZnVuYzp7YWJzOntyZWdleHA6L15hYnMvLG1ldGhvZDppLmJpbmQodGhpcyx0LkFicyl9LG1pbjp7cmVnZXhwOi9ebWluLyxtZXRob2Q6ZS5iaW5kKHRoaXMsdC5NaW4pfSxtYXg6e3JlZ2V4cDovXm1heC8sbWV0aG9kOmUuYmluZCh0aGlzLHQuTWF4KX0sXCJpZlwiOntyZWdleHA6L15pZi8sbWV0aG9kOmZ1bmN0aW9uKGUsaSl7dmFyIHM9bmV3IHQuSWZUaGVuRWxzZTtyZXR1cm4gaS5fZXZhbChlWzBdKS5jb25uZWN0KHNbXCJpZlwiXSksaS5fZXZhbChlWzFdKS5jb25uZWN0KHMudGhlbiksaS5fZXZhbChlWzJdKS5jb25uZWN0KHNbXCJlbHNlXCJdKSxzfX0sZ3QwOntyZWdleHA6L15ndDAvLG1ldGhvZDppLmJpbmQodGhpcyx0LkdyZWF0ZXJUaGFuWmVybyl9LGVxMDp7cmVnZXhwOi9eZXEwLyxtZXRob2Q6aS5iaW5kKHRoaXMsdC5FcXVhbFplcm8pfSxtb2Q6e3JlZ2V4cDovXm1vZC8sbWV0aG9kOmZ1bmN0aW9uKGUsaSl7dmFyIHM9bihlWzFdKSxvPW5ldyB0Lk1vZHVsbyhzKTtyZXR1cm4gaS5fZXZhbChlWzBdKS5jb25uZWN0KG8pLG99fSxwb3c6e3JlZ2V4cDovXnBvdy8sbWV0aG9kOmZ1bmN0aW9uKGUsaSl7dmFyIHM9bihlWzFdKSxvPW5ldyB0LlBvdyhzKTtyZXR1cm4gaS5fZXZhbChlWzBdKS5jb25uZWN0KG8pLG99fSxhMmc6e3JlZ2V4cDovXmEyZy8sbWV0aG9kOmZ1bmN0aW9uKGUsaSl7dmFyIHM9bmV3IHQuQXVkaW9Ub0dhaW47cmV0dXJuIGkuX2V2YWwoZVswXSkuY29ubmVjdChzKSxzfX19LGJpbmFyeTp7XCIrXCI6e3JlZ2V4cDovXlxcKy8scHJlY2VkZW5jZToxLG1ldGhvZDplLmJpbmQodGhpcyx0LkFkZCl9LFwiLVwiOntyZWdleHA6L15cXC0vLHByZWNlZGVuY2U6MSxtZXRob2Q6ZnVuY3Rpb24ocyxuKXtyZXR1cm4gMT09PXMubGVuZ3RoP2kodC5OZWdhdGUscyxuKTplKHQuU3VidHJhY3QscyxuKX19LFwiKlwiOntyZWdleHA6L15cXCovLHByZWNlZGVuY2U6MCxtZXRob2Q6ZS5iaW5kKHRoaXMsdC5NdWx0aXBseSl9LFwiPlwiOntyZWdleHA6L15cXD4vLHByZWNlZGVuY2U6MixtZXRob2Q6ZS5iaW5kKHRoaXMsdC5HcmVhdGVyVGhhbil9LFwiPFwiOntyZWdleHA6L148LyxwcmVjZWRlbmNlOjIsbWV0aG9kOmUuYmluZCh0aGlzLHQuTGVzc1RoYW4pfSxcIj09XCI6e3JlZ2V4cDovXj09LyxwcmVjZWRlbmNlOjMsbWV0aG9kOmUuYmluZCh0aGlzLHQuRXF1YWwpfSxcIiYmXCI6e3JlZ2V4cDovXiYmLyxwcmVjZWRlbmNlOjQsbWV0aG9kOmUuYmluZCh0aGlzLHQuQU5EKX0sXCJ8fFwiOntyZWdleHA6L15cXHxcXHwvLHByZWNlZGVuY2U6NSxtZXRob2Q6ZS5iaW5kKHRoaXMsdC5PUil9fSx1bmFyeTp7XCItXCI6e3JlZ2V4cDovXlxcLS8sbWV0aG9kOmkuYmluZCh0aGlzLHQuTmVnYXRlKX0sXCIhXCI6e3JlZ2V4cDovXlxcIS8sbWV0aG9kOmkuYmluZCh0aGlzLHQuTk9UKX19fSx0LkV4cHIucHJvdG90eXBlLl9wYXJzZUlucHV0cz1mdW5jdGlvbih0KXt2YXIgZSxpLHM9dC5tYXRjaCgvXFwkXFxkL2cpLG49MDtpZihudWxsIT09cylmb3IoZT0wO2U8cy5sZW5ndGg7ZSsrKWk9cGFyc2VJbnQoc1tlXS5zdWJzdHIoMSkpKzEsbj1NYXRoLm1heChuLGkpO3JldHVybiBufSx0LkV4cHIucHJvdG90eXBlLl9yZXBsYWNlbWVudHM9ZnVuY3Rpb24odCl7dmFyIGUsaT10LnNoaWZ0KCk7Zm9yKGU9MDtlPHQubGVuZ3RoO2UrKylpPWkucmVwbGFjZSgvXFwlL2ksdFtlXSk7cmV0dXJuIGl9LHQuRXhwci5wcm90b3R5cGUuX3Rva2VuaXplPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIGkoZSl7dmFyIGkscyxuLG8scixhO2ZvcihpIGluIHQuRXhwci5fRXhwcmVzc2lvbnMpe3M9dC5FeHByLl9FeHByZXNzaW9uc1tpXTtmb3IobiBpbiBzKWlmKG89c1tuXSxyPW8ucmVnZXhwLGE9ZS5tYXRjaChyKSxudWxsIT09YSlyZXR1cm57dHlwZTppLHZhbHVlOmFbMF0sbWV0aG9kOm8ubWV0aG9kfX10aHJvdyBuZXcgU3ludGF4RXJyb3IoXCJVbmV4cGVjdGVkIHRva2VuIFwiK2UpfWZvcih2YXIgcyxuPS0xLG89W107ZS5sZW5ndGg+MDspZT1lLnRyaW0oKSxzPWkoZSksby5wdXNoKHMpLGU9ZS5zdWJzdHIocy52YWx1ZS5sZW5ndGgpO3JldHVybntuZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIG9bKytuXX0scGVlazpmdW5jdGlvbigpe3JldHVybiBvW24rMV19fX0sdC5FeHByLnByb3RvdHlwZS5fcGFyc2VUcmVlPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIGkodCxlKXtyZXR1cm4hdSh0KSYmXCJnbHVlXCI9PT10LnR5cGUmJnQudmFsdWU9PT1lfWZ1bmN0aW9uIHMoZSxpLHMpe3ZhciBuLG8scj0hMSxhPXQuRXhwci5fRXhwcmVzc2lvbnNbaV07aWYoIXUoZSkpZm9yKG4gaW4gYSlpZihvPWFbbl0sby5yZWdleHAudGVzdChlLnZhbHVlKSl7aWYodShzKSlyZXR1cm4hMDtpZihvLnByZWNlZGVuY2U9PT1zKXJldHVybiEwfXJldHVybiByfWZ1bmN0aW9uIG4odCl7dmFyIGUsaTtmb3IodSh0KSYmKHQ9NSksZT0wPnQ/bygpOm4odC0xKSxpPWgucGVlaygpO3MoaSxcImJpbmFyeVwiLHQpOylpPWgubmV4dCgpLGU9e29wZXJhdG9yOmkudmFsdWUsbWV0aG9kOmkubWV0aG9kLGFyZ3M6W2Usbih0KV19LGk9aC5wZWVrKCk7cmV0dXJuIGV9ZnVuY3Rpb24gbygpe3ZhciB0LGU7cmV0dXJuIHQ9aC5wZWVrKCkscyh0LFwidW5hcnlcIik/KHQ9aC5uZXh0KCksZT1vKCkse29wZXJhdG9yOnQudmFsdWUsbWV0aG9kOnQubWV0aG9kLGFyZ3M6W2VdfSk6cigpfWZ1bmN0aW9uIHIoKXt2YXIgdCxlO2lmKHQ9aC5wZWVrKCksdSh0KSl0aHJvdyBuZXcgU3ludGF4RXJyb3IoXCJVbmV4cGVjdGVkIHRlcm1pbmF0aW9uIG9mIGV4cHJlc3Npb25cIik7aWYoXCJmdW5jXCI9PT10LnR5cGUpcmV0dXJuIHQ9aC5uZXh0KCksYSh0KTtpZihcInZhbHVlXCI9PT10LnR5cGUpcmV0dXJuIHQ9aC5uZXh0KCkse21ldGhvZDp0Lm1ldGhvZCxhcmdzOnQudmFsdWV9O2lmKGkodCxcIihcIikpe2lmKGgubmV4dCgpLGU9bigpLHQ9aC5uZXh0KCksIWkodCxcIilcIikpdGhyb3cgbmV3IFN5bnRheEVycm9yKFwiRXhwZWN0ZWQgKVwiKTtyZXR1cm4gZX10aHJvdyBuZXcgU3ludGF4RXJyb3IoXCJQYXJzZSBlcnJvciwgY2Fubm90IHByb2Nlc3MgdG9rZW4gXCIrdC52YWx1ZSl9ZnVuY3Rpb24gYSh0KXt2YXIgZSxzPVtdO2lmKGU9aC5uZXh0KCksIWkoZSxcIihcIikpdGhyb3cgbmV3IFN5bnRheEVycm9yKCdFeHBlY3RlZCAoIGluIGEgZnVuY3Rpb24gY2FsbCBcIicrdC52YWx1ZSsnXCInKTtpZihlPWgucGVlaygpLGkoZSxcIilcIil8fChzPWwoKSksZT1oLm5leHQoKSwhaShlLFwiKVwiKSl0aHJvdyBuZXcgU3ludGF4RXJyb3IoJ0V4cGVjdGVkICkgaW4gYSBmdW5jdGlvbiBjYWxsIFwiJyt0LnZhbHVlKydcIicpO3JldHVybnttZXRob2Q6dC5tZXRob2QsYXJnczpzLG5hbWU6bmFtZX19ZnVuY3Rpb24gbCgpe2Zvcih2YXIgdCxlLHM9W107Oyl7aWYoZT1uKCksdShlKSlicmVhaztpZihzLnB1c2goZSksdD1oLnBlZWsoKSwhaSh0LFwiLFwiKSlicmVhaztoLm5leHQoKX1yZXR1cm4gc312YXIgaD10aGlzLl90b2tlbml6ZShlKSx1PXRoaXMuaXNVbmRlZi5iaW5kKHRoaXMpO3JldHVybiBuKCl9LHQuRXhwci5wcm90b3R5cGUuX2V2YWw9ZnVuY3Rpb24odCl7aWYoIXRoaXMuaXNVbmRlZih0KSl7dmFyIGU9dC5tZXRob2QodC5hcmdzLHRoaXMpO3JldHVybiB0aGlzLl9ub2Rlcy5wdXNoKGUpLGV9fSx0LkV4cHIucHJvdG90eXBlLl9kaXNwb3NlTm9kZXM9ZnVuY3Rpb24oKXt2YXIgdCxlO2Zvcih0PTA7dDx0aGlzLl9ub2Rlcy5sZW5ndGg7dCsrKWU9dGhpcy5fbm9kZXNbdF0sdGhpcy5pc0Z1bmN0aW9uKGUuZGlzcG9zZSk/ZS5kaXNwb3NlKCk6dGhpcy5pc0Z1bmN0aW9uKGUuZGlzY29ubmVjdCkmJmUuZGlzY29ubmVjdCgpLGU9bnVsbCx0aGlzLl9ub2Rlc1t0XT1udWxsO3RoaXMuX25vZGVzPW51bGx9LHQuRXhwci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3QucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9kaXNwb3NlTm9kZXMoKX0sdC5FeHByfSksTW9kdWxlKGZ1bmN0aW9uKHQpe3JldHVybiB0LkVxdWFsUG93ZXJHYWluPWZ1bmN0aW9uKCl7dGhpcy5fZXFQb3dlcj10aGlzLmlucHV0PXRoaXMub3V0cHV0PW5ldyB0LldhdmVTaGFwZXIoZnVuY3Rpb24odCl7cmV0dXJuIE1hdGguYWJzKHQpPC4wMDE/MDp0aGlzLmVxdWFsUG93ZXJTY2FsZSh0KX0uYmluZCh0aGlzKSw0MDk2KX0sdC5leHRlbmQodC5FcXVhbFBvd2VyR2Fpbix0LlNpZ25hbEJhc2UpLHQuRXF1YWxQb3dlckdhaW4ucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX2VxUG93ZXIuZGlzcG9zZSgpLHRoaXMuX2VxUG93ZXI9bnVsbCx0aGlzfSx0LkVxdWFsUG93ZXJHYWlufSksTW9kdWxlKGZ1bmN0aW9uKHQpe3JldHVybiB0LkNyb3NzRmFkZT1mdW5jdGlvbihlKXt0LmNhbGwodGhpcywyLDEpLHRoaXMuYT10aGlzLmlucHV0WzBdPXRoaXMuY29udGV4dC5jcmVhdGVHYWluKCksdGhpcy5iPXRoaXMuaW5wdXRbMV09dGhpcy5jb250ZXh0LmNyZWF0ZUdhaW4oKSx0aGlzLmZhZGU9bmV3IHQuU2lnbmFsKHRoaXMuZGVmYXVsdEFyZyhlLC41KSx0LlR5cGUuTm9ybWFsUmFuZ2UpLHRoaXMuX2VxdWFsUG93ZXJBPW5ldyB0LkVxdWFsUG93ZXJHYWluLHRoaXMuX2VxdWFsUG93ZXJCPW5ldyB0LkVxdWFsUG93ZXJHYWluLHRoaXMuX2ludmVydD1uZXcgdC5FeHByKFwiMSAtICQwXCIpLHRoaXMuYS5jb25uZWN0KHRoaXMub3V0cHV0KSx0aGlzLmIuY29ubmVjdCh0aGlzLm91dHB1dCksdGhpcy5mYWRlLmNoYWluKHRoaXMuX2VxdWFsUG93ZXJCLHRoaXMuYi5nYWluKSx0aGlzLmZhZGUuY2hhaW4odGhpcy5faW52ZXJ0LHRoaXMuX2VxdWFsUG93ZXJBLHRoaXMuYS5nYWluKSx0aGlzLl9yZWFkT25seShcImZhZGVcIil9LHQuZXh0ZW5kKHQuQ3Jvc3NGYWRlKSx0LkNyb3NzRmFkZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fd3JpdGFibGUoXCJmYWRlXCIpLHRoaXMuX2VxdWFsUG93ZXJBLmRpc3Bvc2UoKSx0aGlzLl9lcXVhbFBvd2VyQT1udWxsLHRoaXMuX2VxdWFsUG93ZXJCLmRpc3Bvc2UoKSx0aGlzLl9lcXVhbFBvd2VyQj1udWxsLHRoaXMuZmFkZS5kaXNwb3NlKCksdGhpcy5mYWRlPW51bGwsdGhpcy5faW52ZXJ0LmRpc3Bvc2UoKSx0aGlzLl9pbnZlcnQ9bnVsbCx0aGlzLmEuZGlzY29ubmVjdCgpLHRoaXMuYT1udWxsLHRoaXMuYi5kaXNjb25uZWN0KCksdGhpcy5iPW51bGwsdGhpc30sdC5Dcm9zc0ZhZGV9KSxNb2R1bGUoZnVuY3Rpb24odCl7cmV0dXJuIHQuRmlsdGVyPWZ1bmN0aW9uKCl7dC5jYWxsKHRoaXMpO3ZhciBlPXRoaXMub3B0aW9uc09iamVjdChhcmd1bWVudHMsW1wiZnJlcXVlbmN5XCIsXCJ0eXBlXCIsXCJyb2xsb2ZmXCJdLHQuRmlsdGVyLmRlZmF1bHRzKTt0aGlzLl9maWx0ZXJzPVtdLHRoaXMuZnJlcXVlbmN5PW5ldyB0LlNpZ25hbChlLmZyZXF1ZW5jeSx0LlR5cGUuRnJlcXVlbmN5KSx0aGlzLmRldHVuZT1uZXcgdC5TaWduYWwoMCx0LlR5cGUuQ2VudHMpLHRoaXMuZ2Fpbj1uZXcgdC5TaWduYWwoe3ZhbHVlOmUuZ2Fpbixjb252ZXJ0OiExfSksdGhpcy5RPW5ldyB0LlNpZ25hbChlLlEpLHRoaXMuX3R5cGU9ZS50eXBlLHRoaXMuX3JvbGxvZmY9ZS5yb2xsb2ZmLHRoaXMucm9sbG9mZj1lLnJvbGxvZmYsdGhpcy5fcmVhZE9ubHkoW1wiZGV0dW5lXCIsXCJmcmVxdWVuY3lcIixcImdhaW5cIixcIlFcIl0pfSx0LmV4dGVuZCh0LkZpbHRlciksdC5GaWx0ZXIuZGVmYXVsdHM9e3R5cGU6XCJsb3dwYXNzXCIsZnJlcXVlbmN5OjM1MCxyb2xsb2ZmOi0xMixROjEsZ2FpbjowfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5GaWx0ZXIucHJvdG90eXBlLFwidHlwZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdHlwZX0sc2V0OmZ1bmN0aW9uKHQpe3ZhciBlLGk9W1wibG93cGFzc1wiLFwiaGlnaHBhc3NcIixcImJhbmRwYXNzXCIsXCJsb3dzaGVsZlwiLFwiaGlnaHNoZWxmXCIsXCJub3RjaFwiLFwiYWxscGFzc1wiLFwicGVha2luZ1wiXTtpZigtMT09PWkuaW5kZXhPZih0KSl0aHJvdyBuZXcgRXJyb3IoXCJUb25lLkZpbHRlciBkb2VzIG5vdCBoYXZlIGZpbHRlciB0eXBlIFwiK3QpO2Zvcih0aGlzLl90eXBlPXQsZT0wO2U8dGhpcy5fZmlsdGVycy5sZW5ndGg7ZSsrKXRoaXMuX2ZpbHRlcnNbZV0udHlwZT10fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkZpbHRlci5wcm90b3R5cGUsXCJyb2xsb2ZmXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yb2xsb2ZmfSxzZXQ6ZnVuY3Rpb24odCl7dmFyIGUsaSxzLG4sbyxyO2lmKHQ9cGFyc2VJbnQodCwxMCksZT1bLTEyLC0yNCwtNDgsLTk2XSxpPWUuaW5kZXhPZih0KSwtMT09PWkpdGhyb3cgbmV3IEVycm9yKFwiRmlsdGVyIHJvbGxvZmYgY2FuIG9ubHkgYmUgLTEyLCAtMjQsIC00OCBvciAtOTZcIik7Zm9yKGkrPTEsdGhpcy5fcm9sbG9mZj10LHRoaXMuaW5wdXQuZGlzY29ubmVjdCgpLHM9MDtzPHRoaXMuX2ZpbHRlcnMubGVuZ3RoO3MrKyl0aGlzLl9maWx0ZXJzW3NdLmRpc2Nvbm5lY3QoKSx0aGlzLl9maWx0ZXJzW3NdPW51bGw7Zm9yKHRoaXMuX2ZpbHRlcnM9bmV3IEFycmF5KGkpLG49MDtpPm47bisrKW89dGhpcy5jb250ZXh0LmNyZWF0ZUJpcXVhZEZpbHRlcigpLG8udHlwZT10aGlzLl90eXBlLHRoaXMuZnJlcXVlbmN5LmNvbm5lY3Qoby5mcmVxdWVuY3kpLHRoaXMuZGV0dW5lLmNvbm5lY3Qoby5kZXR1bmUpLHRoaXMuUS5jb25uZWN0KG8uUSksdGhpcy5nYWluLmNvbm5lY3Qoby5nYWluKSx0aGlzLl9maWx0ZXJzW25dPW87cj1bdGhpcy5pbnB1dF0uY29uY2F0KHRoaXMuX2ZpbHRlcnMpLmNvbmNhdChbdGhpcy5vdXRwdXRdKSx0aGlzLmNvbm5lY3RTZXJpZXMuYXBwbHkodGhpcyxyKX19KSx0LkZpbHRlci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3QucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKTtmb3IodmFyIGU9MDtlPHRoaXMuX2ZpbHRlcnMubGVuZ3RoO2UrKyl0aGlzLl9maWx0ZXJzW2VdLmRpc2Nvbm5lY3QoKSx0aGlzLl9maWx0ZXJzW2VdPW51bGw7cmV0dXJuIHRoaXMuX2ZpbHRlcnM9bnVsbCx0aGlzLl93cml0YWJsZShbXCJkZXR1bmVcIixcImZyZXF1ZW5jeVwiLFwiZ2FpblwiLFwiUVwiXSksdGhpcy5mcmVxdWVuY3kuZGlzcG9zZSgpLHRoaXMuUS5kaXNwb3NlKCksdGhpcy5mcmVxdWVuY3k9bnVsbCx0aGlzLlE9bnVsbCx0aGlzLmRldHVuZS5kaXNwb3NlKCksdGhpcy5kZXR1bmU9bnVsbCx0aGlzLmdhaW4uZGlzcG9zZSgpLHRoaXMuZ2Fpbj1udWxsLHRoaXN9LHQuRmlsdGVyfSksTW9kdWxlKGZ1bmN0aW9uKHQpe3JldHVybiB0Lk11bHRpYmFuZFNwbGl0PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zT2JqZWN0KGFyZ3VtZW50cyxbXCJsb3dGcmVxdWVuY3lcIixcImhpZ2hGcmVxdWVuY3lcIl0sdC5NdWx0aWJhbmRTcGxpdC5kZWZhdWx0cyk7dGhpcy5pbnB1dD10aGlzLmNvbnRleHQuY3JlYXRlR2FpbigpLHRoaXMub3V0cHV0PW5ldyBBcnJheSgzKSx0aGlzLmxvdz10aGlzLm91dHB1dFswXT1uZXcgdC5GaWx0ZXIoMCxcImxvd3Bhc3NcIiksdGhpcy5fbG93TWlkRmlsdGVyPW5ldyB0LkZpbHRlcigwLFwiaGlnaHBhc3NcIiksdGhpcy5taWQ9dGhpcy5vdXRwdXRbMV09bmV3IHQuRmlsdGVyKDAsXCJsb3dwYXNzXCIpLHRoaXMuaGlnaD10aGlzLm91dHB1dFsyXT1uZXcgdC5GaWx0ZXIoMCxcImhpZ2hwYXNzXCIpLHRoaXMubG93RnJlcXVlbmN5PW5ldyB0LlNpZ25hbChlLmxvd0ZyZXF1ZW5jeSx0LlR5cGUuRnJlcXVlbmN5KSx0aGlzLmhpZ2hGcmVxdWVuY3k9bmV3IHQuU2lnbmFsKGUuaGlnaEZyZXF1ZW5jeSx0LlR5cGUuRnJlcXVlbmN5KSx0aGlzLlE9bmV3IHQuU2lnbmFsKGUuUSksdGhpcy5pbnB1dC5mYW4odGhpcy5sb3csdGhpcy5oaWdoKSx0aGlzLmlucHV0LmNoYWluKHRoaXMuX2xvd01pZEZpbHRlcix0aGlzLm1pZCksdGhpcy5sb3dGcmVxdWVuY3kuY29ubmVjdCh0aGlzLmxvdy5mcmVxdWVuY3kpLHRoaXMubG93RnJlcXVlbmN5LmNvbm5lY3QodGhpcy5fbG93TWlkRmlsdGVyLmZyZXF1ZW5jeSksdGhpcy5oaWdoRnJlcXVlbmN5LmNvbm5lY3QodGhpcy5taWQuZnJlcXVlbmN5KSx0aGlzLmhpZ2hGcmVxdWVuY3kuY29ubmVjdCh0aGlzLmhpZ2guZnJlcXVlbmN5KSx0aGlzLlEuY29ubmVjdCh0aGlzLmxvdy5RKSx0aGlzLlEuY29ubmVjdCh0aGlzLl9sb3dNaWRGaWx0ZXIuUSksdGhpcy5RLmNvbm5lY3QodGhpcy5taWQuUSksdGhpcy5RLmNvbm5lY3QodGhpcy5oaWdoLlEpLHRoaXMuX3JlYWRPbmx5KFtcImhpZ2hcIixcIm1pZFwiLFwibG93XCIsXCJoaWdoRnJlcXVlbmN5XCIsXCJsb3dGcmVxdWVuY3lcIl0pfSx0LmV4dGVuZCh0Lk11bHRpYmFuZFNwbGl0KSx0Lk11bHRpYmFuZFNwbGl0LmRlZmF1bHRzPXtsb3dGcmVxdWVuY3k6NDAwLGhpZ2hGcmVxdWVuY3k6MjUwMCxROjF9LHQuTXVsdGliYW5kU3BsaXQucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3dyaXRhYmxlKFtcImhpZ2hcIixcIm1pZFwiLFwibG93XCIsXCJoaWdoRnJlcXVlbmN5XCIsXCJsb3dGcmVxdWVuY3lcIl0pLHRoaXMubG93LmRpc3Bvc2UoKSx0aGlzLmxvdz1udWxsLHRoaXMuX2xvd01pZEZpbHRlci5kaXNwb3NlKCksdGhpcy5fbG93TWlkRmlsdGVyPW51bGwsdGhpcy5taWQuZGlzcG9zZSgpLHRoaXMubWlkPW51bGwsdGhpcy5oaWdoLmRpc3Bvc2UoKSx0aGlzLmhpZ2g9bnVsbCx0aGlzLmxvd0ZyZXF1ZW5jeS5kaXNwb3NlKCksdGhpcy5sb3dGcmVxdWVuY3k9bnVsbCx0aGlzLmhpZ2hGcmVxdWVuY3kuZGlzcG9zZSgpLHRoaXMuaGlnaEZyZXF1ZW5jeT1udWxsLHRoaXMuUS5kaXNwb3NlKCksdGhpcy5RPW51bGwsdGhpc30sdC5NdWx0aWJhbmRTcGxpdH0pLE1vZHVsZShmdW5jdGlvbih0KXtyZXR1cm4gdC5FUTM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnNPYmplY3QoYXJndW1lbnRzLFtcImxvd1wiLFwibWlkXCIsXCJoaWdoXCJdLHQuRVEzLmRlZmF1bHRzKTt0aGlzLm91dHB1dD10aGlzLmNvbnRleHQuY3JlYXRlR2FpbigpLHRoaXMuX211bHRpYmFuZFNwbGl0PXRoaXMuaW5wdXQ9bmV3IHQuTXVsdGliYW5kU3BsaXQoe2xvd0ZyZXF1ZW5jeTplLmxvd0ZyZXF1ZW5jeSxoaWdoRnJlcXVlbmN5OmUuaGlnaEZyZXF1ZW5jeX0pLHRoaXMuX2xvd0dhaW49bmV3IHQuR2FpbihlLmxvdyx0LlR5cGUuRGVjaWJlbHMpLHRoaXMuX21pZEdhaW49bmV3IHQuR2FpbihlLm1pZCx0LlR5cGUuRGVjaWJlbHMpLHRoaXMuX2hpZ2hHYWluPW5ldyB0LkdhaW4oZS5oaWdoLHQuVHlwZS5EZWNpYmVscyksdGhpcy5sb3c9dGhpcy5fbG93R2Fpbi5nYWluLHRoaXMubWlkPXRoaXMuX21pZEdhaW4uZ2Fpbix0aGlzLmhpZ2g9dGhpcy5faGlnaEdhaW4uZ2Fpbix0aGlzLlE9dGhpcy5fbXVsdGliYW5kU3BsaXQuUSx0aGlzLmxvd0ZyZXF1ZW5jeT10aGlzLl9tdWx0aWJhbmRTcGxpdC5sb3dGcmVxdWVuY3ksdGhpcy5oaWdoRnJlcXVlbmN5PXRoaXMuX211bHRpYmFuZFNwbGl0LmhpZ2hGcmVxdWVuY3ksdGhpcy5fbXVsdGliYW5kU3BsaXQubG93LmNoYWluKHRoaXMuX2xvd0dhaW4sdGhpcy5vdXRwdXQpLHRoaXMuX211bHRpYmFuZFNwbGl0Lm1pZC5jaGFpbih0aGlzLl9taWRHYWluLHRoaXMub3V0cHV0KSx0aGlzLl9tdWx0aWJhbmRTcGxpdC5oaWdoLmNoYWluKHRoaXMuX2hpZ2hHYWluLHRoaXMub3V0cHV0KSx0aGlzLl9yZWFkT25seShbXCJsb3dcIixcIm1pZFwiLFwiaGlnaFwiLFwibG93RnJlcXVlbmN5XCIsXCJoaWdoRnJlcXVlbmN5XCJdKX0sdC5leHRlbmQodC5FUTMpLHQuRVEzLmRlZmF1bHRzPXtsb3c6MCxtaWQ6MCxoaWdoOjAsbG93RnJlcXVlbmN5OjQwMCxoaWdoRnJlcXVlbmN5OjI1MDB9LHQuRVEzLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl93cml0YWJsZShbXCJsb3dcIixcIm1pZFwiLFwiaGlnaFwiLFwibG93RnJlcXVlbmN5XCIsXCJoaWdoRnJlcXVlbmN5XCJdKSx0aGlzLl9tdWx0aWJhbmRTcGxpdC5kaXNwb3NlKCksdGhpcy5fbXVsdGliYW5kU3BsaXQ9bnVsbCx0aGlzLmxvd0ZyZXF1ZW5jeT1udWxsLHRoaXMuaGlnaEZyZXF1ZW5jeT1udWxsLHRoaXMuX2xvd0dhaW4uZGlzcG9zZSgpLHRoaXMuX2xvd0dhaW49bnVsbCx0aGlzLl9taWRHYWluLmRpc3Bvc2UoKSx0aGlzLl9taWRHYWluPW51bGwsdGhpcy5faGlnaEdhaW4uZGlzcG9zZSgpLHRoaXMuX2hpZ2hHYWluPW51bGwsdGhpcy5sb3c9bnVsbCx0aGlzLm1pZD1udWxsLHRoaXMuaGlnaD1udWxsLHRoaXMuUT1udWxsLHRoaXN9LHQuRVEzfSksTW9kdWxlKGZ1bmN0aW9uKHQpe3JldHVybiB0LlNjYWxlPWZ1bmN0aW9uKGUsaSl7dGhpcy5fb3V0cHV0TWluPXRoaXMuZGVmYXVsdEFyZyhlLDApLHRoaXMuX291dHB1dE1heD10aGlzLmRlZmF1bHRBcmcoaSwxKSx0aGlzLl9zY2FsZT10aGlzLmlucHV0PW5ldyB0Lk11bHRpcGx5KDEpLHRoaXMuX2FkZD10aGlzLm91dHB1dD1uZXcgdC5BZGQoMCksdGhpcy5fc2NhbGUuY29ubmVjdCh0aGlzLl9hZGQpLHRoaXMuX3NldFJhbmdlKCl9LHQuZXh0ZW5kKHQuU2NhbGUsdC5TaWduYWxCYXNlKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5TY2FsZS5wcm90b3R5cGUsXCJtaW5cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX291dHB1dE1pbn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX291dHB1dE1pbj10LHRoaXMuX3NldFJhbmdlKCl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuU2NhbGUucHJvdG90eXBlLFwibWF4XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vdXRwdXRNYXh9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9vdXRwdXRNYXg9dCx0aGlzLl9zZXRSYW5nZSgpfX0pLHQuU2NhbGUucHJvdG90eXBlLl9zZXRSYW5nZT1mdW5jdGlvbigpe3RoaXMuX2FkZC52YWx1ZT10aGlzLl9vdXRwdXRNaW4sdGhpcy5fc2NhbGUudmFsdWU9dGhpcy5fb3V0cHV0TWF4LXRoaXMuX291dHB1dE1pbn0sdC5TY2FsZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fYWRkLmRpc3Bvc2UoKSx0aGlzLl9hZGQ9bnVsbCx0aGlzLl9zY2FsZS5kaXNwb3NlKCksdGhpcy5fc2NhbGU9bnVsbCx0aGlzfSx0LlNjYWxlfSksTW9kdWxlKGZ1bmN0aW9uKHQpe3JldHVybiB0LlNjYWxlRXhwPWZ1bmN0aW9uKGUsaSxzKXt0aGlzLl9zY2FsZT10aGlzLm91dHB1dD1uZXcgdC5TY2FsZShlLGkpLHRoaXMuX2V4cD10aGlzLmlucHV0PW5ldyB0LlBvdyh0aGlzLmRlZmF1bHRBcmcocywyKSksdGhpcy5fZXhwLmNvbm5lY3QodGhpcy5fc2NhbGUpfSx0LmV4dGVuZCh0LlNjYWxlRXhwLHQuU2lnbmFsQmFzZSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuU2NhbGVFeHAucHJvdG90eXBlLFwiZXhwb25lbnRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2V4cC52YWx1ZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2V4cC52YWx1ZT10fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlNjYWxlRXhwLnByb3RvdHlwZSxcIm1pblwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2NhbGUubWlufSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fc2NhbGUubWluPXR9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuU2NhbGVFeHAucHJvdG90eXBlLFwibWF4XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zY2FsZS5tYXh9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9zY2FsZS5tYXg9dH19KSx0LlNjYWxlRXhwLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9zY2FsZS5kaXNwb3NlKCksdGhpcy5fc2NhbGU9bnVsbCx0aGlzLl9leHAuZGlzcG9zZSgpLHRoaXMuX2V4cD1udWxsLHRoaXN9LHQuU2NhbGVFeHB9KSxNb2R1bGUoZnVuY3Rpb24odCl7cmV0dXJuIHQuRmVlZGJhY2tDb21iRmlsdGVyPWZ1bmN0aW9uKCl7dC5jYWxsKHRoaXMpO3ZhciBlPXRoaXMub3B0aW9uc09iamVjdChhcmd1bWVudHMsW1wiZGVsYXlUaW1lXCIsXCJyZXNvbmFuY2VcIl0sdC5GZWVkYmFja0NvbWJGaWx0ZXIuZGVmYXVsdHMpO3RoaXMuX2RlbGF5PXRoaXMuaW5wdXQ9dGhpcy5vdXRwdXQ9dGhpcy5jb250ZXh0LmNyZWF0ZURlbGF5KDEpLHRoaXMuZGVsYXlUaW1lPW5ldyB0LlBhcmFtKHtwYXJhbTp0aGlzLl9kZWxheS5kZWxheVRpbWUsdmFsdWU6ZS5kZWxheVRpbWUsdW5pdHM6dC5UeXBlLlRpbWV9KSx0aGlzLl9mZWVkYmFjaz10aGlzLmNvbnRleHQuY3JlYXRlR2FpbigpLHRoaXMucmVzb25hbmNlPW5ldyB0LlBhcmFtKHtwYXJhbTp0aGlzLl9mZWVkYmFjay5nYWluLHZhbHVlOmUucmVzb25hbmNlLHVuaXRzOnQuVHlwZS5Ob3JtYWxSYW5nZX0pLHRoaXMuX2RlbGF5LmNoYWluKHRoaXMuX2ZlZWRiYWNrLHRoaXMuX2RlbGF5KSx0aGlzLl9yZWFkT25seShbXCJyZXNvbmFuY2VcIixcImRlbGF5VGltZVwiXSl9LHQuZXh0ZW5kKHQuRmVlZGJhY2tDb21iRmlsdGVyKSx0LkZlZWRiYWNrQ29tYkZpbHRlci5kZWZhdWx0cz17ZGVsYXlUaW1lOi4xLHJlc29uYW5jZTouNX0sdC5GZWVkYmFja0NvbWJGaWx0ZXIucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3dyaXRhYmxlKFtcInJlc29uYW5jZVwiLFwiZGVsYXlUaW1lXCJdKSx0aGlzLl9kZWxheS5kaXNjb25uZWN0KCksdGhpcy5fZGVsYXk9bnVsbCx0aGlzLmRlbGF5VGltZS5kaXNwb3NlKCksdGhpcy5kZWxheVRpbWU9bnVsbCx0aGlzLnJlc29uYW5jZS5kaXNwb3NlKCksdGhpcy5yZXNvbmFuY2U9bnVsbCx0aGlzLl9mZWVkYmFjay5kaXNjb25uZWN0KCksdGhpcy5fZmVlZGJhY2s9bnVsbCx0aGlzfSx0LkZlZWRiYWNrQ29tYkZpbHRlcn0pLE1vZHVsZShmdW5jdGlvbih0KXtyZXR1cm4gdC5Gb2xsb3dlcj1mdW5jdGlvbigpe3QuY2FsbCh0aGlzKTt2YXIgZT10aGlzLm9wdGlvbnNPYmplY3QoYXJndW1lbnRzLFtcImF0dGFja1wiLFwicmVsZWFzZVwiXSx0LkZvbGxvd2VyLmRlZmF1bHRzKTt0aGlzLl9hYnM9bmV3IHQuQWJzLHRoaXMuX2ZpbHRlcj10aGlzLmNvbnRleHQuY3JlYXRlQmlxdWFkRmlsdGVyKCksdGhpcy5fZmlsdGVyLnR5cGU9XCJsb3dwYXNzXCIsdGhpcy5fZmlsdGVyLmZyZXF1ZW5jeS52YWx1ZT0wLHRoaXMuX2ZpbHRlci5RLnZhbHVlPS0xMDAsdGhpcy5fZnJlcXVlbmN5VmFsdWVzPW5ldyB0LldhdmVTaGFwZXIsdGhpcy5fc3ViPW5ldyB0LlN1YnRyYWN0LHRoaXMuX2RlbGF5PXRoaXMuY29udGV4dC5jcmVhdGVEZWxheSgpLHRoaXMuX2RlbGF5LmRlbGF5VGltZS52YWx1ZT10aGlzLmJsb2NrVGltZSx0aGlzLl9tdWx0PW5ldyB0Lk11bHRpcGx5KDFlNCksdGhpcy5fYXR0YWNrPWUuYXR0YWNrLHRoaXMuX3JlbGVhc2U9ZS5yZWxlYXNlLHRoaXMuaW5wdXQuY2hhaW4odGhpcy5fYWJzLHRoaXMuX2ZpbHRlcix0aGlzLm91dHB1dCksdGhpcy5fYWJzLmNvbm5lY3QodGhpcy5fc3ViLDAsMSksdGhpcy5fZmlsdGVyLmNoYWluKHRoaXMuX2RlbGF5LHRoaXMuX3N1YiksdGhpcy5fc3ViLmNoYWluKHRoaXMuX211bHQsdGhpcy5fZnJlcXVlbmN5VmFsdWVzLHRoaXMuX2ZpbHRlci5mcmVxdWVuY3kpLHRoaXMuX3NldEF0dGFja1JlbGVhc2UodGhpcy5fYXR0YWNrLHRoaXMuX3JlbGVhc2UpfSx0LmV4dGVuZCh0LkZvbGxvd2VyKSx0LkZvbGxvd2VyLmRlZmF1bHRzPXthdHRhY2s6LjA1LHJlbGVhc2U6LjV9LHQuRm9sbG93ZXIucHJvdG90eXBlLl9zZXRBdHRhY2tSZWxlYXNlPWZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5ibG9ja1RpbWU7dD10aGlzLnNlY29uZHNUb0ZyZXF1ZW5jeSh0aGlzLnRvU2Vjb25kcyh0KSksZT10aGlzLnNlY29uZHNUb0ZyZXF1ZW5jeSh0aGlzLnRvU2Vjb25kcyhlKSksdD1NYXRoLm1heCh0LGkpLGU9TWF0aC5tYXgoZSxpKSx0aGlzLl9mcmVxdWVuY3lWYWx1ZXMuc2V0TWFwKGZ1bmN0aW9uKGkpe3JldHVybiAwPj1pP3Q6ZX0pfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5Gb2xsb3dlci5wcm90b3R5cGUsXCJhdHRhY2tcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2F0dGFja30sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2F0dGFjaz10LHRoaXMuX3NldEF0dGFja1JlbGVhc2UodGhpcy5fYXR0YWNrLHRoaXMuX3JlbGVhc2UpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkZvbGxvd2VyLnByb3RvdHlwZSxcInJlbGVhc2VcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JlbGVhc2V9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9yZWxlYXNlPXQsdGhpcy5fc2V0QXR0YWNrUmVsZWFzZSh0aGlzLl9hdHRhY2ssdGhpcy5fcmVsZWFzZSl9fSksdC5Gb2xsb3dlci5wcm90b3R5cGUuY29ubmVjdD10LlNpZ25hbC5wcm90b3R5cGUuY29ubmVjdCx0LkZvbGxvd2VyLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9maWx0ZXIuZGlzY29ubmVjdCgpLHRoaXMuX2ZpbHRlcj1udWxsLHRoaXMuX2ZyZXF1ZW5jeVZhbHVlcy5kaXNjb25uZWN0KCksdGhpcy5fZnJlcXVlbmN5VmFsdWVzPW51bGwsdGhpcy5fZGVsYXkuZGlzY29ubmVjdCgpLHRoaXMuX2RlbGF5PW51bGwsdGhpcy5fc3ViLmRpc2Nvbm5lY3QoKSx0aGlzLl9zdWI9bnVsbCx0aGlzLl9hYnMuZGlzcG9zZSgpLHRoaXMuX2Ficz1udWxsLHRoaXMuX211bHQuZGlzcG9zZSgpLHRoaXMuX211bHQ9bnVsbCx0aGlzLl9jdXJ2ZT1udWxsLHRoaXN9LHQuRm9sbG93ZXJ9KSxNb2R1bGUoZnVuY3Rpb24odCl7cmV0dXJuIHQuU2NhbGVkRW52ZWxvcGU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnNPYmplY3QoYXJndW1lbnRzLFtcImF0dGFja1wiLFwiZGVjYXlcIixcInN1c3RhaW5cIixcInJlbGVhc2VcIl0sdC5FbnZlbG9wZS5kZWZhdWx0cyk7dC5FbnZlbG9wZS5jYWxsKHRoaXMsZSksZT10aGlzLmRlZmF1bHRBcmcoZSx0LlNjYWxlZEVudmVsb3BlLmRlZmF1bHRzKSx0aGlzLl9leHA9dGhpcy5vdXRwdXQ9bmV3IHQuUG93KGUuZXhwb25lbnQpLHRoaXMuX3NjYWxlPXRoaXMub3V0cHV0PW5ldyB0LlNjYWxlKGUubWluLGUubWF4KSx0aGlzLl9zaWcuY2hhaW4odGhpcy5fZXhwLHRoaXMuX3NjYWxlKX0sdC5leHRlbmQodC5TY2FsZWRFbnZlbG9wZSx0LkVudmVsb3BlKSx0LlNjYWxlZEVudmVsb3BlLmRlZmF1bHRzPXttaW46MCxtYXg6MSxleHBvbmVudDoxfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5TY2FsZWRFbnZlbG9wZS5wcm90b3R5cGUsXCJtaW5cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NjYWxlLm1pbn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3NjYWxlLm1pbj10fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlNjYWxlZEVudmVsb3BlLnByb3RvdHlwZSxcIm1heFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2NhbGUubWF4fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fc2NhbGUubWF4PXR9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuU2NhbGVkRW52ZWxvcGUucHJvdG90eXBlLFwiZXhwb25lbnRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2V4cC52YWx1ZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2V4cC52YWx1ZT10fX0pLHQuU2NhbGVkRW52ZWxvcGUucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5FbnZlbG9wZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3NjYWxlLmRpc3Bvc2UoKSx0aGlzLl9zY2FsZT1udWxsLHRoaXMuX2V4cC5kaXNwb3NlKCksdGhpcy5fZXhwPW51bGwsdGhpc30sdC5TY2FsZWRFbnZlbG9wZX0pLE1vZHVsZShmdW5jdGlvbih0KXtyZXR1cm4gdC5GcmVxdWVuY3lFbnZlbG9wZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9uc09iamVjdChhcmd1bWVudHMsW1wiYXR0YWNrXCIsXCJkZWNheVwiLFwic3VzdGFpblwiLFwicmVsZWFzZVwiXSx0LkVudmVsb3BlLmRlZmF1bHRzKTt0LlNjYWxlZEVudmVsb3BlLmNhbGwodGhpcyxlKSxlPXRoaXMuZGVmYXVsdEFyZyhlLHQuRnJlcXVlbmN5RW52ZWxvcGUuZGVmYXVsdHMpLHRoaXMuX29jdGF2ZXM9ZS5vY3RhdmVzLHRoaXMuYmFzZUZyZXF1ZW5jeT1lLmJhc2VGcmVxdWVuY3ksdGhpcy5vY3RhdmVzPWUub2N0YXZlc30sdC5leHRlbmQodC5GcmVxdWVuY3lFbnZlbG9wZSx0LkVudmVsb3BlKSx0LkZyZXF1ZW5jeUVudmVsb3BlLmRlZmF1bHRzPXtiYXNlRnJlcXVlbmN5OjIwMCxvY3RhdmVzOjQsZXhwb25lbnQ6Mn0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuRnJlcXVlbmN5RW52ZWxvcGUucHJvdG90eXBlLFwiYmFzZUZyZXF1ZW5jeVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2NhbGUubWlufSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fc2NhbGUubWluPXRoaXMudG9GcmVxdWVuY3kodCl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuRnJlcXVlbmN5RW52ZWxvcGUucHJvdG90eXBlLFwib2N0YXZlc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb2N0YXZlc30sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX29jdGF2ZXM9dCx0aGlzLl9zY2FsZS5tYXg9dGhpcy5iYXNlRnJlcXVlbmN5Kk1hdGgucG93KDIsdCl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuRnJlcXVlbmN5RW52ZWxvcGUucHJvdG90eXBlLFwiZXhwb25lbnRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2V4cC52YWx1ZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2V4cC52YWx1ZT10fX0pLHQuRnJlcXVlbmN5RW52ZWxvcGUucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5TY2FsZWRFbnZlbG9wZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXN9LHQuRnJlcXVlbmN5RW52ZWxvcGV9KSxNb2R1bGUoZnVuY3Rpb24odCl7cmV0dXJuIHQuR2F0ZT1mdW5jdGlvbigpe3QuY2FsbCh0aGlzKTt2YXIgZT10aGlzLm9wdGlvbnNPYmplY3QoYXJndW1lbnRzLFtcInRocmVzaG9sZFwiLFwiYXR0YWNrXCIsXCJyZWxlYXNlXCJdLHQuR2F0ZS5kZWZhdWx0cyk7dGhpcy5fZm9sbG93ZXI9bmV3IHQuRm9sbG93ZXIoZS5hdHRhY2ssZS5yZWxlYXNlKSx0aGlzLl9ndD1uZXcgdC5HcmVhdGVyVGhhbih0aGlzLmRiVG9HYWluKGUudGhyZXNob2xkKSksdGhpcy5pbnB1dC5jb25uZWN0KHRoaXMub3V0cHV0KSx0aGlzLmlucHV0LmNoYWluKHRoaXMuX2d0LHRoaXMuX2ZvbGxvd2VyLHRoaXMub3V0cHV0LmdhaW4pfSx0LmV4dGVuZCh0LkdhdGUpLHQuR2F0ZS5kZWZhdWx0cz17YXR0YWNrOi4xLHJlbGVhc2U6LjEsdGhyZXNob2xkOi00MH0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuR2F0ZS5wcm90b3R5cGUsXCJ0aHJlc2hvbGRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2FpblRvRGIodGhpcy5fZ3QudmFsdWUpfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fZ3QudmFsdWU9dGhpcy5kYlRvR2Fpbih0KX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5HYXRlLnByb3RvdHlwZSxcImF0dGFja1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZm9sbG93ZXIuYXR0YWNrfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fZm9sbG93ZXIuYXR0YWNrPXR9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuR2F0ZS5wcm90b3R5cGUsXCJyZWxlYXNlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9mb2xsb3dlci5yZWxlYXNlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fZm9sbG93ZXIucmVsZWFzZT10fX0pLHQuR2F0ZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fZm9sbG93ZXIuZGlzcG9zZSgpLHRoaXMuX2d0LmRpc3Bvc2UoKSx0aGlzLl9mb2xsb3dlcj1udWxsLHRoaXMuX2d0PW51bGwsdGhpc30sdC5HYXRlfSksTW9kdWxlKGZ1bmN0aW9uKHQpe3JldHVybiB0LlRpbWVsaW5lU3RhdGU9ZnVuY3Rpb24oZSl7dC5UaW1lbGluZS5jYWxsKHRoaXMpLHRoaXMuX2luaXRpYWw9ZX0sdC5leHRlbmQodC5UaW1lbGluZVN0YXRlLHQuVGltZWxpbmUpLHQuVGltZWxpbmVTdGF0ZS5wcm90b3R5cGUuZ2V0U3RhdGVBdFRpbWU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5nZXRFdmVudCh0KTtyZXR1cm4gbnVsbCE9PWU/ZS5zdGF0ZTp0aGlzLl9pbml0aWFsfSx0LlRpbWVsaW5lU3RhdGUucHJvdG90eXBlLnNldFN0YXRlQXRUaW1lPWZ1bmN0aW9uKHQsZSl7dGhpcy5hZGRFdmVudCh7c3RhdGU6dCx0aW1lOnRoaXMudG9TZWNvbmRzKGUpfSl9LHQuVGltZWxpbmVTdGF0ZX0pLE1vZHVsZShmdW5jdGlvbih0KXtyZXR1cm4gdC5DbG9jaz1mdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9uc09iamVjdChhcmd1bWVudHMsW1wiY2FsbGJhY2tcIixcImZyZXF1ZW5jeVwiXSx0LkNsb2NrLmRlZmF1bHRzKTt0aGlzLmNhbGxiYWNrPWUuY2FsbGJhY2ssdGhpcy5fbG9va0FoZWFkPVwiYXV0b1wiLHRoaXMuX2NvbXB1dGVkTG9va0FoZWFkPTEvNjAsdGhpcy5fdGhyZXNob2xkPS41LHRoaXMuX25leHRUaWNrPS0xLHRoaXMuX2xhc3RVcGRhdGU9MCx0aGlzLl9sb29wSUQ9LTEsdGhpcy5mcmVxdWVuY3k9bmV3IHQuVGltZWxpbmVTaWduYWwoZS5mcmVxdWVuY3ksdC5UeXBlLkZyZXF1ZW5jeSksdGhpcy50aWNrcz0wLHRoaXMuX3N0YXRlPW5ldyB0LlRpbWVsaW5lU3RhdGUodC5TdGF0ZS5TdG9wcGVkKSx0aGlzLl9ib3VuZExvb3A9dGhpcy5fbG9vcC5iaW5kKHRoaXMpLHRoaXMuX3JlYWRPbmx5KFwiZnJlcXVlbmN5XCIpLHRoaXMuX2xvb3AoKX0sdC5leHRlbmQodC5DbG9jayksdC5DbG9jay5kZWZhdWx0cz17Y2FsbGJhY2s6dC5ub09wLGZyZXF1ZW5jeToxLGxvb2tBaGVhZDpcImF1dG9cIn0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuQ2xvY2sucHJvdG90eXBlLFwic3RhdGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXRlLmdldFN0YXRlQXRUaW1lKHRoaXMubm93KCkpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkNsb2NrLnByb3RvdHlwZSxcImxvb2tBaGVhZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbG9va0FoZWFkfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbG9va0FoZWFkPVwiYXV0b1wiPT09dD9cImF1dG9cIjp0aGlzLnRvU2Vjb25kcyh0KX19KSx0LkNsb2NrLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbihlLGkpe3JldHVybiBlPXRoaXMudG9TZWNvbmRzKGUpLHRoaXMuX3N0YXRlLmdldFN0YXRlQXRUaW1lKGUpIT09dC5TdGF0ZS5TdGFydGVkJiZ0aGlzLl9zdGF0ZS5hZGRFdmVudCh7c3RhdGU6dC5TdGF0ZS5TdGFydGVkLHRpbWU6ZSxvZmZzZXQ6aX0pLHRoaXN9LHQuQ2xvY2sucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oZSl7cmV0dXJuIGU9dGhpcy50b1NlY29uZHMoZSksdGhpcy5fc3RhdGUuZ2V0U3RhdGVBdFRpbWUoZSkhPT10LlN0YXRlLlN0b3BwZWQmJnRoaXMuX3N0YXRlLnNldFN0YXRlQXRUaW1lKHQuU3RhdGUuU3RvcHBlZCxlKSx0aGlzfSx0LkNsb2NrLnByb3RvdHlwZS5wYXVzZT1mdW5jdGlvbihlKXtyZXR1cm4gZT10aGlzLnRvU2Vjb25kcyhlKSx0aGlzLl9zdGF0ZS5nZXRTdGF0ZUF0VGltZShlKT09PXQuU3RhdGUuU3RhcnRlZCYmdGhpcy5fc3RhdGUuc2V0U3RhdGVBdFRpbWUodC5TdGF0ZS5QYXVzZWQsZSksdGhpc30sdC5DbG9jay5wcm90b3R5cGUuX2xvb3A9ZnVuY3Rpb24oZSl7dmFyIGkscyxuLG8scixhO2lmKHRoaXMuX2xvb3BJRD1yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5fYm91bmRMb29wKSxcImF1dG9cIj09PXRoaXMuX2xvb2tBaGVhZD90aGlzLmlzVW5kZWYoZSl8fChpPShlLXRoaXMuX2xhc3RVcGRhdGUpLzFlMyx0aGlzLl9sYXN0VXBkYXRlPWUsaTx0aGlzLl90aHJlc2hvbGQmJih0aGlzLl9jb21wdXRlZExvb2tBaGVhZD0oOSp0aGlzLl9jb21wdXRlZExvb2tBaGVhZCtpKS8xMCkpOnRoaXMuX2NvbXB1dGVkTG9va0FoZWFkPXRoaXMuX2xvb2tBaGVhZCxzPXRoaXMubm93KCksbj0yKnRoaXMuX2NvbXB1dGVkTG9va0FoZWFkLG89dGhpcy5fc3RhdGUuZ2V0RXZlbnQocytuKSxyPXQuU3RhdGUuU3RvcHBlZCxvJiYocj1vLnN0YXRlLC0xPT09dGhpcy5fbmV4dFRpY2smJnI9PT10LlN0YXRlLlN0YXJ0ZWQmJih0aGlzLl9uZXh0VGljaz1vLnRpbWUsdGhpcy5pc1VuZGVmKG8ub2Zmc2V0KXx8KHRoaXMudGlja3M9by5vZmZzZXQpKSkscj09PXQuU3RhdGUuU3RhcnRlZClmb3IoO3Mrbj50aGlzLl9uZXh0VGljazspcz50aGlzLl9uZXh0VGljayt0aGlzLl90aHJlc2hvbGQmJih0aGlzLl9uZXh0VGljaz1zKSxcbmE9dGhpcy5fbmV4dFRpY2ssdGhpcy5fbmV4dFRpY2srPTEvdGhpcy5mcmVxdWVuY3kuZ2V0VmFsdWVBdFRpbWUodGhpcy5fbmV4dFRpY2spLHRoaXMuY2FsbGJhY2soYSksdGhpcy50aWNrcysrO2Vsc2Ugcj09PXQuU3RhdGUuU3RvcHBlZCYmKHRoaXMuX25leHRUaWNrPS0xLHRoaXMudGlja3M9MCl9LHQuQ2xvY2sucHJvdG90eXBlLmdldFN0YXRlQXRUaW1lPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9zdGF0ZS5nZXRTdGF0ZUF0VGltZSh0KX0sdC5DbG9jay5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe2NhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuX2xvb3BJRCksdC5UaW1lbGluZVN0YXRlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fd3JpdGFibGUoXCJmcmVxdWVuY3lcIiksdGhpcy5mcmVxdWVuY3kuZGlzcG9zZSgpLHRoaXMuZnJlcXVlbmN5PW51bGwsdGhpcy5fYm91bmRMb29wPXQubm9PcCx0aGlzLl9uZXh0VGljaz0xLzAsdGhpcy5jYWxsYmFjaz1udWxsLHRoaXMuX3N0YXRlLmRpc3Bvc2UoKSx0aGlzLl9zdGF0ZT1udWxsfSx0LkNsb2NrfSksTW9kdWxlKGZ1bmN0aW9uKHQpe3JldHVybiB0LkVtaXR0ZXI9ZnVuY3Rpb24oKXt0aGlzLl9ldmVudHM9e319LHQuZXh0ZW5kKHQuRW1pdHRlciksdC5FbWl0dGVyLnByb3RvdHlwZS5vbj1mdW5jdGlvbih0LGUpe3ZhciBpLHMsbj10LnNwbGl0KC9cXFcrLyk7Zm9yKGk9MDtpPG4ubGVuZ3RoO2krKylzPW5baV0sdGhpcy5fZXZlbnRzLmhhc093blByb3BlcnR5KHMpfHwodGhpcy5fZXZlbnRzW3NdPVtdKSx0aGlzLl9ldmVudHNbc10ucHVzaChlKTtyZXR1cm4gdGhpc30sdC5FbWl0dGVyLnByb3RvdHlwZS5vZmY9ZnVuY3Rpb24oZSxpKXt2YXIgcyxuLG8scj1lLnNwbGl0KC9cXFcrLyk7Zm9yKHM9MDtzPHIubGVuZ3RoO3MrKylpZihlPXJbc10sdGhpcy5fZXZlbnRzLmhhc093blByb3BlcnR5KGUpKWlmKHQucHJvdG90eXBlLmlzVW5kZWYoaSkpdGhpcy5fZXZlbnRzW2VdPVtdO2Vsc2UgZm9yKG49dGhpcy5fZXZlbnRzW2VdLG89MDtvPG4ubGVuZ3RoO28rKyluW29dPT09aSYmbi5zcGxpY2UobywxKTtyZXR1cm4gdGhpc30sdC5FbWl0dGVyLnByb3RvdHlwZS50cmlnZ2VyPWZ1bmN0aW9uKHQpe3ZhciBlLGkscyxuO2lmKHRoaXMuX2V2ZW50cyYmKGU9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpLHRoaXMuX2V2ZW50cy5oYXNPd25Qcm9wZXJ0eSh0KSkpZm9yKGk9dGhpcy5fZXZlbnRzW3RdLHM9MCxuPWkubGVuZ3RoO24+cztzKyspaVtzXS5hcHBseSh0aGlzLGUpO3JldHVybiB0aGlzfSx0LkVtaXR0ZXIubWl4aW49ZnVuY3Rpb24oZSl7dmFyIGkscyxuLG89W1wib25cIixcIm9mZlwiLFwidHJpZ2dlclwiXTtmb3IoZS5fZXZlbnRzPXt9LGk9MDtpPG8ubGVuZ3RoO2krKylzPW9baV0sbj10LkVtaXR0ZXIucHJvdG90eXBlW3NdLGVbc109bn0sdC5FbWl0dGVyLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9ldmVudHM9bnVsbCx0aGlzfSx0LkVtaXR0ZXJ9KSxNb2R1bGUoZnVuY3Rpb24odCl7dC5JbnRlcnZhbFRpbWVsaW5lPWZ1bmN0aW9uKCl7dGhpcy5fcm9vdD1udWxsLHRoaXMuX2xlbmd0aD0wfSx0LmV4dGVuZCh0LkludGVydmFsVGltZWxpbmUpLHQuSW50ZXJ2YWxUaW1lbGluZS5wcm90b3R5cGUuYWRkRXZlbnQ9ZnVuY3Rpb24odCl7aWYodGhpcy5pc1VuZGVmKHQudGltZSl8fHRoaXMuaXNVbmRlZih0LmR1cmF0aW9uKSl0aHJvdyBuZXcgRXJyb3IoXCJldmVudHMgbXVzdCBoYXZlIHRpbWUgYW5kIGR1cmF0aW9uIHBhcmFtZXRlcnNcIik7dmFyIGk9bmV3IGUodC50aW1lLHQudGltZSt0LmR1cmF0aW9uLHQpO2ZvcihudWxsPT09dGhpcy5fcm9vdD90aGlzLl9yb290PWk6dGhpcy5fcm9vdC5pbnNlcnQoaSksdGhpcy5fbGVuZ3RoKys7bnVsbCE9PWk7KWkudXBkYXRlSGVpZ2h0KCksaS51cGRhdGVNYXgoKSx0aGlzLl9yZWJhbGFuY2UoaSksaT1pLnBhcmVudDtyZXR1cm4gdGhpc30sdC5JbnRlcnZhbFRpbWVsaW5lLnByb3RvdHlwZS5yZW1vdmVFdmVudD1mdW5jdGlvbih0KXt2YXIgZSxpLHM7aWYobnVsbCE9PXRoaXMuX3Jvb3QpZm9yKGU9W10sdGhpcy5fcm9vdC5zZWFyY2godC50aW1lLGUpLGk9MDtpPGUubGVuZ3RoO2krKylpZihzPWVbaV0scy5ldmVudD09PXQpe3RoaXMuX3JlbW92ZU5vZGUocyksdGhpcy5fbGVuZ3RoLS07YnJlYWt9cmV0dXJuIHRoaXN9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkludGVydmFsVGltZWxpbmUucHJvdG90eXBlLFwibGVuZ3RoXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sZW5ndGh9fSksdC5JbnRlcnZhbFRpbWVsaW5lLnByb3RvdHlwZS5jYW5jZWw9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9dGhpcy50b1NlY29uZHModCksdGhpcy5mb3JFYWNoQWZ0ZXIodCxmdW5jdGlvbih0KXt0aGlzLnJlbW92ZUV2ZW50KHQpfS5iaW5kKHRoaXMpKSx0aGlzfSx0LkludGVydmFsVGltZWxpbmUucHJvdG90eXBlLl9zZXRSb290PWZ1bmN0aW9uKHQpe3RoaXMuX3Jvb3Q9dCxudWxsIT09dGhpcy5fcm9vdCYmKHRoaXMuX3Jvb3QucGFyZW50PW51bGwpfSx0LkludGVydmFsVGltZWxpbmUucHJvdG90eXBlLl9yZXBsYWNlTm9kZUluUGFyZW50PWZ1bmN0aW9uKHQsZSl7bnVsbCE9PXQucGFyZW50Pyh0LmlzTGVmdENoaWxkKCk/dC5wYXJlbnQubGVmdD1lOnQucGFyZW50LnJpZ2h0PWUsdGhpcy5fcmViYWxhbmNlKHQucGFyZW50KSk6dGhpcy5fc2V0Um9vdChlKX0sdC5JbnRlcnZhbFRpbWVsaW5lLnByb3RvdHlwZS5fcmVtb3ZlTm9kZT1mdW5jdGlvbih0KXt2YXIgZSxpLHM7aWYobnVsbD09PXQubGVmdCYmbnVsbD09PXQucmlnaHQpdGhpcy5fcmVwbGFjZU5vZGVJblBhcmVudCh0LG51bGwpO2Vsc2UgaWYobnVsbD09PXQucmlnaHQpdGhpcy5fcmVwbGFjZU5vZGVJblBhcmVudCh0LHQubGVmdCk7ZWxzZSBpZihudWxsPT09dC5sZWZ0KXRoaXMuX3JlcGxhY2VOb2RlSW5QYXJlbnQodCx0LnJpZ2h0KTtlbHNle2lmKGU9dC5nZXRCYWxhbmNlKCksZT4wKWlmKG51bGw9PT10LmxlZnQucmlnaHQpaT10LmxlZnQsaS5yaWdodD10LnJpZ2h0LHM9aTtlbHNle2ZvcihpPXQubGVmdC5yaWdodDtudWxsIT09aS5yaWdodDspaT1pLnJpZ2h0O2kucGFyZW50LnJpZ2h0PWkubGVmdCxzPWkucGFyZW50LGkubGVmdD10LmxlZnQsaS5yaWdodD10LnJpZ2h0fWVsc2UgaWYobnVsbD09PXQucmlnaHQubGVmdClpPXQucmlnaHQsaS5sZWZ0PXQubGVmdCxzPWk7ZWxzZXtmb3IoaT10LnJpZ2h0LmxlZnQ7bnVsbCE9PWkubGVmdDspaT1pLmxlZnQ7aS5wYXJlbnQ9aS5wYXJlbnQsaS5wYXJlbnQubGVmdD1pLnJpZ2h0LHM9aS5wYXJlbnQsaS5sZWZ0PXQubGVmdCxpLnJpZ2h0PXQucmlnaHR9bnVsbCE9PXQucGFyZW50P3QuaXNMZWZ0Q2hpbGQoKT90LnBhcmVudC5sZWZ0PWk6dC5wYXJlbnQucmlnaHQ9aTp0aGlzLl9zZXRSb290KGkpLHRoaXMuX3JlYmFsYW5jZShzKX10LmRpc3Bvc2UoKX0sdC5JbnRlcnZhbFRpbWVsaW5lLnByb3RvdHlwZS5fcm90YXRlTGVmdD1mdW5jdGlvbih0KXt2YXIgZT10LnBhcmVudCxpPXQuaXNMZWZ0Q2hpbGQoKSxzPXQucmlnaHQ7dC5yaWdodD1zLmxlZnQscy5sZWZ0PXQsbnVsbCE9PWU/aT9lLmxlZnQ9czplLnJpZ2h0PXM6dGhpcy5fc2V0Um9vdChzKX0sdC5JbnRlcnZhbFRpbWVsaW5lLnByb3RvdHlwZS5fcm90YXRlUmlnaHQ9ZnVuY3Rpb24odCl7dmFyIGU9dC5wYXJlbnQsaT10LmlzTGVmdENoaWxkKCkscz10LmxlZnQ7dC5sZWZ0PXMucmlnaHQscy5yaWdodD10LG51bGwhPT1lP2k/ZS5sZWZ0PXM6ZS5yaWdodD1zOnRoaXMuX3NldFJvb3Qocyl9LHQuSW50ZXJ2YWxUaW1lbGluZS5wcm90b3R5cGUuX3JlYmFsYW5jZT1mdW5jdGlvbih0KXt2YXIgZT10LmdldEJhbGFuY2UoKTtlPjE/dC5sZWZ0LmdldEJhbGFuY2UoKTwwP3RoaXMuX3JvdGF0ZUxlZnQodC5sZWZ0KTp0aGlzLl9yb3RhdGVSaWdodCh0KTotMT5lJiYodC5yaWdodC5nZXRCYWxhbmNlKCk+MD90aGlzLl9yb3RhdGVSaWdodCh0LnJpZ2h0KTp0aGlzLl9yb3RhdGVMZWZ0KHQpKX0sdC5JbnRlcnZhbFRpbWVsaW5lLnByb3RvdHlwZS5nZXRFdmVudD1mdW5jdGlvbih0KXt2YXIgZSxpLHM7aWYobnVsbCE9PXRoaXMuX3Jvb3QmJihlPVtdLHRoaXMuX3Jvb3Quc2VhcmNoKHQsZSksZS5sZW5ndGg+MCkpe2ZvcihpPWVbMF0scz0xO3M8ZS5sZW5ndGg7cysrKWVbc10ubG93PmkubG93JiYoaT1lW3NdKTtyZXR1cm4gaS5ldmVudH1yZXR1cm4gbnVsbH0sdC5JbnRlcnZhbFRpbWVsaW5lLnByb3RvdHlwZS5mb3JFYWNoPWZ1bmN0aW9uKHQpe3ZhciBlLGkscztpZihudWxsIT09dGhpcy5fcm9vdClmb3IoZT1bXSxudWxsIT09dGhpcy5fcm9vdCYmdGhpcy5fcm9vdC50cmF2ZXJzZShmdW5jdGlvbih0KXtlLnB1c2godCl9KSxpPTA7aTxlLmxlbmd0aDtpKyspcz1lW2ldLmV2ZW50LHMmJnQocyk7cmV0dXJuIHRoaXN9LHQuSW50ZXJ2YWxUaW1lbGluZS5wcm90b3R5cGUuZm9yRWFjaE92ZXJsYXA9ZnVuY3Rpb24odCxlKXt2YXIgaSxzLG47aWYodD10aGlzLnRvU2Vjb25kcyh0KSxudWxsIT09dGhpcy5fcm9vdClmb3IoaT1bXSx0aGlzLl9yb290LnNlYXJjaCh0LGkpLHM9aS5sZW5ndGgtMTtzPj0wO3MtLSluPWlbc10uZXZlbnQsbiYmZShuKTtyZXR1cm4gdGhpc30sdC5JbnRlcnZhbFRpbWVsaW5lLnByb3RvdHlwZS5mb3JFYWNoQWZ0ZXI9ZnVuY3Rpb24odCxlKXt2YXIgaSxzLG47aWYodD10aGlzLnRvU2Vjb25kcyh0KSxudWxsIT09dGhpcy5fcm9vdClmb3IoaT1bXSx0aGlzLl9yb290LnNlYXJjaEFmdGVyKHQsaSkscz1pLmxlbmd0aC0xO3M+PTA7cy0tKW49aVtzXS5ldmVudCxuJiZlKG4pO3JldHVybiB0aGlzfSx0LkludGVydmFsVGltZWxpbmUucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt2YXIgdCxlPVtdO2ZvcihudWxsIT09dGhpcy5fcm9vdCYmdGhpcy5fcm9vdC50cmF2ZXJzZShmdW5jdGlvbih0KXtlLnB1c2godCl9KSx0PTA7dDxlLmxlbmd0aDt0KyspZVt0XS5kaXNwb3NlKCk7cmV0dXJuIGU9bnVsbCx0aGlzLl9yb290PW51bGwsdGhpc307dmFyIGU9ZnVuY3Rpb24odCxlLGkpe3RoaXMuZXZlbnQ9aSx0aGlzLmxvdz10LHRoaXMuaGlnaD1lLHRoaXMubWF4PXRoaXMuaGlnaCx0aGlzLl9sZWZ0PW51bGwsdGhpcy5fcmlnaHQ9bnVsbCx0aGlzLnBhcmVudD1udWxsLHRoaXMuaGVpZ2h0PTB9O3JldHVybiBlLnByb3RvdHlwZS5pbnNlcnQ9ZnVuY3Rpb24odCl7dC5sb3c8PXRoaXMubG93P251bGw9PT10aGlzLmxlZnQ/dGhpcy5sZWZ0PXQ6dGhpcy5sZWZ0Lmluc2VydCh0KTpudWxsPT09dGhpcy5yaWdodD90aGlzLnJpZ2h0PXQ6dGhpcy5yaWdodC5pbnNlcnQodCl9LGUucHJvdG90eXBlLnNlYXJjaD1mdW5jdGlvbih0LGUpe3Q+dGhpcy5tYXh8fChudWxsIT09dGhpcy5sZWZ0JiZ0aGlzLmxlZnQuc2VhcmNoKHQsZSksdGhpcy5sb3c8PXQmJnRoaXMuaGlnaD49dCYmZS5wdXNoKHRoaXMpLHRoaXMubG93PnR8fG51bGwhPT10aGlzLnJpZ2h0JiZ0aGlzLnJpZ2h0LnNlYXJjaCh0LGUpKX0sZS5wcm90b3R5cGUuc2VhcmNoQWZ0ZXI9ZnVuY3Rpb24odCxlKXt0aGlzLmxvdz49dCYmKGUucHVzaCh0aGlzKSxudWxsIT09dGhpcy5sZWZ0JiZ0aGlzLmxlZnQuc2VhcmNoQWZ0ZXIodCxlKSksbnVsbCE9PXRoaXMucmlnaHQmJnRoaXMucmlnaHQuc2VhcmNoQWZ0ZXIodCxlKX0sZS5wcm90b3R5cGUudHJhdmVyc2U9ZnVuY3Rpb24odCl7dCh0aGlzKSxudWxsIT09dGhpcy5sZWZ0JiZ0aGlzLmxlZnQudHJhdmVyc2UodCksbnVsbCE9PXRoaXMucmlnaHQmJnRoaXMucmlnaHQudHJhdmVyc2UodCl9LGUucHJvdG90eXBlLnVwZGF0ZUhlaWdodD1mdW5jdGlvbigpe3RoaXMuaGVpZ2h0PW51bGwhPT10aGlzLmxlZnQmJm51bGwhPT10aGlzLnJpZ2h0P01hdGgubWF4KHRoaXMubGVmdC5oZWlnaHQsdGhpcy5yaWdodC5oZWlnaHQpKzE6bnVsbCE9PXRoaXMucmlnaHQ/dGhpcy5yaWdodC5oZWlnaHQrMTpudWxsIT09dGhpcy5sZWZ0P3RoaXMubGVmdC5oZWlnaHQrMTowfSxlLnByb3RvdHlwZS51cGRhdGVNYXg9ZnVuY3Rpb24oKXt0aGlzLm1heD10aGlzLmhpZ2gsbnVsbCE9PXRoaXMubGVmdCYmKHRoaXMubWF4PU1hdGgubWF4KHRoaXMubWF4LHRoaXMubGVmdC5tYXgpKSxudWxsIT09dGhpcy5yaWdodCYmKHRoaXMubWF4PU1hdGgubWF4KHRoaXMubWF4LHRoaXMucmlnaHQubWF4KSl9LGUucHJvdG90eXBlLmdldEJhbGFuY2U9ZnVuY3Rpb24oKXt2YXIgdD0wO3JldHVybiBudWxsIT09dGhpcy5sZWZ0JiZudWxsIT09dGhpcy5yaWdodD90PXRoaXMubGVmdC5oZWlnaHQtdGhpcy5yaWdodC5oZWlnaHQ6bnVsbCE9PXRoaXMubGVmdD90PXRoaXMubGVmdC5oZWlnaHQrMTpudWxsIT09dGhpcy5yaWdodCYmKHQ9LSh0aGlzLnJpZ2h0LmhlaWdodCsxKSksdH0sZS5wcm90b3R5cGUuaXNMZWZ0Q2hpbGQ9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbCE9PXRoaXMucGFyZW50JiZ0aGlzLnBhcmVudC5sZWZ0PT09dGhpc30sT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwibGVmdFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGVmdH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2xlZnQ9dCxudWxsIT09dCYmKHQucGFyZW50PXRoaXMpLHRoaXMudXBkYXRlSGVpZ2h0KCksdGhpcy51cGRhdGVNYXgoKX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJyaWdodFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmlnaHR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9yaWdodD10LG51bGwhPT10JiYodC5wYXJlbnQ9dGhpcyksdGhpcy51cGRhdGVIZWlnaHQoKSx0aGlzLnVwZGF0ZU1heCgpfX0pLGUucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLnBhcmVudD1udWxsLHRoaXMuX2xlZnQ9bnVsbCx0aGlzLl9yaWdodD1udWxsLHRoaXMuZXZlbnQ9bnVsbH0sdC5JbnRlcnZhbFRpbWVsaW5lfSksTW9kdWxlKGZ1bmN0aW9uKHQpe3QuVHJhbnNwb3J0PWZ1bmN0aW9uKCl7dC5FbWl0dGVyLmNhbGwodGhpcyksdGhpcy5sb29wPSExLHRoaXMuX2xvb3BTdGFydD0wLHRoaXMuX2xvb3BFbmQ9MCx0aGlzLl9wcHE9ZS5kZWZhdWx0cy5QUFEsdGhpcy5fY2xvY2s9bmV3IHQuQ2xvY2soe2NhbGxiYWNrOnRoaXMuX3Byb2Nlc3NUaWNrLmJpbmQodGhpcyksZnJlcXVlbmN5OjB9KSx0aGlzLmJwbT10aGlzLl9jbG9jay5mcmVxdWVuY3ksdGhpcy5icG0uX3RvVW5pdHM9dGhpcy5fdG9Vbml0cy5iaW5kKHRoaXMpLHRoaXMuYnBtLl9mcm9tVW5pdHM9dGhpcy5fZnJvbVVuaXRzLmJpbmQodGhpcyksdGhpcy5icG0udW5pdHM9dC5UeXBlLkJQTSx0aGlzLmJwbS52YWx1ZT1lLmRlZmF1bHRzLmJwbSx0aGlzLl9yZWFkT25seShcImJwbVwiKSx0aGlzLl90aW1lU2lnbmF0dXJlPWUuZGVmYXVsdHMudGltZVNpZ25hdHVyZSx0aGlzLl9zY2hlZHVsZWRFdmVudHM9e30sdGhpcy5fZXZlbnRJRD0wLHRoaXMuX3RpbWVsaW5lPW5ldyB0LlRpbWVsaW5lLHRoaXMuX3JlcGVhdGVkRXZlbnRzPW5ldyB0LkludGVydmFsVGltZWxpbmUsdGhpcy5fb25jZUV2ZW50cz1uZXcgdC5UaW1lbGluZSx0aGlzLl9zeW5jZWRTaWduYWxzPVtdO3ZhciBpPXRoaXMubm90YXRpb25Ub1NlY29uZHMoZS5kZWZhdWx0cy5zd2luZ1N1YmRpdmlzaW9uLGUuZGVmYXVsdHMuYnBtLGUuZGVmYXVsdHMudGltZVNpZ25hdHVyZSk7dGhpcy5fc3dpbmdUaWNrcz1pLyg2MC9lLmRlZmF1bHRzLmJwbSkqdGhpcy5fcHBxLHRoaXMuX3N3aW5nQW1vdW50PTB9LHQuZXh0ZW5kKHQuVHJhbnNwb3J0LHQuRW1pdHRlciksdC5UcmFuc3BvcnQuZGVmYXVsdHM9e2JwbToxMjAsc3dpbmc6MCxzd2luZ1N1YmRpdmlzaW9uOlwiMTZuXCIsdGltZVNpZ25hdHVyZTo0LGxvb3BTdGFydDowLGxvb3BFbmQ6XCI0bVwiLFBQUTo0OH0sdC5UcmFuc3BvcnQucHJvdG90eXBlLl9wcm9jZXNzVGljaz1mdW5jdGlvbih0KXt0aGlzLl9zd2luZ0Ftb3VudD4wJiZ0aGlzLl9jbG9jay50aWNrcyV0aGlzLl9wcHEhPT0wJiZ0aGlzLl9jbG9jay50aWNrcyV0aGlzLl9zd2luZ1RpY2tzPT09MCYmKHQrPXRoaXMudGlja3NUb1NlY29uZHModGhpcy5fc3dpbmdUaWNrcykqdGhpcy5fc3dpbmdBbW91bnQpLHRoaXMubG9vcCYmdGhpcy5fY2xvY2sudGlja3M9PT10aGlzLl9sb29wRW5kJiYodGhpcy50aWNrcz10aGlzLl9sb29wU3RhcnQsdGhpcy50cmlnZ2VyKFwibG9vcFwiLHQpKTt2YXIgZT10aGlzLl9jbG9jay50aWNrczt0aGlzLl90aW1lbGluZS5mb3JFYWNoQXRUaW1lKGUsZnVuY3Rpb24oZSl7ZS5jYWxsYmFjayh0KX0pLHRoaXMuX3JlcGVhdGVkRXZlbnRzLmZvckVhY2hPdmVybGFwKGUsZnVuY3Rpb24oaSl7KGUtaS50aW1lKSVpLmludGVydmFsPT09MCYmaS5jYWxsYmFjayh0KX0pLHRoaXMuX29uY2VFdmVudHMuZm9yRWFjaEJlZm9yZShlLGZ1bmN0aW9uKGUpe2UuY2FsbGJhY2sodCl9KSx0aGlzLl9vbmNlRXZlbnRzLmNhbmNlbEJlZm9yZShlKX0sdC5UcmFuc3BvcnQucHJvdG90eXBlLnNjaGVkdWxlPWZ1bmN0aW9uKHQsZSl7dmFyIGk9e3RpbWU6dGhpcy50b1RpY2tzKGUpLGNhbGxiYWNrOnR9LHM9dGhpcy5fZXZlbnRJRCsrO3JldHVybiB0aGlzLl9zY2hlZHVsZWRFdmVudHNbcy50b1N0cmluZygpXT17ZXZlbnQ6aSx0aW1lbGluZTp0aGlzLl90aW1lbGluZX0sdGhpcy5fdGltZWxpbmUuYWRkRXZlbnQoaSksc30sdC5UcmFuc3BvcnQucHJvdG90eXBlLnNjaGVkdWxlUmVwZWF0PWZ1bmN0aW9uKHQsZSxpLHMpe3ZhciBuLG87aWYoMD49ZSl0aHJvdyBuZXcgRXJyb3IoXCJyZXBlYXQgZXZlbnRzIG11c3QgaGF2ZSBhbiBpbnRlcnZhbCBsYXJnZXIgdGhhbiAwXCIpO3JldHVybiBuPXt0aW1lOnRoaXMudG9UaWNrcyhpKSxkdXJhdGlvbjp0aGlzLnRvVGlja3ModGhpcy5kZWZhdWx0QXJnKHMsMS8wKSksaW50ZXJ2YWw6dGhpcy50b1RpY2tzKGUpLGNhbGxiYWNrOnR9LG89dGhpcy5fZXZlbnRJRCsrLHRoaXMuX3NjaGVkdWxlZEV2ZW50c1tvLnRvU3RyaW5nKCldPXtldmVudDpuLHRpbWVsaW5lOnRoaXMuX3JlcGVhdGVkRXZlbnRzfSx0aGlzLl9yZXBlYXRlZEV2ZW50cy5hZGRFdmVudChuKSxvfSx0LlRyYW5zcG9ydC5wcm90b3R5cGUuc2NoZWR1bGVPbmNlPWZ1bmN0aW9uKHQsZSl7dmFyIGk9e3RpbWU6dGhpcy50b1RpY2tzKGUpLGNhbGxiYWNrOnR9LHM9dGhpcy5fZXZlbnRJRCsrO3JldHVybiB0aGlzLl9zY2hlZHVsZWRFdmVudHNbcy50b1N0cmluZygpXT17ZXZlbnQ6aSx0aW1lbGluZTp0aGlzLl9vbmNlRXZlbnRzfSx0aGlzLl9vbmNlRXZlbnRzLmFkZEV2ZW50KGkpLHN9LHQuVHJhbnNwb3J0LnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbih0KXtpZih0aGlzLl9zY2hlZHVsZWRFdmVudHMuaGFzT3duUHJvcGVydHkodCkpe3ZhciBlPXRoaXMuX3NjaGVkdWxlZEV2ZW50c1t0LnRvU3RyaW5nKCldO2UudGltZWxpbmUucmVtb3ZlRXZlbnQoZS5ldmVudCksZGVsZXRlIHRoaXMuX3NjaGVkdWxlZEV2ZW50c1t0LnRvU3RyaW5nKCldfXJldHVybiB0aGlzfSx0LlRyYW5zcG9ydC5wcm90b3R5cGUuY2FuY2VsPWZ1bmN0aW9uKHQpe3JldHVybiB0PXRoaXMuZGVmYXVsdEFyZyh0LDApLHQ9dGhpcy50b1RpY2tzKHQpLHRoaXMuX3RpbWVsaW5lLmNhbmNlbCh0KSx0aGlzLl9vbmNlRXZlbnRzLmNhbmNlbCh0KSx0aGlzLl9yZXBlYXRlZEV2ZW50cy5jYW5jZWwodCksdGhpc30sdC5UcmFuc3BvcnQucHJvdG90eXBlLnF1YW50aXplPWZ1bmN0aW9uKGUsaSl7dmFyIHMsbixvO3JldHVybiBpPXRoaXMuZGVmYXVsdEFyZyhpLFwiNG5cIikscz10aGlzLnRvVGlja3MoZSksaT10aGlzLnRvVGlja3MoaSksbj1pLXMlaSxuPT09aSYmKG49MCksbz10aGlzLm5vdygpLHRoaXMuc3RhdGU9PT10LlN0YXRlLlN0YXJ0ZWQmJihvPXRoaXMuX2Nsb2NrLl9uZXh0VGljayksdGhpcy50b1NlY29uZHMoZSxvKSt0aGlzLnRpY2tzVG9TZWNvbmRzKG4pfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5UcmFuc3BvcnQucHJvdG90eXBlLFwic3RhdGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Nsb2NrLmdldFN0YXRlQXRUaW1lKHRoaXMubm93KCkpfX0pLHQuVHJhbnNwb3J0LnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbih0LGUpe3JldHVybiB0PXRoaXMudG9TZWNvbmRzKHQpLGU9dGhpcy5pc1VuZGVmKGUpP3RoaXMuZGVmYXVsdEFyZyhlLHRoaXMuX2Nsb2NrLnRpY2tzKTp0aGlzLnRvVGlja3MoZSksdGhpcy5fY2xvY2suc3RhcnQodCxlKSx0aGlzLnRyaWdnZXIoXCJzdGFydFwiLHQsdGhpcy50aWNrc1RvU2Vjb25kcyhlKSksdGhpc30sdC5UcmFuc3BvcnQucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9dGhpcy50b1NlY29uZHModCksdGhpcy5fY2xvY2suc3RvcCh0KSx0aGlzLnRyaWdnZXIoXCJzdG9wXCIsdCksdGhpc30sdC5UcmFuc3BvcnQucHJvdG90eXBlLnBhdXNlPWZ1bmN0aW9uKHQpe3JldHVybiB0PXRoaXMudG9TZWNvbmRzKHQpLHRoaXMuX2Nsb2NrLnBhdXNlKHQpLHRoaXMudHJpZ2dlcihcInBhdXNlXCIsdCksdGhpc30sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuVHJhbnNwb3J0LnByb3RvdHlwZSxcInRpbWVTaWduYXR1cmVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RpbWVTaWduYXR1cmV9LHNldDpmdW5jdGlvbih0KXt0aGlzLmlzQXJyYXkodCkmJih0PXRbMF0vdFsxXSo0KSx0aGlzLl90aW1lU2lnbmF0dXJlPXR9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuVHJhbnNwb3J0LnByb3RvdHlwZSxcImxvb3BTdGFydFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50aWNrc1RvU2Vjb25kcyh0aGlzLl9sb29wU3RhcnQpfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbG9vcFN0YXJ0PXRoaXMudG9UaWNrcyh0KX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5UcmFuc3BvcnQucHJvdG90eXBlLFwibG9vcEVuZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50aWNrc1RvU2Vjb25kcyh0aGlzLl9sb29wRW5kKX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2xvb3BFbmQ9dGhpcy50b1RpY2tzKHQpfX0pLHQuVHJhbnNwb3J0LnByb3RvdHlwZS5zZXRMb29wUG9pbnRzPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMubG9vcFN0YXJ0PXQsdGhpcy5sb29wRW5kPWUsdGhpc30sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuVHJhbnNwb3J0LnByb3RvdHlwZSxcInN3aW5nXCIse2dldDpmdW5jdGlvbigpe3JldHVybiAyKnRoaXMuX3N3aW5nQW1vdW50fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fc3dpbmdBbW91bnQ9LjUqdH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5UcmFuc3BvcnQucHJvdG90eXBlLFwic3dpbmdTdWJkaXZpc2lvblwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50b05vdGF0aW9uKHRoaXMuX3N3aW5nVGlja3MrXCJpXCIpfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fc3dpbmdUaWNrcz10aGlzLnRvVGlja3ModCl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuVHJhbnNwb3J0LnByb3RvdHlwZSxcInBvc2l0aW9uXCIse2dldDpmdW5jdGlvbigpe3ZhciB0LGU9dGhpcy50aWNrcy90aGlzLl9wcHEsaT1NYXRoLmZsb29yKGUvdGhpcy5fdGltZVNpZ25hdHVyZSkscz1lJTEqNDtyZXR1cm4gcyUxPjAmJihzPXMudG9GaXhlZCgzKSksZT1NYXRoLmZsb29yKGUpJXRoaXMuX3RpbWVTaWduYXR1cmUsdD1baSxlLHNdLHQuam9pbihcIjpcIil9LHNldDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLnRvVGlja3ModCk7dGhpcy50aWNrcz1lfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlRyYW5zcG9ydC5wcm90b3R5cGUsXCJwcm9ncmVzc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sb29wPyh0aGlzLnRpY2tzLXRoaXMuX2xvb3BTdGFydCkvKHRoaXMuX2xvb3BFbmQtdGhpcy5fbG9vcFN0YXJ0KTowfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlRyYW5zcG9ydC5wcm90b3R5cGUsXCJ0aWNrc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2xvY2sudGlja3N9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9jbG9jay50aWNrcz10fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlRyYW5zcG9ydC5wcm90b3R5cGUsXCJQUFFcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BwcX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3BwcT10LHRoaXMuYnBtLnZhbHVlPXRoaXMuYnBtLnZhbHVlfX0pLHQuVHJhbnNwb3J0LnByb3RvdHlwZS5fZnJvbVVuaXRzPWZ1bmN0aW9uKHQpe3JldHVybiAxLyg2MC90L3RoaXMuUFBRKX0sdC5UcmFuc3BvcnQucHJvdG90eXBlLl90b1VuaXRzPWZ1bmN0aW9uKHQpe3JldHVybiB0L3RoaXMuUFBRKjYwfSx0LlRyYW5zcG9ydC5wcm90b3R5cGUuc3luY1NpZ25hbD1mdW5jdGlvbihlLGkpe2l8fChpPTAhPT1lLl9wYXJhbS52YWx1ZT9lLl9wYXJhbS52YWx1ZS90aGlzLmJwbS5fcGFyYW0udmFsdWU6MCk7dmFyIHM9bmV3IHQuR2FpbihpKTtyZXR1cm4gdGhpcy5icG0uY2hhaW4ocyxlLl9wYXJhbSksdGhpcy5fc3luY2VkU2lnbmFscy5wdXNoKHtyYXRpbzpzLHNpZ25hbDplLGluaXRpYWw6ZS5fcGFyYW0udmFsdWV9KSxlLl9wYXJhbS52YWx1ZT0wLHRoaXN9LHQuVHJhbnNwb3J0LnByb3RvdHlwZS51bnN5bmNTaWduYWw9ZnVuY3Rpb24odCl7dmFyIGUsaTtmb3IoZT10aGlzLl9zeW5jZWRTaWduYWxzLmxlbmd0aC0xO2U+PTA7ZS0tKWk9dGhpcy5fc3luY2VkU2lnbmFsc1tlXSxpLnNpZ25hbD09PXQmJihpLnJhdGlvLmRpc3Bvc2UoKSxpLnNpZ25hbC5fcGFyYW0udmFsdWU9aS5pbml0aWFsLHRoaXMuX3N5bmNlZFNpZ25hbHMuc3BsaWNlKGUsMSkpO3JldHVybiB0aGlzfSx0LlRyYW5zcG9ydC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LkVtaXR0ZXIucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9jbG9jay5kaXNwb3NlKCksdGhpcy5fY2xvY2s9bnVsbCx0aGlzLl93cml0YWJsZShcImJwbVwiKSx0aGlzLmJwbT1udWxsLHRoaXMuX3RpbWVsaW5lLmRpc3Bvc2UoKSx0aGlzLl90aW1lbGluZT1udWxsLHRoaXMuX29uY2VFdmVudHMuZGlzcG9zZSgpLHRoaXMuX29uY2VFdmVudHM9bnVsbCx0aGlzLl9yZXBlYXRlZEV2ZW50cy5kaXNwb3NlKCksdGhpcy5fcmVwZWF0ZWRFdmVudHM9bnVsbCx0aGlzfSx0LlRyYW5zcG9ydC5wcm90b3R5cGUuc2V0SW50ZXJ2YWw9ZnVuY3Rpb24oZSxpKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVGhpcyBtZXRob2QgaXMgZGVwcmVjYXRlZC4gVXNlIFRvbmUuVHJhbnNwb3J0LnNjaGVkdWxlUmVwZWF0IGluc3RlYWQuXCIpLHQuVHJhbnNwb3J0LnNjaGVkdWxlUmVwZWF0KGUsaSl9LHQuVHJhbnNwb3J0LnByb3RvdHlwZS5jbGVhckludGVydmFsPWZ1bmN0aW9uKGUpe3JldHVybiBjb25zb2xlLndhcm4oXCJUaGlzIG1ldGhvZCBpcyBkZXByZWNhdGVkLiBVc2UgVG9uZS5UcmFuc3BvcnQuY2xlYXIgaW5zdGVhZC5cIiksdC5UcmFuc3BvcnQuY2xlYXIoZSl9LHQuVHJhbnNwb3J0LnByb3RvdHlwZS5zZXRUaW1lb3V0PWZ1bmN0aW9uKGUsaSl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRoaXMgbWV0aG9kIGlzIGRlcHJlY2F0ZWQuIFVzZSBUb25lLlRyYW5zcG9ydC5zY2hlZHVsZU9uY2UgaW5zdGVhZC5cIiksdC5UcmFuc3BvcnQuc2NoZWR1bGVPbmNlKGUsaSl9LHQuVHJhbnNwb3J0LnByb3RvdHlwZS5jbGVhclRpbWVvdXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRoaXMgbWV0aG9kIGlzIGRlcHJlY2F0ZWQuIFVzZSBUb25lLlRyYW5zcG9ydC5jbGVhciBpbnN0ZWFkLlwiKSx0LlRyYW5zcG9ydC5jbGVhcihlKX0sdC5UcmFuc3BvcnQucHJvdG90eXBlLnNldFRpbWVsaW5lPWZ1bmN0aW9uKGUsaSl7cmV0dXJuIGNvbnNvbGUud2FybihcIlRoaXMgbWV0aG9kIGlzIGRlcHJlY2F0ZWQuIFVzZSBUb25lLlRyYW5zcG9ydC5zY2hlZHVsZSBpbnN0ZWFkLlwiKSx0LlRyYW5zcG9ydC5zY2hlZHVsZShlLGkpfSx0LlRyYW5zcG9ydC5wcm90b3R5cGUuY2xlYXJUaW1lbGluZT1mdW5jdGlvbihlKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVGhpcyBtZXRob2QgaXMgZGVwcmVjYXRlZC4gVXNlIFRvbmUuVHJhbnNwb3J0LmNsZWFyIGluc3RlYWQuXCIpLHQuVHJhbnNwb3J0LmNsZWFyKGUpfTt2YXIgZT10LlRyYW5zcG9ydDtyZXR1cm4gdC5faW5pdEF1ZGlvQ29udGV4dChmdW5jdGlvbigpe2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIHQuVHJhbnNwb3J0KXQuVHJhbnNwb3J0PW5ldyB0LlRyYW5zcG9ydDtlbHNle3QuVHJhbnNwb3J0LnN0b3AoKTt2YXIgaT10LlRyYW5zcG9ydC5nZXQoKTt0LlRyYW5zcG9ydC5kaXNwb3NlKCksZS5jYWxsKHQuVHJhbnNwb3J0KSx0LlRyYW5zcG9ydC5zZXQoaSl9fSksdC5UcmFuc3BvcnR9KSxNb2R1bGUoZnVuY3Rpb24odCl7cmV0dXJuIHQuVm9sdW1lPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zT2JqZWN0KGFyZ3VtZW50cyxbXCJ2b2x1bWVcIl0sdC5Wb2x1bWUuZGVmYXVsdHMpO3RoaXMub3V0cHV0PXRoaXMuaW5wdXQ9bmV3IHQuR2FpbihlLnZvbHVtZSx0LlR5cGUuRGVjaWJlbHMpLHRoaXMudm9sdW1lPXRoaXMub3V0cHV0LmdhaW4sdGhpcy5fcmVhZE9ubHkoXCJ2b2x1bWVcIil9LHQuZXh0ZW5kKHQuVm9sdW1lKSx0LlZvbHVtZS5kZWZhdWx0cz17dm9sdW1lOjB9LHQuVm9sdW1lLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW5wdXQuZGlzcG9zZSgpLHQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl93cml0YWJsZShcInZvbHVtZVwiKSx0aGlzLnZvbHVtZS5kaXNwb3NlKCksdGhpcy52b2x1bWU9bnVsbCx0aGlzfSx0LlZvbHVtZX0pLE1vZHVsZShmdW5jdGlvbih0KXtyZXR1cm4gdC5Tb3VyY2U9ZnVuY3Rpb24oZSl7dC5jYWxsKHRoaXMpLGU9dGhpcy5kZWZhdWx0QXJnKGUsdC5Tb3VyY2UuZGVmYXVsdHMpLHRoaXMuX3ZvbHVtZT10aGlzLm91dHB1dD1uZXcgdC5Wb2x1bWUoZS52b2x1bWUpLHRoaXMudm9sdW1lPXRoaXMuX3ZvbHVtZS52b2x1bWUsdGhpcy5fcmVhZE9ubHkoXCJ2b2x1bWVcIiksdGhpcy5fc3RhdGU9bmV3IHQuVGltZWxpbmVTdGF0ZSh0LlN0YXRlLlN0b3BwZWQpLHRoaXMuX3N5bmNTdGFydD1mdW5jdGlvbih0LGUpe3Q9dGhpcy50b1NlY29uZHModCksdCs9dGhpcy50b1NlY29uZHModGhpcy5fc3RhcnREZWxheSksdGhpcy5zdGFydCh0LGUpfS5iaW5kKHRoaXMpLHRoaXMuX3N5bmNTdG9wPXRoaXMuc3RvcC5iaW5kKHRoaXMpLHRoaXMuX3N0YXJ0RGVsYXk9MCx0aGlzLl92b2x1bWUub3V0cHV0Lm91dHB1dC5jaGFubmVsQ291bnQ9Mix0aGlzLl92b2x1bWUub3V0cHV0Lm91dHB1dC5jaGFubmVsQ291bnRNb2RlPVwiZXhwbGljaXRcIn0sdC5leHRlbmQodC5Tb3VyY2UpLHQuU291cmNlLmRlZmF1bHRzPXt2b2x1bWU6MH0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuU291cmNlLnByb3RvdHlwZSxcInN0YXRlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdGF0ZS5nZXRTdGF0ZUF0VGltZSh0aGlzLm5vdygpKX19KSx0LlNvdXJjZS5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGU9dGhpcy50b1NlY29uZHMoZSksKHRoaXMuX3N0YXRlLmdldFN0YXRlQXRUaW1lKGUpIT09dC5TdGF0ZS5TdGFydGVkfHx0aGlzLnJldHJpZ2dlcikmJih0aGlzLl9zdGF0ZS5zZXRTdGF0ZUF0VGltZSh0LlN0YXRlLlN0YXJ0ZWQsZSksdGhpcy5fc3RhcnQmJnRoaXMuX3N0YXJ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKSksdGhpc30sdC5Tb3VyY2UucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oZSl7cmV0dXJuIGU9dGhpcy50b1NlY29uZHMoZSksdGhpcy5fc3RhdGUuZ2V0U3RhdGVBdFRpbWUoZSk9PT10LlN0YXRlLlN0YXJ0ZWQmJih0aGlzLl9zdGF0ZS5zZXRTdGF0ZUF0VGltZSh0LlN0YXRlLlN0b3BwZWQsZSksdGhpcy5fc3RvcCYmdGhpcy5fc3RvcC5hcHBseSh0aGlzLGFyZ3VtZW50cykpLHRoaXN9LHQuU291cmNlLnByb3RvdHlwZS5zeW5jPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9zdGFydERlbGF5PXRoaXMuZGVmYXVsdEFyZyhlLDApLHQuVHJhbnNwb3J0Lm9uKFwic3RhcnRcIix0aGlzLl9zeW5jU3RhcnQpLHQuVHJhbnNwb3J0Lm9uKFwic3RvcCBwYXVzZVwiLHRoaXMuX3N5bmNTdG9wKSx0aGlzfSx0LlNvdXJjZS5wcm90b3R5cGUudW5zeW5jPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXJ0RGVsYXk9MCx0LlRyYW5zcG9ydC5vZmYoXCJzdGFydFwiLHRoaXMuX3N5bmNTdGFydCksdC5UcmFuc3BvcnQub2ZmKFwic3RvcCBwYXVzZVwiLHRoaXMuX3N5bmNTdG9wKSx0aGlzfSx0LlNvdXJjZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMuc3RvcCgpLHQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLnVuc3luYygpLHRoaXMuX3dyaXRhYmxlKFwidm9sdW1lXCIpLHRoaXMuX3ZvbHVtZS5kaXNwb3NlKCksdGhpcy5fdm9sdW1lPW51bGwsdGhpcy52b2x1bWU9bnVsbCx0aGlzLl9zdGF0ZS5kaXNwb3NlKCksdGhpcy5fc3RhdGU9bnVsbCx0aGlzLl9zeW5jU3RhcnQ9bnVsbCx0aGlzLl9zeW5jU3RhcnQ9bnVsbH0sdC5Tb3VyY2V9KSxNb2R1bGUoZnVuY3Rpb24odCl7cmV0dXJuIHQuT3NjaWxsYXRvcj1mdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9uc09iamVjdChhcmd1bWVudHMsW1wiZnJlcXVlbmN5XCIsXCJ0eXBlXCJdLHQuT3NjaWxsYXRvci5kZWZhdWx0cyk7dC5Tb3VyY2UuY2FsbCh0aGlzLGUpLHRoaXMuX29zY2lsbGF0b3I9bnVsbCx0aGlzLmZyZXF1ZW5jeT1uZXcgdC5TaWduYWwoZS5mcmVxdWVuY3ksdC5UeXBlLkZyZXF1ZW5jeSksdGhpcy5kZXR1bmU9bmV3IHQuU2lnbmFsKGUuZGV0dW5lLHQuVHlwZS5DZW50cyksdGhpcy5fd2F2ZT1udWxsLHRoaXMuX3BhcnRpYWxzPXRoaXMuZGVmYXVsdEFyZyhlLnBhcnRpYWxzLFsxXSksdGhpcy5fcGhhc2U9ZS5waGFzZSx0aGlzLl90eXBlPW51bGwsdGhpcy50eXBlPWUudHlwZSx0aGlzLnBoYXNlPXRoaXMuX3BoYXNlLHRoaXMuX3JlYWRPbmx5KFtcImZyZXF1ZW5jeVwiLFwiZGV0dW5lXCJdKX0sdC5leHRlbmQodC5Pc2NpbGxhdG9yLHQuU291cmNlKSx0Lk9zY2lsbGF0b3IuZGVmYXVsdHM9e3R5cGU6XCJzaW5lXCIsZnJlcXVlbmN5OjQ0MCxkZXR1bmU6MCxwaGFzZTowLHBhcnRpYWxzOltdfSx0Lk9zY2lsbGF0b3IuVHlwZT17U2luZTpcInNpbmVcIixUcmlhbmdsZTpcInRyaWFuZ2xlXCIsU2F3dG9vdGg6XCJzYXd0b290aFwiLFNxdWFyZTpcInNxdWFyZVwiLEN1c3RvbTpcImN1c3RvbVwifSx0Lk9zY2lsbGF0b3IucHJvdG90eXBlLl9zdGFydD1mdW5jdGlvbih0KXt0aGlzLl9vc2NpbGxhdG9yPXRoaXMuY29udGV4dC5jcmVhdGVPc2NpbGxhdG9yKCksdGhpcy5fb3NjaWxsYXRvci5zZXRQZXJpb2RpY1dhdmUodGhpcy5fd2F2ZSksdGhpcy5fb3NjaWxsYXRvci5jb25uZWN0KHRoaXMub3V0cHV0KSx0aGlzLmZyZXF1ZW5jeS5jb25uZWN0KHRoaXMuX29zY2lsbGF0b3IuZnJlcXVlbmN5KSx0aGlzLmRldHVuZS5jb25uZWN0KHRoaXMuX29zY2lsbGF0b3IuZGV0dW5lKSx0aGlzLl9vc2NpbGxhdG9yLnN0YXJ0KHRoaXMudG9TZWNvbmRzKHQpKX0sdC5Pc2NpbGxhdG9yLnByb3RvdHlwZS5fc3RvcD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fb3NjaWxsYXRvciYmKHRoaXMuX29zY2lsbGF0b3Iuc3RvcCh0aGlzLnRvU2Vjb25kcyh0KSksdGhpcy5fb3NjaWxsYXRvcj1udWxsKSx0aGlzfSx0Lk9zY2lsbGF0b3IucHJvdG90eXBlLnN5bmNGcmVxdWVuY3k9ZnVuY3Rpb24oKXtyZXR1cm4gdC5UcmFuc3BvcnQuc3luY1NpZ25hbCh0aGlzLmZyZXF1ZW5jeSksdGhpc30sdC5Pc2NpbGxhdG9yLnByb3RvdHlwZS51bnN5bmNGcmVxdWVuY3k9ZnVuY3Rpb24oKXtyZXR1cm4gdC5UcmFuc3BvcnQudW5zeW5jU2lnbmFsKHRoaXMuZnJlcXVlbmN5KSx0aGlzfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5Pc2NpbGxhdG9yLnByb3RvdHlwZSxcInR5cGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3R5cGV9LHNldDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9nZXRSZWFsSW1hZ2luYXJ5KHQsdGhpcy5fcGhhc2UpLGk9dGhpcy5jb250ZXh0LmNyZWF0ZVBlcmlvZGljV2F2ZShlWzBdLGVbMV0pO3RoaXMuX3dhdmU9aSxudWxsIT09dGhpcy5fb3NjaWxsYXRvciYmdGhpcy5fb3NjaWxsYXRvci5zZXRQZXJpb2RpY1dhdmUodGhpcy5fd2F2ZSksdGhpcy5fdHlwZT10fX0pLHQuT3NjaWxsYXRvci5wcm90b3R5cGUuX2dldFJlYWxJbWFnaW5hcnk9ZnVuY3Rpb24oZSxpKXt2YXIgcyxuLG8scixhPTQwOTYsbD1hLzIsaD1uZXcgRmxvYXQzMkFycmF5KGwpLHU9bmV3IEZsb2F0MzJBcnJheShsKSxjPTE7Zm9yKGU9PT10Lk9zY2lsbGF0b3IuVHlwZS5DdXN0b20/KGM9dGhpcy5fcGFydGlhbHMubGVuZ3RoKzEsbD1jKToocz0vXihzaW5lfHRyaWFuZ2xlfHNxdWFyZXxzYXd0b290aCkoXFxkKykkLy5leGVjKGUpLHMmJihjPXBhcnNlSW50KHNbMl0pKzEsZT1zWzFdLGM9TWF0aC5tYXgoYywyKSxsPWMpKSxuPTE7bD5uOysrbil7c3dpdGNoKG89Mi8obipNYXRoLlBJKSxlKXtjYXNlIHQuT3NjaWxsYXRvci5UeXBlLlNpbmU6cj1jPj1uPzE6MDticmVhaztjYXNlIHQuT3NjaWxsYXRvci5UeXBlLlNxdWFyZTpyPTEmbj8yKm86MDticmVhaztjYXNlIHQuT3NjaWxsYXRvci5UeXBlLlNhd3Rvb3RoOnI9byooMSZuPzE6LTEpO2JyZWFrO2Nhc2UgdC5Pc2NpbGxhdG9yLlR5cGUuVHJpYW5nbGU6cj0xJm4/MipvKm8qKG4tMT4+MSYxPy0xOjEpOjA7YnJlYWs7Y2FzZSB0Lk9zY2lsbGF0b3IuVHlwZS5DdXN0b206cj10aGlzLl9wYXJ0aWFsc1tuLTFdO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKFwiaW52YWxpZCBvc2NpbGxhdG9yIHR5cGU6IFwiK2UpfTAhPT1yPyhoW25dPS1yKk1hdGguc2luKGkqbiksdVtuXT1yKk1hdGguY29zKGkqbikpOihoW25dPTAsdVtuXT0wKX1yZXR1cm5baCx1XX0sdC5Pc2NpbGxhdG9yLnByb3RvdHlwZS5faW52ZXJzZUZGVD1mdW5jdGlvbih0LGUsaSl7dmFyIHMsbj0wLG89dC5sZW5ndGg7Zm9yKHM9MDtvPnM7cysrKW4rPXRbc10qTWF0aC5jb3MocyppKStlW3NdKk1hdGguc2luKHMqaSk7cmV0dXJuIG59LHQuT3NjaWxsYXRvci5wcm90b3R5cGUuX2dldEluaXRpYWxWYWx1ZT1mdW5jdGlvbigpe3ZhciB0LGU9dGhpcy5fZ2V0UmVhbEltYWdpbmFyeSh0aGlzLl90eXBlLDApLGk9ZVswXSxzPWVbMV0sbj0wLG89MipNYXRoLlBJO2Zvcih0PTA7OD50O3QrKyluPU1hdGgubWF4KHRoaXMuX2ludmVyc2VGRlQoaSxzLHQvOCpvKSxuKTtyZXR1cm4tdGhpcy5faW52ZXJzZUZGVChpLHMsdGhpcy5fcGhhc2UpL259LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0Lk9zY2lsbGF0b3IucHJvdG90eXBlLFwicGFydGlhbHNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3R5cGUhPT10Lk9zY2lsbGF0b3IuVHlwZS5DdXN0b20/W106dGhpcy5fcGFydGlhbHN9LHNldDpmdW5jdGlvbihlKXt0aGlzLl9wYXJ0aWFscz1lLHRoaXMudHlwZT10Lk9zY2lsbGF0b3IuVHlwZS5DdXN0b219fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuT3NjaWxsYXRvci5wcm90b3R5cGUsXCJwaGFzZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGhhc2UqKDE4MC9NYXRoLlBJKX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3BoYXNlPXQqTWF0aC5QSS8xODAsdGhpcy50eXBlPXRoaXMuX3R5cGV9fSksdC5Pc2NpbGxhdG9yLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQuU291cmNlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksbnVsbCE9PXRoaXMuX29zY2lsbGF0b3ImJih0aGlzLl9vc2NpbGxhdG9yLmRpc2Nvbm5lY3QoKSx0aGlzLl9vc2NpbGxhdG9yPW51bGwpLHRoaXMuX3dhdmU9bnVsbCx0aGlzLl93cml0YWJsZShbXCJmcmVxdWVuY3lcIixcImRldHVuZVwiXSksdGhpcy5mcmVxdWVuY3kuZGlzcG9zZSgpLHRoaXMuZnJlcXVlbmN5PW51bGwsdGhpcy5kZXR1bmUuZGlzcG9zZSgpLHRoaXMuZGV0dW5lPW51bGwsdGhpcy5fcGFydGlhbHM9bnVsbCx0aGlzfSx0Lk9zY2lsbGF0b3J9KSxNb2R1bGUoZnVuY3Rpb24odCl7cmV0dXJuIHQuTEZPPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zT2JqZWN0KGFyZ3VtZW50cyxbXCJmcmVxdWVuY3lcIixcIm1pblwiLFwibWF4XCJdLHQuTEZPLmRlZmF1bHRzKTt0aGlzLl9vc2NpbGxhdG9yPW5ldyB0Lk9zY2lsbGF0b3Ioe2ZyZXF1ZW5jeTplLmZyZXF1ZW5jeSx0eXBlOmUudHlwZX0pLHRoaXMuZnJlcXVlbmN5PXRoaXMuX29zY2lsbGF0b3IuZnJlcXVlbmN5LHRoaXMuYW1wbGl0dWRlPXRoaXMuX29zY2lsbGF0b3Iudm9sdW1lLHRoaXMuYW1wbGl0dWRlLnVuaXRzPXQuVHlwZS5Ob3JtYWxSYW5nZSx0aGlzLmFtcGxpdHVkZS52YWx1ZT1lLmFtcGxpdHVkZSx0aGlzLl9zdG9wcGVkU2lnbmFsPW5ldyB0LlNpZ25hbCgwLHQuVHlwZS5BdWRpb1JhbmdlKSx0aGlzLl9zdG9wcGVkVmFsdWU9MCx0aGlzLl9hMmc9bmV3IHQuQXVkaW9Ub0dhaW4sdGhpcy5fc2NhbGVyPXRoaXMub3V0cHV0PW5ldyB0LlNjYWxlKGUubWluLGUubWF4KSx0aGlzLl91bml0cz10LlR5cGUuRGVmYXVsdCx0aGlzLnVuaXRzPWUudW5pdHMsdGhpcy5fb3NjaWxsYXRvci5jaGFpbih0aGlzLl9hMmcsdGhpcy5fc2NhbGVyKSx0aGlzLl9zdG9wcGVkU2lnbmFsLmNvbm5lY3QodGhpcy5fYTJnKSx0aGlzLl9yZWFkT25seShbXCJhbXBsaXR1ZGVcIixcImZyZXF1ZW5jeVwiXSksdGhpcy5waGFzZT1lLnBoYXNlfSx0LmV4dGVuZCh0LkxGTyx0Lk9zY2lsbGF0b3IpLHQuTEZPLmRlZmF1bHRzPXt0eXBlOlwic2luZVwiLG1pbjowLG1heDoxLHBoYXNlOjAsZnJlcXVlbmN5OlwiNG5cIixhbXBsaXR1ZGU6MSx1bml0czp0LlR5cGUuRGVmYXVsdH0sdC5MRk8ucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKHQpe3JldHVybiB0PXRoaXMudG9TZWNvbmRzKHQpLHRoaXMuX3N0b3BwZWRTaWduYWwuc2V0VmFsdWVBdFRpbWUoMCx0KSx0aGlzLl9vc2NpbGxhdG9yLnN0YXJ0KHQpLHRoaXN9LHQuTEZPLnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKHQpe3JldHVybiB0PXRoaXMudG9TZWNvbmRzKHQpLHRoaXMuX3N0b3BwZWRTaWduYWwuc2V0VmFsdWVBdFRpbWUodGhpcy5fc3RvcHBlZFZhbHVlLHQpLHRoaXMuX29zY2lsbGF0b3Iuc3RvcCh0KSx0aGlzfSx0LkxGTy5wcm90b3R5cGUuc3luYz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fb3NjaWxsYXRvci5zeW5jKHQpLHRoaXMuX29zY2lsbGF0b3Iuc3luY0ZyZXF1ZW5jeSgpLHRoaXN9LHQuTEZPLnByb3RvdHlwZS51bnN5bmM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3NjaWxsYXRvci51bnN5bmMoKSx0aGlzLl9vc2NpbGxhdG9yLnVuc3luY0ZyZXF1ZW5jeSgpLHRoaXN9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkxGTy5wcm90b3R5cGUsXCJtaW5cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RvVW5pdHModGhpcy5fc2NhbGVyLm1pbil9LHNldDpmdW5jdGlvbih0KXt0PXRoaXMuX2Zyb21Vbml0cyh0KSx0aGlzLl9zY2FsZXIubWluPXR9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuTEZPLnByb3RvdHlwZSxcIm1heFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdG9Vbml0cyh0aGlzLl9zY2FsZXIubWF4KX0sc2V0OmZ1bmN0aW9uKHQpe3Q9dGhpcy5fZnJvbVVuaXRzKHQpLHRoaXMuX3NjYWxlci5tYXg9dH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5MRk8ucHJvdG90eXBlLFwidHlwZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3NjaWxsYXRvci50eXBlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fb3NjaWxsYXRvci50eXBlPXQsdGhpcy5fc3RvcHBlZFZhbHVlPXRoaXMuX29zY2lsbGF0b3IuX2dldEluaXRpYWxWYWx1ZSgpLHRoaXMuX3N0b3BwZWRTaWduYWwudmFsdWU9dGhpcy5fc3RvcHBlZFZhbHVlfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkxGTy5wcm90b3R5cGUsXCJwaGFzZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3NjaWxsYXRvci5waGFzZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX29zY2lsbGF0b3IucGhhc2U9dCx0aGlzLl9zdG9wcGVkVmFsdWU9dGhpcy5fb3NjaWxsYXRvci5fZ2V0SW5pdGlhbFZhbHVlKCksdGhpcy5fc3RvcHBlZFNpZ25hbC52YWx1ZT10aGlzLl9zdG9wcGVkVmFsdWV9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuTEZPLnByb3RvdHlwZSxcInVuaXRzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl91bml0c30sc2V0OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMubWluLGk9dGhpcy5tYXg7dGhpcy5fdW5pdHM9dCx0aGlzLm1pbj1lLHRoaXMubWF4PWl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuTEZPLnByb3RvdHlwZSxcInN0YXRlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vc2NpbGxhdG9yLnN0YXRlfX0pLHQuTEZPLnByb3RvdHlwZS5jb25uZWN0PWZ1bmN0aW9uKGUpe3JldHVybihlLmNvbnN0cnVjdG9yPT09dC5TaWduYWx8fGUuY29uc3RydWN0b3I9PT10LlBhcmFtfHxlLmNvbnN0cnVjdG9yPT09dC5UaW1lbGluZVNpZ25hbCkmJih0aGlzLmNvbnZlcnQ9ZS5jb252ZXJ0LHRoaXMudW5pdHM9ZS51bml0cyksdC5TaWduYWwucHJvdG90eXBlLmNvbm5lY3QuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXN9LHQuTEZPLnByb3RvdHlwZS5fZnJvbVVuaXRzPXQuUGFyYW0ucHJvdG90eXBlLl9mcm9tVW5pdHMsdC5MRk8ucHJvdG90eXBlLl90b1VuaXRzPXQuUGFyYW0ucHJvdG90eXBlLl90b1VuaXRzLHQuTEZPLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl93cml0YWJsZShbXCJhbXBsaXR1ZGVcIixcImZyZXF1ZW5jeVwiXSksdGhpcy5fb3NjaWxsYXRvci5kaXNwb3NlKCksdGhpcy5fb3NjaWxsYXRvcj1udWxsLHRoaXMuX3N0b3BwZWRTaWduYWwuZGlzcG9zZSgpLHRoaXMuX3N0b3BwZWRTaWduYWw9bnVsbCx0aGlzLl9zY2FsZXIuZGlzcG9zZSgpLHRoaXMuX3NjYWxlcj1udWxsLHRoaXMuX2EyZy5kaXNwb3NlKCksdGhpcy5fYTJnPW51bGwsdGhpcy5mcmVxdWVuY3k9bnVsbCx0aGlzLmFtcGxpdHVkZT1udWxsLHRoaXN9LHQuTEZPfSksTW9kdWxlKGZ1bmN0aW9uKHQpe3JldHVybiB0LkxpbWl0ZXI9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnNPYmplY3QoYXJndW1lbnRzLFtcInRocmVzaG9sZFwiXSx0LkxpbWl0ZXIuZGVmYXVsdHMpO3RoaXMuX2NvbXByZXNzb3I9dGhpcy5pbnB1dD10aGlzLm91dHB1dD1uZXcgdC5Db21wcmVzc29yKHthdHRhY2s6LjAwMSxkZWNheTouMDAxLHRocmVzaG9sZDplLnRocmVzaG9sZH0pLHRoaXMudGhyZXNob2xkPXRoaXMuX2NvbXByZXNzb3IudGhyZXNob2xkLHRoaXMuX3JlYWRPbmx5KFwidGhyZXNob2xkXCIpfSx0LmV4dGVuZCh0LkxpbWl0ZXIpLHQuTGltaXRlci5kZWZhdWx0cz17dGhyZXNob2xkOi0xMn0sdC5MaW1pdGVyLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9jb21wcmVzc29yLmRpc3Bvc2UoKSx0aGlzLl9jb21wcmVzc29yPW51bGwsdGhpcy5fd3JpdGFibGUoXCJ0aHJlc2hvbGRcIiksdGhpcy50aHJlc2hvbGQ9bnVsbCx0aGlzfSx0LkxpbWl0ZXJ9KSxNb2R1bGUoZnVuY3Rpb24odCl7cmV0dXJuIHQuTG93cGFzc0NvbWJGaWx0ZXI9ZnVuY3Rpb24oKXt0LmNhbGwodGhpcyk7dmFyIGU9dGhpcy5vcHRpb25zT2JqZWN0KGFyZ3VtZW50cyxbXCJkZWxheVRpbWVcIixcInJlc29uYW5jZVwiLFwiZGFtcGVuaW5nXCJdLHQuTG93cGFzc0NvbWJGaWx0ZXIuZGVmYXVsdHMpO3RoaXMuX2RlbGF5PXRoaXMuaW5wdXQ9dGhpcy5jb250ZXh0LmNyZWF0ZURlbGF5KDEpLHRoaXMuZGVsYXlUaW1lPW5ldyB0LlNpZ25hbChlLmRlbGF5VGltZSx0LlR5cGUuVGltZSksdGhpcy5fbG93cGFzcz10aGlzLm91dHB1dD10aGlzLmNvbnRleHQuY3JlYXRlQmlxdWFkRmlsdGVyKCksdGhpcy5fbG93cGFzcy5RLnZhbHVlPTAsdGhpcy5fbG93cGFzcy50eXBlPVwibG93cGFzc1wiLHRoaXMuZGFtcGVuaW5nPW5ldyB0LlBhcmFtKHtwYXJhbTp0aGlzLl9sb3dwYXNzLmZyZXF1ZW5jeSx1bml0czp0LlR5cGUuRnJlcXVlbmN5LHZhbHVlOmUuZGFtcGVuaW5nfSksdGhpcy5fZmVlZGJhY2s9dGhpcy5jb250ZXh0LmNyZWF0ZUdhaW4oKSx0aGlzLnJlc29uYW5jZT1uZXcgdC5QYXJhbSh7cGFyYW06dGhpcy5fZmVlZGJhY2suZ2Fpbix1bml0czp0LlR5cGUuTm9ybWFsUmFuZ2UsdmFsdWU6ZS5yZXNvbmFuY2V9KSx0aGlzLl9kZWxheS5jaGFpbih0aGlzLl9sb3dwYXNzLHRoaXMuX2ZlZWRiYWNrLHRoaXMuX2RlbGF5KSx0aGlzLmRlbGF5VGltZS5jb25uZWN0KHRoaXMuX2RlbGF5LmRlbGF5VGltZSksdGhpcy5fcmVhZE9ubHkoW1wiZGFtcGVuaW5nXCIsXCJyZXNvbmFuY2VcIixcImRlbGF5VGltZVwiXSl9LHQuZXh0ZW5kKHQuTG93cGFzc0NvbWJGaWx0ZXIpLHQuTG93cGFzc0NvbWJGaWx0ZXIuZGVmYXVsdHM9e2RlbGF5VGltZTouMSxyZXNvbmFuY2U6LjUsZGFtcGVuaW5nOjNlM30sdC5Mb3dwYXNzQ29tYkZpbHRlci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fd3JpdGFibGUoW1wiZGFtcGVuaW5nXCIsXCJyZXNvbmFuY2VcIixcImRlbGF5VGltZVwiXSksdGhpcy5kYW1wZW5pbmcuZGlzcG9zZSgpLHRoaXMuZGFtcGVuaW5nPW51bGwsdGhpcy5yZXNvbmFuY2UuZGlzcG9zZSgpLHRoaXMucmVzb25hbmNlPW51bGwsdGhpcy5fZGVsYXkuZGlzY29ubmVjdCgpLHRoaXMuX2RlbGF5PW51bGwsdGhpcy5fbG93cGFzcy5kaXNjb25uZWN0KCksdGhpcy5fbG93cGFzcz1udWxsLHRoaXMuX2ZlZWRiYWNrLmRpc2Nvbm5lY3QoKSx0aGlzLl9mZWVkYmFjaz1udWxsLHRoaXMuZGVsYXlUaW1lLmRpc3Bvc2UoKSx0aGlzLmRlbGF5VGltZT1udWxsLHRoaXN9LHQuTG93cGFzc0NvbWJGaWx0ZXJ9KSxNb2R1bGUoZnVuY3Rpb24odCl7cmV0dXJuIHQuTWVyZ2U9ZnVuY3Rpb24oKXt0LmNhbGwodGhpcywyLDApLHRoaXMubGVmdD10aGlzLmlucHV0WzBdPXRoaXMuY29udGV4dC5jcmVhdGVHYWluKCksdGhpcy5yaWdodD10aGlzLmlucHV0WzFdPXRoaXMuY29udGV4dC5jcmVhdGVHYWluKCksdGhpcy5fbWVyZ2VyPXRoaXMub3V0cHV0PXRoaXMuY29udGV4dC5jcmVhdGVDaGFubmVsTWVyZ2VyKDIpLHRoaXMubGVmdC5jb25uZWN0KHRoaXMuX21lcmdlciwwLDApLHRoaXMucmlnaHQuY29ubmVjdCh0aGlzLl9tZXJnZXIsMCwxKSx0aGlzLmxlZnQuY2hhbm5lbENvdW50PTEsdGhpcy5yaWdodC5jaGFubmVsQ291bnQ9MSx0aGlzLmxlZnQuY2hhbm5lbENvdW50TW9kZT1cImV4cGxpY2l0XCIsdGhpcy5yaWdodC5jaGFubmVsQ291bnRNb2RlPVwiZXhwbGljaXRcIn0sdC5leHRlbmQodC5NZXJnZSksdC5NZXJnZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5sZWZ0LmRpc2Nvbm5lY3QoKSx0aGlzLmxlZnQ9bnVsbCx0aGlzLnJpZ2h0LmRpc2Nvbm5lY3QoKSx0aGlzLnJpZ2h0PW51bGwsdGhpcy5fbWVyZ2VyLmRpc2Nvbm5lY3QoKSx0aGlzLl9tZXJnZXI9bnVsbCx0aGlzfSx0Lk1lcmdlfSksTW9kdWxlKGZ1bmN0aW9uKHQpe3JldHVybiB0Lk1ldGVyPWZ1bmN0aW9uKCl7dmFyIGUsaSxzPXRoaXMub3B0aW9uc09iamVjdChhcmd1bWVudHMsW1wiY2hhbm5lbHNcIixcInNtb290aGluZ1wiXSx0Lk1ldGVyLmRlZmF1bHRzKTtmb3IodC5jYWxsKHRoaXMpLHRoaXMuX2NoYW5uZWxzPXMuY2hhbm5lbHMsdGhpcy5zbW9vdGhpbmc9cy5zbW9vdGhpbmcsdGhpcy5jbGlwTWVtb3J5PXMuY2xpcE1lbW9yeSx0aGlzLmNsaXBMZXZlbD1zLmNsaXBMZXZlbCx0aGlzLl92b2x1bWU9bmV3IEFycmF5KHRoaXMuX2NoYW5uZWxzKSx0aGlzLl92YWx1ZXM9bmV3IEFycmF5KHRoaXMuX2NoYW5uZWxzKSxlPTA7ZTx0aGlzLl9jaGFubmVscztlKyspdGhpcy5fdm9sdW1lW2VdPTAsdGhpcy5fdmFsdWVzW2VdPTA7Zm9yKHRoaXMuX2xhc3RDbGlwPW5ldyBBcnJheSh0aGlzLl9jaGFubmVscyksaT0wO2k8dGhpcy5fbGFzdENsaXAubGVuZ3RoO2krKyl0aGlzLl9sYXN0Q2xpcFtpXT0wO3RoaXMuX2pzTm9kZT10aGlzLmNvbnRleHQuY3JlYXRlU2NyaXB0UHJvY2Vzc29yKHMuYnVmZmVyU2l6ZSx0aGlzLl9jaGFubmVscywxKSx0aGlzLl9qc05vZGUub25hdWRpb3Byb2Nlc3M9dGhpcy5fb25wcm9jZXNzLmJpbmQodGhpcyksdGhpcy5fanNOb2RlLm5vR0MoKSx0aGlzLmlucHV0LmNvbm5lY3QodGhpcy5vdXRwdXQpLHRoaXMuaW5wdXQuY29ubmVjdCh0aGlzLl9qc05vZGUpfSx0LmV4dGVuZCh0Lk1ldGVyKSx0Lk1ldGVyLmRlZmF1bHRzPXtzbW9vdGhpbmc6LjgsYnVmZmVyU2l6ZToxMDI0LGNsaXBNZW1vcnk6LjUsY2xpcExldmVsOi45LGNoYW5uZWxzOjF9LHQuTWV0ZXIucHJvdG90eXBlLl9vbnByb2Nlc3M9ZnVuY3Rpb24odCl7dmFyIGUsaSxzLG4sbyxyLGEsbCxoPXRoaXMuX2pzTm9kZS5idWZmZXJTaXplLHU9dGhpcy5zbW9vdGhpbmc7Zm9yKGU9MDtlPHRoaXMuX2NoYW5uZWxzO2UrKyl7Zm9yKGk9dC5pbnB1dEJ1ZmZlci5nZXRDaGFubmVsRGF0YShlKSxzPTAsbj0wLHI9MDtoPnI7cisrKW89aVtyXSxuKz1vLHMrPW8qbzthPW4vaCxsPU1hdGguc3FydChzL2gpLGw+LjkmJih0aGlzLl9sYXN0Q2xpcFtlXT1EYXRlLm5vdygpKSx0aGlzLl92b2x1bWVbZV09TWF0aC5tYXgobCx0aGlzLl92b2x1bWVbZV0qdSksdGhpcy5fdmFsdWVzW2VdPWF9fSx0Lk1ldGVyLnByb3RvdHlwZS5nZXRMZXZlbD1mdW5jdGlvbih0KXt0PXRoaXMuZGVmYXVsdEFyZyh0LDApO3ZhciBlPXRoaXMuX3ZvbHVtZVt0XTtyZXR1cm4gMWUtNT5lPzA6ZX0sdC5NZXRlci5wcm90b3R5cGUuZ2V0VmFsdWU9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9dGhpcy5kZWZhdWx0QXJnKHQsMCksdGhpcy5fdmFsdWVzW3RdfSx0Lk1ldGVyLnByb3RvdHlwZS5nZXREYj1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5nYWluVG9EYih0aGlzLmdldExldmVsKHQpKX0sdC5NZXRlci5wcm90b3R5cGUuaXNDbGlwcGVkPWZ1bmN0aW9uKHQpe3JldHVybiB0PXRoaXMuZGVmYXVsdEFyZyh0LDApLERhdGUubm93KCktdGhpcy5fbGFzdENsaXBbdF08MWUzKnRoaXMuX2NsaXBNZW1vcnl9LHQuTWV0ZXIucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX2pzTm9kZS5kaXNjb25uZWN0KCksdGhpcy5fanNOb2RlLm9uYXVkaW9wcm9jZXNzPW51bGwsdGhpcy5fanNOb2RlPW51bGwsdGhpcy5fdm9sdW1lPW51bGwsdGhpcy5fdmFsdWVzPW51bGwsdGhpcy5fbGFzdENsaXA9bnVsbCx0aGlzfSx0Lk1ldGVyfSksTW9kdWxlKGZ1bmN0aW9uKHQpe3JldHVybiB0LlNwbGl0PWZ1bmN0aW9uKCl7dC5jYWxsKHRoaXMsMCwyKSx0aGlzLl9zcGxpdHRlcj10aGlzLmlucHV0PXRoaXMuY29udGV4dC5jcmVhdGVDaGFubmVsU3BsaXR0ZXIoMiksdGhpcy5sZWZ0PXRoaXMub3V0cHV0WzBdPXRoaXMuY29udGV4dC5jcmVhdGVHYWluKCksdGhpcy5yaWdodD10aGlzLm91dHB1dFsxXT10aGlzLmNvbnRleHQuY3JlYXRlR2FpbigpLHRoaXMuX3NwbGl0dGVyLmNvbm5lY3QodGhpcy5sZWZ0LDAsMCksdGhpcy5fc3BsaXR0ZXIuY29ubmVjdCh0aGlzLnJpZ2h0LDEsMCl9LHQuZXh0ZW5kKHQuU3BsaXQpLHQuU3BsaXQucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3NwbGl0dGVyLmRpc2Nvbm5lY3QoKSx0aGlzLmxlZnQuZGlzY29ubmVjdCgpLHRoaXMucmlnaHQuZGlzY29ubmVjdCgpLHRoaXMubGVmdD1udWxsLHRoaXMucmlnaHQ9bnVsbCx0aGlzLl9zcGxpdHRlcj1udWxsLHRoaXN9LHQuU3BsaXR9KSxNb2R1bGUoZnVuY3Rpb24odCl7dC5NaWRTaWRlU3BsaXQ9ZnVuY3Rpb24oKXt0LmNhbGwodGhpcywwLDIpLHRoaXMuX3NwbGl0PXRoaXMuaW5wdXQ9bmV3IHQuU3BsaXQsdGhpcy5taWQ9dGhpcy5vdXRwdXRbMF09bmV3IHQuRXhwcihcIigkMCArICQxKSAqICQyXCIpLHRoaXMuc2lkZT10aGlzLm91dHB1dFsxXT1uZXcgdC5FeHByKFwiKCQwIC0gJDEpICogJDJcIiksdGhpcy5fc3BsaXQuY29ubmVjdCh0aGlzLm1pZCwwLDApLHRoaXMuX3NwbGl0LmNvbm5lY3QodGhpcy5taWQsMSwxKSx0aGlzLl9zcGxpdC5jb25uZWN0KHRoaXMuc2lkZSwwLDApLHRoaXMuX3NwbGl0LmNvbm5lY3QodGhpcy5zaWRlLDEsMSksZS5jb25uZWN0KHRoaXMubWlkLDAsMiksZS5jb25uZWN0KHRoaXMuc2lkZSwwLDIpfSx0LmV4dGVuZCh0Lk1pZFNpZGVTcGxpdCk7dmFyIGU9bnVsbDtyZXR1cm4gdC5faW5pdEF1ZGlvQ29udGV4dChmdW5jdGlvbigpe2U9bmV3IHQuU2lnbmFsKDEvTWF0aC5zcXJ0KDIpKX0pLHQuTWlkU2lkZVNwbGl0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLm1pZC5kaXNwb3NlKCksdGhpcy5taWQ9bnVsbCx0aGlzLnNpZGUuZGlzcG9zZSgpLHRoaXMuc2lkZT1udWxsLHRoaXMuX3NwbGl0LmRpc3Bvc2UoKSx0aGlzLl9zcGxpdD1udWxsLHRoaXN9LHQuTWlkU2lkZVNwbGl0fSksTW9kdWxlKGZ1bmN0aW9uKHQpe3QuTWlkU2lkZU1lcmdlPWZ1bmN0aW9uKCl7dC5jYWxsKHRoaXMsMiwwKSx0aGlzLm1pZD10aGlzLmlucHV0WzBdPXRoaXMuY29udGV4dC5jcmVhdGVHYWluKCksdGhpcy5fbGVmdD1uZXcgdC5FeHByKFwiKCQwICsgJDEpICogJDJcIiksdGhpcy5zaWRlPXRoaXMuaW5wdXRbMV09dGhpcy5jb250ZXh0LmNyZWF0ZUdhaW4oKSx0aGlzLl9yaWdodD1uZXcgdC5FeHByKFwiKCQwIC0gJDEpICogJDJcIiksdGhpcy5fbWVyZ2U9dGhpcy5vdXRwdXQ9bmV3IHQuTWVyZ2UsdGhpcy5taWQuY29ubmVjdCh0aGlzLl9sZWZ0LDAsMCksdGhpcy5zaWRlLmNvbm5lY3QodGhpcy5fbGVmdCwwLDEpLHRoaXMubWlkLmNvbm5lY3QodGhpcy5fcmlnaHQsMCwwKSx0aGlzLnNpZGUuY29ubmVjdCh0aGlzLl9yaWdodCwwLDEpLHRoaXMuX2xlZnQuY29ubmVjdCh0aGlzLl9tZXJnZSwwLDApLHRoaXMuX3JpZ2h0LmNvbm5lY3QodGhpcy5fbWVyZ2UsMCwxKSxlLmNvbm5lY3QodGhpcy5fbGVmdCwwLDIpLGUuY29ubmVjdCh0aGlzLl9yaWdodCwwLDIpfSx0LmV4dGVuZCh0Lk1pZFNpZGVNZXJnZSk7dmFyIGU9bnVsbDtyZXR1cm4gdC5faW5pdEF1ZGlvQ29udGV4dChmdW5jdGlvbigpe2U9bmV3IHQuU2lnbmFsKDEvTWF0aC5zcXJ0KDIpKX0pLHQuTWlkU2lkZU1lcmdlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLm1pZC5kaXNjb25uZWN0KCksdGhpcy5taWQ9bnVsbCx0aGlzLnNpZGUuZGlzY29ubmVjdCgpLHRoaXMuc2lkZT1udWxsLHRoaXMuX2xlZnQuZGlzcG9zZSgpLHRoaXMuX2xlZnQ9bnVsbCx0aGlzLl9yaWdodC5kaXNwb3NlKCksdGhpcy5fcmlnaHQ9bnVsbCx0aGlzLl9tZXJnZS5kaXNwb3NlKCksdGhpcy5fbWVyZ2U9bnVsbCx0aGlzfSx0Lk1pZFNpZGVNZXJnZX0pLE1vZHVsZShmdW5jdGlvbih0KXtyZXR1cm4gdC5NaWRTaWRlQ29tcHJlc3Nvcj1mdW5jdGlvbihlKXtlPXRoaXMuZGVmYXVsdEFyZyhlLHQuTWlkU2lkZUNvbXByZXNzb3IuZGVmYXVsdHMpLHRoaXMuX21pZFNpZGVTcGxpdD10aGlzLmlucHV0PW5ldyB0Lk1pZFNpZGVTcGxpdCx0aGlzLl9taWRTaWRlTWVyZ2U9dGhpcy5vdXRwdXQ9bmV3IHQuTWlkU2lkZU1lcmdlLHRoaXMubWlkPW5ldyB0LkNvbXByZXNzb3IoZS5taWQpLHRoaXMuc2lkZT1uZXcgdC5Db21wcmVzc29yKGUuc2lkZSksdGhpcy5fbWlkU2lkZVNwbGl0Lm1pZC5jaGFpbih0aGlzLm1pZCx0aGlzLl9taWRTaWRlTWVyZ2UubWlkKSx0aGlzLl9taWRTaWRlU3BsaXQuc2lkZS5jaGFpbih0aGlzLnNpZGUsdGhpcy5fbWlkU2lkZU1lcmdlLnNpZGUpLHRoaXMuX3JlYWRPbmx5KFtcIm1pZFwiLFwic2lkZVwiXSl9LHQuZXh0ZW5kKHQuTWlkU2lkZUNvbXByZXNzb3IpLHQuTWlkU2lkZUNvbXByZXNzb3IuZGVmYXVsdHM9e21pZDp7cmF0aW86Myx0aHJlc2hvbGQ6LTI0LHJlbGVhc2U6LjAzLGF0dGFjazouMDIsa25lZToxNn0sc2lkZTp7cmF0aW86Nix0aHJlc2hvbGQ6LTMwLHJlbGVhc2U6LjI1LGF0dGFjazouMDMsa25lZToxMH19LHQuTWlkU2lkZUNvbXByZXNzb3IucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3dyaXRhYmxlKFtcIm1pZFwiLFwic2lkZVwiXSksdGhpcy5taWQuZGlzcG9zZSgpLHRoaXMubWlkPW51bGwsdGhpcy5zaWRlLmRpc3Bvc2UoKSx0aGlzLnNpZGU9bnVsbCx0aGlzLl9taWRTaWRlU3BsaXQuZGlzcG9zZSgpLHRoaXMuX21pZFNpZGVTcGxpdD1udWxsLHRoaXMuX21pZFNpZGVNZXJnZS5kaXNwb3NlKCksdGhpcy5fbWlkU2lkZU1lcmdlPW51bGwsdGhpc30sdC5NaWRTaWRlQ29tcHJlc3Nvcn0pLE1vZHVsZShmdW5jdGlvbih0KXtyZXR1cm4gdC5Nb25vPWZ1bmN0aW9uKCl7dC5jYWxsKHRoaXMsMSwwKSx0aGlzLl9tZXJnZT10aGlzLm91dHB1dD1uZXcgdC5NZXJnZSx0aGlzLmlucHV0LmNvbm5lY3QodGhpcy5fbWVyZ2UsMCwwKSx0aGlzLmlucHV0LmNvbm5lY3QodGhpcy5fbWVyZ2UsMCwxKSx0aGlzLmlucHV0LmdhaW4udmFsdWU9dGhpcy5kYlRvR2FpbigtMTApfSx0LmV4dGVuZCh0Lk1vbm8pLHQuTW9uby5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fbWVyZ2UuZGlzcG9zZSgpLHRoaXMuX21lcmdlPW51bGwsdGhpc30sdC5Nb25vfSksTW9kdWxlKGZ1bmN0aW9uKHQpe3JldHVybiB0Lk11bHRpYmFuZENvbXByZXNzb3I9ZnVuY3Rpb24oZSl7ZT10aGlzLmRlZmF1bHRBcmcoYXJndW1lbnRzLHQuTXVsdGliYW5kQ29tcHJlc3Nvci5kZWZhdWx0cyksdGhpcy5fc3BsaXR0ZXI9dGhpcy5pbnB1dD1uZXcgdC5NdWx0aWJhbmRTcGxpdCh7bG93RnJlcXVlbmN5OmUubG93RnJlcXVlbmN5LGhpZ2hGcmVxdWVuY3k6ZS5oaWdoRnJlcXVlbmN5fSksdGhpcy5sb3dGcmVxdWVuY3k9dGhpcy5fc3BsaXR0ZXIubG93RnJlcXVlbmN5LHRoaXMuaGlnaEZyZXF1ZW5jeT10aGlzLl9zcGxpdHRlci5oaWdoRnJlcXVlbmN5LHRoaXMub3V0cHV0PXRoaXMuY29udGV4dC5jcmVhdGVHYWluKCksdGhpcy5sb3c9bmV3IHQuQ29tcHJlc3NvcihlLmxvdyksdGhpcy5taWQ9bmV3IHQuQ29tcHJlc3NvcihlLm1pZCksdGhpcy5oaWdoPW5ldyB0LkNvbXByZXNzb3IoZS5oaWdoKSx0aGlzLl9zcGxpdHRlci5sb3cuY2hhaW4odGhpcy5sb3csdGhpcy5vdXRwdXQpLHRoaXMuX3NwbGl0dGVyLm1pZC5jaGFpbih0aGlzLm1pZCx0aGlzLm91dHB1dCksdGhpcy5fc3BsaXR0ZXIuaGlnaC5jaGFpbih0aGlzLmhpZ2gsdGhpcy5vdXRwdXQpLHRoaXMuX3JlYWRPbmx5KFtcImhpZ2hcIixcIm1pZFwiLFwibG93XCIsXCJoaWdoRnJlcXVlbmN5XCIsXCJsb3dGcmVxdWVuY3lcIl0pfSx0LmV4dGVuZCh0Lk11bHRpYmFuZENvbXByZXNzb3IpLHQuTXVsdGliYW5kQ29tcHJlc3Nvci5kZWZhdWx0cz17bG93OnQuQ29tcHJlc3Nvci5kZWZhdWx0cyxtaWQ6dC5Db21wcmVzc29yLmRlZmF1bHRzLGhpZ2g6dC5Db21wcmVzc29yLmRlZmF1bHRzLGxvd0ZyZXF1ZW5jeToyNTAsaGlnaEZyZXF1ZW5jeToyZTN9LHQuTXVsdGliYW5kQ29tcHJlc3Nvci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fc3BsaXR0ZXIuZGlzcG9zZSgpLHRoaXMuX3dyaXRhYmxlKFtcImhpZ2hcIixcIm1pZFwiLFwibG93XCIsXCJoaWdoRnJlcXVlbmN5XCIsXCJsb3dGcmVxdWVuY3lcIl0pLHRoaXMubG93LmRpc3Bvc2UoKSx0aGlzLm1pZC5kaXNwb3NlKCksdGhpcy5oaWdoLmRpc3Bvc2UoKSx0aGlzLl9zcGxpdHRlcj1udWxsLHRoaXMubG93PW51bGwsdGhpcy5taWQ9bnVsbCx0aGlzLmhpZ2g9bnVsbCx0aGlzLmxvd0ZyZXF1ZW5jeT1udWxsLHRoaXMuaGlnaEZyZXF1ZW5jeT1udWxsLHRoaXN9LHQuTXVsdGliYW5kQ29tcHJlc3Nvcn0pLE1vZHVsZShmdW5jdGlvbih0KXtcbnJldHVybiB0LkdhaW5Ub0F1ZGlvPWZ1bmN0aW9uKCl7dGhpcy5fbm9ybT10aGlzLmlucHV0PXRoaXMub3V0cHV0PW5ldyB0LldhdmVTaGFwZXIoZnVuY3Rpb24odCl7cmV0dXJuIDIqTWF0aC5hYnModCktMX0pfSx0LmV4dGVuZCh0LkdhaW5Ub0F1ZGlvLHQuU2lnbmFsQmFzZSksdC5HYWluVG9BdWRpby5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fbm9ybS5kaXNwb3NlKCksdGhpcy5fbm9ybT1udWxsLHRoaXN9LHQuR2FpblRvQXVkaW99KSxNb2R1bGUoZnVuY3Rpb24odCl7cmV0dXJuIHQuUGFubmVyPWZ1bmN0aW9uKGUpe3QuY2FsbCh0aGlzKSx0aGlzLl9oYXNTdGVyZW9QYW5uZXI9dGhpcy5pc0Z1bmN0aW9uKHRoaXMuY29udGV4dC5jcmVhdGVTdGVyZW9QYW5uZXIpLHRoaXMuX2hhc1N0ZXJlb1Bhbm5lcj8odGhpcy5fcGFubmVyPXRoaXMuaW5wdXQ9dGhpcy5vdXRwdXQ9dGhpcy5jb250ZXh0LmNyZWF0ZVN0ZXJlb1Bhbm5lcigpLHRoaXMucGFuPW5ldyB0LlNpZ25hbCgwLHQuVHlwZS5Ob3JtYWxSYW5nZSksdGhpcy5fc2NhbGVQYW49bmV3IHQuR2FpblRvQXVkaW8sdGhpcy5wYW4uY2hhaW4odGhpcy5fc2NhbGVQYW4sdGhpcy5fcGFubmVyLnBhbikpOih0aGlzLl9jcm9zc0ZhZGU9bmV3IHQuQ3Jvc3NGYWRlLHRoaXMuX21lcmdlcj10aGlzLm91dHB1dD1uZXcgdC5NZXJnZSx0aGlzLl9zcGxpdHRlcj10aGlzLmlucHV0PW5ldyB0LlNwbGl0LHRoaXMucGFuPXRoaXMuX2Nyb3NzRmFkZS5mYWRlLHRoaXMuX3NwbGl0dGVyLmNvbm5lY3QodGhpcy5fY3Jvc3NGYWRlLDAsMCksdGhpcy5fc3BsaXR0ZXIuY29ubmVjdCh0aGlzLl9jcm9zc0ZhZGUsMSwxKSx0aGlzLl9jcm9zc0ZhZGUuYS5jb25uZWN0KHRoaXMuX21lcmdlciwwLDApLHRoaXMuX2Nyb3NzRmFkZS5iLmNvbm5lY3QodGhpcy5fbWVyZ2VyLDAsMSkpLHRoaXMucGFuLnZhbHVlPXRoaXMuZGVmYXVsdEFyZyhlLC41KSx0aGlzLl9yZWFkT25seShcInBhblwiKX0sdC5leHRlbmQodC5QYW5uZXIpLHQuUGFubmVyLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl93cml0YWJsZShcInBhblwiKSx0aGlzLl9oYXNTdGVyZW9QYW5uZXI/KHRoaXMuX3Bhbm5lci5kaXNjb25uZWN0KCksdGhpcy5fcGFubmVyPW51bGwsdGhpcy5wYW4uZGlzcG9zZSgpLHRoaXMucGFuPW51bGwsdGhpcy5fc2NhbGVQYW4uZGlzcG9zZSgpLHRoaXMuX3NjYWxlUGFuPW51bGwpOih0aGlzLl9jcm9zc0ZhZGUuZGlzcG9zZSgpLHRoaXMuX2Nyb3NzRmFkZT1udWxsLHRoaXMuX3NwbGl0dGVyLmRpc3Bvc2UoKSx0aGlzLl9zcGxpdHRlcj1udWxsLHRoaXMuX21lcmdlci5kaXNwb3NlKCksdGhpcy5fbWVyZ2VyPW51bGwsdGhpcy5wYW49bnVsbCksdGhpc30sdC5QYW5uZXJ9KSxNb2R1bGUoZnVuY3Rpb24odCl7cmV0dXJuIHQuUGFuVm9sPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zT2JqZWN0KGFyZ3VtZW50cyxbXCJwYW5cIixcInZvbHVtZVwiXSx0LlBhblZvbC5kZWZhdWx0cyk7dGhpcy5fcGFubmVyPXRoaXMuaW5wdXQ9bmV3IHQuUGFubmVyKGUucGFuKSx0aGlzLnBhbj10aGlzLl9wYW5uZXIucGFuLHRoaXMuX3ZvbHVtZT10aGlzLm91dHB1dD1uZXcgdC5Wb2x1bWUoZS52b2x1bWUpLHRoaXMudm9sdW1lPXRoaXMuX3ZvbHVtZS52b2x1bWUsdGhpcy5fcGFubmVyLmNvbm5lY3QodGhpcy5fdm9sdW1lKSx0aGlzLl9yZWFkT25seShbXCJwYW5cIixcInZvbHVtZVwiXSl9LHQuZXh0ZW5kKHQuUGFuVm9sKSx0LlBhblZvbC5kZWZhdWx0cz17cGFuOi41LHZvbHVtZTowfSx0LlBhblZvbC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fd3JpdGFibGUoW1wicGFuXCIsXCJ2b2x1bWVcIl0pLHRoaXMuX3Bhbm5lci5kaXNwb3NlKCksdGhpcy5fcGFubmVyPW51bGwsdGhpcy5wYW49bnVsbCx0aGlzLl92b2x1bWUuZGlzcG9zZSgpLHRoaXMuX3ZvbHVtZT1udWxsLHRoaXMudm9sdW1lPW51bGwsdGhpc30sdC5QYW5Wb2x9KSxNb2R1bGUoZnVuY3Rpb24odCl7cmV0dXJuIHQuQ3RybEludGVycG9sYXRlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zT2JqZWN0KGFyZ3VtZW50cyxbXCJ2YWx1ZXNcIixcImluZGV4XCJdLHQuQ3RybEludGVycG9sYXRlLmRlZmF1bHRzKTt0aGlzLnZhbHVlcz1lLnZhbHVlcyx0aGlzLmluZGV4PWUuaW5kZXh9LHQuZXh0ZW5kKHQuQ3RybEludGVycG9sYXRlKSx0LkN0cmxJbnRlcnBvbGF0ZS5kZWZhdWx0cz17aW5kZXg6MCx2YWx1ZXM6W119LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkN0cmxJbnRlcnBvbGF0ZS5wcm90b3R5cGUsXCJ2YWx1ZVwiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgdCxlLGkscz10aGlzLmluZGV4O3JldHVybiBzPU1hdGgubWluKHMsdGhpcy52YWx1ZXMubGVuZ3RoLTEpLHQ9TWF0aC5mbG9vcihzKSxlPXRoaXMudmFsdWVzW3RdLGk9dGhpcy52YWx1ZXNbTWF0aC5jZWlsKHMpXSx0aGlzLl9pbnRlcnBvbGF0ZShzLXQsZSxpKX19KSx0LkN0cmxJbnRlcnBvbGF0ZS5wcm90b3R5cGUuX2ludGVycG9sYXRlPWZ1bmN0aW9uKHQsZSxpKXt2YXIgcyxuLG8scjtpZih0aGlzLmlzQXJyYXkoZSkpe2ZvcihzPVtdLG49MDtuPGUubGVuZ3RoO24rKylzW25dPXRoaXMuX2ludGVycG9sYXRlKHQsZVtuXSxpW25dKTtyZXR1cm4gc31pZih0aGlzLmlzT2JqZWN0KGUpKXtvPXt9O2ZvcihyIGluIGUpb1tyXT10aGlzLl9pbnRlcnBvbGF0ZSh0LGVbcl0saVtyXSk7cmV0dXJuIG99cmV0dXJuIGU9dGhpcy5fdG9OdW1iZXIoZSksaT10aGlzLl90b051bWJlcihpKSwoMS10KSplK3QqaX0sdC5DdHJsSW50ZXJwb2xhdGUucHJvdG90eXBlLl90b051bWJlcj1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5pc051bWJlcih0KT90OnRoaXMuaXNOb3RlKHQpP3RoaXMudG9GcmVxdWVuY3kodCk6dGhpcy50b1NlY29uZHModCl9LHQuQ3RybEludGVycG9sYXRlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy52YWx1ZXM9bnVsbH0sdC5DdHJsSW50ZXJwb2xhdGV9KSxNb2R1bGUoZnVuY3Rpb24odCl7cmV0dXJuIHQuQ3RybE1hcmtvdj1mdW5jdGlvbih0LGUpe3RoaXMudmFsdWVzPXRoaXMuZGVmYXVsdEFyZyh0LHt9KSx0aGlzLnZhbHVlPXRoaXMuZGVmYXVsdEFyZyhlLE9iamVjdC5rZXlzKHRoaXMudmFsdWVzKVswXSl9LHQuZXh0ZW5kKHQuQ3RybE1hcmtvdiksdC5DdHJsTWFya292LnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uKCl7dmFyIHQsZSxpLHMsbixvLHI7aWYodGhpcy52YWx1ZXMuaGFzT3duUHJvcGVydHkodGhpcy52YWx1ZSkpaWYodD10aGlzLnZhbHVlc1t0aGlzLnZhbHVlXSx0aGlzLmlzQXJyYXkodCkpZm9yKGU9dGhpcy5fZ2V0UHJvYkRpc3RyaWJ1dGlvbih0KSxpPU1hdGgucmFuZG9tKCkscz0wLG49MDtuPGUubGVuZ3RoO24rKylvPWVbbl0saT5zJiZzK28+aSYmKHI9dFtuXSx0aGlzLnZhbHVlPXRoaXMuaXNPYmplY3Qocik/ci52YWx1ZTpyKSxzKz1vO2Vsc2UgdGhpcy52YWx1ZT10O3JldHVybiB0aGlzLnZhbHVlfSx0LkN0cmxNYXJrb3YucHJvdG90eXBlLl9nZXRQcm9iRGlzdHJpYnV0aW9uPWZ1bmN0aW9uKHQpe3ZhciBlLGkscyxuPVtdLG89MCxyPSExO2ZvcihlPTA7ZTx0Lmxlbmd0aDtlKyspaT10W2VdLHRoaXMuaXNPYmplY3QoaSk/KHI9ITAsbltlXT1pLnByb2JhYmlsaXR5KTpuW2VdPTEvdC5sZW5ndGgsbys9bltlXTtpZihyKWZvcihzPTA7czxuLmxlbmd0aDtzKyspbltzXT1uW3NdL287cmV0dXJuIG59LHQuQ3RybE1hcmtvdi5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMudmFsdWVzPW51bGx9LHQuQ3RybE1hcmtvdn0pLE1vZHVsZShmdW5jdGlvbih0KXtyZXR1cm4gdC5DdHJsUGF0dGVybj1mdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9uc09iamVjdChhcmd1bWVudHMsW1widmFsdWVzXCIsXCJ0eXBlXCJdLHQuQ3RybFBhdHRlcm4uZGVmYXVsdHMpO3RoaXMudmFsdWVzPWUudmFsdWVzLHRoaXMuaW5kZXg9MCx0aGlzLl90eXBlPW51bGwsdGhpcy5fc2h1ZmZsZWQ9bnVsbCx0aGlzLl9kaXJlY3Rpb249bnVsbCx0aGlzLnR5cGU9ZS50eXBlfSx0LmV4dGVuZCh0LkN0cmxQYXR0ZXJuKSx0LkN0cmxQYXR0ZXJuLlR5cGU9e1VwOlwidXBcIixEb3duOlwiZG93blwiLFVwRG93bjpcInVwRG93blwiLERvd25VcDpcImRvd25VcFwiLEFsdGVybmF0ZVVwOlwiYWx0ZXJuYXRlVXBcIixBbHRlcm5hdGVEb3duOlwiYWx0ZXJuYXRlRG93blwiLFJhbmRvbTpcInJhbmRvbVwiLFJhbmRvbVdhbGs6XCJyYW5kb21XYWxrXCIsUmFuZG9tT25jZTpcInJhbmRvbU9uY2VcIn0sdC5DdHJsUGF0dGVybi5kZWZhdWx0cz17dHlwZTp0LkN0cmxQYXR0ZXJuLlR5cGUuVXAsdmFsdWVzOltdfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5DdHJsUGF0dGVybi5wcm90b3R5cGUsXCJ2YWx1ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtpZigwIT09dGhpcy52YWx1ZXMubGVuZ3RoKXtpZigxPT09dGhpcy52YWx1ZXMubGVuZ3RoKXJldHVybiB0aGlzLnZhbHVlc1swXTt0aGlzLmluZGV4PU1hdGgubWluKHRoaXMuaW5kZXgsdGhpcy52YWx1ZXMubGVuZ3RoLTEpO3ZhciBlPXRoaXMudmFsdWVzW3RoaXMuaW5kZXhdO3JldHVybiB0aGlzLnR5cGU9PT10LkN0cmxQYXR0ZXJuLlR5cGUuUmFuZG9tT25jZSYmKHRoaXMudmFsdWVzLmxlbmd0aCE9PXRoaXMuX3NodWZmbGVkLmxlbmd0aCYmdGhpcy5fc2h1ZmZsZVZhbHVlcygpLGU9dGhpcy52YWx1ZXNbdGhpcy5fc2h1ZmZsZWRbdGhpcy5pbmRleF1dKSxlfX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5DdHJsUGF0dGVybi5wcm90b3R5cGUsXCJ0eXBlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90eXBlfSxzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5fdHlwZT1lLHRoaXMuX3NodWZmbGVkPW51bGwsdGhpcy5fdHlwZT09PXQuQ3RybFBhdHRlcm4uVHlwZS5VcHx8dGhpcy5fdHlwZT09PXQuQ3RybFBhdHRlcm4uVHlwZS5VcERvd258fHRoaXMuX3R5cGU9PT10LkN0cmxQYXR0ZXJuLlR5cGUuUmFuZG9tT25jZXx8dGhpcy5fdHlwZT09PXQuQ3RybFBhdHRlcm4uVHlwZS5BbHRlcm5hdGVVcD90aGlzLmluZGV4PTA6KHRoaXMuX3R5cGU9PT10LkN0cmxQYXR0ZXJuLlR5cGUuRG93bnx8dGhpcy5fdHlwZT09PXQuQ3RybFBhdHRlcm4uVHlwZS5Eb3duVXB8fHRoaXMuX3R5cGU9PT10LkN0cmxQYXR0ZXJuLlR5cGUuQWx0ZXJuYXRlRG93bikmJih0aGlzLmluZGV4PXRoaXMudmFsdWVzLmxlbmd0aC0xKSx0aGlzLl90eXBlPT09dC5DdHJsUGF0dGVybi5UeXBlLlVwRG93bnx8dGhpcy5fdHlwZT09PXQuQ3RybFBhdHRlcm4uVHlwZS5BbHRlcm5hdGVVcD90aGlzLl9kaXJlY3Rpb249dC5DdHJsUGF0dGVybi5UeXBlLlVwOih0aGlzLl90eXBlPT09dC5DdHJsUGF0dGVybi5UeXBlLkRvd25VcHx8dGhpcy5fdHlwZT09PXQuQ3RybFBhdHRlcm4uVHlwZS5BbHRlcm5hdGVEb3duKSYmKHRoaXMuX2RpcmVjdGlvbj10LkN0cmxQYXR0ZXJuLlR5cGUuRG93biksdGhpcy5fdHlwZT09PXQuQ3RybFBhdHRlcm4uVHlwZS5SYW5kb21PbmNlP3RoaXMuX3NodWZmbGVWYWx1ZXMoKTp0aGlzLl90eXBlPT09dC5DdHJsUGF0dGVybi5SYW5kb20mJih0aGlzLmluZGV4PU1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSp0aGlzLnZhbHVlcy5sZW5ndGgpKX19KSx0LkN0cmxQYXR0ZXJuLnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy50eXBlO3JldHVybiBlPT09dC5DdHJsUGF0dGVybi5UeXBlLlVwPyh0aGlzLmluZGV4KyssdGhpcy5pbmRleD49dGhpcy52YWx1ZXMubGVuZ3RoJiYodGhpcy5pbmRleD0wKSk6ZT09PXQuQ3RybFBhdHRlcm4uVHlwZS5Eb3duPyh0aGlzLmluZGV4LS0sdGhpcy5pbmRleDwwJiYodGhpcy5pbmRleD10aGlzLnZhbHVlcy5sZW5ndGgtMSkpOmU9PT10LkN0cmxQYXR0ZXJuLlR5cGUuVXBEb3dufHxlPT09dC5DdHJsUGF0dGVybi5UeXBlLkRvd25VcD8odGhpcy5fZGlyZWN0aW9uPT09dC5DdHJsUGF0dGVybi5UeXBlLlVwP3RoaXMuaW5kZXgrKzp0aGlzLmluZGV4LS0sdGhpcy5pbmRleDwwPyh0aGlzLmluZGV4PTEsdGhpcy5fZGlyZWN0aW9uPXQuQ3RybFBhdHRlcm4uVHlwZS5VcCk6dGhpcy5pbmRleD49dGhpcy52YWx1ZXMubGVuZ3RoJiYodGhpcy5pbmRleD10aGlzLnZhbHVlcy5sZW5ndGgtMix0aGlzLl9kaXJlY3Rpb249dC5DdHJsUGF0dGVybi5UeXBlLkRvd24pKTplPT09dC5DdHJsUGF0dGVybi5UeXBlLlJhbmRvbT90aGlzLmluZGV4PU1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSp0aGlzLnZhbHVlcy5sZW5ndGgpOmU9PT10LkN0cmxQYXR0ZXJuLlR5cGUuUmFuZG9tV2Fsaz9NYXRoLnJhbmRvbSgpPC41Pyh0aGlzLmluZGV4LS0sdGhpcy5pbmRleD1NYXRoLm1heCh0aGlzLmluZGV4LDApKToodGhpcy5pbmRleCsrLHRoaXMuaW5kZXg9TWF0aC5taW4odGhpcy5pbmRleCx0aGlzLnZhbHVlcy5sZW5ndGgtMSkpOmU9PT10LkN0cmxQYXR0ZXJuLlR5cGUuUmFuZG9tT25jZT8odGhpcy5pbmRleCsrLHRoaXMuaW5kZXg+PXRoaXMudmFsdWVzLmxlbmd0aCYmKHRoaXMuaW5kZXg9MCx0aGlzLl9zaHVmZmxlVmFsdWVzKCkpKTplPT09dC5DdHJsUGF0dGVybi5UeXBlLkFsdGVybmF0ZVVwPyh0aGlzLl9kaXJlY3Rpb249PT10LkN0cmxQYXR0ZXJuLlR5cGUuVXA/KHRoaXMuaW5kZXgrPTIsdGhpcy5fZGlyZWN0aW9uPXQuQ3RybFBhdHRlcm4uVHlwZS5Eb3duKToodGhpcy5pbmRleC09MSx0aGlzLl9kaXJlY3Rpb249dC5DdHJsUGF0dGVybi5UeXBlLlVwKSx0aGlzLmluZGV4Pj10aGlzLnZhbHVlcy5sZW5ndGgmJih0aGlzLmluZGV4PTAsdGhpcy5fZGlyZWN0aW9uPXQuQ3RybFBhdHRlcm4uVHlwZS5VcCkpOmU9PT10LkN0cmxQYXR0ZXJuLlR5cGUuQWx0ZXJuYXRlRG93biYmKHRoaXMuX2RpcmVjdGlvbj09PXQuQ3RybFBhdHRlcm4uVHlwZS5VcD8odGhpcy5pbmRleCs9MSx0aGlzLl9kaXJlY3Rpb249dC5DdHJsUGF0dGVybi5UeXBlLkRvd24pOih0aGlzLmluZGV4LT0yLHRoaXMuX2RpcmVjdGlvbj10LkN0cmxQYXR0ZXJuLlR5cGUuVXApLHRoaXMuaW5kZXg8MCYmKHRoaXMuaW5kZXg9dGhpcy52YWx1ZXMubGVuZ3RoLTEsdGhpcy5fZGlyZWN0aW9uPXQuQ3RybFBhdHRlcm4uVHlwZS5Eb3duKSksdGhpcy52YWx1ZX0sdC5DdHJsUGF0dGVybi5wcm90b3R5cGUuX3NodWZmbGVWYWx1ZXM9ZnVuY3Rpb24oKXt2YXIgdCxlLGk9W107Zm9yKHRoaXMuX3NodWZmbGVkPVtdLHQ9MDt0PHRoaXMudmFsdWVzLmxlbmd0aDt0KyspaVt0XT10O2Zvcig7aS5sZW5ndGg+MDspZT1pLnNwbGljZShNYXRoLmZsb29yKGkubGVuZ3RoKk1hdGgucmFuZG9tKCkpLDEpLHRoaXMuX3NodWZmbGVkLnB1c2goZVswXSl9LHQuQ3RybFBhdHRlcm4ucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLl9zaHVmZmxlZD1udWxsLHRoaXMudmFsdWVzPW51bGx9LHQuQ3RybFBhdHRlcm59KSxNb2R1bGUoZnVuY3Rpb24odCl7cmV0dXJuIHQuQ3RybFJhbmRvbT1mdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9uc09iamVjdChhcmd1bWVudHMsW1wibWluXCIsXCJtYXhcIl0sdC5DdHJsUmFuZG9tLmRlZmF1bHRzKTt0aGlzLm1pbj1lLm1pbix0aGlzLm1heD1lLm1heCx0aGlzLmludGVnZXI9ZS5pbnRlZ2VyfSx0LmV4dGVuZCh0LkN0cmxSYW5kb20pLHQuQ3RybFJhbmRvbS5kZWZhdWx0cz17bWluOjAsbWF4OjEsaW50ZWdlcjohMX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuQ3RybFJhbmRvbS5wcm90b3R5cGUsXCJ2YWx1ZVwiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnRvU2Vjb25kcyh0aGlzLm1pbiksZT10aGlzLnRvU2Vjb25kcyh0aGlzLm1heCksaT1NYXRoLnJhbmRvbSgpLHM9aSp0KygxLWkpKmU7cmV0dXJuIHRoaXMuaW50ZWdlciYmKHM9TWF0aC5mbG9vcihzKSksc319KSx0LkN0cmxSYW5kb219KSxNb2R1bGUoZnVuY3Rpb24odCl7cmV0dXJuIHQuQnVmZmVyPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zT2JqZWN0KGFyZ3VtZW50cyxbXCJ1cmxcIixcIm9ubG9hZFwiXSx0LkJ1ZmZlci5kZWZhdWx0cyk7dGhpcy5fYnVmZmVyPW51bGwsdGhpcy5fcmV2ZXJzZWQ9ZS5yZXZlcnNlLHRoaXMudXJsPXZvaWQgMCx0aGlzLmxvYWRlZD0hMSx0aGlzLm9ubG9hZD1lLm9ubG9hZC5iaW5kKHRoaXMsdGhpcyksZS51cmwgaW5zdGFuY2VvZiBBdWRpb0J1ZmZlcnx8ZS51cmwgaW5zdGFuY2VvZiB0LkJ1ZmZlcj8odGhpcy5zZXQoZS51cmwpLHRoaXMub25sb2FkKHRoaXMpKTp0aGlzLmlzU3RyaW5nKGUudXJsKSYmKHRoaXMudXJsPWUudXJsLHQuQnVmZmVyLl9hZGRUb1F1ZXVlKGUudXJsLHRoaXMpKX0sdC5leHRlbmQodC5CdWZmZXIpLHQuQnVmZmVyLmRlZmF1bHRzPXt1cmw6dm9pZCAwLG9ubG9hZDp0Lm5vT3AscmV2ZXJzZTohMX0sdC5CdWZmZXIucHJvdG90eXBlLnNldD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fYnVmZmVyPWUgaW5zdGFuY2VvZiB0LkJ1ZmZlcj9lLmdldCgpOmUsdGhpcy5sb2FkZWQ9ITAsdGhpc30sdC5CdWZmZXIucHJvdG90eXBlLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9idWZmZXJ9LHQuQnVmZmVyLnByb3RvdHlwZS5sb2FkPWZ1bmN0aW9uKGUsaSl7cmV0dXJuIHRoaXMudXJsPWUsdGhpcy5vbmxvYWQ9dGhpcy5kZWZhdWx0QXJnKGksdGhpcy5vbmxvYWQpLHQuQnVmZmVyLl9hZGRUb1F1ZXVlKGUsdGhpcyksdGhpc30sdC5CdWZmZXIucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHQuQnVmZmVyLl9yZW1vdmVGcm9tUXVldWUodGhpcyksdGhpcy5fYnVmZmVyPW51bGwsdGhpcy5vbmxvYWQ9dC5CdWZmZXIuZGVmYXVsdHMub25sb2FkLHRoaXN9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkJ1ZmZlci5wcm90b3R5cGUsXCJkdXJhdGlvblwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYnVmZmVyP3RoaXMuX2J1ZmZlci5kdXJhdGlvbjowfX0pLHQuQnVmZmVyLnByb3RvdHlwZS5fcmV2ZXJzZT1mdW5jdGlvbigpe2lmKHRoaXMubG9hZGVkKWZvcih2YXIgdD0wO3Q8dGhpcy5fYnVmZmVyLm51bWJlck9mQ2hhbm5lbHM7dCsrKUFycmF5LnByb3RvdHlwZS5yZXZlcnNlLmNhbGwodGhpcy5fYnVmZmVyLmdldENoYW5uZWxEYXRhKHQpKTtyZXR1cm4gdGhpc30sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuQnVmZmVyLnByb3RvdHlwZSxcInJldmVyc2VcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JldmVyc2VkfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fcmV2ZXJzZWQhPT10JiYodGhpcy5fcmV2ZXJzZWQ9dCx0aGlzLl9yZXZlcnNlKCkpfX0pLHQuRW1pdHRlci5taXhpbih0LkJ1ZmZlciksdC5CdWZmZXIuX3F1ZXVlPVtdLHQuQnVmZmVyLl9jdXJyZW50RG93bmxvYWRzPVtdLHQuQnVmZmVyLl90b3RhbERvd25sb2Fkcz0wLHQuQnVmZmVyLk1BWF9TSU1VTFRBTkVPVVNfRE9XTkxPQURTPTYsdC5CdWZmZXIuX2FkZFRvUXVldWU9ZnVuY3Rpb24oZSxpKXt0LkJ1ZmZlci5fcXVldWUucHVzaCh7dXJsOmUsQnVmZmVyOmkscHJvZ3Jlc3M6MCx4aHI6bnVsbH0pLHRoaXMuX3RvdGFsRG93bmxvYWRzKyssdC5CdWZmZXIuX25leHQoKX0sdC5CdWZmZXIuX3JlbW92ZUZyb21RdWV1ZT1mdW5jdGlvbihlKXt2YXIgaSxzLG47Zm9yKGk9MDtpPHQuQnVmZmVyLl9xdWV1ZS5sZW5ndGg7aSsrKXM9dC5CdWZmZXIuX3F1ZXVlW2ldLHMuQnVmZmVyPT09ZSYmdC5CdWZmZXIuX3F1ZXVlLnNwbGljZShpLDEpO2ZvcihpPTA7aTx0LkJ1ZmZlci5fY3VycmVudERvd25sb2Fkcy5sZW5ndGg7aSsrKW49dC5CdWZmZXIuX2N1cnJlbnREb3dubG9hZHNbaV0sbi5CdWZmZXI9PT1lJiYodC5CdWZmZXIuX2N1cnJlbnREb3dubG9hZHMuc3BsaWNlKGksMSksbi54aHIuYWJvcnQoKSxuLnhoci5vbnByb2dyZXNzPW51bGwsbi54aHIub25sb2FkPW51bGwsbi54aHIub25lcnJvcj1udWxsKX0sdC5CdWZmZXIuX25leHQ9ZnVuY3Rpb24oKXtpZih0LkJ1ZmZlci5fcXVldWUubGVuZ3RoPjApe2lmKHQuQnVmZmVyLl9jdXJyZW50RG93bmxvYWRzLmxlbmd0aDx0LkJ1ZmZlci5NQVhfU0lNVUxUQU5FT1VTX0RPV05MT0FEUyl7dmFyIGU9dC5CdWZmZXIuX3F1ZXVlLnNoaWZ0KCk7dC5CdWZmZXIuX2N1cnJlbnREb3dubG9hZHMucHVzaChlKSxlLnhocj10LkJ1ZmZlci5sb2FkKGUudXJsLGZ1bmN0aW9uKGkpe3ZhciBzPXQuQnVmZmVyLl9jdXJyZW50RG93bmxvYWRzLmluZGV4T2YoZSk7dC5CdWZmZXIuX2N1cnJlbnREb3dubG9hZHMuc3BsaWNlKHMsMSksZS5CdWZmZXIuc2V0KGkpLGUuQnVmZmVyLl9yZXZlcnNlZCYmZS5CdWZmZXIuX3JldmVyc2UoKSxlLkJ1ZmZlci5vbmxvYWQoZS5CdWZmZXIpLHQuQnVmZmVyLl9vbnByb2dyZXNzKCksdC5CdWZmZXIuX25leHQoKX0pLGUueGhyLm9ucHJvZ3Jlc3M9ZnVuY3Rpb24oaSl7ZS5wcm9ncmVzcz1pLmxvYWRlZC9pLnRvdGFsLHQuQnVmZmVyLl9vbnByb2dyZXNzKCl9LGUueGhyLm9uZXJyb3I9ZnVuY3Rpb24oZSl7dC5CdWZmZXIudHJpZ2dlcihcImVycm9yXCIsZSl9fX1lbHNlIDA9PT10LkJ1ZmZlci5fY3VycmVudERvd25sb2Fkcy5sZW5ndGgmJih0LkJ1ZmZlci50cmlnZ2VyKFwibG9hZFwiKSx0LkJ1ZmZlci5fdG90YWxEb3dubG9hZHM9MCl9LHQuQnVmZmVyLl9vbnByb2dyZXNzPWZ1bmN0aW9uKCl7dmFyIGUsaSxzLG4sbz0wLHI9dC5CdWZmZXIuX2N1cnJlbnREb3dubG9hZHMubGVuZ3RoLGE9MDtpZihyPjApe2ZvcihlPTA7cj5lO2UrKylpPXQuQnVmZmVyLl9jdXJyZW50RG93bmxvYWRzW2VdLG8rPWkucHJvZ3Jlc3M7YT1vfXM9ci1hLG49dC5CdWZmZXIuX3RvdGFsRG93bmxvYWRzLXQuQnVmZmVyLl9xdWV1ZS5sZW5ndGgtcyx0LkJ1ZmZlci50cmlnZ2VyKFwicHJvZ3Jlc3NcIixuL3QuQnVmZmVyLl90b3RhbERvd25sb2Fkcyl9LHQuQnVmZmVyLmxvYWQ9ZnVuY3Rpb24oZSxpKXt2YXIgcz1uZXcgWE1MSHR0cFJlcXVlc3Q7cmV0dXJuIHMub3BlbihcIkdFVFwiLGUsITApLHMucmVzcG9uc2VUeXBlPVwiYXJyYXlidWZmZXJcIixzLm9ubG9hZD1mdW5jdGlvbigpe3QuY29udGV4dC5kZWNvZGVBdWRpb0RhdGEocy5yZXNwb25zZSxmdW5jdGlvbih0KXtpZighdCl0aHJvdyBuZXcgRXJyb3IoXCJjb3VsZCBub3QgZGVjb2RlIGF1ZGlvIGRhdGE6XCIrZSk7aSh0KX0pfSxzLnNlbmQoKSxzfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5CdWZmZXIsXCJvbmxvYWRcIix7c2V0OmZ1bmN0aW9uKGUpe2NvbnNvbGUud2FybihcIlRvbmUuQnVmZmVyLm9ubG9hZCBpcyBkZXByZWNhdGVkLCB1c2UgVG9uZS5CdWZmZXIub24oJ2xvYWQnLCBjYWxsYmFjaylcIiksdC5CdWZmZXIub24oXCJsb2FkXCIsZSl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuQnVmZmVyLFwib25wcm9ncmVzc1wiLHtzZXQ6ZnVuY3Rpb24oZSl7Y29uc29sZS53YXJuKFwiVG9uZS5CdWZmZXIub25wcm9ncmVzcyBpcyBkZXByZWNhdGVkLCB1c2UgVG9uZS5CdWZmZXIub24oJ3Byb2dyZXNzJywgY2FsbGJhY2spXCIpLHQuQnVmZmVyLm9uKFwicHJvZ3Jlc3NcIixlKX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5CdWZmZXIsXCJvbmVycm9yXCIse3NldDpmdW5jdGlvbihlKXtjb25zb2xlLndhcm4oXCJUb25lLkJ1ZmZlci5vbmVycm9yIGlzIGRlcHJlY2F0ZWQsIHVzZSBUb25lLkJ1ZmZlci5vbignZXJyb3InLCBjYWxsYmFjaylcIiksdC5CdWZmZXIub24oXCJlcnJvclwiLGUpfX0pLHQuQnVmZmVyfSksTW9kdWxlKGZ1bmN0aW9uKHQpe3ZhciBlPXt9O3JldHVybiB0LnByb3RvdHlwZS5zZW5kPWZ1bmN0aW9uKHQsaSl7ZS5oYXNPd25Qcm9wZXJ0eSh0KXx8KGVbdF09dGhpcy5jb250ZXh0LmNyZWF0ZUdhaW4oKSk7dmFyIHM9dGhpcy5jb250ZXh0LmNyZWF0ZUdhaW4oKTtyZXR1cm4gcy5nYWluLnZhbHVlPXRoaXMuZGJUb0dhaW4odGhpcy5kZWZhdWx0QXJnKGksMSkpLHRoaXMub3V0cHV0LmNoYWluKHMsZVt0XSksc30sdC5wcm90b3R5cGUucmVjZWl2ZT1mdW5jdGlvbih0LGkpe3JldHVybiBlLmhhc093blByb3BlcnR5KHQpfHwoZVt0XT10aGlzLmNvbnRleHQuY3JlYXRlR2FpbigpKSx0aGlzLmlzVW5kZWYoaSkmJihpPXRoaXMuaW5wdXQpLGVbdF0uY29ubmVjdChpKSx0aGlzfSx0fSksTW9kdWxlKGZ1bmN0aW9uKHQpe3JldHVybiB0LkRlbGF5PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zT2JqZWN0KGFyZ3VtZW50cyxbXCJkZWxheVRpbWVcIixcIm1heERlbGF5XCJdLHQuRGVsYXkuZGVmYXVsdHMpO3RoaXMuX2RlbGF5Tm9kZT10aGlzLmlucHV0PXRoaXMub3V0cHV0PXRoaXMuY29udGV4dC5jcmVhdGVEZWxheSh0aGlzLnRvU2Vjb25kcyhlLm1heERlbGF5KSksdGhpcy5kZWxheVRpbWU9bmV3IHQuUGFyYW0oe3BhcmFtOnRoaXMuX2RlbGF5Tm9kZS5kZWxheVRpbWUsdW5pdHM6dC5UeXBlLlRpbWUsdmFsdWU6ZS5kZWxheVRpbWV9KSx0aGlzLl9yZWFkT25seShcImRlbGF5VGltZVwiKX0sdC5leHRlbmQodC5EZWxheSksdC5EZWxheS5kZWZhdWx0cz17bWF4RGVsYXk6MSxkZWxheVRpbWU6MH0sdC5EZWxheS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LlBhcmFtLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fZGVsYXlOb2RlLmRpc2Nvbm5lY3QoKSx0aGlzLl9kZWxheU5vZGU9bnVsbCx0aGlzLl93cml0YWJsZShcImRlbGF5VGltZVwiKSx0aGlzLmRlbGF5VGltZT1udWxsLHRoaXN9LHQuRGVsYXl9KSxNb2R1bGUoZnVuY3Rpb24odCl7dC5NYXN0ZXI9ZnVuY3Rpb24oKXt0LmNhbGwodGhpcyksdGhpcy5fdW5tdXRlZFZvbHVtZT0xLHRoaXMuX211dGVkPSExLHRoaXMuX3ZvbHVtZT10aGlzLm91dHB1dD1uZXcgdC5Wb2x1bWUsdGhpcy52b2x1bWU9dGhpcy5fdm9sdW1lLnZvbHVtZSx0aGlzLl9yZWFkT25seShcInZvbHVtZVwiKSx0aGlzLmlucHV0LmNoYWluKHRoaXMub3V0cHV0LHRoaXMuY29udGV4dC5kZXN0aW5hdGlvbil9LHQuZXh0ZW5kKHQuTWFzdGVyKSx0Lk1hc3Rlci5kZWZhdWx0cz17dm9sdW1lOjAsbXV0ZTohMX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuTWFzdGVyLnByb3RvdHlwZSxcIm11dGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX211dGVkfSxzZXQ6ZnVuY3Rpb24odCl7IXRoaXMuX211dGVkJiZ0Pyh0aGlzLl91bm11dGVkVm9sdW1lPXRoaXMudm9sdW1lLnZhbHVlLHRoaXMudm9sdW1lLnZhbHVlPS0oMS8wKSk6dGhpcy5fbXV0ZWQmJiF0JiYodGhpcy52b2x1bWUudmFsdWU9dGhpcy5fdW5tdXRlZFZvbHVtZSksdGhpcy5fbXV0ZWQ9dH19KSx0Lk1hc3Rlci5wcm90b3R5cGUuY2hhaW49ZnVuY3Rpb24oKXt0aGlzLmlucHV0LmRpc2Nvbm5lY3QoKSx0aGlzLmlucHV0LmNoYWluLmFwcGx5KHRoaXMuaW5wdXQsYXJndW1lbnRzKSxhcmd1bWVudHNbYXJndW1lbnRzLmxlbmd0aC0xXS5jb25uZWN0KHRoaXMub3V0cHV0KX0sdC5NYXN0ZXIucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fd3JpdGFibGUoXCJ2b2x1bWVcIiksdGhpcy5fdm9sdW1lLmRpc3Bvc2UoKSx0aGlzLl92b2x1bWU9bnVsbCx0aGlzLnZvbHVtZT1udWxsfSx0LnByb3RvdHlwZS50b01hc3Rlcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbm5lY3QodC5NYXN0ZXIpLHRoaXN9LEF1ZGlvTm9kZS5wcm90b3R5cGUudG9NYXN0ZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25uZWN0KHQuTWFzdGVyKSx0aGlzfTt2YXIgZT10Lk1hc3RlcjtyZXR1cm4gdC5faW5pdEF1ZGlvQ29udGV4dChmdW5jdGlvbigpe3QucHJvdG90eXBlLmlzVW5kZWYodC5NYXN0ZXIpPyhlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodC5NYXN0ZXIpLGUuY2FsbCh0Lk1hc3RlcikpOnQuTWFzdGVyPW5ldyBlfSksdC5NYXN0ZXJ9KSxNb2R1bGUoZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSh0LGUscyl7dmFyIG4sbyxyLGE7aWYoaS5oYXNPd25Qcm9wZXJ0eSh0KSlmb3Iobj1pW3RdLG89MCxyPW4ubGVuZ3RoO3I+bztvKyspYT1uW29dLEFycmF5LmlzQXJyYXkocyk/YS5hcHBseSh3aW5kb3csW2VdLmNvbmNhdChzKSk6YShlLHMpfXQuTm90ZT1mdW5jdGlvbihlLGkscyl7dGhpcy52YWx1ZT1zLHRoaXMuX2NoYW5uZWw9ZSx0aGlzLl90aW1lbGluZUlEPXQuVHJhbnNwb3J0LnNldFRpbWVsaW5lKHRoaXMuX3RyaWdnZXIuYmluZCh0aGlzKSxpKX0sdC5Ob3RlLnByb3RvdHlwZS5fdHJpZ2dlcj1mdW5jdGlvbih0KXtlKHRoaXMuX2NoYW5uZWwsdCx0aGlzLnZhbHVlKX0sdC5Ob3RlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQuVHJhbnNwb3J0LmNsZWFyVGltZWxpbmUodGhpcy5fdGltZWxpbmVJRCksdGhpcy52YWx1ZT1udWxsLHRoaXN9O3ZhciBpPXt9O3JldHVybiB0Lk5vdGUucm91dGU9ZnVuY3Rpb24odCxlKXtpLmhhc093blByb3BlcnR5KHQpP2lbdF0ucHVzaChlKTppW3RdPVtlXX0sdC5Ob3RlLnVucm91dGU9ZnVuY3Rpb24odCxlKXt2YXIgcyxuO2kuaGFzT3duUHJvcGVydHkodCkmJihzPWlbdF0sbj1zLmluZGV4T2YoZSksLTEhPT1uJiZpW3RdLnNwbGljZShuLDEpKX0sdC5Ob3RlLnBhcnNlU2NvcmU9ZnVuY3Rpb24oZSl7dmFyIGkscyxuLG8scixhLGwsaD1bXTtmb3IoaSBpbiBlKWlmKHM9ZVtpXSxcInRlbXBvXCI9PT1pKXQuVHJhbnNwb3J0LmJwbS52YWx1ZT1zO2Vsc2UgaWYoXCJ0aW1lU2lnbmF0dXJlXCI9PT1pKXQuVHJhbnNwb3J0LnRpbWVTaWduYXR1cmU9c1swXS8oc1sxXS80KTtlbHNle2lmKCFBcnJheS5pc0FycmF5KHMpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJzY29yZSBwYXJ0cyBtdXN0IGJlIEFycmF5c1wiKTtmb3Iobj0wO248cy5sZW5ndGg7bisrKW89c1tuXSxBcnJheS5pc0FycmF5KG8pPyhhPW9bMF0sbD1vLnNsaWNlKDEpLHI9bmV3IHQuTm90ZShpLGEsbCkpOnI9XCJvYmplY3RcIj09dHlwZW9mIG8/bmV3IHQuTm90ZShpLG8udGltZSxvKTpuZXcgdC5Ob3RlKGksbyksaC5wdXNoKHIpfXJldHVybiBofSx0Lk5vdGV9KSxNb2R1bGUoZnVuY3Rpb24odCl7cmV0dXJuIHQuRWZmZWN0PWZ1bmN0aW9uKCl7dC5jYWxsKHRoaXMpO3ZhciBlPXRoaXMub3B0aW9uc09iamVjdChhcmd1bWVudHMsW1wid2V0XCJdLHQuRWZmZWN0LmRlZmF1bHRzKTt0aGlzLl9kcnlXZXQ9bmV3IHQuQ3Jvc3NGYWRlKGUud2V0KSx0aGlzLndldD10aGlzLl9kcnlXZXQuZmFkZSx0aGlzLmVmZmVjdFNlbmQ9dGhpcy5jb250ZXh0LmNyZWF0ZUdhaW4oKSx0aGlzLmVmZmVjdFJldHVybj10aGlzLmNvbnRleHQuY3JlYXRlR2FpbigpLHRoaXMuaW5wdXQuY29ubmVjdCh0aGlzLl9kcnlXZXQuYSksdGhpcy5pbnB1dC5jb25uZWN0KHRoaXMuZWZmZWN0U2VuZCksdGhpcy5lZmZlY3RSZXR1cm4uY29ubmVjdCh0aGlzLl9kcnlXZXQuYiksdGhpcy5fZHJ5V2V0LmNvbm5lY3QodGhpcy5vdXRwdXQpLHRoaXMuX3JlYWRPbmx5KFtcIndldFwiXSl9LHQuZXh0ZW5kKHQuRWZmZWN0KSx0LkVmZmVjdC5kZWZhdWx0cz17d2V0OjF9LHQuRWZmZWN0LnByb3RvdHlwZS5jb25uZWN0RWZmZWN0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmVmZmVjdFNlbmQuY2hhaW4odCx0aGlzLmVmZmVjdFJldHVybiksdGhpc30sdC5FZmZlY3QucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX2RyeVdldC5kaXNwb3NlKCksdGhpcy5fZHJ5V2V0PW51bGwsdGhpcy5lZmZlY3RTZW5kLmRpc2Nvbm5lY3QoKSx0aGlzLmVmZmVjdFNlbmQ9bnVsbCx0aGlzLmVmZmVjdFJldHVybi5kaXNjb25uZWN0KCksdGhpcy5lZmZlY3RSZXR1cm49bnVsbCx0aGlzLl93cml0YWJsZShbXCJ3ZXRcIl0pLHRoaXMud2V0PW51bGwsdGhpc30sdC5FZmZlY3R9KSxNb2R1bGUoZnVuY3Rpb24odCl7cmV0dXJuIHQuQXV0b0ZpbHRlcj1mdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9uc09iamVjdChhcmd1bWVudHMsW1wiZnJlcXVlbmN5XCIsXCJiYXNlRnJlcXVlbmN5XCIsXCJvY3RhdmVzXCJdLHQuQXV0b0ZpbHRlci5kZWZhdWx0cyk7dC5FZmZlY3QuY2FsbCh0aGlzLGUpLHRoaXMuX2xmbz1uZXcgdC5MRk8oe2ZyZXF1ZW5jeTplLmZyZXF1ZW5jeSxhbXBsaXR1ZGU6ZS5kZXB0aH0pLHRoaXMuZGVwdGg9dGhpcy5fbGZvLmFtcGxpdHVkZSx0aGlzLmZyZXF1ZW5jeT10aGlzLl9sZm8uZnJlcXVlbmN5LHRoaXMuZmlsdGVyPW5ldyB0LkZpbHRlcihlLmZpbHRlciksdGhpcy5fb2N0YXZlcz0wLHRoaXMuY29ubmVjdEVmZmVjdCh0aGlzLmZpbHRlciksdGhpcy5fbGZvLmNvbm5lY3QodGhpcy5maWx0ZXIuZnJlcXVlbmN5KSx0aGlzLnR5cGU9ZS50eXBlLHRoaXMuX3JlYWRPbmx5KFtcImZyZXF1ZW5jeVwiLFwiZGVwdGhcIl0pLHRoaXMub2N0YXZlcz1lLm9jdGF2ZXMsdGhpcy5iYXNlRnJlcXVlbmN5PWUuYmFzZUZyZXF1ZW5jeX0sdC5leHRlbmQodC5BdXRvRmlsdGVyLHQuRWZmZWN0KSx0LkF1dG9GaWx0ZXIuZGVmYXVsdHM9e2ZyZXF1ZW5jeToxLHR5cGU6XCJzaW5lXCIsZGVwdGg6MSxiYXNlRnJlcXVlbmN5OjIwMCxvY3RhdmVzOjIuNixmaWx0ZXI6e3R5cGU6XCJsb3dwYXNzXCIscm9sbG9mZjotMTIsUToxfX0sdC5BdXRvRmlsdGVyLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fbGZvLnN0YXJ0KHQpLHRoaXN9LHQuQXV0b0ZpbHRlci5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fbGZvLnN0b3AodCksdGhpc30sdC5BdXRvRmlsdGVyLnByb3RvdHlwZS5zeW5jPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9sZm8uc3luYyh0KSx0aGlzfSx0LkF1dG9GaWx0ZXIucHJvdG90eXBlLnVuc3luYz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9sZm8udW5zeW5jKCksdGhpc30sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuQXV0b0ZpbHRlci5wcm90b3R5cGUsXCJ0eXBlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sZm8udHlwZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2xmby50eXBlPXR9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuQXV0b0ZpbHRlci5wcm90b3R5cGUsXCJiYXNlRnJlcXVlbmN5XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sZm8ubWlufSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbGZvLm1pbj10aGlzLnRvRnJlcXVlbmN5KHQpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkF1dG9GaWx0ZXIucHJvdG90eXBlLFwib2N0YXZlc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb2N0YXZlc30sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX29jdGF2ZXM9dCx0aGlzLl9sZm8ubWF4PXRoaXMuYmFzZUZyZXF1ZW5jeSpNYXRoLnBvdygyLHQpfX0pLHQuQXV0b0ZpbHRlci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LkVmZmVjdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX2xmby5kaXNwb3NlKCksdGhpcy5fbGZvPW51bGwsdGhpcy5maWx0ZXIuZGlzcG9zZSgpLHRoaXMuZmlsdGVyPW51bGwsdGhpcy5fd3JpdGFibGUoW1wiZnJlcXVlbmN5XCIsXCJkZXB0aFwiXSksdGhpcy5mcmVxdWVuY3k9bnVsbCx0aGlzLmRlcHRoPW51bGwsdGhpc30sdC5BdXRvRmlsdGVyfSksTW9kdWxlKGZ1bmN0aW9uKHQpe3JldHVybiB0LkF1dG9QYW5uZXI9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnNPYmplY3QoYXJndW1lbnRzLFtcImZyZXF1ZW5jeVwiXSx0LkF1dG9QYW5uZXIuZGVmYXVsdHMpO3QuRWZmZWN0LmNhbGwodGhpcyxlKSx0aGlzLl9sZm89bmV3IHQuTEZPKHtmcmVxdWVuY3k6ZS5mcmVxdWVuY3ksYW1wbGl0dWRlOmUuZGVwdGgsbWluOjAsbWF4OjF9KSx0aGlzLmRlcHRoPXRoaXMuX2xmby5hbXBsaXR1ZGUsdGhpcy5fcGFubmVyPW5ldyB0LlBhbm5lcix0aGlzLmZyZXF1ZW5jeT10aGlzLl9sZm8uZnJlcXVlbmN5LHRoaXMuY29ubmVjdEVmZmVjdCh0aGlzLl9wYW5uZXIpLHRoaXMuX2xmby5jb25uZWN0KHRoaXMuX3Bhbm5lci5wYW4pLHRoaXMudHlwZT1lLnR5cGUsdGhpcy5fcmVhZE9ubHkoW1wiZGVwdGhcIixcImZyZXF1ZW5jeVwiXSl9LHQuZXh0ZW5kKHQuQXV0b1Bhbm5lcix0LkVmZmVjdCksdC5BdXRvUGFubmVyLmRlZmF1bHRzPXtmcmVxdWVuY3k6MSx0eXBlOlwic2luZVwiLGRlcHRoOjF9LHQuQXV0b1Bhbm5lci5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2xmby5zdGFydCh0KSx0aGlzfSx0LkF1dG9QYW5uZXIucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2xmby5zdG9wKHQpLHRoaXN9LHQuQXV0b1Bhbm5lci5wcm90b3R5cGUuc3luYz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fbGZvLnN5bmModCksdGhpc30sdC5BdXRvUGFubmVyLnByb3RvdHlwZS51bnN5bmM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGZvLnVuc3luYygpLHRoaXN9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkF1dG9QYW5uZXIucHJvdG90eXBlLFwidHlwZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGZvLnR5cGV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9sZm8udHlwZT10fX0pLHQuQXV0b1Bhbm5lci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LkVmZmVjdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX2xmby5kaXNwb3NlKCksdGhpcy5fbGZvPW51bGwsdGhpcy5fcGFubmVyLmRpc3Bvc2UoKSx0aGlzLl9wYW5uZXI9bnVsbCx0aGlzLl93cml0YWJsZShbXCJkZXB0aFwiLFwiZnJlcXVlbmN5XCJdKSx0aGlzLmZyZXF1ZW5jeT1udWxsLHRoaXMuZGVwdGg9bnVsbCx0aGlzfSx0LkF1dG9QYW5uZXJ9KSxNb2R1bGUoZnVuY3Rpb24odCl7cmV0dXJuIHQuQXV0b1dhaD1mdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9uc09iamVjdChhcmd1bWVudHMsW1wiYmFzZUZyZXF1ZW5jeVwiLFwib2N0YXZlc1wiLFwic2Vuc2l0aXZpdHlcIl0sdC5BdXRvV2FoLmRlZmF1bHRzKTt0LkVmZmVjdC5jYWxsKHRoaXMsZSksdGhpcy5mb2xsb3dlcj1uZXcgdC5Gb2xsb3dlcihlLmZvbGxvd2VyKSx0aGlzLl9zd2VlcFJhbmdlPW5ldyB0LlNjYWxlRXhwKDAsMSwuNSksdGhpcy5fYmFzZUZyZXF1ZW5jeT1lLmJhc2VGcmVxdWVuY3ksdGhpcy5fb2N0YXZlcz1lLm9jdGF2ZXMsdGhpcy5faW5wdXRCb29zdD10aGlzLmNvbnRleHQuY3JlYXRlR2FpbigpLHRoaXMuX2JhbmRwYXNzPW5ldyB0LkZpbHRlcih7cm9sbG9mZjotNDgsZnJlcXVlbmN5OjAsUTplLlF9KSx0aGlzLl9wZWFraW5nPW5ldyB0LkZpbHRlcigwLFwicGVha2luZ1wiKSx0aGlzLl9wZWFraW5nLmdhaW4udmFsdWU9ZS5nYWluLHRoaXMuZ2Fpbj10aGlzLl9wZWFraW5nLmdhaW4sdGhpcy5RPXRoaXMuX2JhbmRwYXNzLlEsdGhpcy5lZmZlY3RTZW5kLmNoYWluKHRoaXMuX2lucHV0Qm9vc3QsdGhpcy5mb2xsb3dlcix0aGlzLl9zd2VlcFJhbmdlKSx0aGlzLl9zd2VlcFJhbmdlLmNvbm5lY3QodGhpcy5fYmFuZHBhc3MuZnJlcXVlbmN5KSx0aGlzLl9zd2VlcFJhbmdlLmNvbm5lY3QodGhpcy5fcGVha2luZy5mcmVxdWVuY3kpLHRoaXMuZWZmZWN0U2VuZC5jaGFpbih0aGlzLl9iYW5kcGFzcyx0aGlzLl9wZWFraW5nLHRoaXMuZWZmZWN0UmV0dXJuKSx0aGlzLl9zZXRTd2VlcFJhbmdlKCksdGhpcy5zZW5zaXRpdml0eT1lLnNlbnNpdGl2aXR5LHRoaXMuX3JlYWRPbmx5KFtcImdhaW5cIixcIlFcIl0pfSx0LmV4dGVuZCh0LkF1dG9XYWgsdC5FZmZlY3QpLHQuQXV0b1dhaC5kZWZhdWx0cz17YmFzZUZyZXF1ZW5jeToxMDAsb2N0YXZlczo2LHNlbnNpdGl2aXR5OjAsUToyLGdhaW46Mixmb2xsb3dlcjp7YXR0YWNrOi4zLHJlbGVhc2U6LjV9fSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5BdXRvV2FoLnByb3RvdHlwZSxcIm9jdGF2ZXNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29jdGF2ZXN9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9vY3RhdmVzPXQsdGhpcy5fc2V0U3dlZXBSYW5nZSgpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkF1dG9XYWgucHJvdG90eXBlLFwiYmFzZUZyZXF1ZW5jeVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYmFzZUZyZXF1ZW5jeX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2Jhc2VGcmVxdWVuY3k9dCx0aGlzLl9zZXRTd2VlcFJhbmdlKCl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuQXV0b1dhaC5wcm90b3R5cGUsXCJzZW5zaXRpdml0eVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nYWluVG9EYigxL3RoaXMuX2lucHV0Qm9vc3QuZ2Fpbi52YWx1ZSl9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9pbnB1dEJvb3N0LmdhaW4udmFsdWU9MS90aGlzLmRiVG9HYWluKHQpfX0pLHQuQXV0b1dhaC5wcm90b3R5cGUuX3NldFN3ZWVwUmFuZ2U9ZnVuY3Rpb24oKXt0aGlzLl9zd2VlcFJhbmdlLm1pbj10aGlzLl9iYXNlRnJlcXVlbmN5LHRoaXMuX3N3ZWVwUmFuZ2UubWF4PU1hdGgubWluKHRoaXMuX2Jhc2VGcmVxdWVuY3kqTWF0aC5wb3coMix0aGlzLl9vY3RhdmVzKSx0aGlzLmNvbnRleHQuc2FtcGxlUmF0ZS8yKX0sdC5BdXRvV2FoLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQuRWZmZWN0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5mb2xsb3dlci5kaXNwb3NlKCksdGhpcy5mb2xsb3dlcj1udWxsLHRoaXMuX3N3ZWVwUmFuZ2UuZGlzcG9zZSgpLHRoaXMuX3N3ZWVwUmFuZ2U9bnVsbCx0aGlzLl9iYW5kcGFzcy5kaXNwb3NlKCksdGhpcy5fYmFuZHBhc3M9bnVsbCx0aGlzLl9wZWFraW5nLmRpc3Bvc2UoKSx0aGlzLl9wZWFraW5nPW51bGwsdGhpcy5faW5wdXRCb29zdC5kaXNjb25uZWN0KCksdGhpcy5faW5wdXRCb29zdD1udWxsLHRoaXMuX3dyaXRhYmxlKFtcImdhaW5cIixcIlFcIl0pLHRoaXMuZ2Fpbj1udWxsLHRoaXMuUT1udWxsLHRoaXN9LHQuQXV0b1dhaH0pLE1vZHVsZShmdW5jdGlvbih0KXtyZXR1cm4gdC5CaXRDcnVzaGVyPWZ1bmN0aW9uKCl7dmFyIGUsaT10aGlzLm9wdGlvbnNPYmplY3QoYXJndW1lbnRzLFtcImJpdHNcIl0sdC5CaXRDcnVzaGVyLmRlZmF1bHRzKTt0LkVmZmVjdC5jYWxsKHRoaXMsaSksZT0xL01hdGgucG93KDIsaS5iaXRzLTEpLHRoaXMuX3N1YnRyYWN0PW5ldyB0LlN1YnRyYWN0LHRoaXMuX21vZHVsbz1uZXcgdC5Nb2R1bG8oZSksdGhpcy5fYml0cz1pLmJpdHMsdGhpcy5lZmZlY3RTZW5kLmZhbih0aGlzLl9zdWJ0cmFjdCx0aGlzLl9tb2R1bG8pLHRoaXMuX21vZHVsby5jb25uZWN0KHRoaXMuX3N1YnRyYWN0LDAsMSksdGhpcy5fc3VidHJhY3QuY29ubmVjdCh0aGlzLmVmZmVjdFJldHVybil9LHQuZXh0ZW5kKHQuQml0Q3J1c2hlcix0LkVmZmVjdCksdC5CaXRDcnVzaGVyLmRlZmF1bHRzPXtiaXRzOjR9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkJpdENydXNoZXIucHJvdG90eXBlLFwiYml0c1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYml0c30sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2JpdHM9dDt2YXIgZT0xL01hdGgucG93KDIsdC0xKTt0aGlzLl9tb2R1bG8udmFsdWU9ZX19KSx0LkJpdENydXNoZXIucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5FZmZlY3QucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9zdWJ0cmFjdC5kaXNwb3NlKCksdGhpcy5fc3VidHJhY3Q9bnVsbCx0aGlzLl9tb2R1bG8uZGlzcG9zZSgpLHRoaXMuX21vZHVsbz1udWxsLHRoaXN9LHQuQml0Q3J1c2hlcn0pLE1vZHVsZShmdW5jdGlvbih0KXtyZXR1cm4gdC5DaGVieXNoZXY9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnNPYmplY3QoYXJndW1lbnRzLFtcIm9yZGVyXCJdLHQuQ2hlYnlzaGV2LmRlZmF1bHRzKTt0LkVmZmVjdC5jYWxsKHRoaXMsZSksdGhpcy5fc2hhcGVyPW5ldyB0LldhdmVTaGFwZXIoNDA5NiksdGhpcy5fb3JkZXI9ZS5vcmRlcix0aGlzLmNvbm5lY3RFZmZlY3QodGhpcy5fc2hhcGVyKSx0aGlzLm9yZGVyPWUub3JkZXIsdGhpcy5vdmVyc2FtcGxlPWUub3ZlcnNhbXBsZX0sdC5leHRlbmQodC5DaGVieXNoZXYsdC5FZmZlY3QpLHQuQ2hlYnlzaGV2LmRlZmF1bHRzPXtvcmRlcjoxLG92ZXJzYW1wbGU6XCJub25lXCJ9LHQuQ2hlYnlzaGV2LnByb3RvdHlwZS5fZ2V0Q29lZmZpY2llbnQ9ZnVuY3Rpb24odCxlLGkpe3JldHVybiBpLmhhc093blByb3BlcnR5KGUpP2lbZV06KGlbZV09MD09PWU/MDoxPT09ZT90OjIqdCp0aGlzLl9nZXRDb2VmZmljaWVudCh0LGUtMSxpKS10aGlzLl9nZXRDb2VmZmljaWVudCh0LGUtMixpKSxpW2VdKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuQ2hlYnlzaGV2LnByb3RvdHlwZSxcIm9yZGVyXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vcmRlcn0sc2V0OmZ1bmN0aW9uKHQpe3ZhciBlLGkscyxuO2Zvcih0aGlzLl9vcmRlcj10LGU9bmV3IEFycmF5KDQwOTYpLGk9ZS5sZW5ndGgscz0wO2k+czsrK3Mpbj0yKnMvaS0xLGVbc109MD09PW4/MDp0aGlzLl9nZXRDb2VmZmljaWVudChuLHQse30pO3RoaXMuX3NoYXBlci5jdXJ2ZT1lfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkNoZWJ5c2hldi5wcm90b3R5cGUsXCJvdmVyc2FtcGxlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zaGFwZXIub3ZlcnNhbXBsZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3NoYXBlci5vdmVyc2FtcGxlPXR9fSksdC5DaGVieXNoZXYucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5FZmZlY3QucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9zaGFwZXIuZGlzcG9zZSgpLHRoaXMuX3NoYXBlcj1udWxsLHRoaXN9LHQuQ2hlYnlzaGV2fSksTW9kdWxlKGZ1bmN0aW9uKHQpe3JldHVybiB0LlN0ZXJlb0VmZmVjdD1mdW5jdGlvbigpe3QuY2FsbCh0aGlzKTt2YXIgZT10aGlzLm9wdGlvbnNPYmplY3QoYXJndW1lbnRzLFtcIndldFwiXSx0LkVmZmVjdC5kZWZhdWx0cyk7dGhpcy5fZHJ5V2V0PW5ldyB0LkNyb3NzRmFkZShlLndldCksdGhpcy53ZXQ9dGhpcy5fZHJ5V2V0LmZhZGUsdGhpcy5fc3BsaXQ9bmV3IHQuU3BsaXQsdGhpcy5lZmZlY3RTZW5kTD10aGlzLl9zcGxpdC5sZWZ0LHRoaXMuZWZmZWN0U2VuZFI9dGhpcy5fc3BsaXQucmlnaHQsdGhpcy5fbWVyZ2U9bmV3IHQuTWVyZ2UsdGhpcy5lZmZlY3RSZXR1cm5MPXRoaXMuX21lcmdlLmxlZnQsdGhpcy5lZmZlY3RSZXR1cm5SPXRoaXMuX21lcmdlLnJpZ2h0LHRoaXMuaW5wdXQuY29ubmVjdCh0aGlzLl9zcGxpdCksdGhpcy5pbnB1dC5jb25uZWN0KHRoaXMuX2RyeVdldCwwLDApLHRoaXMuX21lcmdlLmNvbm5lY3QodGhpcy5fZHJ5V2V0LDAsMSksdGhpcy5fZHJ5V2V0LmNvbm5lY3QodGhpcy5vdXRwdXQpLHRoaXMuX3JlYWRPbmx5KFtcIndldFwiXSl9LHQuZXh0ZW5kKHQuU3RlcmVvRWZmZWN0LHQuRWZmZWN0KSx0LlN0ZXJlb0VmZmVjdC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fZHJ5V2V0LmRpc3Bvc2UoKSx0aGlzLl9kcnlXZXQ9bnVsbCx0aGlzLl9zcGxpdC5kaXNwb3NlKCksdGhpcy5fc3BsaXQ9bnVsbCx0aGlzLl9tZXJnZS5kaXNwb3NlKCksdGhpcy5fbWVyZ2U9bnVsbCx0aGlzLmVmZmVjdFNlbmRMPW51bGwsdGhpcy5lZmZlY3RTZW5kUj1udWxsLHRoaXMuZWZmZWN0UmV0dXJuTD1udWxsLHRoaXMuZWZmZWN0UmV0dXJuUj1udWxsLHRoaXMuX3dyaXRhYmxlKFtcIndldFwiXSksdGhpcy53ZXQ9bnVsbCx0aGlzfSx0LlN0ZXJlb0VmZmVjdH0pLE1vZHVsZShmdW5jdGlvbih0KXtyZXR1cm4gdC5GZWVkYmFja0VmZmVjdD1mdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9uc09iamVjdChhcmd1bWVudHMsW1wiZmVlZGJhY2tcIl0pO2U9dGhpcy5kZWZhdWx0QXJnKGUsdC5GZWVkYmFja0VmZmVjdC5kZWZhdWx0cyksdC5FZmZlY3QuY2FsbCh0aGlzLGUpLHRoaXMuZmVlZGJhY2s9bmV3IHQuU2lnbmFsKGUuZmVlZGJhY2ssdC5UeXBlLk5vcm1hbFJhbmdlKSx0aGlzLl9mZWVkYmFja0dhaW49dGhpcy5jb250ZXh0LmNyZWF0ZUdhaW4oKSx0aGlzLmVmZmVjdFJldHVybi5jaGFpbih0aGlzLl9mZWVkYmFja0dhaW4sdGhpcy5lZmZlY3RTZW5kKSx0aGlzLmZlZWRiYWNrLmNvbm5lY3QodGhpcy5fZmVlZGJhY2tHYWluLmdhaW4pLHRoaXMuX3JlYWRPbmx5KFtcImZlZWRiYWNrXCJdKX0sdC5leHRlbmQodC5GZWVkYmFja0VmZmVjdCx0LkVmZmVjdCksdC5GZWVkYmFja0VmZmVjdC5kZWZhdWx0cz17ZmVlZGJhY2s6LjEyNX0sdC5GZWVkYmFja0VmZmVjdC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LkVmZmVjdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3dyaXRhYmxlKFtcImZlZWRiYWNrXCJdKSx0aGlzLmZlZWRiYWNrLmRpc3Bvc2UoKSx0aGlzLmZlZWRiYWNrPW51bGwsdGhpcy5fZmVlZGJhY2tHYWluLmRpc2Nvbm5lY3QoKSx0aGlzLl9mZWVkYmFja0dhaW49bnVsbCx0aGlzfSx0LkZlZWRiYWNrRWZmZWN0fSksTW9kdWxlKGZ1bmN0aW9uKHQpe3JldHVybiB0LlN0ZXJlb1hGZWVkYmFja0VmZmVjdD1mdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9uc09iamVjdChhcmd1bWVudHMsW1wiZmVlZGJhY2tcIl0sdC5GZWVkYmFja0VmZmVjdC5kZWZhdWx0cyk7dC5TdGVyZW9FZmZlY3QuY2FsbCh0aGlzLGUpLHRoaXMuZmVlZGJhY2s9bmV3IHQuU2lnbmFsKGUuZmVlZGJhY2ssdC5UeXBlLk5vcm1hbFJhbmdlKSx0aGlzLl9mZWVkYmFja0xSPXRoaXMuY29udGV4dC5jcmVhdGVHYWluKCksdGhpcy5fZmVlZGJhY2tSTD10aGlzLmNvbnRleHQuY3JlYXRlR2FpbigpLHRoaXMuZWZmZWN0UmV0dXJuTC5jaGFpbih0aGlzLl9mZWVkYmFja0xSLHRoaXMuZWZmZWN0U2VuZFIpLHRoaXMuZWZmZWN0UmV0dXJuUi5jaGFpbih0aGlzLl9mZWVkYmFja1JMLHRoaXMuZWZmZWN0U2VuZEwpLHRoaXMuZmVlZGJhY2suZmFuKHRoaXMuX2ZlZWRiYWNrTFIuZ2Fpbix0aGlzLl9mZWVkYmFja1JMLmdhaW4pLHRoaXMuX3JlYWRPbmx5KFtcImZlZWRiYWNrXCJdKX0sdC5leHRlbmQodC5TdGVyZW9YRmVlZGJhY2tFZmZlY3QsdC5GZWVkYmFja0VmZmVjdCksdC5TdGVyZW9YRmVlZGJhY2tFZmZlY3QucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5TdGVyZW9FZmZlY3QucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl93cml0YWJsZShbXCJmZWVkYmFja1wiXSksdGhpcy5mZWVkYmFjay5kaXNwb3NlKCksdGhpcy5mZWVkYmFjaz1udWxsLHRoaXMuX2ZlZWRiYWNrTFIuZGlzY29ubmVjdCgpLHRoaXMuX2ZlZWRiYWNrTFI9bnVsbCx0aGlzLl9mZWVkYmFja1JMLmRpc2Nvbm5lY3QoKSx0aGlzLl9mZWVkYmFja1JMPW51bGwsdGhpc30sdC5TdGVyZW9YRmVlZGJhY2tFZmZlY3R9KSxNb2R1bGUoZnVuY3Rpb24odCl7cmV0dXJuIHQuQ2hvcnVzPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zT2JqZWN0KGFyZ3VtZW50cyxbXCJmcmVxdWVuY3lcIixcImRlbGF5VGltZVwiLFwiZGVwdGhcIl0sdC5DaG9ydXMuZGVmYXVsdHMpO3QuU3RlcmVvWEZlZWRiYWNrRWZmZWN0LmNhbGwodGhpcyxlKSx0aGlzLl9kZXB0aD1lLmRlcHRoLHRoaXMuX2RlbGF5VGltZT1lLmRlbGF5VGltZS8xZTMsdGhpcy5fbGZvTD1uZXcgdC5MRk8oe2ZyZXF1ZW5jeTplLmZyZXF1ZW5jeSxtaW46MCxtYXg6MX0pLHRoaXMuX2xmb1I9bmV3IHQuTEZPKHtmcmVxdWVuY3k6ZS5mcmVxdWVuY3ksbWluOjAsbWF4OjEscGhhc2U6MTgwfSksdGhpcy5fZGVsYXlOb2RlTD10aGlzLmNvbnRleHQuY3JlYXRlRGVsYXkoKSx0aGlzLl9kZWxheU5vZGVSPXRoaXMuY29udGV4dC5jcmVhdGVEZWxheSgpLHRoaXMuZnJlcXVlbmN5PXRoaXMuX2xmb0wuZnJlcXVlbmN5LHRoaXMuZWZmZWN0U2VuZEwuY2hhaW4odGhpcy5fZGVsYXlOb2RlTCx0aGlzLmVmZmVjdFJldHVybkwpLHRoaXMuZWZmZWN0U2VuZFIuY2hhaW4odGhpcy5fZGVsYXlOb2RlUix0aGlzLmVmZmVjdFJldHVyblIpLHRoaXMuZWZmZWN0U2VuZEwuY29ubmVjdCh0aGlzLmVmZmVjdFJldHVybkwpLHRoaXMuZWZmZWN0U2VuZFIuY29ubmVjdCh0aGlzLmVmZmVjdFJldHVyblIpLHRoaXMuX2xmb0wuY29ubmVjdCh0aGlzLl9kZWxheU5vZGVMLmRlbGF5VGltZSksdGhpcy5fbGZvUi5jb25uZWN0KHRoaXMuX2RlbGF5Tm9kZVIuZGVsYXlUaW1lKSx0aGlzLl9sZm9MLnN0YXJ0KCksdGhpcy5fbGZvUi5zdGFydCgpLHRoaXMuX2xmb0wuZnJlcXVlbmN5LmNvbm5lY3QodGhpcy5fbGZvUi5mcmVxdWVuY3kpLHRoaXMuZGVwdGg9dGhpcy5fZGVwdGgsdGhpcy5mcmVxdWVuY3kudmFsdWU9ZS5mcmVxdWVuY3ksdGhpcy50eXBlPWUudHlwZSx0aGlzLl9yZWFkT25seShbXCJmcmVxdWVuY3lcIl0pLHRoaXMuc3ByZWFkPWUuc3ByZWFkfSx0LmV4dGVuZCh0LkNob3J1cyx0LlN0ZXJlb1hGZWVkYmFja0VmZmVjdCksdC5DaG9ydXMuZGVmYXVsdHM9e2ZyZXF1ZW5jeToxLjUsZGVsYXlUaW1lOjMuNSxkZXB0aDouNyxmZWVkYmFjazouMSx0eXBlOlwic2luZVwiLHNwcmVhZDoxODB9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkNob3J1cy5wcm90b3R5cGUsXCJkZXB0aFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGVwdGh9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9kZXB0aD10O3ZhciBlPXRoaXMuX2RlbGF5VGltZSp0O3RoaXMuX2xmb0wubWluPU1hdGgubWF4KHRoaXMuX2RlbGF5VGltZS1lLDApLHRoaXMuX2xmb0wubWF4PXRoaXMuX2RlbGF5VGltZStlLHRoaXMuX2xmb1IubWluPU1hdGgubWF4KHRoaXMuX2RlbGF5VGltZS1lLDApLHRoaXMuX2xmb1IubWF4PXRoaXMuX2RlbGF5VGltZStlfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkNob3J1cy5wcm90b3R5cGUsXCJkZWxheVRpbWVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDFlMyp0aGlzLl9kZWxheVRpbWV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9kZWxheVRpbWU9dC8xZTMsdGhpcy5kZXB0aD10aGlzLl9kZXB0aH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5DaG9ydXMucHJvdG90eXBlLFwidHlwZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGZvTC50eXBlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbGZvTC50eXBlPXQsdGhpcy5fbGZvUi50eXBlPXR9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuQ2hvcnVzLnByb3RvdHlwZSxcInNwcmVhZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGZvUi5waGFzZS10aGlzLl9sZm9MLnBoYXNlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbGZvTC5waGFzZT05MC10LzIsdGhpcy5fbGZvUi5waGFzZT10LzIrOTB9fSksdC5DaG9ydXMucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5TdGVyZW9YRmVlZGJhY2tFZmZlY3QucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9sZm9MLmRpc3Bvc2UoKSx0aGlzLl9sZm9MPW51bGwsdGhpcy5fbGZvUi5kaXNwb3NlKCksdGhpcy5fbGZvUj1udWxsLHRoaXMuX2RlbGF5Tm9kZUwuZGlzY29ubmVjdCgpLHRoaXMuX2RlbGF5Tm9kZUw9bnVsbCx0aGlzLl9kZWxheU5vZGVSLmRpc2Nvbm5lY3QoKSx0aGlzLl9kZWxheU5vZGVSPW51bGwsdGhpcy5fd3JpdGFibGUoXCJmcmVxdWVuY3lcIiksdGhpcy5mcmVxdWVuY3k9bnVsbCx0aGlzfSx0LkNob3J1c30pLE1vZHVsZShmdW5jdGlvbih0KXtyZXR1cm4gdC5Db252b2x2ZXI9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnNPYmplY3QoYXJndW1lbnRzLFtcInVybFwiXSx0LkNvbnZvbHZlci5kZWZhdWx0cyk7dC5FZmZlY3QuY2FsbCh0aGlzLGUpLHRoaXMuX2NvbnZvbHZlcj10aGlzLmNvbnRleHQuY3JlYXRlQ29udm9sdmVyKCksdGhpcy5fYnVmZmVyPW5ldyB0LkJ1ZmZlcihlLnVybCxmdW5jdGlvbih0KXt0aGlzLmJ1ZmZlcj10LGUub25sb2FkKCl9LmJpbmQodGhpcykpLHRoaXMuY29ubmVjdEVmZmVjdCh0aGlzLl9jb252b2x2ZXIpfSx0LmV4dGVuZCh0LkNvbnZvbHZlcix0LkVmZmVjdCksdC5Db252b2x2ZXIuZGVmYXVsdHM9e3VybDpcIlwiLG9ubG9hZDp0Lm5vT3B9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkNvbnZvbHZlci5wcm90b3R5cGUsXCJidWZmZXJcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2J1ZmZlci5nZXQoKX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2J1ZmZlci5zZXQodCksdGhpcy5fY29udm9sdmVyLmJ1ZmZlcj10aGlzLl9idWZmZXIuZ2V0KCl9fSksdC5Db252b2x2ZXIucHJvdG90eXBlLmxvYWQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5fYnVmZmVyLmxvYWQodCxmdW5jdGlvbih0KXt0aGlzLmJ1ZmZlcj10LGUmJmUoKX0uYmluZCh0aGlzKSksdGhpc30sdC5Db252b2x2ZXIucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5FZmZlY3QucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9jb252b2x2ZXIuZGlzY29ubmVjdCgpLHRoaXMuX2NvbnZvbHZlcj1udWxsLHRoaXMuX2J1ZmZlci5kaXNwb3NlKCksdGhpcy5fYnVmZmVyPW51bGwsdGhpc30sdC5Db252b2x2ZXJ9KSxNb2R1bGUoZnVuY3Rpb24odCl7cmV0dXJuIHQuRGlzdG9ydGlvbj1mdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9uc09iamVjdChhcmd1bWVudHMsW1wiZGlzdG9ydGlvblwiXSx0LkRpc3RvcnRpb24uZGVmYXVsdHMpO3QuRWZmZWN0LmNhbGwodGhpcyxlKSx0aGlzLl9zaGFwZXI9bmV3IHQuV2F2ZVNoYXBlcig0MDk2KSx0aGlzLl9kaXN0b3J0aW9uPWUuZGlzdG9ydGlvbix0aGlzLmNvbm5lY3RFZmZlY3QodGhpcy5fc2hhcGVyKSx0aGlzLmRpc3RvcnRpb249ZS5kaXN0b3J0aW9uLHRoaXMub3ZlcnNhbXBsZT1lLm92ZXJzYW1wbGV9LHQuZXh0ZW5kKHQuRGlzdG9ydGlvbix0LkVmZmVjdCksdC5EaXN0b3J0aW9uLmRlZmF1bHRzPXtkaXN0b3J0aW9uOi40LG92ZXJzYW1wbGU6XCJub25lXCJ9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkRpc3RvcnRpb24ucHJvdG90eXBlLFwiZGlzdG9ydGlvblwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGlzdG9ydGlvbn0sc2V0OmZ1bmN0aW9uKHQpe3ZhciBlLGk7dGhpcy5fZGlzdG9ydGlvbj10LGU9MTAwKnQsaT1NYXRoLlBJLzE4MCx0aGlzLl9zaGFwZXIuc2V0TWFwKGZ1bmN0aW9uKHQpe3JldHVybiBNYXRoLmFicyh0KTwuMDAxPzA6KDMrZSkqdCoyMCppLyhNYXRoLlBJK2UqTWF0aC5hYnModCkpfSl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuRGlzdG9ydGlvbi5wcm90b3R5cGUsXCJvdmVyc2FtcGxlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zaGFwZXIub3ZlcnNhbXBsZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3NoYXBlci5vdmVyc2FtcGxlPXR9fSksdC5EaXN0b3J0aW9uLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQuRWZmZWN0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fc2hhcGVyLmRpc3Bvc2UoKSx0aGlzLl9zaGFwZXI9bnVsbCx0aGlzfSx0LkRpc3RvcnRpb259KSxNb2R1bGUoZnVuY3Rpb24odCl7cmV0dXJuIHQuRmVlZGJhY2tEZWxheT1mdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9uc09iamVjdChhcmd1bWVudHMsW1wiZGVsYXlUaW1lXCIsXCJmZWVkYmFja1wiXSx0LkZlZWRiYWNrRGVsYXkuZGVmYXVsdHMpO3QuRmVlZGJhY2tFZmZlY3QuY2FsbCh0aGlzLGUpLHRoaXMuZGVsYXlUaW1lPW5ldyB0LlNpZ25hbChlLmRlbGF5VGltZSx0LlR5cGUuVGltZSksdGhpcy5fZGVsYXlOb2RlPXRoaXMuY29udGV4dC5jcmVhdGVEZWxheSg0KSx0aGlzLmNvbm5lY3RFZmZlY3QodGhpcy5fZGVsYXlOb2RlKSx0aGlzLmRlbGF5VGltZS5jb25uZWN0KHRoaXMuX2RlbGF5Tm9kZS5kZWxheVRpbWUpLHRoaXMuX3JlYWRPbmx5KFtcImRlbGF5VGltZVwiXSl9LHQuZXh0ZW5kKHQuRmVlZGJhY2tEZWxheSx0LkZlZWRiYWNrRWZmZWN0KSx0LkZlZWRiYWNrRGVsYXkuZGVmYXVsdHM9e2RlbGF5VGltZTouMjV9LHQuRmVlZGJhY2tEZWxheS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LkZlZWRiYWNrRWZmZWN0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5kZWxheVRpbWUuZGlzcG9zZSgpLHRoaXMuX2RlbGF5Tm9kZS5kaXNjb25uZWN0KCksdGhpcy5fZGVsYXlOb2RlPW51bGwsdGhpcy5fd3JpdGFibGUoW1wiZGVsYXlUaW1lXCJdKSx0aGlzLmRlbGF5VGltZT1udWxsLHRoaXN9LHQuRmVlZGJhY2tEZWxheX0pLE1vZHVsZShmdW5jdGlvbih0KXt2YXIgZT1bMTU1Ny80NDEwMCwxNjE3LzQ0MTAwLDE0OTEvNDQxMDAsMTQyMi80NDEwMCwxMjc3LzQ0MTAwLDEzNTYvNDQxMDAsMTE4OC80NDEwMCwxMTE2LzQ0MTAwXSxpPVsyMjUsNTU2LDQ0MSwzNDFdO3JldHVybiB0LkZyZWV2ZXJiPWZ1bmN0aW9uKCl7dmFyIHMsbixvLHIsYSxsLGg9dGhpcy5vcHRpb25zT2JqZWN0KGFyZ3VtZW50cyxbXCJyb29tU2l6ZVwiLFwiZGFtcGVuaW5nXCJdLHQuRnJlZXZlcmIuZGVmYXVsdHMpO2Zvcih0LlN0ZXJlb0VmZmVjdC5jYWxsKHRoaXMsaCksdGhpcy5yb29tU2l6ZT1uZXcgdC5TaWduYWwoaC5yb29tU2l6ZSx0LlR5cGUuTm9ybWFsUmFuZ2UpLHRoaXMuZGFtcGVuaW5nPW5ldyB0LlNpZ25hbChoLmRhbXBlbmluZyx0LlR5cGUuRnJlcXVlbmN5KSx0aGlzLl9jb21iRmlsdGVycz1bXSx0aGlzLl9hbGxwYXNzRmlsdGVyc0w9W10sdGhpcy5fYWxscGFzc0ZpbHRlcnNSPVtdLHM9MDtzPGkubGVuZ3RoO3MrKyluPXRoaXMuY29udGV4dC5jcmVhdGVCaXF1YWRGaWx0ZXIoKSxuLnR5cGU9XCJhbGxwYXNzXCIsbi5mcmVxdWVuY3kudmFsdWU9aVtzXSx0aGlzLl9hbGxwYXNzRmlsdGVyc0wucHVzaChuKTtmb3Iobz0wO288aS5sZW5ndGg7bysrKXI9dGhpcy5jb250ZXh0LmNyZWF0ZUJpcXVhZEZpbHRlcigpLHIudHlwZT1cImFsbHBhc3NcIixyLmZyZXF1ZW5jeS52YWx1ZT1pW29dLHRoaXMuX2FsbHBhc3NGaWx0ZXJzUi5wdXNoKHIpO2ZvcihhPTA7YTxlLmxlbmd0aDthKyspbD1uZXcgdC5Mb3dwYXNzQ29tYkZpbHRlcihlW2FdKSxhPGUubGVuZ3RoLzI/dGhpcy5lZmZlY3RTZW5kTC5jaGFpbihsLHRoaXMuX2FsbHBhc3NGaWx0ZXJzTFswXSk6dGhpcy5lZmZlY3RTZW5kUi5jaGFpbihsLHRoaXMuX2FsbHBhc3NGaWx0ZXJzUlswXSksdGhpcy5yb29tU2l6ZS5jb25uZWN0KGwucmVzb25hbmNlKSx0aGlzLmRhbXBlbmluZy5jb25uZWN0KGwuZGFtcGVuaW5nKSx0aGlzLl9jb21iRmlsdGVycy5wdXNoKGwpO3RoaXMuY29ubmVjdFNlcmllcy5hcHBseSh0aGlzLHRoaXMuX2FsbHBhc3NGaWx0ZXJzTCksdGhpcy5jb25uZWN0U2VyaWVzLmFwcGx5KHRoaXMsdGhpcy5fYWxscGFzc0ZpbHRlcnNSKSx0aGlzLl9hbGxwYXNzRmlsdGVyc0xbdGhpcy5fYWxscGFzc0ZpbHRlcnNMLmxlbmd0aC0xXS5jb25uZWN0KHRoaXMuZWZmZWN0UmV0dXJuTCksdGhpcy5fYWxscGFzc0ZpbHRlcnNSW3RoaXMuX2FsbHBhc3NGaWx0ZXJzUi5sZW5ndGgtMV0uY29ubmVjdCh0aGlzLmVmZmVjdFJldHVyblIpLHRoaXMuX3JlYWRPbmx5KFtcInJvb21TaXplXCIsXCJkYW1wZW5pbmdcIl0pfSx0LmV4dGVuZCh0LkZyZWV2ZXJiLHQuU3RlcmVvRWZmZWN0KSx0LkZyZWV2ZXJiLmRlZmF1bHRzPXtyb29tU2l6ZTouNyxkYW1wZW5pbmc6M2UzfSx0LkZyZWV2ZXJiLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dmFyIGUsaSxzO2Zvcih0LlN0ZXJlb0VmZmVjdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLGU9MDtlPHRoaXMuX2FsbHBhc3NGaWx0ZXJzTC5sZW5ndGg7ZSsrKXRoaXMuX2FsbHBhc3NGaWx0ZXJzTFtlXS5kaXNjb25uZWN0KCksdGhpcy5fYWxscGFzc0ZpbHRlcnNMW2VdPW51bGw7Zm9yKHRoaXMuX2FsbHBhc3NGaWx0ZXJzTD1udWxsLGk9MDtpPHRoaXMuX2FsbHBhc3NGaWx0ZXJzUi5sZW5ndGg7aSsrKXRoaXMuX2FsbHBhc3NGaWx0ZXJzUltpXS5kaXNjb25uZWN0KCksdGhpcy5fYWxscGFzc0ZpbHRlcnNSW2ldPW51bGw7Zm9yKHRoaXMuX2FsbHBhc3NGaWx0ZXJzUj1udWxsLHM9MDtzPHRoaXMuX2NvbWJGaWx0ZXJzLmxlbmd0aDtzKyspdGhpcy5fY29tYkZpbHRlcnNbc10uZGlzcG9zZSgpLHRoaXMuX2NvbWJGaWx0ZXJzW3NdPW51bGw7cmV0dXJuIHRoaXMuX2NvbWJGaWx0ZXJzPW51bGwsdGhpcy5fd3JpdGFibGUoW1wicm9vbVNpemVcIixcImRhbXBlbmluZ1wiXSksdGhpcy5yb29tU2l6ZS5kaXNwb3NlKCksdGhpcy5yb29tU2l6ZT1udWxsLHRoaXMuZGFtcGVuaW5nLmRpc3Bvc2UoKSx0aGlzLmRhbXBlbmluZz1udWxsLFxudGhpc30sdC5GcmVldmVyYn0pLE1vZHVsZShmdW5jdGlvbih0KXt2YXIgZT1bLjA2NzQ4LC4wNjQwNCwuMDgyMTIsLjA5MDA0XSxpPVsuNzczLC44MDIsLjc1MywuNzMzXSxzPVszNDcsMTEzLDM3XTtyZXR1cm4gdC5KQ1JldmVyYj1mdW5jdGlvbigpe3ZhciBuLG8scixhLGw9dGhpcy5vcHRpb25zT2JqZWN0KGFyZ3VtZW50cyxbXCJyb29tU2l6ZVwiXSx0LkpDUmV2ZXJiLmRlZmF1bHRzKTtmb3IodC5TdGVyZW9FZmZlY3QuY2FsbCh0aGlzLGwpLHRoaXMucm9vbVNpemU9bmV3IHQuU2lnbmFsKGwucm9vbVNpemUsdC5UeXBlLk5vcm1hbFJhbmdlKSx0aGlzLl9zY2FsZVJvb21TaXplPW5ldyB0LlNjYWxlKC0uNzMzLC4xOTcpLHRoaXMuX2FsbHBhc3NGaWx0ZXJzPVtdLHRoaXMuX2ZlZWRiYWNrQ29tYkZpbHRlcnM9W10sbj0wO248cy5sZW5ndGg7bisrKW89dGhpcy5jb250ZXh0LmNyZWF0ZUJpcXVhZEZpbHRlcigpLG8udHlwZT1cImFsbHBhc3NcIixvLmZyZXF1ZW5jeS52YWx1ZT1zW25dLHRoaXMuX2FsbHBhc3NGaWx0ZXJzLnB1c2gobyk7Zm9yKHI9MDtyPGUubGVuZ3RoO3IrKylhPW5ldyB0LkZlZWRiYWNrQ29tYkZpbHRlcihlW3JdLC4xKSx0aGlzLl9zY2FsZVJvb21TaXplLmNvbm5lY3QoYS5yZXNvbmFuY2UpLGEucmVzb25hbmNlLnZhbHVlPWlbcl0sdGhpcy5fYWxscGFzc0ZpbHRlcnNbdGhpcy5fYWxscGFzc0ZpbHRlcnMubGVuZ3RoLTFdLmNvbm5lY3QoYSksYS5jb25uZWN0KHI8ZS5sZW5ndGgvMj90aGlzLmVmZmVjdFJldHVybkw6dGhpcy5lZmZlY3RSZXR1cm5SKSx0aGlzLl9mZWVkYmFja0NvbWJGaWx0ZXJzLnB1c2goYSk7dGhpcy5yb29tU2l6ZS5jb25uZWN0KHRoaXMuX3NjYWxlUm9vbVNpemUpLHRoaXMuY29ubmVjdFNlcmllcy5hcHBseSh0aGlzLHRoaXMuX2FsbHBhc3NGaWx0ZXJzKSx0aGlzLmVmZmVjdFNlbmRMLmNvbm5lY3QodGhpcy5fYWxscGFzc0ZpbHRlcnNbMF0pLHRoaXMuZWZmZWN0U2VuZFIuY29ubmVjdCh0aGlzLl9hbGxwYXNzRmlsdGVyc1swXSksdGhpcy5fcmVhZE9ubHkoW1wicm9vbVNpemVcIl0pfSx0LmV4dGVuZCh0LkpDUmV2ZXJiLHQuU3RlcmVvRWZmZWN0KSx0LkpDUmV2ZXJiLmRlZmF1bHRzPXtyb29tU2l6ZTouNX0sdC5KQ1JldmVyYi5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3ZhciBlLGk7Zm9yKHQuU3RlcmVvRWZmZWN0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksZT0wO2U8dGhpcy5fYWxscGFzc0ZpbHRlcnMubGVuZ3RoO2UrKyl0aGlzLl9hbGxwYXNzRmlsdGVyc1tlXS5kaXNjb25uZWN0KCksdGhpcy5fYWxscGFzc0ZpbHRlcnNbZV09bnVsbDtmb3IodGhpcy5fYWxscGFzc0ZpbHRlcnM9bnVsbCxpPTA7aTx0aGlzLl9mZWVkYmFja0NvbWJGaWx0ZXJzLmxlbmd0aDtpKyspdGhpcy5fZmVlZGJhY2tDb21iRmlsdGVyc1tpXS5kaXNwb3NlKCksdGhpcy5fZmVlZGJhY2tDb21iRmlsdGVyc1tpXT1udWxsO3JldHVybiB0aGlzLl9mZWVkYmFja0NvbWJGaWx0ZXJzPW51bGwsdGhpcy5fd3JpdGFibGUoW1wicm9vbVNpemVcIl0pLHRoaXMucm9vbVNpemUuZGlzcG9zZSgpLHRoaXMucm9vbVNpemU9bnVsbCx0aGlzLl9zY2FsZVJvb21TaXplLmRpc3Bvc2UoKSx0aGlzLl9zY2FsZVJvb21TaXplPW51bGwsdGhpc30sdC5KQ1JldmVyYn0pLE1vZHVsZShmdW5jdGlvbih0KXtyZXR1cm4gdC5NaWRTaWRlRWZmZWN0PWZ1bmN0aW9uKCl7dC5FZmZlY3QuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuX21pZFNpZGVTcGxpdD1uZXcgdC5NaWRTaWRlU3BsaXQsdGhpcy5fbWlkU2lkZU1lcmdlPW5ldyB0Lk1pZFNpZGVNZXJnZSx0aGlzLm1pZFNlbmQ9dGhpcy5fbWlkU2lkZVNwbGl0Lm1pZCx0aGlzLnNpZGVTZW5kPXRoaXMuX21pZFNpZGVTcGxpdC5zaWRlLHRoaXMubWlkUmV0dXJuPXRoaXMuX21pZFNpZGVNZXJnZS5taWQsdGhpcy5zaWRlUmV0dXJuPXRoaXMuX21pZFNpZGVNZXJnZS5zaWRlLHRoaXMuZWZmZWN0U2VuZC5jb25uZWN0KHRoaXMuX21pZFNpZGVTcGxpdCksdGhpcy5fbWlkU2lkZU1lcmdlLmNvbm5lY3QodGhpcy5lZmZlY3RSZXR1cm4pfSx0LmV4dGVuZCh0Lk1pZFNpZGVFZmZlY3QsdC5FZmZlY3QpLHQuTWlkU2lkZUVmZmVjdC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LkVmZmVjdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX21pZFNpZGVTcGxpdC5kaXNwb3NlKCksdGhpcy5fbWlkU2lkZVNwbGl0PW51bGwsdGhpcy5fbWlkU2lkZU1lcmdlLmRpc3Bvc2UoKSx0aGlzLl9taWRTaWRlTWVyZ2U9bnVsbCx0aGlzLm1pZFNlbmQ9bnVsbCx0aGlzLnNpZGVTZW5kPW51bGwsdGhpcy5taWRSZXR1cm49bnVsbCx0aGlzLnNpZGVSZXR1cm49bnVsbCx0aGlzfSx0Lk1pZFNpZGVFZmZlY3R9KSxNb2R1bGUoZnVuY3Rpb24odCl7cmV0dXJuIHQuUGhhc2VyPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zT2JqZWN0KGFyZ3VtZW50cyxbXCJmcmVxdWVuY3lcIixcIm9jdGF2ZXNcIixcImJhc2VGcmVxdWVuY3lcIl0sdC5QaGFzZXIuZGVmYXVsdHMpO3QuU3RlcmVvRWZmZWN0LmNhbGwodGhpcyxlKSx0aGlzLl9sZm9MPW5ldyB0LkxGTyhlLmZyZXF1ZW5jeSwwLDEpLHRoaXMuX2xmb1I9bmV3IHQuTEZPKGUuZnJlcXVlbmN5LDAsMSksdGhpcy5fbGZvUi5waGFzZT0xODAsdGhpcy5fYmFzZUZyZXF1ZW5jeT1lLmJhc2VGcmVxdWVuY3ksdGhpcy5fb2N0YXZlcz1lLm9jdGF2ZXMsdGhpcy5RPW5ldyB0LlNpZ25hbChlLlEsdC5UeXBlLlBvc2l0aXZlKSx0aGlzLl9maWx0ZXJzTD10aGlzLl9tYWtlRmlsdGVycyhlLnN0YWdlcyx0aGlzLl9sZm9MLHRoaXMuUSksdGhpcy5fZmlsdGVyc1I9dGhpcy5fbWFrZUZpbHRlcnMoZS5zdGFnZXMsdGhpcy5fbGZvUix0aGlzLlEpLHRoaXMuZnJlcXVlbmN5PXRoaXMuX2xmb0wuZnJlcXVlbmN5LHRoaXMuZnJlcXVlbmN5LnZhbHVlPWUuZnJlcXVlbmN5LHRoaXMuZWZmZWN0U2VuZEwuY29ubmVjdCh0aGlzLl9maWx0ZXJzTFswXSksdGhpcy5lZmZlY3RTZW5kUi5jb25uZWN0KHRoaXMuX2ZpbHRlcnNSWzBdKSx0aGlzLl9maWx0ZXJzTFtlLnN0YWdlcy0xXS5jb25uZWN0KHRoaXMuZWZmZWN0UmV0dXJuTCksdGhpcy5fZmlsdGVyc1JbZS5zdGFnZXMtMV0uY29ubmVjdCh0aGlzLmVmZmVjdFJldHVyblIpLHRoaXMuX2xmb0wuZnJlcXVlbmN5LmNvbm5lY3QodGhpcy5fbGZvUi5mcmVxdWVuY3kpLHRoaXMuYmFzZUZyZXF1ZW5jeT1lLmJhc2VGcmVxdWVuY3ksdGhpcy5vY3RhdmVzPWUub2N0YXZlcyx0aGlzLl9sZm9MLnN0YXJ0KCksdGhpcy5fbGZvUi5zdGFydCgpLHRoaXMuX3JlYWRPbmx5KFtcImZyZXF1ZW5jeVwiLFwiUVwiXSl9LHQuZXh0ZW5kKHQuUGhhc2VyLHQuU3RlcmVvRWZmZWN0KSx0LlBoYXNlci5kZWZhdWx0cz17ZnJlcXVlbmN5Oi41LG9jdGF2ZXM6MyxzdGFnZXM6MTAsUToxMCxiYXNlRnJlcXVlbmN5OjM1MH0sdC5QaGFzZXIucHJvdG90eXBlLl9tYWtlRmlsdGVycz1mdW5jdGlvbih0LGUsaSl7dmFyIHMsbixvPW5ldyBBcnJheSh0KTtmb3Iocz0wO3Q+cztzKyspbj10aGlzLmNvbnRleHQuY3JlYXRlQmlxdWFkRmlsdGVyKCksbi50eXBlPVwiYWxscGFzc1wiLGkuY29ubmVjdChuLlEpLGUuY29ubmVjdChuLmZyZXF1ZW5jeSksb1tzXT1uO3JldHVybiB0aGlzLmNvbm5lY3RTZXJpZXMuYXBwbHkodGhpcyxvKSxvfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5QaGFzZXIucHJvdG90eXBlLFwib2N0YXZlc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb2N0YXZlc30sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX29jdGF2ZXM9dDt2YXIgZT10aGlzLl9iYXNlRnJlcXVlbmN5Kk1hdGgucG93KDIsdCk7dGhpcy5fbGZvTC5tYXg9ZSx0aGlzLl9sZm9SLm1heD1lfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlBoYXNlci5wcm90b3R5cGUsXCJiYXNlRnJlcXVlbmN5XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9iYXNlRnJlcXVlbmN5fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fYmFzZUZyZXF1ZW5jeT10LHRoaXMuX2xmb0wubWluPXQsdGhpcy5fbGZvUi5taW49dCx0aGlzLm9jdGF2ZXM9dGhpcy5fb2N0YXZlc319KSx0LlBoYXNlci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3ZhciBlLGk7Zm9yKHQuU3RlcmVvRWZmZWN0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fd3JpdGFibGUoW1wiZnJlcXVlbmN5XCIsXCJRXCJdKSx0aGlzLlEuZGlzcG9zZSgpLHRoaXMuUT1udWxsLHRoaXMuX2xmb0wuZGlzcG9zZSgpLHRoaXMuX2xmb0w9bnVsbCx0aGlzLl9sZm9SLmRpc3Bvc2UoKSx0aGlzLl9sZm9SPW51bGwsZT0wO2U8dGhpcy5fZmlsdGVyc0wubGVuZ3RoO2UrKyl0aGlzLl9maWx0ZXJzTFtlXS5kaXNjb25uZWN0KCksdGhpcy5fZmlsdGVyc0xbZV09bnVsbDtmb3IodGhpcy5fZmlsdGVyc0w9bnVsbCxpPTA7aTx0aGlzLl9maWx0ZXJzUi5sZW5ndGg7aSsrKXRoaXMuX2ZpbHRlcnNSW2ldLmRpc2Nvbm5lY3QoKSx0aGlzLl9maWx0ZXJzUltpXT1udWxsO3JldHVybiB0aGlzLl9maWx0ZXJzUj1udWxsLHRoaXMuZnJlcXVlbmN5PW51bGwsdGhpc30sdC5QaGFzZXJ9KSxNb2R1bGUoZnVuY3Rpb24odCl7cmV0dXJuIHQuUGluZ1BvbmdEZWxheT1mdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9uc09iamVjdChhcmd1bWVudHMsW1wiZGVsYXlUaW1lXCIsXCJmZWVkYmFja1wiXSx0LlBpbmdQb25nRGVsYXkuZGVmYXVsdHMpO3QuU3RlcmVvWEZlZWRiYWNrRWZmZWN0LmNhbGwodGhpcyxlKSx0aGlzLl9sZWZ0RGVsYXk9dGhpcy5jb250ZXh0LmNyZWF0ZURlbGF5KGUubWF4RGVsYXlUaW1lKSx0aGlzLl9yaWdodERlbGF5PXRoaXMuY29udGV4dC5jcmVhdGVEZWxheShlLm1heERlbGF5VGltZSksdGhpcy5fcmlnaHRQcmVEZWxheT10aGlzLmNvbnRleHQuY3JlYXRlRGVsYXkoZS5tYXhEZWxheVRpbWUpLHRoaXMuZGVsYXlUaW1lPW5ldyB0LlNpZ25hbChlLmRlbGF5VGltZSx0LlR5cGUuVGltZSksdGhpcy5lZmZlY3RTZW5kTC5jaGFpbih0aGlzLl9sZWZ0RGVsYXksdGhpcy5lZmZlY3RSZXR1cm5MKSx0aGlzLmVmZmVjdFNlbmRSLmNoYWluKHRoaXMuX3JpZ2h0UHJlRGVsYXksdGhpcy5fcmlnaHREZWxheSx0aGlzLmVmZmVjdFJldHVyblIpLHRoaXMuZGVsYXlUaW1lLmZhbih0aGlzLl9sZWZ0RGVsYXkuZGVsYXlUaW1lLHRoaXMuX3JpZ2h0RGVsYXkuZGVsYXlUaW1lLHRoaXMuX3JpZ2h0UHJlRGVsYXkuZGVsYXlUaW1lKSx0aGlzLl9mZWVkYmFja0xSLmRpc2Nvbm5lY3QoKSx0aGlzLl9mZWVkYmFja0xSLmNvbm5lY3QodGhpcy5fcmlnaHREZWxheSksdGhpcy5fcmVhZE9ubHkoW1wiZGVsYXlUaW1lXCJdKX0sdC5leHRlbmQodC5QaW5nUG9uZ0RlbGF5LHQuU3RlcmVvWEZlZWRiYWNrRWZmZWN0KSx0LlBpbmdQb25nRGVsYXkuZGVmYXVsdHM9e2RlbGF5VGltZTouMjUsbWF4RGVsYXlUaW1lOjF9LHQuUGluZ1BvbmdEZWxheS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LlN0ZXJlb1hGZWVkYmFja0VmZmVjdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX2xlZnREZWxheS5kaXNjb25uZWN0KCksdGhpcy5fbGVmdERlbGF5PW51bGwsdGhpcy5fcmlnaHREZWxheS5kaXNjb25uZWN0KCksdGhpcy5fcmlnaHREZWxheT1udWxsLHRoaXMuX3JpZ2h0UHJlRGVsYXkuZGlzY29ubmVjdCgpLHRoaXMuX3JpZ2h0UHJlRGVsYXk9bnVsbCx0aGlzLl93cml0YWJsZShbXCJkZWxheVRpbWVcIl0pLHRoaXMuZGVsYXlUaW1lLmRpc3Bvc2UoKSx0aGlzLmRlbGF5VGltZT1udWxsLHRoaXN9LHQuUGluZ1BvbmdEZWxheX0pLE1vZHVsZShmdW5jdGlvbih0KXtyZXR1cm4gdC5QaXRjaFNoaWZ0PWZ1bmN0aW9uKCl7dmFyIGUsaT10aGlzLm9wdGlvbnNPYmplY3QoYXJndW1lbnRzLFtcInBpdGNoXCJdLHQuUGl0Y2hTaGlmdC5kZWZhdWx0cyk7dC5GZWVkYmFja0VmZmVjdC5jYWxsKHRoaXMsaSksdGhpcy5fZnJlcXVlbmN5PW5ldyB0LlNpZ25hbCgwKSx0aGlzLl9kZWxheUE9bmV3IHQuRGVsYXkoMCwxKSx0aGlzLl9sZm9BPW5ldyB0LkxGTyh7bWluOjAsbWF4Oi4xLHR5cGU6XCJzYXd0b290aFwifSkuY29ubmVjdCh0aGlzLl9kZWxheUEuZGVsYXlUaW1lKSx0aGlzLl9kZWxheUI9bmV3IHQuRGVsYXkoMCwxKSx0aGlzLl9sZm9CPW5ldyB0LkxGTyh7bWluOjAsbWF4Oi4xLHR5cGU6XCJzYXd0b290aFwiLHBoYXNlOjE4MH0pLmNvbm5lY3QodGhpcy5fZGVsYXlCLmRlbGF5VGltZSksdGhpcy5fY3Jvc3NGYWRlPW5ldyB0LkNyb3NzRmFkZSx0aGlzLl9jcm9zc0ZhZGVMRk89bmV3IHQuTEZPKHttaW46MCxtYXg6MSx0eXBlOlwidHJpYW5nbGVcIixwaGFzZTo5MH0pLmNvbm5lY3QodGhpcy5fY3Jvc3NGYWRlLmZhZGUpLHRoaXMuX2ZlZWRiYWNrRGVsYXk9bmV3IHQuRGVsYXkoaS5kZWxheVRpbWUpLHRoaXMuZGVsYXlUaW1lPXRoaXMuX2ZlZWRiYWNrRGVsYXkuZGVsYXlUaW1lLHRoaXMuX3JlYWRPbmx5KFwiZGVsYXlUaW1lXCIpLHRoaXMuX3BpdGNoPWkucGl0Y2gsdGhpcy5fd2luZG93U2l6ZT1pLndpbmRvd1NpemUsdGhpcy5fZGVsYXlBLmNvbm5lY3QodGhpcy5fY3Jvc3NGYWRlLmEpLHRoaXMuX2RlbGF5Qi5jb25uZWN0KHRoaXMuX2Nyb3NzRmFkZS5iKSx0aGlzLl9mcmVxdWVuY3kuZmFuKHRoaXMuX2xmb0EuZnJlcXVlbmN5LHRoaXMuX2xmb0IuZnJlcXVlbmN5LHRoaXMuX2Nyb3NzRmFkZUxGTy5mcmVxdWVuY3kpLHRoaXMuZWZmZWN0U2VuZC5mYW4odGhpcy5fZGVsYXlBLHRoaXMuX2RlbGF5QiksdGhpcy5fY3Jvc3NGYWRlLmNoYWluKHRoaXMuX2ZlZWRiYWNrRGVsYXksdGhpcy5lZmZlY3RSZXR1cm4pLGU9dGhpcy5ub3coKSx0aGlzLl9sZm9BLnN0YXJ0KGUpLHRoaXMuX2xmb0Iuc3RhcnQoZSksdGhpcy5fY3Jvc3NGYWRlTEZPLnN0YXJ0KGUpLHRoaXMud2luZG93U2l6ZT10aGlzLl93aW5kb3dTaXplfSx0LmV4dGVuZCh0LlBpdGNoU2hpZnQsdC5GZWVkYmFja0VmZmVjdCksdC5QaXRjaFNoaWZ0LmRlZmF1bHRzPXtwaXRjaDowLHdpbmRvd1NpemU6LjEsZGVsYXlUaW1lOjAsZmVlZGJhY2s6MH0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuUGl0Y2hTaGlmdC5wcm90b3R5cGUsXCJwaXRjaFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGl0Y2h9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9waXRjaD10O3ZhciBlPTA7MD50Pyh0aGlzLl9sZm9BLm1pbj0wLHRoaXMuX2xmb0EubWF4PXRoaXMuX3dpbmRvd1NpemUsdGhpcy5fbGZvQi5taW49MCx0aGlzLl9sZm9CLm1heD10aGlzLl93aW5kb3dTaXplLGU9dGhpcy5pbnRlcnZhbFRvRnJlcXVlbmN5UmF0aW8odC0xKSsxKToodGhpcy5fbGZvQS5taW49dGhpcy5fd2luZG93U2l6ZSx0aGlzLl9sZm9BLm1heD0wLHRoaXMuX2xmb0IubWluPXRoaXMuX3dpbmRvd1NpemUsdGhpcy5fbGZvQi5tYXg9MCxlPXRoaXMuaW50ZXJ2YWxUb0ZyZXF1ZW5jeVJhdGlvKHQpLTEpLHRoaXMuX2ZyZXF1ZW5jeS52YWx1ZT1lKigxLjIvdGhpcy5fd2luZG93U2l6ZSl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuUGl0Y2hTaGlmdC5wcm90b3R5cGUsXCJ3aW5kb3dTaXplXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl93aW5kb3dTaXplfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fd2luZG93U2l6ZT10aGlzLnRvU2Vjb25kcyh0KSx0aGlzLnBpdGNoPXRoaXMuX3BpdGNofX0pLHQuUGl0Y2hTaGlmdC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LkZlZWRiYWNrRWZmZWN0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fZnJlcXVlbmN5LmRpc3Bvc2UoKSx0aGlzLl9mcmVxdWVuY3k9bnVsbCx0aGlzLl9kZWxheUEuZGlzY29ubmVjdCgpLHRoaXMuX2RlbGF5QT1udWxsLHRoaXMuX2RlbGF5Qi5kaXNjb25uZWN0KCksdGhpcy5fZGVsYXlCPW51bGwsdGhpcy5fbGZvQS5kaXNwb3NlKCksdGhpcy5fbGZvQT1udWxsLHRoaXMuX2xmb0IuZGlzcG9zZSgpLHRoaXMuX2xmb0I9bnVsbCx0aGlzLl9jcm9zc0ZhZGUuZGlzcG9zZSgpLHRoaXMuX2Nyb3NzRmFkZT1udWxsLHRoaXMuX2Nyb3NzRmFkZUxGTy5kaXNwb3NlKCksdGhpcy5fY3Jvc3NGYWRlTEZPPW51bGwsdGhpcy5fd3JpdGFibGUoXCJkZWxheVRpbWVcIiksdGhpcy5fZmVlZGJhY2tEZWxheS5kaXNwb3NlKCksdGhpcy5fZmVlZGJhY2tEZWxheT1udWxsLHRoaXMuZGVsYXlUaW1lPW51bGwsdGhpc30sdC5QaXRjaFNoaWZ0fSksTW9kdWxlKGZ1bmN0aW9uKHQpe3JldHVybiB0LlN0ZXJlb0ZlZWRiYWNrRWZmZWN0PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zT2JqZWN0KGFyZ3VtZW50cyxbXCJmZWVkYmFja1wiXSx0LkZlZWRiYWNrRWZmZWN0LmRlZmF1bHRzKTt0LlN0ZXJlb0VmZmVjdC5jYWxsKHRoaXMsZSksdGhpcy5mZWVkYmFjaz1uZXcgdC5TaWduYWwoZS5mZWVkYmFjayx0LlR5cGUuTm9ybWFsUmFuZ2UpLHRoaXMuX2ZlZWRiYWNrTD10aGlzLmNvbnRleHQuY3JlYXRlR2FpbigpLHRoaXMuX2ZlZWRiYWNrUj10aGlzLmNvbnRleHQuY3JlYXRlR2FpbigpLHRoaXMuZWZmZWN0UmV0dXJuTC5jaGFpbih0aGlzLl9mZWVkYmFja0wsdGhpcy5lZmZlY3RTZW5kTCksdGhpcy5lZmZlY3RSZXR1cm5SLmNoYWluKHRoaXMuX2ZlZWRiYWNrUix0aGlzLmVmZmVjdFNlbmRSKSx0aGlzLmZlZWRiYWNrLmZhbih0aGlzLl9mZWVkYmFja0wuZ2Fpbix0aGlzLl9mZWVkYmFja1IuZ2FpbiksdGhpcy5fcmVhZE9ubHkoW1wiZmVlZGJhY2tcIl0pfSx0LmV4dGVuZCh0LlN0ZXJlb0ZlZWRiYWNrRWZmZWN0LHQuRmVlZGJhY2tFZmZlY3QpLHQuU3RlcmVvRmVlZGJhY2tFZmZlY3QucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5TdGVyZW9FZmZlY3QucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl93cml0YWJsZShbXCJmZWVkYmFja1wiXSksdGhpcy5mZWVkYmFjay5kaXNwb3NlKCksdGhpcy5mZWVkYmFjaz1udWxsLHRoaXMuX2ZlZWRiYWNrTC5kaXNjb25uZWN0KCksdGhpcy5fZmVlZGJhY2tMPW51bGwsdGhpcy5fZmVlZGJhY2tSLmRpc2Nvbm5lY3QoKSx0aGlzLl9mZWVkYmFja1I9bnVsbCx0aGlzfSx0LlN0ZXJlb0ZlZWRiYWNrRWZmZWN0fSksTW9kdWxlKGZ1bmN0aW9uKHQpe3JldHVybiB0LlN0ZXJlb1dpZGVuZXI9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnNPYmplY3QoYXJndW1lbnRzLFtcIndpZHRoXCJdLHQuU3RlcmVvV2lkZW5lci5kZWZhdWx0cyk7dC5NaWRTaWRlRWZmZWN0LmNhbGwodGhpcyxlKSx0aGlzLndpZHRoPW5ldyB0LlNpZ25hbChlLndpZHRoLHQuVHlwZS5Ob3JtYWxSYW5nZSksdGhpcy5fbWlkTXVsdD1uZXcgdC5FeHByKFwiJDAgKiAoJDEgKiAoMSAtICQyKSlcIiksdGhpcy5fc2lkZU11bHQ9bmV3IHQuRXhwcihcIiQwICogKCQxICogJDIpXCIpLHRoaXMuX3R3bz1uZXcgdC5TaWduYWwoMiksdGhpcy5fdHdvLmNvbm5lY3QodGhpcy5fbWlkTXVsdCwwLDEpLHRoaXMud2lkdGguY29ubmVjdCh0aGlzLl9taWRNdWx0LDAsMiksdGhpcy5fdHdvLmNvbm5lY3QodGhpcy5fc2lkZU11bHQsMCwxKSx0aGlzLndpZHRoLmNvbm5lY3QodGhpcy5fc2lkZU11bHQsMCwyKSx0aGlzLm1pZFNlbmQuY2hhaW4odGhpcy5fbWlkTXVsdCx0aGlzLm1pZFJldHVybiksdGhpcy5zaWRlU2VuZC5jaGFpbih0aGlzLl9zaWRlTXVsdCx0aGlzLnNpZGVSZXR1cm4pLHRoaXMuX3JlYWRPbmx5KFtcIndpZHRoXCJdKX0sdC5leHRlbmQodC5TdGVyZW9XaWRlbmVyLHQuTWlkU2lkZUVmZmVjdCksdC5TdGVyZW9XaWRlbmVyLmRlZmF1bHRzPXt3aWR0aDouNX0sdC5TdGVyZW9XaWRlbmVyLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQuTWlkU2lkZUVmZmVjdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3dyaXRhYmxlKFtcIndpZHRoXCJdKSx0aGlzLndpZHRoLmRpc3Bvc2UoKSx0aGlzLndpZHRoPW51bGwsdGhpcy5fbWlkTXVsdC5kaXNwb3NlKCksdGhpcy5fbWlkTXVsdD1udWxsLHRoaXMuX3NpZGVNdWx0LmRpc3Bvc2UoKSx0aGlzLl9zaWRlTXVsdD1udWxsLHRoaXMuX3R3by5kaXNwb3NlKCksdGhpcy5fdHdvPW51bGwsdGhpc30sdC5TdGVyZW9XaWRlbmVyfSksTW9kdWxlKGZ1bmN0aW9uKHQpe3JldHVybiB0LlRyZW1vbG89ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnNPYmplY3QoYXJndW1lbnRzLFtcImZyZXF1ZW5jeVwiLFwiZGVwdGhcIl0sdC5UcmVtb2xvLmRlZmF1bHRzKTt0LlN0ZXJlb0VmZmVjdC5jYWxsKHRoaXMsZSksdGhpcy5fbGZvTD1uZXcgdC5MRk8oe3BoYXNlOmUuc3ByZWFkLG1pbjoxLG1heDowfSksdGhpcy5fbGZvUj1uZXcgdC5MRk8oe3BoYXNlOmUuc3ByZWFkLG1pbjoxLG1heDowfSksdGhpcy5fYW1wbGl0dWRlTD1uZXcgdC5HYWluLHRoaXMuX2FtcGxpdHVkZVI9bmV3IHQuR2Fpbix0aGlzLmZyZXF1ZW5jeT1uZXcgdC5TaWduYWwoZS5mcmVxdWVuY3ksdC5UeXBlLkZyZXF1ZW5jeSksdGhpcy5kZXB0aD1uZXcgdC5TaWduYWwoZS5kZXB0aCx0LlR5cGUuTm9ybWFsUmFuZ2UpLHRoaXMuX3JlYWRPbmx5KFtcImZyZXF1ZW5jeVwiLFwiZGVwdGhcIl0pLHRoaXMuZWZmZWN0U2VuZEwuY2hhaW4odGhpcy5fYW1wbGl0dWRlTCx0aGlzLmVmZmVjdFJldHVybkwpLHRoaXMuZWZmZWN0U2VuZFIuY2hhaW4odGhpcy5fYW1wbGl0dWRlUix0aGlzLmVmZmVjdFJldHVyblIpLHRoaXMuX2xmb0wuY29ubmVjdCh0aGlzLl9hbXBsaXR1ZGVMLmdhaW4pLHRoaXMuX2xmb1IuY29ubmVjdCh0aGlzLl9hbXBsaXR1ZGVSLmdhaW4pLHRoaXMuZnJlcXVlbmN5LmZhbih0aGlzLl9sZm9MLmZyZXF1ZW5jeSx0aGlzLl9sZm9SLmZyZXF1ZW5jeSksdGhpcy5kZXB0aC5mYW4odGhpcy5fbGZvUi5hbXBsaXR1ZGUsdGhpcy5fbGZvTC5hbXBsaXR1ZGUpLHRoaXMudHlwZT1lLnR5cGUsdGhpcy5zcHJlYWQ9ZS5zcHJlYWR9LHQuZXh0ZW5kKHQuVHJlbW9sbyx0LlN0ZXJlb0VmZmVjdCksdC5UcmVtb2xvLmRlZmF1bHRzPXtmcmVxdWVuY3k6MTAsdHlwZTpcInNpbmVcIixkZXB0aDouNSxzcHJlYWQ6MTgwfSx0LlRyZW1vbG8ucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9sZm9MLnN0YXJ0KHQpLHRoaXMuX2xmb1Iuc3RhcnQodCksdGhpc30sdC5UcmVtb2xvLnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9sZm9MLnN0b3AodCksdGhpcy5fbGZvUi5zdG9wKHQpLHRoaXN9LHQuVHJlbW9sby5wcm90b3R5cGUuc3luYz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fbGZvTC5zeW5jKHQpLHRoaXMuX2xmb1Iuc3luYyh0KSx0aGlzfSx0LlRyZW1vbG8ucHJvdG90eXBlLnVuc3luYz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9sZm9MLnVuc3luYygpLHRoaXMuX2xmb1IudW5zeW5jKCksdGhpc30sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuVHJlbW9sby5wcm90b3R5cGUsXCJ0eXBlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sZm9MLnR5cGV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9sZm9MLnR5cGU9dCx0aGlzLl9sZm9SLnR5cGU9dH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5UcmVtb2xvLnByb3RvdHlwZSxcInNwcmVhZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGZvUi5waGFzZS10aGlzLl9sZm9MLnBoYXNlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbGZvTC5waGFzZT05MC10LzIsdGhpcy5fbGZvUi5waGFzZT10LzIrOTB9fSksdC5UcmVtb2xvLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQuU3RlcmVvRWZmZWN0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fd3JpdGFibGUoW1wiZnJlcXVlbmN5XCIsXCJkZXB0aFwiXSksdGhpcy5fbGZvTC5kaXNwb3NlKCksdGhpcy5fbGZvTD1udWxsLHRoaXMuX2xmb1IuZGlzcG9zZSgpLHRoaXMuX2xmb1I9bnVsbCx0aGlzLl9hbXBsaXR1ZGVMLmRpc3Bvc2UoKSx0aGlzLl9hbXBsaXR1ZGVMPW51bGwsdGhpcy5fYW1wbGl0dWRlUi5kaXNwb3NlKCksdGhpcy5fYW1wbGl0dWRlUj1udWxsLHRoaXMuZnJlcXVlbmN5PW51bGwsdGhpcy5kZXB0aD1udWxsLHRoaXN9LHQuVHJlbW9sb30pLE1vZHVsZShmdW5jdGlvbih0KXtyZXR1cm4gdC5WaWJyYXRvPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zT2JqZWN0KGFyZ3VtZW50cyxbXCJmcmVxdWVuY3lcIixcImRlcHRoXCJdLHQuVmlicmF0by5kZWZhdWx0cyk7dC5FZmZlY3QuY2FsbCh0aGlzLGUpLHRoaXMuX2RlbGF5Tm9kZT1uZXcgdC5EZWxheSgwLGUubWF4RGVsYXkpLHRoaXMuX2xmbz1uZXcgdC5MRk8oe3R5cGU6ZS50eXBlLG1pbjowLG1heDplLm1heERlbGF5LGZyZXF1ZW5jeTplLmZyZXF1ZW5jeSxwaGFzZTotOTB9KS5zdGFydCgpLmNvbm5lY3QodGhpcy5fZGVsYXlOb2RlLmRlbGF5VGltZSksdGhpcy5mcmVxdWVuY3k9dGhpcy5fbGZvLmZyZXF1ZW5jeSx0aGlzLmRlcHRoPXRoaXMuX2xmby5hbXBsaXR1ZGUsdGhpcy5kZXB0aC52YWx1ZT1lLmRlcHRoLHRoaXMuX3JlYWRPbmx5KFtcImZyZXF1ZW5jeVwiLFwiZGVwdGhcIl0pLHRoaXMuZWZmZWN0U2VuZC5jaGFpbih0aGlzLl9kZWxheU5vZGUsdGhpcy5lZmZlY3RSZXR1cm4pfSx0LmV4dGVuZCh0LlZpYnJhdG8sdC5FZmZlY3QpLHQuVmlicmF0by5kZWZhdWx0cz17bWF4RGVsYXk6LjAwNSxmcmVxdWVuY3k6NSxkZXB0aDouMSx0eXBlOlwic2luZVwifSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5WaWJyYXRvLnByb3RvdHlwZSxcInR5cGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xmby50eXBlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbGZvLnR5cGU9dH19KSx0LlZpYnJhdG8ucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0LkVmZmVjdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX2RlbGF5Tm9kZS5kaXNwb3NlKCksdGhpcy5fZGVsYXlOb2RlPW51bGwsdGhpcy5fbGZvLmRpc3Bvc2UoKSx0aGlzLl9sZm89bnVsbCx0aGlzLl93cml0YWJsZShbXCJmcmVxdWVuY3lcIixcImRlcHRoXCJdKSx0aGlzLmZyZXF1ZW5jeT1udWxsLHRoaXMuZGVwdGg9bnVsbH0sdC5WaWJyYXRvfSksTW9kdWxlKGZ1bmN0aW9uKHQpe3JldHVybiB0LkV2ZW50PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zT2JqZWN0KGFyZ3VtZW50cyxbXCJjYWxsYmFja1wiLFwidmFsdWVcIl0sdC5FdmVudC5kZWZhdWx0cyk7dGhpcy5fbG9vcD1lLmxvb3AsdGhpcy5jYWxsYmFjaz1lLmNhbGxiYWNrLHRoaXMudmFsdWU9ZS52YWx1ZSx0aGlzLl9sb29wU3RhcnQ9dGhpcy50b1RpY2tzKGUubG9vcFN0YXJ0KSx0aGlzLl9sb29wRW5kPXRoaXMudG9UaWNrcyhlLmxvb3BFbmQpLHRoaXMuX3N0YXRlPW5ldyB0LlRpbWVsaW5lU3RhdGUodC5TdGF0ZS5TdG9wcGVkKSx0aGlzLl9wbGF5YmFja1JhdGU9MSx0aGlzLl9zdGFydE9mZnNldD0wLHRoaXMucHJvYmFiaWxpdHk9ZS5wcm9iYWJpbGl0eSx0aGlzLmh1bWFuaXplPWUuaHVtYW5pemUsdGhpcy5tdXRlPWUubXV0ZSx0aGlzLnBsYXliYWNrUmF0ZT1lLnBsYXliYWNrUmF0ZX0sdC5leHRlbmQodC5FdmVudCksdC5FdmVudC5kZWZhdWx0cz17Y2FsbGJhY2s6dC5ub09wLGxvb3A6ITEsbG9vcEVuZDpcIjFtXCIsbG9vcFN0YXJ0OjAscGxheWJhY2tSYXRlOjEsdmFsdWU6bnVsbCxwcm9iYWJpbGl0eToxLG11dGU6ITEsaHVtYW5pemU6ITF9LHQuRXZlbnQucHJvdG90eXBlLl9yZXNjaGVkdWxlRXZlbnRzPWZ1bmN0aW9uKGUpe3JldHVybiBlPXRoaXMuZGVmYXVsdEFyZyhlLC0xKSx0aGlzLl9zdGF0ZS5mb3JFYWNoRnJvbShlLGZ1bmN0aW9uKGUpe3ZhciBpLHMsbjtlLnN0YXRlPT09dC5TdGF0ZS5TdGFydGVkJiYodGhpcy5pc1VuZGVmKGUuaWQpfHx0LlRyYW5zcG9ydC5jbGVhcihlLmlkKSxzPWUudGltZStNYXRoLnJvdW5kKHRoaXMuc3RhcnRPZmZzZXQvdGhpcy5fcGxheWJhY2tSYXRlKSx0aGlzLl9sb29wPyhpPTEvMCx0aGlzLmlzTnVtYmVyKHRoaXMuX2xvb3ApJiYoaT0odGhpcy5fbG9vcC0xKSp0aGlzLl9nZXRMb29wRHVyYXRpb24oKSksbj10aGlzLl9zdGF0ZS5nZXRFdmVudEFmdGVyKHMpLG51bGwhPT1uJiYoaT1NYXRoLm1pbihpLG4udGltZS1zKSksaSE9PTEvMCYmKHRoaXMuX3N0YXRlLnNldFN0YXRlQXRUaW1lKHQuU3RhdGUuU3RvcHBlZCxzK2krMSksaSs9XCJpXCIpLGUuaWQ9dC5UcmFuc3BvcnQuc2NoZWR1bGVSZXBlYXQodGhpcy5fdGljay5iaW5kKHRoaXMpLHRoaXMuX2dldExvb3BEdXJhdGlvbigpLnRvU3RyaW5nKCkrXCJpXCIscytcImlcIixpKSk6ZS5pZD10LlRyYW5zcG9ydC5zY2hlZHVsZSh0aGlzLl90aWNrLmJpbmQodGhpcykscytcImlcIikpfS5iaW5kKHRoaXMpKSx0aGlzfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5FdmVudC5wcm90b3R5cGUsXCJzdGF0ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RhdGUuZ2V0U3RhdGVBdFRpbWUodC5UcmFuc3BvcnQudGlja3MpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkV2ZW50LnByb3RvdHlwZSxcInN0YXJ0T2Zmc2V0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdGFydE9mZnNldH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3N0YXJ0T2Zmc2V0PXR9fSksdC5FdmVudC5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGU9dGhpcy50b1RpY2tzKGUpLHRoaXMuX3N0YXRlLmdldFN0YXRlQXRUaW1lKGUpPT09dC5TdGF0ZS5TdG9wcGVkJiYodGhpcy5fc3RhdGUuYWRkRXZlbnQoe3N0YXRlOnQuU3RhdGUuU3RhcnRlZCx0aW1lOmUsaWQ6dm9pZCAwfSksdGhpcy5fcmVzY2hlZHVsZUV2ZW50cyhlKSksdGhpc30sdC5FdmVudC5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbihlKXt2YXIgaSxzO3JldHVybiB0aGlzLmNhbmNlbChlKSxlPXRoaXMudG9UaWNrcyhlKSx0aGlzLl9zdGF0ZS5nZXRTdGF0ZUF0VGltZShlKT09PXQuU3RhdGUuU3RhcnRlZCYmKHRoaXMuX3N0YXRlLnNldFN0YXRlQXRUaW1lKHQuU3RhdGUuU3RvcHBlZCxlKSxpPXRoaXMuX3N0YXRlLmdldEV2ZW50QmVmb3JlKGUpLHM9ZSxudWxsIT09aSYmKHM9aS50aW1lKSx0aGlzLl9yZXNjaGVkdWxlRXZlbnRzKHMpKSx0aGlzfSx0LkV2ZW50LnByb3RvdHlwZS5jYW5jZWw9ZnVuY3Rpb24oZSl7cmV0dXJuIGU9dGhpcy5kZWZhdWx0QXJnKGUsLSgxLzApKSxlPXRoaXMudG9UaWNrcyhlKSx0aGlzLl9zdGF0ZS5mb3JFYWNoRnJvbShlLGZ1bmN0aW9uKGUpe3QuVHJhbnNwb3J0LmNsZWFyKGUuaWQpfSksdGhpcy5fc3RhdGUuY2FuY2VsKGUpLHRoaXN9LHQuRXZlbnQucHJvdG90eXBlLl90aWNrPWZ1bmN0aW9uKGUpe2lmKCF0aGlzLm11dGUmJnRoaXMuX3N0YXRlLmdldFN0YXRlQXRUaW1lKHQuVHJhbnNwb3J0LnRpY2tzKT09PXQuU3RhdGUuU3RhcnRlZCl7aWYodGhpcy5wcm9iYWJpbGl0eTwxJiZNYXRoLnJhbmRvbSgpPnRoaXMucHJvYmFiaWxpdHkpcmV0dXJuO2lmKHRoaXMuaHVtYW5pemUpe3ZhciBpPS4wMjt0aGlzLmlzQm9vbGVhbih0aGlzLmh1bWFuaXplKXx8KGk9dGhpcy50b1NlY29uZHModGhpcy5odW1hbml6ZSkpLGUrPSgyKk1hdGgucmFuZG9tKCktMSkqaX10aGlzLmNhbGxiYWNrKGUsdGhpcy52YWx1ZSl9fSx0LkV2ZW50LnByb3RvdHlwZS5fZ2V0TG9vcER1cmF0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIE1hdGgucm91bmQoKHRoaXMuX2xvb3BFbmQtdGhpcy5fbG9vcFN0YXJ0KS90aGlzLl9wbGF5YmFja1JhdGUpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5FdmVudC5wcm90b3R5cGUsXCJsb29wXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sb29wfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbG9vcD10LHRoaXMuX3Jlc2NoZWR1bGVFdmVudHMoKX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5FdmVudC5wcm90b3R5cGUsXCJwbGF5YmFja1JhdGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BsYXliYWNrUmF0ZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3BsYXliYWNrUmF0ZT10LHRoaXMuX3Jlc2NoZWR1bGVFdmVudHMoKX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5FdmVudC5wcm90b3R5cGUsXCJsb29wRW5kXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRvTm90YXRpb24odGhpcy5fbG9vcEVuZCtcImlcIil9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9sb29wRW5kPXRoaXMudG9UaWNrcyh0KSx0aGlzLl9sb29wJiZ0aGlzLl9yZXNjaGVkdWxlRXZlbnRzKCl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuRXZlbnQucHJvdG90eXBlLFwibG9vcFN0YXJ0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRvTm90YXRpb24odGhpcy5fbG9vcFN0YXJ0K1wiaVwiKX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2xvb3BTdGFydD10aGlzLnRvVGlja3ModCksdGhpcy5fbG9vcCYmdGhpcy5fcmVzY2hlZHVsZUV2ZW50cygpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LkV2ZW50LnByb3RvdHlwZSxcInByb2dyZXNzXCIse2dldDpmdW5jdGlvbigpe3ZhciBlLGkscyxuO3JldHVybiB0aGlzLl9sb29wPyhlPXQuVHJhbnNwb3J0LnRpY2tzLGk9dGhpcy5fc3RhdGUuZ2V0RXZlbnQoZSksbnVsbCE9PWkmJmkuc3RhdGU9PT10LlN0YXRlLlN0YXJ0ZWQ/KHM9dGhpcy5fZ2V0TG9vcER1cmF0aW9uKCksbj0oZS1pLnRpbWUpJXMsbi9zKTowKTowfX0pLHQuRXZlbnQucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLmNhbmNlbCgpLHRoaXMuX3N0YXRlLmRpc3Bvc2UoKSx0aGlzLl9zdGF0ZT1udWxsLHRoaXMuY2FsbGJhY2s9bnVsbCx0aGlzLnZhbHVlPW51bGx9LHQuRXZlbnR9KSxNb2R1bGUoZnVuY3Rpb24odCl7cmV0dXJuIHQuTG9vcD1mdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9uc09iamVjdChhcmd1bWVudHMsW1wiY2FsbGJhY2tcIixcImludGVydmFsXCJdLHQuTG9vcC5kZWZhdWx0cyk7dGhpcy5fZXZlbnQ9bmV3IHQuRXZlbnQoe2NhbGxiYWNrOnRoaXMuX3RpY2suYmluZCh0aGlzKSxsb29wOiEwLGxvb3BFbmQ6ZS5pbnRlcnZhbCxwbGF5YmFja1JhdGU6ZS5wbGF5YmFja1JhdGUscHJvYmFiaWxpdHk6ZS5wcm9iYWJpbGl0eX0pLHRoaXMuY2FsbGJhY2s9ZS5jYWxsYmFjayx0aGlzLml0ZXJhdGlvbnM9ZS5pdGVyYXRpb25zfSx0LmV4dGVuZCh0Lkxvb3ApLHQuTG9vcC5kZWZhdWx0cz17aW50ZXJ2YWw6XCI0blwiLGNhbGxiYWNrOnQubm9PcCxwbGF5YmFja1JhdGU6MSxpdGVyYXRpb25zOjEvMCxwcm9iYWJpbGl0eTohMCxtdXRlOiExfSx0Lkxvb3AucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9ldmVudC5zdGFydCh0KSx0aGlzfSx0Lkxvb3AucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2V2ZW50LnN0b3AodCksdGhpc30sdC5Mb29wLnByb3RvdHlwZS5jYW5jZWw9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2V2ZW50LmNhbmNlbCh0KSx0aGlzfSx0Lkxvb3AucHJvdG90eXBlLl90aWNrPWZ1bmN0aW9uKHQpe3RoaXMuY2FsbGJhY2sodCl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0Lkxvb3AucHJvdG90eXBlLFwic3RhdGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2V2ZW50LnN0YXRlfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0Lkxvb3AucHJvdG90eXBlLFwicHJvZ3Jlc3NcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2V2ZW50LnByb2dyZXNzfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0Lkxvb3AucHJvdG90eXBlLFwiaW50ZXJ2YWxcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2V2ZW50Lmxvb3BFbmR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9ldmVudC5sb29wRW5kPXR9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuTG9vcC5wcm90b3R5cGUsXCJwbGF5YmFja1JhdGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2V2ZW50LnBsYXliYWNrUmF0ZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2V2ZW50LnBsYXliYWNrUmF0ZT10fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0Lkxvb3AucHJvdG90eXBlLFwiaHVtYW5pemVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2V2ZW50Lmh1bWFuaXplfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fZXZlbnQuaHVtYW5pemU9dH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5Mb29wLnByb3RvdHlwZSxcInByb2JhYmlsaXR5XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ldmVudC5wcm9iYWJpbGl0eX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2V2ZW50LnByb2JhYmlsaXR5PXR9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuTG9vcC5wcm90b3R5cGUsXCJtdXRlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ldmVudC5tdXRlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fZXZlbnQubXV0ZT10fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0Lkxvb3AucHJvdG90eXBlLFwiaXRlcmF0aW9uc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZXZlbnQubG9vcD09PSEwPzEvMDp0aGlzLl9ldmVudC5sb29wfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fZXZlbnQubG9vcD10PT09MS8wPyEwOnR9fSksdC5Mb29wLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5fZXZlbnQuZGlzcG9zZSgpLHRoaXMuX2V2ZW50PW51bGwsdGhpcy5jYWxsYmFjaz1udWxsfSx0Lkxvb3B9KSxNb2R1bGUoZnVuY3Rpb24odCl7cmV0dXJuIHQuUGFydD1mdW5jdGlvbigpe3ZhciBlLGkscz10aGlzLm9wdGlvbnNPYmplY3QoYXJndW1lbnRzLFtcImNhbGxiYWNrXCIsXCJldmVudHNcIl0sdC5QYXJ0LmRlZmF1bHRzKTtpZih0aGlzLl9sb29wPXMubG9vcCx0aGlzLl9sb29wU3RhcnQ9dGhpcy50b1RpY2tzKHMubG9vcFN0YXJ0KSx0aGlzLl9sb29wRW5kPXRoaXMudG9UaWNrcyhzLmxvb3BFbmQpLHRoaXMuX3BsYXliYWNrUmF0ZT1zLnBsYXliYWNrUmF0ZSx0aGlzLl9wcm9iYWJpbGl0eT1zLnByb2JhYmlsaXR5LHRoaXMuX2h1bWFuaXplPXMuaHVtYW5pemUsdGhpcy5fc3RhcnRPZmZzZXQ9MCx0aGlzLl9zdGF0ZT1uZXcgdC5UaW1lbGluZVN0YXRlKHQuU3RhdGUuU3RvcHBlZCksdGhpcy5fZXZlbnRzPVtdLHRoaXMuY2FsbGJhY2s9cy5jYWxsYmFjayx0aGlzLm11dGU9cy5tdXRlLGU9dGhpcy5kZWZhdWx0QXJnKHMuZXZlbnRzLFtdKSwhdGhpcy5pc1VuZGVmKHMuZXZlbnRzKSlmb3IoaT0wO2k8ZS5sZW5ndGg7aSsrKUFycmF5LmlzQXJyYXkoZVtpXSk/dGhpcy5hZGQoZVtpXVswXSxlW2ldWzFdKTp0aGlzLmFkZChlW2ldKX0sdC5leHRlbmQodC5QYXJ0LHQuRXZlbnQpLHQuUGFydC5kZWZhdWx0cz17Y2FsbGJhY2s6dC5ub09wLGxvb3A6ITEsbG9vcEVuZDpcIjFtXCIsbG9vcFN0YXJ0OjAscGxheWJhY2tSYXRlOjEscHJvYmFiaWxpdHk6MSxodW1hbml6ZTohMSxtdXRlOiExfSx0LlBhcnQucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKGUsaSl7dmFyIHM9dGhpcy50b1RpY2tzKGUpO3JldHVybiB0aGlzLl9zdGF0ZS5nZXRTdGF0ZUF0VGltZShzKSE9PXQuU3RhdGUuU3RhcnRlZCYmKGk9dGhpcy5kZWZhdWx0QXJnKGksMCksaT10aGlzLnRvVGlja3MoaSksdGhpcy5fc3RhdGUuYWRkRXZlbnQoe3N0YXRlOnQuU3RhdGUuU3RhcnRlZCx0aW1lOnMsb2Zmc2V0Oml9KSx0aGlzLl9mb3JFYWNoKGZ1bmN0aW9uKHQpe3RoaXMuX3N0YXJ0Tm90ZSh0LHMsaSl9KSksdGhpc30sdC5QYXJ0LnByb3RvdHlwZS5fc3RhcnROb3RlPWZ1bmN0aW9uKHQsZSxpKXtlLT1pLHRoaXMuX2xvb3A/dC5zdGFydE9mZnNldD49dGhpcy5fbG9vcFN0YXJ0JiZ0LnN0YXJ0T2Zmc2V0PHRoaXMuX2xvb3BFbmQmJih0LnN0YXJ0T2Zmc2V0PGkmJihlKz10aGlzLl9nZXRMb29wRHVyYXRpb24oKSksdC5zdGFydChlK1wiaVwiKSk6dC5zdGFydE9mZnNldD49aSYmdC5zdGFydChlK1wiaVwiKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuUGFydC5wcm90b3R5cGUsXCJzdGFydE9mZnNldFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RhcnRPZmZzZXR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9zdGFydE9mZnNldD10LHRoaXMuX2ZvckVhY2goZnVuY3Rpb24odCl7dC5zdGFydE9mZnNldCs9dGhpcy5fc3RhcnRPZmZzZXR9KX19KSx0LlBhcnQucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oZSl7dmFyIGk9dGhpcy50b1RpY2tzKGUpO3JldHVybiB0aGlzLl9zdGF0ZS5nZXRTdGF0ZUF0VGltZShpKT09PXQuU3RhdGUuU3RhcnRlZCYmKHRoaXMuX3N0YXRlLnNldFN0YXRlQXRUaW1lKHQuU3RhdGUuU3RvcHBlZCxpKSx0aGlzLl9mb3JFYWNoKGZ1bmN0aW9uKHQpe3Quc3RvcChlKX0pKSx0aGlzfSx0LlBhcnQucHJvdG90eXBlLmF0PWZ1bmN0aW9uKHQsZSl7dmFyIGkscyxuO2Zvcih0PXRoaXMudG9UaWNrcyh0KSxpPXRoaXMudGlja3NUb1NlY29uZHMoMSkscz0wO3M8dGhpcy5fZXZlbnRzLmxlbmd0aDtzKyspaWYobj10aGlzLl9ldmVudHNbc10sTWF0aC5hYnModC1uLnN0YXJ0T2Zmc2V0KTxpKXJldHVybiB0aGlzLmlzVW5kZWYoZSl8fChuLnZhbHVlPWUpLG47cmV0dXJuIHRoaXMuaXNVbmRlZihlKT9udWxsOih0aGlzLmFkZCh0K1wiaVwiLGUpLHRoaXMuX2V2ZW50c1t0aGlzLl9ldmVudHMubGVuZ3RoLTFdKX0sdC5QYXJ0LnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oZSxpKXt0aGlzLmlzT2JqZWN0KGUpJiZlLmhhc093blByb3BlcnR5KFwidGltZVwiKSYmKGk9ZSxlPWkudGltZSxkZWxldGUgaS50aW1lKSxlPXRoaXMudG9UaWNrcyhlKTt2YXIgcztyZXR1cm4gaSBpbnN0YW5jZW9mIHQuRXZlbnQ/KHM9aSxzLmNhbGxiYWNrPXRoaXMuX3RpY2suYmluZCh0aGlzKSk6cz1uZXcgdC5FdmVudCh7Y2FsbGJhY2s6dGhpcy5fdGljay5iaW5kKHRoaXMpLHZhbHVlOml9KSxzLnN0YXJ0T2Zmc2V0PWUscy5zZXQoe2xvb3BFbmQ6dGhpcy5sb29wRW5kLGxvb3BTdGFydDp0aGlzLmxvb3BTdGFydCxsb29wOnRoaXMubG9vcCxodW1hbml6ZTp0aGlzLmh1bWFuaXplLHBsYXliYWNrUmF0ZTp0aGlzLnBsYXliYWNrUmF0ZSxwcm9iYWJpbGl0eTp0aGlzLnByb2JhYmlsaXR5fSksdGhpcy5fZXZlbnRzLnB1c2gocyksdGhpcy5fcmVzdGFydEV2ZW50KHMpLHRoaXN9LHQuUGFydC5wcm90b3R5cGUuX3Jlc3RhcnRFdmVudD1mdW5jdGlvbihlKXt2YXIgaT10aGlzLl9zdGF0ZS5nZXRFdmVudCh0aGlzLm5vdygpKTtpJiZpLnN0YXRlPT09dC5TdGF0ZS5TdGFydGVkJiZ0aGlzLl9zdGFydE5vdGUoZSxpLnRpbWUsaS5vZmZzZXQpfSx0LlBhcnQucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbihlLGkpe3ZhciBzLG47Zm9yKHRoaXMuaXNPYmplY3QoZSkmJmUuaGFzT3duUHJvcGVydHkoXCJ0aW1lXCIpJiYoaT1lLGU9aS50aW1lKSxlPXRoaXMudG9UaWNrcyhlKSxzPXRoaXMuX2V2ZW50cy5sZW5ndGgtMTtzPj0wO3MtLSluPXRoaXMuX2V2ZW50c1tzXSxuIGluc3RhbmNlb2YgdC5QYXJ0P24ucmVtb3ZlKGUsaSk6bi5zdGFydE9mZnNldD09PWUmJih0aGlzLmlzVW5kZWYoaSl8fCF0aGlzLmlzVW5kZWYoaSkmJm4udmFsdWU9PT1pKSYmKHRoaXMuX2V2ZW50cy5zcGxpY2UocywxKSxuLmRpc3Bvc2UoKSk7cmV0dXJuIHRoaXN9LHQuUGFydC5wcm90b3R5cGUucmVtb3ZlQWxsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZvckVhY2goZnVuY3Rpb24odCl7dC5kaXNwb3NlKCl9KSx0aGlzLl9ldmVudHM9W10sdGhpc30sdC5QYXJ0LnByb3RvdHlwZS5jYW5jZWw9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2ZvckVhY2goZnVuY3Rpb24oZSl7ZS5jYW5jZWwodCl9KSx0aGlzLl9zdGF0ZS5jYW5jZWwodCksdGhpc30sdC5QYXJ0LnByb3RvdHlwZS5fZm9yRWFjaD1mdW5jdGlvbihlLGkpe3ZhciBzLG47Zm9yKGk9dGhpcy5kZWZhdWx0QXJnKGksdGhpcykscz10aGlzLl9ldmVudHMubGVuZ3RoLTE7cz49MDtzLS0pbj10aGlzLl9ldmVudHNbc10sbiBpbnN0YW5jZW9mIHQuUGFydD9uLl9mb3JFYWNoKGUsaSk6ZS5jYWxsKGksbik7cmV0dXJuIHRoaXN9LHQuUGFydC5wcm90b3R5cGUuX3NldEFsbD1mdW5jdGlvbih0LGUpe3RoaXMuX2ZvckVhY2goZnVuY3Rpb24oaSl7aVt0XT1lfSl9LHQuUGFydC5wcm90b3R5cGUuX3RpY2s9ZnVuY3Rpb24odCxlKXt0aGlzLm11dGV8fHRoaXMuY2FsbGJhY2sodCxlKX0sdC5QYXJ0LnByb3RvdHlwZS5fdGVzdExvb3BCb3VuZHJpZXM9ZnVuY3Rpb24oZSl7ZS5zdGFydE9mZnNldDx0aGlzLl9sb29wU3RhcnR8fGUuc3RhcnRPZmZzZXQ+PXRoaXMuX2xvb3BFbmQ/ZS5jYW5jZWwoKTplLnN0YXRlPT09dC5TdGF0ZS5TdG9wcGVkJiZ0aGlzLl9yZXN0YXJ0RXZlbnQoZSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlBhcnQucHJvdG90eXBlLFwicHJvYmFiaWxpdHlcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Byb2JhYmlsaXR5fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fcHJvYmFiaWxpdHk9dCx0aGlzLl9zZXRBbGwoXCJwcm9iYWJpbGl0eVwiLHQpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlBhcnQucHJvdG90eXBlLFwiaHVtYW5pemVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2h1bWFuaXplfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5faHVtYW5pemU9dCx0aGlzLl9zZXRBbGwoXCJodW1hbml6ZVwiLHQpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlBhcnQucHJvdG90eXBlLFwibG9vcFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbG9vcH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2xvb3A9dCx0aGlzLl9mb3JFYWNoKGZ1bmN0aW9uKGUpe2UuX2xvb3BTdGFydD10aGlzLl9sb29wU3RhcnQsZS5fbG9vcEVuZD10aGlzLl9sb29wRW5kLGUubG9vcD10LHRoaXMuX3Rlc3RMb29wQm91bmRyaWVzKGUpfSl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuUGFydC5wcm90b3R5cGUsXCJsb29wRW5kXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRvTm90YXRpb24odGhpcy5fbG9vcEVuZCtcImlcIil9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9sb29wRW5kPXRoaXMudG9UaWNrcyh0KSx0aGlzLl9sb29wJiZ0aGlzLl9mb3JFYWNoKGZ1bmN0aW9uKHQpe3QubG9vcEVuZD10aGlzLmxvb3BFbmQsdGhpcy5fdGVzdExvb3BCb3VuZHJpZXModCl9KX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5QYXJ0LnByb3RvdHlwZSxcImxvb3BTdGFydFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50b05vdGF0aW9uKHRoaXMuX2xvb3BTdGFydCtcImlcIil9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9sb29wU3RhcnQ9dGhpcy50b1RpY2tzKHQpLHRoaXMuX2xvb3AmJnRoaXMuX2ZvckVhY2goZnVuY3Rpb24odCl7dC5sb29wU3RhcnQ9dGhpcy5sb29wU3RhcnQsdGhpcy5fdGVzdExvb3BCb3VuZHJpZXModCl9KX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5QYXJ0LnByb3RvdHlwZSxcInBsYXliYWNrUmF0ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGxheWJhY2tSYXRlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fcGxheWJhY2tSYXRlPXQsdGhpcy5fc2V0QWxsKFwicGxheWJhY2tSYXRlXCIsdCl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuUGFydC5wcm90b3R5cGUsXCJsZW5ndGhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2V2ZW50cy5sZW5ndGh9fSksdC5QYXJ0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVtb3ZlQWxsKCksdGhpcy5fc3RhdGUuZGlzcG9zZSgpLHRoaXMuX3N0YXRlPW51bGwsdGhpcy5jYWxsYmFjaz1udWxsLHRoaXMuX2V2ZW50cz1udWxsLHRoaXN9LHQuUGFydH0pLE1vZHVsZShmdW5jdGlvbih0KXtyZXR1cm4gdC5QYXR0ZXJuPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zT2JqZWN0KGFyZ3VtZW50cyxbXCJjYWxsYmFja1wiLFwiZXZlbnRzXCIsXCJwYXR0ZXJuXCJdLHQuUGF0dGVybi5kZWZhdWx0cyk7dC5Mb29wLmNhbGwodGhpcyxlKSx0aGlzLl9wYXR0ZXJuPW5ldyB0LkN0cmxQYXR0ZXJuKHt2YWx1ZXM6ZS5ldmVudHMsdHlwZTplLnBhdHRlcm4saW5kZXg6ZS5pbmRleH0pfSx0LmV4dGVuZCh0LlBhdHRlcm4sdC5Mb29wKSx0LlBhdHRlcm4uZGVmYXVsdHM9e3BhdHRlcm46dC5DdHJsUGF0dGVybi5UeXBlLlVwLGV2ZW50czpbXX0sdC5QYXR0ZXJuLnByb3RvdHlwZS5fdGljaz1mdW5jdGlvbih0KXt0aGlzLmNhbGxiYWNrKHQsdGhpcy5fcGF0dGVybi52YWx1ZSksdGhpcy5fcGF0dGVybi5uZXh0KCl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlBhdHRlcm4ucHJvdG90eXBlLFwiaW5kZXhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BhdHRlcm4uaW5kZXh9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9wYXR0ZXJuLmluZGV4PXR9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuUGF0dGVybi5wcm90b3R5cGUsXCJldmVudHNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BhdHRlcm4udmFsdWVzfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fcGF0dGVybi52YWx1ZXM9dH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5QYXR0ZXJuLnByb3RvdHlwZSxcInZhbHVlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYXR0ZXJuLnZhbHVlfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlBhdHRlcm4ucHJvdG90eXBlLFwicGF0dGVyblwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGF0dGVybi50eXBlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fcGF0dGVybi50eXBlPXR9fSksdC5QYXR0ZXJuLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dC5Mb29wLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fcGF0dGVybi5kaXNwb3NlKCksdGhpcy5fcGF0dGVybj1udWxsfSx0LlBhdHRlcm59KSxNb2R1bGUoZnVuY3Rpb24odCl7cmV0dXJuIHQuU2VxdWVuY2U9ZnVuY3Rpb24oKXt2YXIgZSxpPXRoaXMub3B0aW9uc09iamVjdChhcmd1bWVudHMsW1wiY2FsbGJhY2tcIixcImV2ZW50c1wiLFwic3ViZGl2aXNpb25cIl0sdC5TZXF1ZW5jZS5kZWZhdWx0cykscz1pLmV2ZW50cztpZihkZWxldGUgaS5ldmVudHMsdC5QYXJ0LmNhbGwodGhpcyxpKSx0aGlzLl9zdWJkaXZpc2lvbj10aGlzLnRvVGlja3MoaS5zdWJkaXZpc2lvbiksdGhpcy5pc1VuZGVmKGkubG9vcEVuZCkmJiF0aGlzLmlzVW5kZWYocykmJih0aGlzLl9sb29wRW5kPXMubGVuZ3RoKnRoaXMuX3N1YmRpdmlzaW9uKSx0aGlzLl9sb29wPSEwLCF0aGlzLmlzVW5kZWYocykpZm9yKGU9MDtlPHMubGVuZ3RoO2UrKyl0aGlzLmFkZChlLHNbZV0pfSx0LmV4dGVuZCh0LlNlcXVlbmNlLHQuUGFydCksdC5TZXF1ZW5jZS5kZWZhdWx0cz17c3ViZGl2aXNpb246XCI0blwifSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5TZXF1ZW5jZS5wcm90b3R5cGUsXCJzdWJkaXZpc2lvblwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50b05vdGF0aW9uKHRoaXMuX3N1YmRpdmlzaW9uK1wiaVwiKX19KSx0LlNlcXVlbmNlLnByb3RvdHlwZS5hdD1mdW5jdGlvbihlLGkpe3JldHVybiB0aGlzLmlzQXJyYXkoaSkmJnRoaXMucmVtb3ZlKGUpLHQuUGFydC5wcm90b3R5cGUuYXQuY2FsbCh0aGlzLHRoaXMuX2luZGV4VGltZShlKSxpKX0sdC5TZXF1ZW5jZS5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKGUsaSl7aWYobnVsbD09PWkpcmV0dXJuIHRoaXM7aWYodGhpcy5pc0FycmF5KGkpKXt2YXIgcz1NYXRoLnJvdW5kKHRoaXMuX3N1YmRpdmlzaW9uL2kubGVuZ3RoKStcImlcIjtpPW5ldyB0LlNlcXVlbmNlKHRoaXMuX3RpY2suYmluZCh0aGlzKSxpLHMpfXJldHVybiB0LlBhcnQucHJvdG90eXBlLmFkZC5jYWxsKHRoaXMsdGhpcy5faW5kZXhUaW1lKGUpLGkpLHRoaXN9LHQuU2VxdWVuY2UucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbihlLGkpe3JldHVybiB0LlBhcnQucHJvdG90eXBlLnJlbW92ZS5jYWxsKHRoaXMsdGhpcy5faW5kZXhUaW1lKGUpLGkpLHRoaXN9LHQuU2VxdWVuY2UucHJvdG90eXBlLl9pbmRleFRpbWU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuaXNUaWNrcyh0KT90OnQqdGhpcy5fc3ViZGl2aXNpb24rdGhpcy5zdGFydE9mZnNldCtcImlcIn0sdC5TZXF1ZW5jZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LlBhcnQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzfSx0LlNlcXVlbmNlfSksTW9kdWxlKGZ1bmN0aW9uKHQpe3JldHVybiB0LlB1bHNlT3NjaWxsYXRvcj1mdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9uc09iamVjdChhcmd1bWVudHMsW1wiZnJlcXVlbmN5XCIsXCJ3aWR0aFwiXSx0Lk9zY2lsbGF0b3IuZGVmYXVsdHMpO3QuU291cmNlLmNhbGwodGhpcyxlKSx0aGlzLndpZHRoPW5ldyB0LlNpZ25hbChlLndpZHRoLHQuVHlwZS5Ob3JtYWxSYW5nZSksdGhpcy5fd2lkdGhHYXRlPXRoaXMuY29udGV4dC5jcmVhdGVHYWluKCksdGhpcy5fc2F3dG9vdGg9bmV3IHQuT3NjaWxsYXRvcih7ZnJlcXVlbmN5OmUuZnJlcXVlbmN5LGRldHVuZTplLmRldHVuZSx0eXBlOlwic2F3dG9vdGhcIixwaGFzZTplLnBoYXNlfSksdGhpcy5mcmVxdWVuY3k9dGhpcy5fc2F3dG9vdGguZnJlcXVlbmN5LHRoaXMuZGV0dW5lPXRoaXMuX3Nhd3Rvb3RoLmRldHVuZSx0aGlzLl90aHJlc2g9bmV3IHQuV2F2ZVNoYXBlcihmdW5jdGlvbih0KXtyZXR1cm4gMD50Py0xOjF9KSx0aGlzLl9zYXd0b290aC5jaGFpbih0aGlzLl90aHJlc2gsdGhpcy5vdXRwdXQpLHRoaXMud2lkdGguY2hhaW4odGhpcy5fd2lkdGhHYXRlLHRoaXMuX3RocmVzaCksdGhpcy5fcmVhZE9ubHkoW1wid2lkdGhcIixcImZyZXF1ZW5jeVwiLFwiZGV0dW5lXCJdKX0sdC5leHRlbmQodC5QdWxzZU9zY2lsbGF0b3IsdC5Pc2NpbGxhdG9yKSx0LlB1bHNlT3NjaWxsYXRvci5kZWZhdWx0cz17ZnJlcXVlbmN5OjQ0MCxkZXR1bmU6MCxwaGFzZTowLHdpZHRoOi4yfSx0LlB1bHNlT3NjaWxsYXRvci5wcm90b3R5cGUuX3N0YXJ0PWZ1bmN0aW9uKHQpe3Q9dGhpcy50b1NlY29uZHModCksdGhpcy5fc2F3dG9vdGguc3RhcnQodCksdGhpcy5fd2lkdGhHYXRlLmdhaW4uc2V0VmFsdWVBdFRpbWUoMSx0KX0sdC5QdWxzZU9zY2lsbGF0b3IucHJvdG90eXBlLl9zdG9wPWZ1bmN0aW9uKHQpe3Q9dGhpcy50b1NlY29uZHModCksdGhpcy5fc2F3dG9vdGguc3RvcCh0KSx0aGlzLl93aWR0aEdhdGUuZ2Fpbi5zZXRWYWx1ZUF0VGltZSgwLHQpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5QdWxzZU9zY2lsbGF0b3IucHJvdG90eXBlLFwicGhhc2VcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Nhd3Rvb3RoLnBoYXNlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fc2F3dG9vdGgucGhhc2U9dH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5QdWxzZU9zY2lsbGF0b3IucHJvdG90eXBlLFwidHlwZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5cInB1bHNlXCJ9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuUHVsc2VPc2NpbGxhdG9yLnByb3RvdHlwZSxcInBhcnRpYWxzXCIse2dldDpmdW5jdGlvbigpe3JldHVybltdfX0pLHQuUHVsc2VPc2NpbGxhdG9yLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQuU291cmNlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fc2F3dG9vdGguZGlzcG9zZSgpLHRoaXMuX3Nhd3Rvb3RoPW51bGwsdGhpcy5fd3JpdGFibGUoW1wid2lkdGhcIixcImZyZXF1ZW5jeVwiLFwiZGV0dW5lXCJdKSx0aGlzLndpZHRoLmRpc3Bvc2UoKSx0aGlzLndpZHRoPW51bGwsdGhpcy5fd2lkdGhHYXRlLmRpc2Nvbm5lY3QoKSx0aGlzLl93aWR0aEdhdGU9bnVsbCx0aGlzLl93aWR0aEdhdGU9bnVsbCx0aGlzLl90aHJlc2guZGlzY29ubmVjdCgpLHRoaXMuX3RocmVzaD1udWxsLHRoaXMuZnJlcXVlbmN5PW51bGwsdGhpcy5kZXR1bmU9bnVsbCx0aGlzfSx0LlB1bHNlT3NjaWxsYXRvcn0pLE1vZHVsZShmdW5jdGlvbih0KXtyZXR1cm4gdC5QV01Pc2NpbGxhdG9yPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zT2JqZWN0KGFyZ3VtZW50cyxbXCJmcmVxdWVuY3lcIixcIm1vZHVsYXRpb25GcmVxdWVuY3lcIl0sdC5QV01Pc2NpbGxhdG9yLmRlZmF1bHRzKTt0LlNvdXJjZS5jYWxsKHRoaXMsZSksdGhpcy5fcHVsc2U9bmV3IHQuUHVsc2VPc2NpbGxhdG9yKGUubW9kdWxhdGlvbkZyZXF1ZW5jeSksdGhpcy5fcHVsc2UuX3Nhd3Rvb3RoLnR5cGU9XCJzaW5lXCIsdGhpcy5fbW9kdWxhdG9yPW5ldyB0Lk9zY2lsbGF0b3Ioe2ZyZXF1ZW5jeTplLmZyZXF1ZW5jeSxkZXR1bmU6ZS5kZXR1bmUscGhhc2U6ZS5waGFzZX0pLHRoaXMuX3NjYWxlPW5ldyB0Lk11bHRpcGx5KDEuMDEpLHRoaXMuZnJlcXVlbmN5PXRoaXMuX21vZHVsYXRvci5mcmVxdWVuY3ksdGhpcy5kZXR1bmU9dGhpcy5fbW9kdWxhdG9yLmRldHVuZSx0aGlzLm1vZHVsYXRpb25GcmVxdWVuY3k9dGhpcy5fcHVsc2UuZnJlcXVlbmN5LHRoaXMuX21vZHVsYXRvci5jaGFpbih0aGlzLl9zY2FsZSx0aGlzLl9wdWxzZS53aWR0aCksdGhpcy5fcHVsc2UuY29ubmVjdCh0aGlzLm91dHB1dCksdGhpcy5fcmVhZE9ubHkoW1wibW9kdWxhdGlvbkZyZXF1ZW5jeVwiLFwiZnJlcXVlbmN5XCIsXCJkZXR1bmVcIl0pfSx0LmV4dGVuZCh0LlBXTU9zY2lsbGF0b3IsdC5Pc2NpbGxhdG9yKSx0LlBXTU9zY2lsbGF0b3IuZGVmYXVsdHM9e2ZyZXF1ZW5jeTo0NDAsZGV0dW5lOjAscGhhc2U6MCxtb2R1bGF0aW9uRnJlcXVlbmN5Oi40fSx0LlBXTU9zY2lsbGF0b3IucHJvdG90eXBlLl9zdGFydD1mdW5jdGlvbih0KXt0PXRoaXMudG9TZWNvbmRzKHQpLHRoaXMuX21vZHVsYXRvci5zdGFydCh0KSx0aGlzLl9wdWxzZS5zdGFydCh0KX0sdC5QV01Pc2NpbGxhdG9yLnByb3RvdHlwZS5fc3RvcD1mdW5jdGlvbih0KXt0PXRoaXMudG9TZWNvbmRzKHQpLHRoaXMuX21vZHVsYXRvci5zdG9wKHQpLHRoaXMuX3B1bHNlLnN0b3AodCl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlBXTU9zY2lsbGF0b3IucHJvdG90eXBlLFwidHlwZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5cInB3bVwifX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlBXTU9zY2lsbGF0b3IucHJvdG90eXBlLFwicGFydGlhbHNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuW119fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuUFdNT3NjaWxsYXRvci5wcm90b3R5cGUsXCJwaGFzZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbW9kdWxhdG9yLnBoYXNlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbW9kdWxhdG9yLnBoYXNlPXR9fSksdC5QV01Pc2NpbGxhdG9yLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQuU291cmNlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fcHVsc2UuZGlzcG9zZSgpLHRoaXMuX3B1bHNlPW51bGwsdGhpcy5fc2NhbGUuZGlzcG9zZSgpLHRoaXMuX3NjYWxlPW51bGwsdGhpcy5fbW9kdWxhdG9yLmRpc3Bvc2UoKSx0aGlzLl9tb2R1bGF0b3I9bnVsbCx0aGlzLl93cml0YWJsZShbXCJtb2R1bGF0aW9uRnJlcXVlbmN5XCIsXCJmcmVxdWVuY3lcIixcImRldHVuZVwiXSksdGhpcy5mcmVxdWVuY3k9bnVsbCx0aGlzLmRldHVuZT1udWxsLHRoaXMubW9kdWxhdGlvbkZyZXF1ZW5jeT1udWxsLHRoaXN9LHQuUFdNT3NjaWxsYXRvcn0pLE1vZHVsZShmdW5jdGlvbih0KXt0Lk9tbmlPc2NpbGxhdG9yPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zT2JqZWN0KGFyZ3VtZW50cyxbXCJmcmVxdWVuY3lcIixcInR5cGVcIl0sdC5PbW5pT3NjaWxsYXRvci5kZWZhdWx0cyk7dC5Tb3VyY2UuY2FsbCh0aGlzLGUpLHRoaXMuZnJlcXVlbmN5PW5ldyB0LlNpZ25hbChlLmZyZXF1ZW5jeSx0LlR5cGUuRnJlcXVlbmN5KSx0aGlzLmRldHVuZT1uZXcgdC5TaWduYWwoZS5kZXR1bmUsdC5UeXBlLkNlbnRzKSx0aGlzLl9zb3VyY2VUeXBlPXZvaWQgMCx0aGlzLl9vc2NpbGxhdG9yPW51bGwsdGhpcy50eXBlPWUudHlwZSx0aGlzLnBoYXNlPWUucGhhc2UsdGhpcy5fcmVhZE9ubHkoW1wiZnJlcXVlbmN5XCIsXCJkZXR1bmVcIl0pLHRoaXMuaXNBcnJheShlLnBhcnRpYWxzKSYmKHRoaXMucGFydGlhbHM9ZS5wYXJ0aWFscyl9LHQuZXh0ZW5kKHQuT21uaU9zY2lsbGF0b3IsdC5Pc2NpbGxhdG9yKSx0Lk9tbmlPc2NpbGxhdG9yLmRlZmF1bHRzPXtmcmVxdWVuY3k6NDQwLGRldHVuZTowLHR5cGU6XCJzaW5lXCIscGhhc2U6MCx3aWR0aDouNCxtb2R1bGF0aW9uRnJlcXVlbmN5Oi40fTt2YXIgZT17UHVsc2VPc2NpbGxhdG9yOlwiUHVsc2VPc2NpbGxhdG9yXCIsUFdNT3NjaWxsYXRvcjpcIlBXTU9zY2lsbGF0b3JcIixPc2NpbGxhdG9yOlwiT3NjaWxsYXRvclwifTtyZXR1cm4gdC5PbW5pT3NjaWxsYXRvci5wcm90b3R5cGUuX3N0YXJ0PWZ1bmN0aW9uKHQpe3RoaXMuX29zY2lsbGF0b3Iuc3RhcnQodCl9LHQuT21uaU9zY2lsbGF0b3IucHJvdG90eXBlLl9zdG9wPWZ1bmN0aW9uKHQpe3RoaXMuX29zY2lsbGF0b3Iuc3RvcCh0KX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuT21uaU9zY2lsbGF0b3IucHJvdG90eXBlLFwidHlwZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3NjaWxsYXRvci50eXBlfSxzZXQ6ZnVuY3Rpb24oaSl7aWYoMD09PWkuaW5kZXhPZihcInNpbmVcIil8fDA9PT1pLmluZGV4T2YoXCJzcXVhcmVcIil8fDA9PT1pLmluZGV4T2YoXCJ0cmlhbmdsZVwiKXx8MD09PWkuaW5kZXhPZihcInNhd3Rvb3RoXCIpfHxpPT09dC5Pc2NpbGxhdG9yLlR5cGUuQ3VzdG9tKXRoaXMuX3NvdXJjZVR5cGUhPT1lLk9zY2lsbGF0b3ImJih0aGlzLl9zb3VyY2VUeXBlPWUuT3NjaWxsYXRvcix0aGlzLl9jcmVhdGVOZXdPc2NpbGxhdG9yKHQuT3NjaWxsYXRvcikpLHRoaXMuX29zY2lsbGF0b3IudHlwZT1pO2Vsc2UgaWYoXCJwd21cIj09PWkpdGhpcy5fc291cmNlVHlwZSE9PWUuUFdNT3NjaWxsYXRvciYmKHRoaXMuX3NvdXJjZVR5cGU9ZS5QV01Pc2NpbGxhdG9yLHRoaXMuX2NyZWF0ZU5ld09zY2lsbGF0b3IodC5QV01Pc2NpbGxhdG9yKSk7ZWxzZXtpZihcInB1bHNlXCIhPT1pKXRocm93IG5ldyBFcnJvcihcIlRvbmUuT21uaU9zY2lsbGF0b3IgZG9lcyBub3Qgc3VwcG9ydCB0eXBlIFwiK2kpO3RoaXMuX3NvdXJjZVR5cGUhPT1lLlB1bHNlT3NjaWxsYXRvciYmKHRoaXMuX3NvdXJjZVR5cGU9ZS5QdWxzZU9zY2lsbGF0b3IsdGhpcy5fY3JlYXRlTmV3T3NjaWxsYXRvcih0LlB1bHNlT3NjaWxsYXRvcikpfX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5PbW5pT3NjaWxsYXRvci5wcm90b3R5cGUsXCJwYXJ0aWFsc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3NjaWxsYXRvci5wYXJ0aWFsc30sc2V0OmZ1bmN0aW9uKGkpe3RoaXMuX3NvdXJjZVR5cGUhPT1lLk9zY2lsbGF0b3ImJih0aGlzLnR5cGU9dC5Pc2NpbGxhdG9yLlR5cGUuQ3VzdG9tKSx0aGlzLl9vc2NpbGxhdG9yLnBhcnRpYWxzPWl9fSksdC5PbW5pT3NjaWxsYXRvci5wcm90b3R5cGUuX2NyZWF0ZU5ld09zY2lsbGF0b3I9ZnVuY3Rpb24oZSl7dmFyIGkscz10aGlzLm5vdygpK3RoaXMuYmxvY2tUaW1lO251bGwhPT10aGlzLl9vc2NpbGxhdG9yJiYoaT10aGlzLl9vc2NpbGxhdG9yLGkuc3RvcChzKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aS5kaXNwb3NlKCksaT1udWxsfSwxZTMqdGhpcy5ibG9ja1RpbWUpKSx0aGlzLl9vc2NpbGxhdG9yPW5ldyBlLHRoaXMuZnJlcXVlbmN5LmNvbm5lY3QodGhpcy5fb3NjaWxsYXRvci5mcmVxdWVuY3kpLHRoaXMuZGV0dW5lLmNvbm5lY3QodGhpcy5fb3NjaWxsYXRvci5kZXR1bmUpLHRoaXMuX29zY2lsbGF0b3IuY29ubmVjdCh0aGlzLm91dHB1dCksdGhpcy5zdGF0ZT09PXQuU3RhdGUuU3RhcnRlZCYmdGhpcy5fb3NjaWxsYXRvci5zdGFydChzKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuT21uaU9zY2lsbGF0b3IucHJvdG90eXBlLFwicGhhc2VcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29zY2lsbGF0b3IucGhhc2V9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9vc2NpbGxhdG9yLnBoYXNlPXR9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuT21uaU9zY2lsbGF0b3IucHJvdG90eXBlLFwid2lkdGhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NvdXJjZVR5cGU9PT1lLlB1bHNlT3NjaWxsYXRvcj90aGlzLl9vc2NpbGxhdG9yLndpZHRoOnZvaWQgMH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5PbW5pT3NjaWxsYXRvci5wcm90b3R5cGUsXCJtb2R1bGF0aW9uRnJlcXVlbmN5XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zb3VyY2VUeXBlPT09ZS5QV01Pc2NpbGxhdG9yP3RoaXMuX29zY2lsbGF0b3IubW9kdWxhdGlvbkZyZXF1ZW5jeTp2b2lkIDB9fSksdC5PbW5pT3NjaWxsYXRvci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LlNvdXJjZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLFxudGhpcy5fd3JpdGFibGUoW1wiZnJlcXVlbmN5XCIsXCJkZXR1bmVcIl0pLHRoaXMuZGV0dW5lLmRpc3Bvc2UoKSx0aGlzLmRldHVuZT1udWxsLHRoaXMuZnJlcXVlbmN5LmRpc3Bvc2UoKSx0aGlzLmZyZXF1ZW5jeT1udWxsLHRoaXMuX29zY2lsbGF0b3IuZGlzcG9zZSgpLHRoaXMuX29zY2lsbGF0b3I9bnVsbCx0aGlzLl9zb3VyY2VUeXBlPW51bGwsdGhpc30sdC5PbW5pT3NjaWxsYXRvcn0pLE1vZHVsZShmdW5jdGlvbih0KXtyZXR1cm4gdC5JbnN0cnVtZW50PWZ1bmN0aW9uKGUpe2U9dGhpcy5kZWZhdWx0QXJnKGUsdC5JbnN0cnVtZW50LmRlZmF1bHRzKSx0aGlzLl92b2x1bWU9dGhpcy5vdXRwdXQ9bmV3IHQuVm9sdW1lKGUudm9sdW1lKSx0aGlzLnZvbHVtZT10aGlzLl92b2x1bWUudm9sdW1lLHRoaXMuX3JlYWRPbmx5KFwidm9sdW1lXCIpfSx0LmV4dGVuZCh0Lkluc3RydW1lbnQpLHQuSW5zdHJ1bWVudC5kZWZhdWx0cz17dm9sdW1lOjB9LHQuSW5zdHJ1bWVudC5wcm90b3R5cGUudHJpZ2dlckF0dGFjaz10Lm5vT3AsdC5JbnN0cnVtZW50LnByb3RvdHlwZS50cmlnZ2VyUmVsZWFzZT10Lm5vT3AsdC5JbnN0cnVtZW50LnByb3RvdHlwZS50cmlnZ2VyQXR0YWNrUmVsZWFzZT1mdW5jdGlvbih0LGUsaSxzKXtyZXR1cm4gaT10aGlzLnRvU2Vjb25kcyhpKSxlPXRoaXMudG9TZWNvbmRzKGUpLHRoaXMudHJpZ2dlckF0dGFjayh0LGkscyksdGhpcy50cmlnZ2VyUmVsZWFzZShpK2UpLHRoaXN9LHQuSW5zdHJ1bWVudC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fdm9sdW1lLmRpc3Bvc2UoKSx0aGlzLl92b2x1bWU9bnVsbCx0aGlzLl93cml0YWJsZShbXCJ2b2x1bWVcIl0pLHRoaXMudm9sdW1lPW51bGwsdGhpc30sdC5JbnN0cnVtZW50fSksTW9kdWxlKGZ1bmN0aW9uKHQpe3JldHVybiB0Lk1vbm9waG9uaWM9ZnVuY3Rpb24oZSl7ZT10aGlzLmRlZmF1bHRBcmcoZSx0Lk1vbm9waG9uaWMuZGVmYXVsdHMpLHQuSW5zdHJ1bWVudC5jYWxsKHRoaXMsZSksdGhpcy5wb3J0YW1lbnRvPWUucG9ydGFtZW50b30sdC5leHRlbmQodC5Nb25vcGhvbmljLHQuSW5zdHJ1bWVudCksdC5Nb25vcGhvbmljLmRlZmF1bHRzPXtwb3J0YW1lbnRvOjB9LHQuTW9ub3Bob25pYy5wcm90b3R5cGUudHJpZ2dlckF0dGFjaz1mdW5jdGlvbih0LGUsaSl7cmV0dXJuIGU9dGhpcy50b1NlY29uZHMoZSksdGhpcy5fdHJpZ2dlckVudmVsb3BlQXR0YWNrKGUsaSksdGhpcy5zZXROb3RlKHQsZSksdGhpc30sdC5Nb25vcGhvbmljLnByb3RvdHlwZS50cmlnZ2VyUmVsZWFzZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fdHJpZ2dlckVudmVsb3BlUmVsZWFzZSh0KSx0aGlzfSx0Lk1vbm9waG9uaWMucHJvdG90eXBlLl90cmlnZ2VyRW52ZWxvcGVBdHRhY2s9ZnVuY3Rpb24oKXt9LHQuTW9ub3Bob25pYy5wcm90b3R5cGUuX3RyaWdnZXJFbnZlbG9wZVJlbGVhc2U9ZnVuY3Rpb24oKXt9LHQuTW9ub3Bob25pYy5wcm90b3R5cGUuc2V0Tm90ZT1mdW5jdGlvbih0LGUpe3ZhciBpLHM7cmV0dXJuIGU9dGhpcy50b1NlY29uZHMoZSksdGhpcy5wb3J0YW1lbnRvPjA/KGk9dGhpcy5mcmVxdWVuY3kudmFsdWUsdGhpcy5mcmVxdWVuY3kuc2V0VmFsdWVBdFRpbWUoaSxlKSxzPXRoaXMudG9TZWNvbmRzKHRoaXMucG9ydGFtZW50byksdGhpcy5mcmVxdWVuY3kuZXhwb25lbnRpYWxSYW1wVG9WYWx1ZUF0VGltZSh0LGUrcykpOnRoaXMuZnJlcXVlbmN5LnNldFZhbHVlQXRUaW1lKHQsZSksdGhpc30sdC5Nb25vcGhvbmljfSksTW9kdWxlKGZ1bmN0aW9uKHQpe3JldHVybiB0Lk1vbm9TeW50aD1mdW5jdGlvbihlKXtlPXRoaXMuZGVmYXVsdEFyZyhlLHQuTW9ub1N5bnRoLmRlZmF1bHRzKSx0Lk1vbm9waG9uaWMuY2FsbCh0aGlzLGUpLHRoaXMub3NjaWxsYXRvcj1uZXcgdC5PbW5pT3NjaWxsYXRvcihlLm9zY2lsbGF0b3IpLHRoaXMuZnJlcXVlbmN5PXRoaXMub3NjaWxsYXRvci5mcmVxdWVuY3ksdGhpcy5kZXR1bmU9dGhpcy5vc2NpbGxhdG9yLmRldHVuZSx0aGlzLmZpbHRlcj1uZXcgdC5GaWx0ZXIoZS5maWx0ZXIpLHRoaXMuZmlsdGVyRW52ZWxvcGU9bmV3IHQuRnJlcXVlbmN5RW52ZWxvcGUoZS5maWx0ZXJFbnZlbG9wZSksdGhpcy5lbnZlbG9wZT1uZXcgdC5BbXBsaXR1ZGVFbnZlbG9wZShlLmVudmVsb3BlKSx0aGlzLm9zY2lsbGF0b3IuY2hhaW4odGhpcy5maWx0ZXIsdGhpcy5lbnZlbG9wZSx0aGlzLm91dHB1dCksdGhpcy5vc2NpbGxhdG9yLnN0YXJ0KCksdGhpcy5maWx0ZXJFbnZlbG9wZS5jb25uZWN0KHRoaXMuZmlsdGVyLmZyZXF1ZW5jeSksdGhpcy5fcmVhZE9ubHkoW1wib3NjaWxsYXRvclwiLFwiZnJlcXVlbmN5XCIsXCJkZXR1bmVcIixcImZpbHRlclwiLFwiZmlsdGVyRW52ZWxvcGVcIixcImVudmVsb3BlXCJdKX0sdC5leHRlbmQodC5Nb25vU3ludGgsdC5Nb25vcGhvbmljKSx0Lk1vbm9TeW50aC5kZWZhdWx0cz17ZnJlcXVlbmN5OlwiQzRcIixkZXR1bmU6MCxvc2NpbGxhdG9yOnt0eXBlOlwic3F1YXJlXCJ9LGZpbHRlcjp7UTo2LHR5cGU6XCJsb3dwYXNzXCIscm9sbG9mZjotMjR9LGVudmVsb3BlOnthdHRhY2s6LjAwNSxkZWNheTouMSxzdXN0YWluOi45LHJlbGVhc2U6MX0sZmlsdGVyRW52ZWxvcGU6e2F0dGFjazouMDYsZGVjYXk6LjIsc3VzdGFpbjouNSxyZWxlYXNlOjIsYmFzZUZyZXF1ZW5jeToyMDAsb2N0YXZlczo3LGV4cG9uZW50OjJ9fSx0Lk1vbm9TeW50aC5wcm90b3R5cGUuX3RyaWdnZXJFbnZlbG9wZUF0dGFjaz1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmVudmVsb3BlLnRyaWdnZXJBdHRhY2sodCxlKSx0aGlzLmZpbHRlckVudmVsb3BlLnRyaWdnZXJBdHRhY2sodCksdGhpc30sdC5Nb25vU3ludGgucHJvdG90eXBlLl90cmlnZ2VyRW52ZWxvcGVSZWxlYXNlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmVudmVsb3BlLnRyaWdnZXJSZWxlYXNlKHQpLHRoaXMuZmlsdGVyRW52ZWxvcGUudHJpZ2dlclJlbGVhc2UodCksdGhpc30sdC5Nb25vU3ludGgucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5Nb25vcGhvbmljLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fd3JpdGFibGUoW1wib3NjaWxsYXRvclwiLFwiZnJlcXVlbmN5XCIsXCJkZXR1bmVcIixcImZpbHRlclwiLFwiZmlsdGVyRW52ZWxvcGVcIixcImVudmVsb3BlXCJdKSx0aGlzLm9zY2lsbGF0b3IuZGlzcG9zZSgpLHRoaXMub3NjaWxsYXRvcj1udWxsLHRoaXMuZW52ZWxvcGUuZGlzcG9zZSgpLHRoaXMuZW52ZWxvcGU9bnVsbCx0aGlzLmZpbHRlckVudmVsb3BlLmRpc3Bvc2UoKSx0aGlzLmZpbHRlckVudmVsb3BlPW51bGwsdGhpcy5maWx0ZXIuZGlzcG9zZSgpLHRoaXMuZmlsdGVyPW51bGwsdGhpcy5mcmVxdWVuY3k9bnVsbCx0aGlzLmRldHVuZT1udWxsLHRoaXN9LHQuTW9ub1N5bnRofSksTW9kdWxlKGZ1bmN0aW9uKHQpe3JldHVybiB0LkFNU3ludGg9ZnVuY3Rpb24oZSl7ZT10aGlzLmRlZmF1bHRBcmcoZSx0LkFNU3ludGguZGVmYXVsdHMpLHQuTW9ub3Bob25pYy5jYWxsKHRoaXMsZSksdGhpcy5jYXJyaWVyPW5ldyB0Lk1vbm9TeW50aChlLmNhcnJpZXIpLHRoaXMuY2Fycmllci52b2x1bWUudmFsdWU9LTEwLHRoaXMubW9kdWxhdG9yPW5ldyB0Lk1vbm9TeW50aChlLm1vZHVsYXRvciksdGhpcy5tb2R1bGF0b3Iudm9sdW1lLnZhbHVlPS0xMCx0aGlzLmZyZXF1ZW5jeT1uZXcgdC5TaWduYWwoNDQwLHQuVHlwZS5GcmVxdWVuY3kpLHRoaXMuaGFybW9uaWNpdHk9bmV3IHQuTXVsdGlwbHkoZS5oYXJtb25pY2l0eSksdGhpcy5oYXJtb25pY2l0eS51bml0cz10LlR5cGUuUG9zaXRpdmUsdGhpcy5fbW9kdWxhdGlvblNjYWxlPW5ldyB0LkF1ZGlvVG9HYWluLHRoaXMuX21vZHVsYXRpb25Ob2RlPXRoaXMuY29udGV4dC5jcmVhdGVHYWluKCksdGhpcy5mcmVxdWVuY3kuY29ubmVjdCh0aGlzLmNhcnJpZXIuZnJlcXVlbmN5KSx0aGlzLmZyZXF1ZW5jeS5jaGFpbih0aGlzLmhhcm1vbmljaXR5LHRoaXMubW9kdWxhdG9yLmZyZXF1ZW5jeSksdGhpcy5tb2R1bGF0b3IuY2hhaW4odGhpcy5fbW9kdWxhdGlvblNjYWxlLHRoaXMuX21vZHVsYXRpb25Ob2RlLmdhaW4pLHRoaXMuY2Fycmllci5jaGFpbih0aGlzLl9tb2R1bGF0aW9uTm9kZSx0aGlzLm91dHB1dCksdGhpcy5fcmVhZE9ubHkoW1wiY2FycmllclwiLFwibW9kdWxhdG9yXCIsXCJmcmVxdWVuY3lcIixcImhhcm1vbmljaXR5XCJdKX0sdC5leHRlbmQodC5BTVN5bnRoLHQuTW9ub3Bob25pYyksdC5BTVN5bnRoLmRlZmF1bHRzPXtoYXJtb25pY2l0eTozLGNhcnJpZXI6e3ZvbHVtZTotMTAsb3NjaWxsYXRvcjp7dHlwZTpcInNpbmVcIn0sZW52ZWxvcGU6e2F0dGFjazouMDEsZGVjYXk6LjAxLHN1c3RhaW46MSxyZWxlYXNlOi41fSxmaWx0ZXJFbnZlbG9wZTp7YXR0YWNrOi4wMSxkZWNheTowLHN1c3RhaW46MSxyZWxlYXNlOi41LGJhc2VGcmVxdWVuY3k6MmU0LG9jdGF2ZXM6MH0sZmlsdGVyOntROjYsdHlwZTpcImxvd3Bhc3NcIixyb2xsb2ZmOi0yNH19LG1vZHVsYXRvcjp7dm9sdW1lOi0xMCxvc2NpbGxhdG9yOnt0eXBlOlwic3F1YXJlXCJ9LGVudmVsb3BlOnthdHRhY2s6MixkZWNheTowLHN1c3RhaW46MSxyZWxlYXNlOi41fSxmaWx0ZXJFbnZlbG9wZTp7YXR0YWNrOjQsZGVjYXk6LjIsc3VzdGFpbjouNSxyZWxlYXNlOi41LGJhc2VGcmVxdWVuY3k6MjAsb2N0YXZlczo2fSxmaWx0ZXI6e1E6Nix0eXBlOlwibG93cGFzc1wiLHJvbGxvZmY6LTI0fX19LHQuQU1TeW50aC5wcm90b3R5cGUuX3RyaWdnZXJFbnZlbG9wZUF0dGFjaz1mdW5jdGlvbih0LGUpe3JldHVybiB0PXRoaXMudG9TZWNvbmRzKHQpLHRoaXMuY2Fycmllci5lbnZlbG9wZS50cmlnZ2VyQXR0YWNrKHQsZSksdGhpcy5tb2R1bGF0b3IuZW52ZWxvcGUudHJpZ2dlckF0dGFjayh0KSx0aGlzLmNhcnJpZXIuZmlsdGVyRW52ZWxvcGUudHJpZ2dlckF0dGFjayh0KSx0aGlzLm1vZHVsYXRvci5maWx0ZXJFbnZlbG9wZS50cmlnZ2VyQXR0YWNrKHQpLHRoaXN9LHQuQU1TeW50aC5wcm90b3R5cGUuX3RyaWdnZXJFbnZlbG9wZVJlbGVhc2U9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY2Fycmllci50cmlnZ2VyUmVsZWFzZSh0KSx0aGlzLm1vZHVsYXRvci50cmlnZ2VyUmVsZWFzZSh0KSx0aGlzfSx0LkFNU3ludGgucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5Nb25vcGhvbmljLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fd3JpdGFibGUoW1wiY2FycmllclwiLFwibW9kdWxhdG9yXCIsXCJmcmVxdWVuY3lcIixcImhhcm1vbmljaXR5XCJdKSx0aGlzLmNhcnJpZXIuZGlzcG9zZSgpLHRoaXMuY2Fycmllcj1udWxsLHRoaXMubW9kdWxhdG9yLmRpc3Bvc2UoKSx0aGlzLm1vZHVsYXRvcj1udWxsLHRoaXMuZnJlcXVlbmN5LmRpc3Bvc2UoKSx0aGlzLmZyZXF1ZW5jeT1udWxsLHRoaXMuaGFybW9uaWNpdHkuZGlzcG9zZSgpLHRoaXMuaGFybW9uaWNpdHk9bnVsbCx0aGlzLl9tb2R1bGF0aW9uU2NhbGUuZGlzcG9zZSgpLHRoaXMuX21vZHVsYXRpb25TY2FsZT1udWxsLHRoaXMuX21vZHVsYXRpb25Ob2RlLmRpc2Nvbm5lY3QoKSx0aGlzLl9tb2R1bGF0aW9uTm9kZT1udWxsLHRoaXN9LHQuQU1TeW50aH0pLE1vZHVsZShmdW5jdGlvbih0KXtyZXR1cm4gdC5EcnVtU3ludGg9ZnVuY3Rpb24oZSl7ZT10aGlzLmRlZmF1bHRBcmcoZSx0LkRydW1TeW50aC5kZWZhdWx0cyksdC5JbnN0cnVtZW50LmNhbGwodGhpcyxlKSx0aGlzLm9zY2lsbGF0b3I9bmV3IHQuT3NjaWxsYXRvcihlLm9zY2lsbGF0b3IpLnN0YXJ0KCksdGhpcy5lbnZlbG9wZT1uZXcgdC5BbXBsaXR1ZGVFbnZlbG9wZShlLmVudmVsb3BlKSx0aGlzLm9jdGF2ZXM9ZS5vY3RhdmVzLHRoaXMucGl0Y2hEZWNheT1lLnBpdGNoRGVjYXksdGhpcy5vc2NpbGxhdG9yLmNoYWluKHRoaXMuZW52ZWxvcGUsdGhpcy5vdXRwdXQpLHRoaXMuX3JlYWRPbmx5KFtcIm9zY2lsbGF0b3JcIixcImVudmVsb3BlXCJdKX0sdC5leHRlbmQodC5EcnVtU3ludGgsdC5JbnN0cnVtZW50KSx0LkRydW1TeW50aC5kZWZhdWx0cz17cGl0Y2hEZWNheTouMDUsb2N0YXZlczoxMCxvc2NpbGxhdG9yOnt0eXBlOlwic2luZVwifSxlbnZlbG9wZTp7YXR0YWNrOi4wMDEsZGVjYXk6LjQsc3VzdGFpbjouMDEscmVsZWFzZToxLjQsYXR0YWNrQ3VydmU6XCJleHBvbmVudGlhbFwifX0sdC5EcnVtU3ludGgucHJvdG90eXBlLnRyaWdnZXJBdHRhY2s9ZnVuY3Rpb24odCxlLGkpe2U9dGhpcy50b1NlY29uZHMoZSksdD10aGlzLnRvRnJlcXVlbmN5KHQpO3ZhciBzPXQqdGhpcy5vY3RhdmVzO3JldHVybiB0aGlzLm9zY2lsbGF0b3IuZnJlcXVlbmN5LnNldFZhbHVlQXRUaW1lKHMsZSksdGhpcy5vc2NpbGxhdG9yLmZyZXF1ZW5jeS5leHBvbmVudGlhbFJhbXBUb1ZhbHVlQXRUaW1lKHQsZSt0aGlzLnRvU2Vjb25kcyh0aGlzLnBpdGNoRGVjYXkpKSx0aGlzLmVudmVsb3BlLnRyaWdnZXJBdHRhY2soZSxpKSx0aGlzfSx0LkRydW1TeW50aC5wcm90b3R5cGUudHJpZ2dlclJlbGVhc2U9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZW52ZWxvcGUudHJpZ2dlclJlbGVhc2UodCksdGhpc30sdC5EcnVtU3ludGgucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5JbnN0cnVtZW50LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fd3JpdGFibGUoW1wib3NjaWxsYXRvclwiLFwiZW52ZWxvcGVcIl0pLHRoaXMub3NjaWxsYXRvci5kaXNwb3NlKCksdGhpcy5vc2NpbGxhdG9yPW51bGwsdGhpcy5lbnZlbG9wZS5kaXNwb3NlKCksdGhpcy5lbnZlbG9wZT1udWxsLHRoaXN9LHQuRHJ1bVN5bnRofSksTW9kdWxlKGZ1bmN0aW9uKHQpe3JldHVybiB0LkR1b1N5bnRoPWZ1bmN0aW9uKGUpe2U9dGhpcy5kZWZhdWx0QXJnKGUsdC5EdW9TeW50aC5kZWZhdWx0cyksdC5Nb25vcGhvbmljLmNhbGwodGhpcyxlKSx0aGlzLnZvaWNlMD1uZXcgdC5Nb25vU3ludGgoZS52b2ljZTApLHRoaXMudm9pY2UwLnZvbHVtZS52YWx1ZT0tMTAsdGhpcy52b2ljZTE9bmV3IHQuTW9ub1N5bnRoKGUudm9pY2UxKSx0aGlzLnZvaWNlMS52b2x1bWUudmFsdWU9LTEwLHRoaXMuX3ZpYnJhdG89bmV3IHQuTEZPKGUudmlicmF0b1JhdGUsLTUwLDUwKSx0aGlzLl92aWJyYXRvLnN0YXJ0KCksdGhpcy52aWJyYXRvUmF0ZT10aGlzLl92aWJyYXRvLmZyZXF1ZW5jeSx0aGlzLl92aWJyYXRvR2Fpbj10aGlzLmNvbnRleHQuY3JlYXRlR2FpbigpLHRoaXMudmlicmF0b0Ftb3VudD1uZXcgdC5QYXJhbSh7cGFyYW06dGhpcy5fdmlicmF0b0dhaW4uZ2Fpbix1bml0czp0LlR5cGUuUG9zaXRpdmUsdmFsdWU6ZS52aWJyYXRvQW1vdW50fSksdGhpcy5fdmlicmF0b0RlbGF5PXRoaXMudG9TZWNvbmRzKGUudmlicmF0b0RlbGF5KSx0aGlzLmZyZXF1ZW5jeT1uZXcgdC5TaWduYWwoNDQwLHQuVHlwZS5GcmVxdWVuY3kpLHRoaXMuaGFybW9uaWNpdHk9bmV3IHQuTXVsdGlwbHkoZS5oYXJtb25pY2l0eSksdGhpcy5oYXJtb25pY2l0eS51bml0cz10LlR5cGUuUG9zaXRpdmUsdGhpcy5mcmVxdWVuY3kuY29ubmVjdCh0aGlzLnZvaWNlMC5mcmVxdWVuY3kpLHRoaXMuZnJlcXVlbmN5LmNoYWluKHRoaXMuaGFybW9uaWNpdHksdGhpcy52b2ljZTEuZnJlcXVlbmN5KSx0aGlzLl92aWJyYXRvLmNvbm5lY3QodGhpcy5fdmlicmF0b0dhaW4pLHRoaXMuX3ZpYnJhdG9HYWluLmZhbih0aGlzLnZvaWNlMC5kZXR1bmUsdGhpcy52b2ljZTEuZGV0dW5lKSx0aGlzLnZvaWNlMC5jb25uZWN0KHRoaXMub3V0cHV0KSx0aGlzLnZvaWNlMS5jb25uZWN0KHRoaXMub3V0cHV0KSx0aGlzLl9yZWFkT25seShbXCJ2b2ljZTBcIixcInZvaWNlMVwiLFwiZnJlcXVlbmN5XCIsXCJ2aWJyYXRvQW1vdW50XCIsXCJ2aWJyYXRvUmF0ZVwiXSl9LHQuZXh0ZW5kKHQuRHVvU3ludGgsdC5Nb25vcGhvbmljKSx0LkR1b1N5bnRoLmRlZmF1bHRzPXt2aWJyYXRvQW1vdW50Oi41LHZpYnJhdG9SYXRlOjUsdmlicmF0b0RlbGF5OjEsaGFybW9uaWNpdHk6MS41LHZvaWNlMDp7dm9sdW1lOi0xMCxwb3J0YW1lbnRvOjAsb3NjaWxsYXRvcjp7dHlwZTpcInNpbmVcIn0sZmlsdGVyRW52ZWxvcGU6e2F0dGFjazouMDEsZGVjYXk6MCxzdXN0YWluOjEscmVsZWFzZTouNX0sZW52ZWxvcGU6e2F0dGFjazouMDEsZGVjYXk6MCxzdXN0YWluOjEscmVsZWFzZTouNX19LHZvaWNlMTp7dm9sdW1lOi0xMCxwb3J0YW1lbnRvOjAsb3NjaWxsYXRvcjp7dHlwZTpcInNpbmVcIn0sZmlsdGVyRW52ZWxvcGU6e2F0dGFjazouMDEsZGVjYXk6MCxzdXN0YWluOjEscmVsZWFzZTouNX0sZW52ZWxvcGU6e2F0dGFjazouMDEsZGVjYXk6MCxzdXN0YWluOjEscmVsZWFzZTouNX19fSx0LkR1b1N5bnRoLnByb3RvdHlwZS5fdHJpZ2dlckVudmVsb3BlQXR0YWNrPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ9dGhpcy50b1NlY29uZHModCksdGhpcy52b2ljZTAuZW52ZWxvcGUudHJpZ2dlckF0dGFjayh0LGUpLHRoaXMudm9pY2UxLmVudmVsb3BlLnRyaWdnZXJBdHRhY2sodCxlKSx0aGlzLnZvaWNlMC5maWx0ZXJFbnZlbG9wZS50cmlnZ2VyQXR0YWNrKHQpLHRoaXMudm9pY2UxLmZpbHRlckVudmVsb3BlLnRyaWdnZXJBdHRhY2sodCksdGhpc30sdC5EdW9TeW50aC5wcm90b3R5cGUuX3RyaWdnZXJFbnZlbG9wZVJlbGVhc2U9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMudm9pY2UwLnRyaWdnZXJSZWxlYXNlKHQpLHRoaXMudm9pY2UxLnRyaWdnZXJSZWxlYXNlKHQpLHRoaXN9LHQuRHVvU3ludGgucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5Nb25vcGhvbmljLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fd3JpdGFibGUoW1widm9pY2UwXCIsXCJ2b2ljZTFcIixcImZyZXF1ZW5jeVwiLFwidmlicmF0b0Ftb3VudFwiLFwidmlicmF0b1JhdGVcIl0pLHRoaXMudm9pY2UwLmRpc3Bvc2UoKSx0aGlzLnZvaWNlMD1udWxsLHRoaXMudm9pY2UxLmRpc3Bvc2UoKSx0aGlzLnZvaWNlMT1udWxsLHRoaXMuZnJlcXVlbmN5LmRpc3Bvc2UoKSx0aGlzLmZyZXF1ZW5jeT1udWxsLHRoaXMuX3ZpYnJhdG8uZGlzcG9zZSgpLHRoaXMuX3ZpYnJhdG89bnVsbCx0aGlzLl92aWJyYXRvR2Fpbi5kaXNjb25uZWN0KCksdGhpcy5fdmlicmF0b0dhaW49bnVsbCx0aGlzLmhhcm1vbmljaXR5LmRpc3Bvc2UoKSx0aGlzLmhhcm1vbmljaXR5PW51bGwsdGhpcy52aWJyYXRvQW1vdW50LmRpc3Bvc2UoKSx0aGlzLnZpYnJhdG9BbW91bnQ9bnVsbCx0aGlzLnZpYnJhdG9SYXRlPW51bGwsdGhpc30sdC5EdW9TeW50aH0pLE1vZHVsZShmdW5jdGlvbih0KXtyZXR1cm4gdC5GTVN5bnRoPWZ1bmN0aW9uKGUpe2U9dGhpcy5kZWZhdWx0QXJnKGUsdC5GTVN5bnRoLmRlZmF1bHRzKSx0Lk1vbm9waG9uaWMuY2FsbCh0aGlzLGUpLHRoaXMuY2Fycmllcj1uZXcgdC5Nb25vU3ludGgoZS5jYXJyaWVyKSx0aGlzLmNhcnJpZXIudm9sdW1lLnZhbHVlPS0xMCx0aGlzLm1vZHVsYXRvcj1uZXcgdC5Nb25vU3ludGgoZS5tb2R1bGF0b3IpLHRoaXMubW9kdWxhdG9yLnZvbHVtZS52YWx1ZT0tMTAsdGhpcy5mcmVxdWVuY3k9bmV3IHQuU2lnbmFsKDQ0MCx0LlR5cGUuRnJlcXVlbmN5KSx0aGlzLmhhcm1vbmljaXR5PW5ldyB0Lk11bHRpcGx5KGUuaGFybW9uaWNpdHkpLHRoaXMuaGFybW9uaWNpdHkudW5pdHM9dC5UeXBlLlBvc2l0aXZlLHRoaXMubW9kdWxhdGlvbkluZGV4PW5ldyB0Lk11bHRpcGx5KGUubW9kdWxhdGlvbkluZGV4KSx0aGlzLm1vZHVsYXRpb25JbmRleC51bml0cz10LlR5cGUuUG9zaXRpdmUsdGhpcy5fbW9kdWxhdGlvbk5vZGU9dGhpcy5jb250ZXh0LmNyZWF0ZUdhaW4oKSx0aGlzLmZyZXF1ZW5jeS5jb25uZWN0KHRoaXMuY2Fycmllci5mcmVxdWVuY3kpLHRoaXMuZnJlcXVlbmN5LmNoYWluKHRoaXMuaGFybW9uaWNpdHksdGhpcy5tb2R1bGF0b3IuZnJlcXVlbmN5KSx0aGlzLmZyZXF1ZW5jeS5jaGFpbih0aGlzLm1vZHVsYXRpb25JbmRleCx0aGlzLl9tb2R1bGF0aW9uTm9kZSksdGhpcy5tb2R1bGF0b3IuY29ubmVjdCh0aGlzLl9tb2R1bGF0aW9uTm9kZS5nYWluKSx0aGlzLl9tb2R1bGF0aW9uTm9kZS5nYWluLnZhbHVlPTAsdGhpcy5fbW9kdWxhdGlvbk5vZGUuY29ubmVjdCh0aGlzLmNhcnJpZXIuZnJlcXVlbmN5KSx0aGlzLmNhcnJpZXIuY29ubmVjdCh0aGlzLm91dHB1dCksdGhpcy5fcmVhZE9ubHkoW1wiY2FycmllclwiLFwibW9kdWxhdG9yXCIsXCJmcmVxdWVuY3lcIixcImhhcm1vbmljaXR5XCIsXCJtb2R1bGF0aW9uSW5kZXhcIl0pfSx0LmV4dGVuZCh0LkZNU3ludGgsdC5Nb25vcGhvbmljKSx0LkZNU3ludGguZGVmYXVsdHM9e2hhcm1vbmljaXR5OjMsbW9kdWxhdGlvbkluZGV4OjEwLGNhcnJpZXI6e3ZvbHVtZTotMTAscG9ydGFtZW50bzowLG9zY2lsbGF0b3I6e3R5cGU6XCJzaW5lXCJ9LGVudmVsb3BlOnthdHRhY2s6LjAxLGRlY2F5OjAsc3VzdGFpbjoxLHJlbGVhc2U6LjV9LGZpbHRlckVudmVsb3BlOnthdHRhY2s6LjAxLGRlY2F5OjAsc3VzdGFpbjoxLHJlbGVhc2U6LjUsYmFzZUZyZXF1ZW5jeToyMDAsb2N0YXZlczo4fX0sbW9kdWxhdG9yOnt2b2x1bWU6LTEwLHBvcnRhbWVudG86MCxvc2NpbGxhdG9yOnt0eXBlOlwidHJpYW5nbGVcIn0sZW52ZWxvcGU6e2F0dGFjazouMDEsZGVjYXk6MCxzdXN0YWluOjEscmVsZWFzZTouNX0sZmlsdGVyRW52ZWxvcGU6e2F0dGFjazouMDEsZGVjYXk6MCxzdXN0YWluOjEscmVsZWFzZTouNSxiYXNlRnJlcXVlbmN5OjYwMCxvY3RhdmVzOjV9fX0sdC5GTVN5bnRoLnByb3RvdHlwZS5fdHJpZ2dlckVudmVsb3BlQXR0YWNrPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ9dGhpcy50b1NlY29uZHModCksdGhpcy5jYXJyaWVyLmVudmVsb3BlLnRyaWdnZXJBdHRhY2sodCxlKSx0aGlzLm1vZHVsYXRvci5lbnZlbG9wZS50cmlnZ2VyQXR0YWNrKHQpLHRoaXMuY2Fycmllci5maWx0ZXJFbnZlbG9wZS50cmlnZ2VyQXR0YWNrKHQpLHRoaXMubW9kdWxhdG9yLmZpbHRlckVudmVsb3BlLnRyaWdnZXJBdHRhY2sodCksdGhpc30sdC5GTVN5bnRoLnByb3RvdHlwZS5fdHJpZ2dlckVudmVsb3BlUmVsZWFzZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jYXJyaWVyLnRyaWdnZXJSZWxlYXNlKHQpLHRoaXMubW9kdWxhdG9yLnRyaWdnZXJSZWxlYXNlKHQpLHRoaXN9LHQuRk1TeW50aC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0Lk1vbm9waG9uaWMucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl93cml0YWJsZShbXCJjYXJyaWVyXCIsXCJtb2R1bGF0b3JcIixcImZyZXF1ZW5jeVwiLFwiaGFybW9uaWNpdHlcIixcIm1vZHVsYXRpb25JbmRleFwiXSksdGhpcy5jYXJyaWVyLmRpc3Bvc2UoKSx0aGlzLmNhcnJpZXI9bnVsbCx0aGlzLm1vZHVsYXRvci5kaXNwb3NlKCksdGhpcy5tb2R1bGF0b3I9bnVsbCx0aGlzLmZyZXF1ZW5jeS5kaXNwb3NlKCksdGhpcy5mcmVxdWVuY3k9bnVsbCx0aGlzLm1vZHVsYXRpb25JbmRleC5kaXNwb3NlKCksdGhpcy5tb2R1bGF0aW9uSW5kZXg9bnVsbCx0aGlzLmhhcm1vbmljaXR5LmRpc3Bvc2UoKSx0aGlzLmhhcm1vbmljaXR5PW51bGwsdGhpcy5fbW9kdWxhdGlvbk5vZGUuZGlzY29ubmVjdCgpLHRoaXMuX21vZHVsYXRpb25Ob2RlPW51bGwsdGhpc30sdC5GTVN5bnRofSksTW9kdWxlKGZ1bmN0aW9uKHQpe3QuTm9pc2U9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnNPYmplY3QoYXJndW1lbnRzLFtcInR5cGVcIl0sdC5Ob2lzZS5kZWZhdWx0cyk7dC5Tb3VyY2UuY2FsbCh0aGlzLGUpLHRoaXMuX3NvdXJjZT1udWxsLHRoaXMuX2J1ZmZlcj1udWxsLHRoaXMuX3BsYXliYWNrUmF0ZT1lLnBsYXliYWNrUmF0ZSx0aGlzLnR5cGU9ZS50eXBlfSx0LmV4dGVuZCh0Lk5vaXNlLHQuU291cmNlKSx0Lk5vaXNlLmRlZmF1bHRzPXt0eXBlOlwid2hpdGVcIixwbGF5YmFja1JhdGU6MX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuTm9pc2UucHJvdG90eXBlLFwidHlwZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYnVmZmVyPT09cz9cIndoaXRlXCI6dGhpcy5fYnVmZmVyPT09aT9cImJyb3duXCI6dGhpcy5fYnVmZmVyPT09ZT9cInBpbmtcIjp2b2lkIDB9LHNldDpmdW5jdGlvbihuKXtpZih0aGlzLnR5cGUhPT1uKXtzd2l0Y2gobil7Y2FzZVwid2hpdGVcIjp0aGlzLl9idWZmZXI9czticmVhaztjYXNlXCJwaW5rXCI6dGhpcy5fYnVmZmVyPWU7YnJlYWs7Y2FzZVwiYnJvd25cIjp0aGlzLl9idWZmZXI9aTticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcihcImludmFsaWQgbm9pc2UgdHlwZTogXCIrbil9aWYodGhpcy5zdGF0ZT09PXQuU3RhdGUuU3RhcnRlZCl7dmFyIG89dGhpcy5ub3coKSt0aGlzLmJsb2NrVGltZTt0aGlzLl9zdG9wKG8pLHRoaXMuX3N0YXJ0KG8pfX19fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuTm9pc2UucHJvdG90eXBlLFwicGxheWJhY2tSYXRlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wbGF5YmFja1JhdGV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9wbGF5YmFja1JhdGU9dCx0aGlzLl9zb3VyY2UmJih0aGlzLl9zb3VyY2UucGxheWJhY2tSYXRlLnZhbHVlPXQpfX0pLHQuTm9pc2UucHJvdG90eXBlLl9zdGFydD1mdW5jdGlvbih0KXt0aGlzLl9zb3VyY2U9dGhpcy5jb250ZXh0LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpLHRoaXMuX3NvdXJjZS5idWZmZXI9dGhpcy5fYnVmZmVyLHRoaXMuX3NvdXJjZS5sb29wPSEwLHRoaXMuX3NvdXJjZS5wbGF5YmFja1JhdGUudmFsdWU9dGhpcy5fcGxheWJhY2tSYXRlLHRoaXMuX3NvdXJjZS5jb25uZWN0KHRoaXMub3V0cHV0KSx0aGlzLl9zb3VyY2Uuc3RhcnQodGhpcy50b1NlY29uZHModCkpfSx0Lk5vaXNlLnByb3RvdHlwZS5fc3RvcD1mdW5jdGlvbih0KXt0aGlzLl9zb3VyY2UmJnRoaXMuX3NvdXJjZS5zdG9wKHRoaXMudG9TZWNvbmRzKHQpKX0sdC5Ob2lzZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LlNvdXJjZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLG51bGwhPT10aGlzLl9zb3VyY2UmJih0aGlzLl9zb3VyY2UuZGlzY29ubmVjdCgpLHRoaXMuX3NvdXJjZT1udWxsKSx0aGlzLl9idWZmZXI9bnVsbCx0aGlzfTt2YXIgZT1udWxsLGk9bnVsbCxzPW51bGw7cmV0dXJuIHQuX2luaXRBdWRpb0NvbnRleHQoZnVuY3Rpb24odCl7dmFyIG49dC5zYW1wbGVSYXRlLG89NCpuO2U9ZnVuY3Rpb24oKXt2YXIgZSxpLHMscixhLGwsaCx1LGMscCxmLGQ9dC5jcmVhdGVCdWZmZXIoMixvLG4pO2ZvcihlPTA7ZTxkLm51bWJlck9mQ2hhbm5lbHM7ZSsrKWZvcihpPWQuZ2V0Q2hhbm5lbERhdGEoZSkscz1yPWE9bD1oPXU9Yz0wLHA9MDtvPnA7cCsrKWY9MipNYXRoLnJhbmRvbSgpLTEscz0uOTk4ODYqcysuMDU1NTE3OSpmLHI9Ljk5MzMyKnIrLjA3NTA3NTkqZixhPS45NjkqYSsuMTUzODUyKmYsbD0uODY2NSpsKy4zMTA0ODU2KmYsaD0uNTUqaCsuNTMyOTUyMipmLHU9LS43NjE2KnUtLjAxNjg5OCpmLGlbcF09cytyK2ErbCtoK3UrYysuNTM2MipmLGlbcF0qPS4xMSxjPS4xMTU5MjYqZjtyZXR1cm4gZH0oKSxpPWZ1bmN0aW9uKCl7dmFyIGUsaSxzLHIsYSxsPXQuY3JlYXRlQnVmZmVyKDIsbyxuKTtmb3IoZT0wO2U8bC5udW1iZXJPZkNoYW5uZWxzO2UrKylmb3IoaT1sLmdldENoYW5uZWxEYXRhKGUpLHM9MCxyPTA7bz5yO3IrKylhPTIqTWF0aC5yYW5kb20oKS0xLGlbcl09KHMrLjAyKmEpLzEuMDIscz1pW3JdLGlbcl0qPTMuNTtyZXR1cm4gbH0oKSxzPWZ1bmN0aW9uKCl7dmFyIGUsaSxzLHI9dC5jcmVhdGVCdWZmZXIoMixvLG4pO2ZvcihlPTA7ZTxyLm51bWJlck9mQ2hhbm5lbHM7ZSsrKWZvcihpPXIuZ2V0Q2hhbm5lbERhdGEoZSkscz0wO28+cztzKyspaVtzXT0yKk1hdGgucmFuZG9tKCktMTtyZXR1cm4gcn0oKX0pLHQuTm9pc2V9KSxNb2R1bGUoZnVuY3Rpb24odCl7cmV0dXJuIHQuTm9pc2VTeW50aD1mdW5jdGlvbihlKXtlPXRoaXMuZGVmYXVsdEFyZyhlLHQuTm9pc2VTeW50aC5kZWZhdWx0cyksdC5JbnN0cnVtZW50LmNhbGwodGhpcyxlKSx0aGlzLm5vaXNlPW5ldyB0Lk5vaXNlLHRoaXMuZmlsdGVyPW5ldyB0LkZpbHRlcihlLmZpbHRlciksdGhpcy5maWx0ZXJFbnZlbG9wZT1uZXcgdC5GcmVxdWVuY3lFbnZlbG9wZShlLmZpbHRlckVudmVsb3BlKSx0aGlzLmVudmVsb3BlPW5ldyB0LkFtcGxpdHVkZUVudmVsb3BlKGUuZW52ZWxvcGUpLHRoaXMubm9pc2UuY2hhaW4odGhpcy5maWx0ZXIsdGhpcy5lbnZlbG9wZSx0aGlzLm91dHB1dCksdGhpcy5ub2lzZS5zdGFydCgpLHRoaXMuZmlsdGVyRW52ZWxvcGUuY29ubmVjdCh0aGlzLmZpbHRlci5mcmVxdWVuY3kpLHRoaXMuX3JlYWRPbmx5KFtcIm5vaXNlXCIsXCJmaWx0ZXJcIixcImZpbHRlckVudmVsb3BlXCIsXCJlbnZlbG9wZVwiXSl9LHQuZXh0ZW5kKHQuTm9pc2VTeW50aCx0Lkluc3RydW1lbnQpLHQuTm9pc2VTeW50aC5kZWZhdWx0cz17bm9pc2U6e3R5cGU6XCJ3aGl0ZVwifSxmaWx0ZXI6e1E6Nix0eXBlOlwiaGlnaHBhc3NcIixyb2xsb2ZmOi0yNH0sZW52ZWxvcGU6e2F0dGFjazouMDA1LGRlY2F5Oi4xLHN1c3RhaW46MH0sZmlsdGVyRW52ZWxvcGU6e2F0dGFjazouMDYsZGVjYXk6LjIsc3VzdGFpbjowLHJlbGVhc2U6MixiYXNlRnJlcXVlbmN5OjIwLG9jdGF2ZXM6NX19LHQuTm9pc2VTeW50aC5wcm90b3R5cGUudHJpZ2dlckF0dGFjaz1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmVudmVsb3BlLnRyaWdnZXJBdHRhY2sodCxlKSx0aGlzLmZpbHRlckVudmVsb3BlLnRyaWdnZXJBdHRhY2sodCksdGhpc30sdC5Ob2lzZVN5bnRoLnByb3RvdHlwZS50cmlnZ2VyUmVsZWFzZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5lbnZlbG9wZS50cmlnZ2VyUmVsZWFzZSh0KSx0aGlzLmZpbHRlckVudmVsb3BlLnRyaWdnZXJSZWxlYXNlKHQpLHRoaXN9LHQuTm9pc2VTeW50aC5wcm90b3R5cGUudHJpZ2dlckF0dGFja1JlbGVhc2U9ZnVuY3Rpb24odCxlLGkpe3JldHVybiBlPXRoaXMudG9TZWNvbmRzKGUpLHQ9dGhpcy50b1NlY29uZHModCksdGhpcy50cmlnZ2VyQXR0YWNrKGUsaSksdGhpcy50cmlnZ2VyUmVsZWFzZShlK3QpLHRoaXN9LHQuTm9pc2VTeW50aC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0Lkluc3RydW1lbnQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl93cml0YWJsZShbXCJub2lzZVwiLFwiZmlsdGVyXCIsXCJmaWx0ZXJFbnZlbG9wZVwiLFwiZW52ZWxvcGVcIl0pLHRoaXMubm9pc2UuZGlzcG9zZSgpLHRoaXMubm9pc2U9bnVsbCx0aGlzLmVudmVsb3BlLmRpc3Bvc2UoKSx0aGlzLmVudmVsb3BlPW51bGwsdGhpcy5maWx0ZXJFbnZlbG9wZS5kaXNwb3NlKCksdGhpcy5maWx0ZXJFbnZlbG9wZT1udWxsLHRoaXMuZmlsdGVyLmRpc3Bvc2UoKSx0aGlzLmZpbHRlcj1udWxsLHRoaXN9LHQuTm9pc2VTeW50aH0pLE1vZHVsZShmdW5jdGlvbih0KXtyZXR1cm4gdC5QbHVja1N5bnRoPWZ1bmN0aW9uKGUpe2U9dGhpcy5kZWZhdWx0QXJnKGUsdC5QbHVja1N5bnRoLmRlZmF1bHRzKSx0Lkluc3RydW1lbnQuY2FsbCh0aGlzLGUpLHRoaXMuX25vaXNlPW5ldyB0Lk5vaXNlKFwicGlua1wiKSx0aGlzLmF0dGFja05vaXNlPTEsdGhpcy5fbGZjZj1uZXcgdC5Mb3dwYXNzQ29tYkZpbHRlcih7cmVzb25hbmNlOmUucmVzb25hbmNlLGRhbXBlbmluZzplLmRhbXBlbmluZ30pLHRoaXMucmVzb25hbmNlPXRoaXMuX2xmY2YucmVzb25hbmNlLHRoaXMuZGFtcGVuaW5nPXRoaXMuX2xmY2YuZGFtcGVuaW5nLHRoaXMuX25vaXNlLmNvbm5lY3QodGhpcy5fbGZjZiksdGhpcy5fbGZjZi5jb25uZWN0KHRoaXMub3V0cHV0KSx0aGlzLl9yZWFkT25seShbXCJyZXNvbmFuY2VcIixcImRhbXBlbmluZ1wiXSl9LHQuZXh0ZW5kKHQuUGx1Y2tTeW50aCx0Lkluc3RydW1lbnQpLHQuUGx1Y2tTeW50aC5kZWZhdWx0cz17YXR0YWNrTm9pc2U6MSxkYW1wZW5pbmc6NGUzLHJlc29uYW5jZTouOX0sdC5QbHVja1N5bnRoLnByb3RvdHlwZS50cmlnZ2VyQXR0YWNrPWZ1bmN0aW9uKHQsZSl7dD10aGlzLnRvRnJlcXVlbmN5KHQpLGU9dGhpcy50b1NlY29uZHMoZSk7dmFyIGk9MS90O3JldHVybiB0aGlzLl9sZmNmLmRlbGF5VGltZS5zZXRWYWx1ZUF0VGltZShpLGUpLHRoaXMuX25vaXNlLnN0YXJ0KGUpLHRoaXMuX25vaXNlLnN0b3AoZStpKnRoaXMuYXR0YWNrTm9pc2UpLHRoaXN9LHQuUGx1Y2tTeW50aC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0Lkluc3RydW1lbnQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9ub2lzZS5kaXNwb3NlKCksdGhpcy5fbGZjZi5kaXNwb3NlKCksdGhpcy5fbm9pc2U9bnVsbCx0aGlzLl9sZmNmPW51bGwsdGhpcy5fd3JpdGFibGUoW1wicmVzb25hbmNlXCIsXCJkYW1wZW5pbmdcIl0pLHRoaXMuZGFtcGVuaW5nPW51bGwsdGhpcy5yZXNvbmFuY2U9bnVsbCx0aGlzfSx0LlBsdWNrU3ludGh9KSxNb2R1bGUoZnVuY3Rpb24odCl7cmV0dXJuIHQuUG9seVN5bnRoPWZ1bmN0aW9uKCl7dmFyIGUsaSxzO2Zvcih0Lkluc3RydW1lbnQuY2FsbCh0aGlzKSxlPXRoaXMub3B0aW9uc09iamVjdChhcmd1bWVudHMsW1wicG9seXBob255XCIsXCJ2b2ljZVwiXSx0LlBvbHlTeW50aC5kZWZhdWx0cyksdGhpcy52b2ljZXM9bmV3IEFycmF5KGUucG9seXBob255KSx0aGlzLnN0ZWFsVm9pY2VzPSEwLHRoaXMuX2ZyZWVWb2ljZXM9W10sdGhpcy5fYWN0aXZlVm9pY2VzPXt9LGk9MDtpPGUucG9seXBob255O2krKylzPW5ldyBlLnZvaWNlKGFyZ3VtZW50c1syXSxhcmd1bWVudHNbM10pLHRoaXMudm9pY2VzW2ldPXMscy5jb25uZWN0KHRoaXMub3V0cHV0KTt0aGlzLl9mcmVlVm9pY2VzPXRoaXMudm9pY2VzLnNsaWNlKDApfSx0LmV4dGVuZCh0LlBvbHlTeW50aCx0Lkluc3RydW1lbnQpLHQuUG9seVN5bnRoLmRlZmF1bHRzPXtwb2x5cGhvbnk6NCx2b2ljZTp0Lk1vbm9TeW50aH0sdC5Qb2x5U3ludGgucHJvdG90eXBlLnRyaWdnZXJBdHRhY2s9ZnVuY3Rpb24odCxlLGkpe3ZhciBzLG4sbyxyLGE7Zm9yKEFycmF5LmlzQXJyYXkodCl8fCh0PVt0XSkscz0wO3M8dC5sZW5ndGg7cysrKWlmKG49dFtzXSxvPUpTT04uc3RyaW5naWZ5KG4pLHRoaXMuX2FjdGl2ZVZvaWNlcy5oYXNPd25Qcm9wZXJ0eShvKSl0aGlzLl9hY3RpdmVWb2ljZXNbb10udHJpZ2dlckF0dGFjayhuLGUsaSk7ZWxzZSBpZih0aGlzLl9mcmVlVm9pY2VzLmxlbmd0aD4wKXI9dGhpcy5fZnJlZVZvaWNlcy5zaGlmdCgpLHIudHJpZ2dlckF0dGFjayhuLGUsaSksdGhpcy5fYWN0aXZlVm9pY2VzW29dPXI7ZWxzZSBpZih0aGlzLnN0ZWFsVm9pY2VzKWZvcihhIGluIHRoaXMuX2FjdGl2ZVZvaWNlcyl7dGhpcy5fYWN0aXZlVm9pY2VzW2FdLnRyaWdnZXJBdHRhY2sobixlLGkpO2JyZWFrfXJldHVybiB0aGlzfSx0LlBvbHlTeW50aC5wcm90b3R5cGUudHJpZ2dlckF0dGFja1JlbGVhc2U9ZnVuY3Rpb24odCxlLGkscyl7cmV0dXJuIGk9dGhpcy50b1NlY29uZHMoaSksdGhpcy50cmlnZ2VyQXR0YWNrKHQsaSxzKSx0aGlzLnRyaWdnZXJSZWxlYXNlKHQsaSt0aGlzLnRvU2Vjb25kcyhlKSksdGhpc30sdC5Qb2x5U3ludGgucHJvdG90eXBlLnRyaWdnZXJSZWxlYXNlPWZ1bmN0aW9uKHQsZSl7dmFyIGkscyxuO2ZvcihBcnJheS5pc0FycmF5KHQpfHwodD1bdF0pLGk9MDtpPHQubGVuZ3RoO2krKylzPUpTT04uc3RyaW5naWZ5KHRbaV0pLG49dGhpcy5fYWN0aXZlVm9pY2VzW3NdLG4mJihuLnRyaWdnZXJSZWxlYXNlKGUpLHRoaXMuX2ZyZWVWb2ljZXMucHVzaChuKSxkZWxldGUgdGhpcy5fYWN0aXZlVm9pY2VzW3NdLG49bnVsbCk7cmV0dXJuIHRoaXN9LHQuUG9seVN5bnRoLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCxlLGkpe2Zvcih2YXIgcz0wO3M8dGhpcy52b2ljZXMubGVuZ3RoO3MrKyl0aGlzLnZvaWNlc1tzXS5zZXQodCxlLGkpO3JldHVybiB0aGlzfSx0LlBvbHlTeW50aC5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnZvaWNlc1swXS5nZXQodCl9LHQuUG9seVN5bnRoLnByb3RvdHlwZS5yZWxlYXNlQWxsPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dGhpcy52b2ljZXMubGVuZ3RoO2UrKyl0aGlzLnZvaWNlc1tlXS50cmlnZ2VyUmVsZWFzZSh0KTtyZXR1cm4gdGhpc30sdC5Qb2x5U3ludGgucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0Lkluc3RydW1lbnQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKTtmb3IodmFyIGU9MDtlPHRoaXMudm9pY2VzLmxlbmd0aDtlKyspdGhpcy52b2ljZXNbZV0uZGlzcG9zZSgpLHRoaXMudm9pY2VzW2VdPW51bGw7cmV0dXJuIHRoaXMudm9pY2VzPW51bGwsdGhpcy5fYWN0aXZlVm9pY2VzPW51bGwsdGhpcy5fZnJlZVZvaWNlcz1udWxsLHRoaXN9LHQuUG9seVN5bnRofSksTW9kdWxlKGZ1bmN0aW9uKHQpe3JldHVybiB0LlBsYXllcj1mdW5jdGlvbihlKXt2YXIgaTtlIGluc3RhbmNlb2YgdC5CdWZmZXI/KGU9ZS5nZXQoKSxpPXQuUGxheWVyLmRlZmF1bHRzKTppPXRoaXMub3B0aW9uc09iamVjdChhcmd1bWVudHMsW1widXJsXCIsXCJvbmxvYWRcIl0sdC5QbGF5ZXIuZGVmYXVsdHMpLHQuU291cmNlLmNhbGwodGhpcyxpKSx0aGlzLl9zb3VyY2U9bnVsbCx0aGlzLmF1dG9zdGFydD1pLmF1dG9zdGFydCx0aGlzLl9idWZmZXI9bmV3IHQuQnVmZmVyKHt1cmw6aS51cmwsb25sb2FkOnRoaXMuX29ubG9hZC5iaW5kKHRoaXMsaS5vbmxvYWQpLHJldmVyc2U6aS5yZXZlcnNlfSksZSBpbnN0YW5jZW9mIEF1ZGlvQnVmZmVyJiZ0aGlzLl9idWZmZXIuc2V0KGUpLHRoaXMuX2xvb3A9aS5sb29wLHRoaXMuX2xvb3BTdGFydD1pLmxvb3BTdGFydCx0aGlzLl9sb29wRW5kPWkubG9vcEVuZCx0aGlzLl9wbGF5YmFja1JhdGU9aS5wbGF5YmFja1JhdGUsdGhpcy5yZXRyaWdnZXI9aS5yZXRyaWdnZXJ9LHQuZXh0ZW5kKHQuUGxheWVyLHQuU291cmNlKSx0LlBsYXllci5kZWZhdWx0cz17b25sb2FkOnQubm9PcCxwbGF5YmFja1JhdGU6MSxsb29wOiExLGF1dG9zdGFydDohMSxsb29wU3RhcnQ6MCxsb29wRW5kOjAscmV0cmlnZ2VyOiExLHJldmVyc2U6ITF9LHQuUGxheWVyLnByb3RvdHlwZS5sb2FkPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuX2J1ZmZlci5sb2FkKHQsdGhpcy5fb25sb2FkLmJpbmQodGhpcyxlKSksdGhpc30sdC5QbGF5ZXIucHJvdG90eXBlLl9vbmxvYWQ9ZnVuY3Rpb24odCl7dCh0aGlzKSx0aGlzLmF1dG9zdGFydCYmdGhpcy5zdGFydCgpfSx0LlBsYXllci5wcm90b3R5cGUuX3N0YXJ0PWZ1bmN0aW9uKGUsaSxzKXtpZighdGhpcy5fYnVmZmVyLmxvYWRlZCl0aHJvdyBFcnJvcihcInRyaWVkIHRvIHN0YXJ0IFBsYXllciBiZWZvcmUgdGhlIGJ1ZmZlciB3YXMgbG9hZGVkXCIpO3JldHVybiBpPXRoaXMuX2xvb3A/dGhpcy5kZWZhdWx0QXJnKGksdGhpcy5fbG9vcFN0YXJ0KTp0aGlzLmRlZmF1bHRBcmcoaSwwKSxpPXRoaXMudG9TZWNvbmRzKGkpLHM9dGhpcy5kZWZhdWx0QXJnKHMsdGhpcy5fYnVmZmVyLmR1cmF0aW9uLWkpLGU9dGhpcy50b1NlY29uZHMoZSkscz10aGlzLnRvU2Vjb25kcyhzKSx0aGlzLl9zb3VyY2U9dGhpcy5jb250ZXh0LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpLHRoaXMuX3NvdXJjZS5idWZmZXI9dGhpcy5fYnVmZmVyLmdldCgpLHRoaXMuX2xvb3A/KHRoaXMuX3NvdXJjZS5sb29wPXRoaXMuX2xvb3AsdGhpcy5fc291cmNlLmxvb3BTdGFydD10aGlzLnRvU2Vjb25kcyh0aGlzLl9sb29wU3RhcnQpLHRoaXMuX3NvdXJjZS5sb29wRW5kPXRoaXMudG9TZWNvbmRzKHRoaXMuX2xvb3BFbmQpKTp0aGlzLl9zdGF0ZS5zZXRTdGF0ZUF0VGltZSh0LlN0YXRlLlN0b3BwZWQsZStzKSx0aGlzLl9zb3VyY2UucGxheWJhY2tSYXRlLnZhbHVlPXRoaXMuX3BsYXliYWNrUmF0ZSx0aGlzLl9zb3VyY2UuY29ubmVjdCh0aGlzLm91dHB1dCksdGhpcy5fbG9vcD90aGlzLl9zb3VyY2Uuc3RhcnQoZSxpKTp0aGlzLl9zb3VyY2Uuc3RhcnQoZSxpLHMpLHRoaXN9LHQuUGxheWVyLnByb3RvdHlwZS5fc3RvcD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fc291cmNlJiYodGhpcy5fc291cmNlLnN0b3AodGhpcy50b1NlY29uZHModCkpLHRoaXMuX3NvdXJjZT1udWxsKSx0aGlzfSx0LlBsYXllci5wcm90b3R5cGUuc2V0TG9vcFBvaW50cz1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmxvb3BTdGFydD10LHRoaXMubG9vcEVuZD1lLHRoaXN9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlBsYXllci5wcm90b3R5cGUsXCJsb29wU3RhcnRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xvb3BTdGFydH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2xvb3BTdGFydD10LHRoaXMuX3NvdXJjZSYmKHRoaXMuX3NvdXJjZS5sb29wU3RhcnQ9dGhpcy50b1NlY29uZHModCkpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlBsYXllci5wcm90b3R5cGUsXCJsb29wRW5kXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sb29wRW5kfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbG9vcEVuZD10LHRoaXMuX3NvdXJjZSYmKHRoaXMuX3NvdXJjZS5sb29wRW5kPXRoaXMudG9TZWNvbmRzKHQpKX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5QbGF5ZXIucHJvdG90eXBlLFwiYnVmZmVyXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9idWZmZXJ9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9idWZmZXIuc2V0KHQpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlBsYXllci5wcm90b3R5cGUsXCJsb29wXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sb29wfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbG9vcD10LHRoaXMuX3NvdXJjZSYmKHRoaXMuX3NvdXJjZS5sb29wPXQpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlBsYXllci5wcm90b3R5cGUsXCJwbGF5YmFja1JhdGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BsYXliYWNrUmF0ZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3BsYXliYWNrUmF0ZT10LHRoaXMuX3NvdXJjZSYmKHRoaXMuX3NvdXJjZS5wbGF5YmFja1JhdGUudmFsdWU9dCl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuUGxheWVyLnByb3RvdHlwZSxcInJldmVyc2VcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2J1ZmZlci5yZXZlcnNlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fYnVmZmVyLnJldmVyc2U9dH19KSx0LlBsYXllci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LlNvdXJjZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLG51bGwhPT10aGlzLl9zb3VyY2UmJih0aGlzLl9zb3VyY2UuZGlzY29ubmVjdCgpLHRoaXMuX3NvdXJjZT1udWxsKSx0aGlzLl9idWZmZXIuZGlzcG9zZSgpLHRoaXMuX2J1ZmZlcj1udWxsLHRoaXN9LHQuUGxheWVyfSksTW9kdWxlKGZ1bmN0aW9uKHQpe3JldHVybiB0LlNhbXBsZXI9ZnVuY3Rpb24oZSxpKXtpPXRoaXMuZGVmYXVsdEFyZyhpLHQuU2FtcGxlci5kZWZhdWx0cyksdC5JbnN0cnVtZW50LmNhbGwodGhpcyxpKSx0aGlzLnBsYXllcj1uZXcgdC5QbGF5ZXIoaS5wbGF5ZXIpLHRoaXMucGxheWVyLnJldHJpZ2dlcj0hMCx0aGlzLl9idWZmZXJzPXt9LHRoaXMuZW52ZWxvcGU9bmV3IHQuQW1wbGl0dWRlRW52ZWxvcGUoaS5lbnZlbG9wZSksdGhpcy5maWx0ZXJFbnZlbG9wZT1uZXcgdC5GcmVxdWVuY3lFbnZlbG9wZShpLmZpbHRlckVudmVsb3BlKSx0aGlzLl9zYW1wbGU9aS5zYW1wbGUsdGhpcy5fcGl0Y2g9aS5waXRjaCx0aGlzLmZpbHRlcj1uZXcgdC5GaWx0ZXIoaS5maWx0ZXIpLHRoaXMuX2xvYWRCdWZmZXJzKGUpLHRoaXMucGl0Y2g9aS5waXRjaCx0aGlzLnBsYXllci5jaGFpbih0aGlzLmZpbHRlcix0aGlzLmVudmVsb3BlLHRoaXMub3V0cHV0KSx0aGlzLmZpbHRlckVudmVsb3BlLmNvbm5lY3QodGhpcy5maWx0ZXIuZnJlcXVlbmN5KSx0aGlzLl9yZWFkT25seShbXCJwbGF5ZXJcIixcImZpbHRlckVudmVsb3BlXCIsXCJlbnZlbG9wZVwiLFwiZmlsdGVyXCJdKX0sdC5leHRlbmQodC5TYW1wbGVyLHQuSW5zdHJ1bWVudCksdC5TYW1wbGVyLmRlZmF1bHRzPXtzYW1wbGU6MCxwaXRjaDowLHBsYXllcjp7bG9vcDohMX0sZW52ZWxvcGU6e2F0dGFjazouMDAxLGRlY2F5OjAsc3VzdGFpbjoxLHJlbGVhc2U6LjF9LGZpbHRlckVudmVsb3BlOnthdHRhY2s6LjAwMSxkZWNheTouMDAxLHN1c3RhaW46MSxyZWxlYXNlOi41LGJhc2VGcmVxdWVuY3k6MjAsb2N0YXZlczoxMH0sZmlsdGVyOnt0eXBlOlwibG93cGFzc1wifX0sdC5TYW1wbGVyLnByb3RvdHlwZS5fbG9hZEJ1ZmZlcnM9ZnVuY3Rpb24oZSl7dmFyIGkscztpZih0aGlzLmlzU3RyaW5nKGUpKXRoaXMuX2J1ZmZlcnNbMF09bmV3IHQuQnVmZmVyKGUsZnVuY3Rpb24oKXt0aGlzLnNhbXBsZT1cIjBcIn0uYmluZCh0aGlzKSk7ZWxzZXtlPXRoaXMuX2ZsYXR0ZW5VcmxzKGUpO2ZvcihpIGluIGUpdGhpcy5fc2FtcGxlPWkscz1lW2ldLHRoaXMuX2J1ZmZlcnNbaV09bmV3IHQuQnVmZmVyKHMpfX0sdC5TYW1wbGVyLnByb3RvdHlwZS5fZmxhdHRlblVybHM9ZnVuY3Rpb24odCl7dmFyIGUsaSxzLG49e307Zm9yKGUgaW4gdClpZih0Lmhhc093blByb3BlcnR5KGUpKWlmKHRoaXMuaXNPYmplY3QodFtlXSkpe2k9dGhpcy5fZmxhdHRlblVybHModFtlXSk7Zm9yKHMgaW4gaSlpLmhhc093blByb3BlcnR5KHMpJiYobltlK1wiLlwiK3NdPWlbc10pfWVsc2UgbltlXT10W2VdO3JldHVybiBufSx0LlNhbXBsZXIucHJvdG90eXBlLnRyaWdnZXJBdHRhY2s9ZnVuY3Rpb24odCxlLGkpe3JldHVybiBlPXRoaXMudG9TZWNvbmRzKGUpLHQmJih0aGlzLnNhbXBsZT10KSx0aGlzLnBsYXllci5zdGFydChlKSx0aGlzLmVudmVsb3BlLnRyaWdnZXJBdHRhY2soZSxpKSx0aGlzLmZpbHRlckVudmVsb3BlLnRyaWdnZXJBdHRhY2soZSksdGhpc30sdC5TYW1wbGVyLnByb3RvdHlwZS50cmlnZ2VyUmVsZWFzZT1mdW5jdGlvbih0KXtyZXR1cm4gdD10aGlzLnRvU2Vjb25kcyh0KSx0aGlzLmZpbHRlckVudmVsb3BlLnRyaWdnZXJSZWxlYXNlKHQpLHRoaXMuZW52ZWxvcGUudHJpZ2dlclJlbGVhc2UodCksdGhpcy5wbGF5ZXIuc3RvcCh0aGlzLnRvU2Vjb25kcyh0aGlzLmVudmVsb3BlLnJlbGVhc2UpK3QpLHRoaXN9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlNhbXBsZXIucHJvdG90eXBlLFwic2FtcGxlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zYW1wbGV9LHNldDpmdW5jdGlvbih0KXtpZighdGhpcy5fYnVmZmVycy5oYXNPd25Qcm9wZXJ0eSh0KSl0aHJvdyBuZXcgRXJyb3IoXCJTYW1wbGVyIGRvZXMgbm90IGhhdmUgYSBzYW1wbGUgbmFtZWQgXCIrdCk7dGhpcy5fc2FtcGxlPXQsdGhpcy5wbGF5ZXIuYnVmZmVyPXRoaXMuX2J1ZmZlcnNbdF19fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuU2FtcGxlci5wcm90b3R5cGUsXCJyZXZlcnNlXCIse2dldDpmdW5jdGlvbigpe2Zvcih2YXIgdCBpbiB0aGlzLl9idWZmZXJzKXJldHVybiB0aGlzLl9idWZmZXJzW3RdLnJldmVyc2V9LHNldDpmdW5jdGlvbih0KXtmb3IodmFyIGUgaW4gdGhpcy5fYnVmZmVycyl0aGlzLl9idWZmZXJzW2VdLnJldmVyc2U9dH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5TYW1wbGVyLnByb3RvdHlwZSxcInBpdGNoXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9waXRjaH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3BpdGNoPXQsdGhpcy5wbGF5ZXIucGxheWJhY2tSYXRlPXRoaXMuaW50ZXJ2YWxUb0ZyZXF1ZW5jeVJhdGlvKHQpfX0pLHQuU2FtcGxlci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3QuSW5zdHJ1bWVudC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3dyaXRhYmxlKFtcInBsYXllclwiLFwiZmlsdGVyRW52ZWxvcGVcIixcImVudmVsb3BlXCIsXCJmaWx0ZXJcIl0pLHRoaXMucGxheWVyLmRpc3Bvc2UoKSx0aGlzLmZpbHRlckVudmVsb3BlLmRpc3Bvc2UoKSx0aGlzLmVudmVsb3BlLmRpc3Bvc2UoKSx0aGlzLmZpbHRlci5kaXNwb3NlKCksdGhpcy5wbGF5ZXI9bnVsbCx0aGlzLmZpbHRlckVudmVsb3BlPW51bGwsdGhpcy5lbnZlbG9wZT1udWxsLHRoaXMuZmlsdGVyPW51bGw7Zm9yKHZhciBlIGluIHRoaXMuX2J1ZmZlcnMpdGhpcy5fYnVmZmVyc1tlXS5kaXNwb3NlKCksdGhpcy5fYnVmZmVyc1tlXT1udWxsO3JldHVybiB0aGlzLl9idWZmZXJzPW51bGwsdGhpc30sdC5TYW1wbGVyfSksTW9kdWxlKGZ1bmN0aW9uKHQpe3JldHVybiB0LlNpbXBsZVN5bnRoPWZ1bmN0aW9uKGUpe2U9dGhpcy5kZWZhdWx0QXJnKGUsdC5TaW1wbGVTeW50aC5kZWZhdWx0cyksdC5Nb25vcGhvbmljLmNhbGwodGhpcyxlKSx0aGlzLm9zY2lsbGF0b3I9bmV3IHQuT21uaU9zY2lsbGF0b3IoZS5vc2NpbGxhdG9yKSx0aGlzLmZyZXF1ZW5jeT10aGlzLm9zY2lsbGF0b3IuZnJlcXVlbmN5LHRoaXMuZGV0dW5lPXRoaXMub3NjaWxsYXRvci5kZXR1bmUsdGhpcy5lbnZlbG9wZT1uZXcgdC5BbXBsaXR1ZGVFbnZlbG9wZShlLmVudmVsb3BlKSx0aGlzLm9zY2lsbGF0b3IuY2hhaW4odGhpcy5lbnZlbG9wZSx0aGlzLm91dHB1dCksdGhpcy5vc2NpbGxhdG9yLnN0YXJ0KCksdGhpcy5fcmVhZE9ubHkoW1wib3NjaWxsYXRvclwiLFwiZnJlcXVlbmN5XCIsXCJkZXR1bmVcIixcImVudmVsb3BlXCJdKX0sdC5leHRlbmQodC5TaW1wbGVTeW50aCx0Lk1vbm9waG9uaWMpLHQuU2ltcGxlU3ludGguZGVmYXVsdHM9e29zY2lsbGF0b3I6e3R5cGU6XCJ0cmlhbmdsZVwifSxlbnZlbG9wZTp7YXR0YWNrOi4wMDUsZGVjYXk6LjEsc3VzdGFpbjouMyxyZWxlYXNlOjF9fSx0LlNpbXBsZVN5bnRoLnByb3RvdHlwZS5fdHJpZ2dlckVudmVsb3BlQXR0YWNrPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuZW52ZWxvcGUudHJpZ2dlckF0dGFjayh0LGUpLHRoaXN9LHQuU2ltcGxlU3ludGgucHJvdG90eXBlLl90cmlnZ2VyRW52ZWxvcGVSZWxlYXNlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmVudmVsb3BlLnRyaWdnZXJSZWxlYXNlKHQpLHRoaXN9LHQuU2ltcGxlU3ludGgucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5Nb25vcGhvbmljLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fd3JpdGFibGUoW1wib3NjaWxsYXRvclwiLFwiZnJlcXVlbmN5XCIsXCJkZXR1bmVcIixcImVudmVsb3BlXCJdKSx0aGlzLm9zY2lsbGF0b3IuZGlzcG9zZSgpLHRoaXMub3NjaWxsYXRvcj1udWxsLHRoaXMuZW52ZWxvcGUuZGlzcG9zZSgpLHRoaXMuZW52ZWxvcGU9bnVsbCx0aGlzLmZyZXF1ZW5jeT1udWxsLHRoaXMuZGV0dW5lPW51bGwsdGhpc30sdC5TaW1wbGVTeW50aH0pLE1vZHVsZShmdW5jdGlvbih0KXtyZXR1cm4gdC5TaW1wbGVBTT1mdW5jdGlvbihlKXtlPXRoaXMuZGVmYXVsdEFyZyhlLHQuU2ltcGxlQU0uZGVmYXVsdHMpLHQuTW9ub3Bob25pYy5jYWxsKHRoaXMsZSksdGhpcy5jYXJyaWVyPW5ldyB0LlNpbXBsZVN5bnRoKGUuY2FycmllciksdGhpcy5tb2R1bGF0b3I9bmV3IHQuU2ltcGxlU3ludGgoZS5tb2R1bGF0b3IpLHRoaXMuZnJlcXVlbmN5PW5ldyB0LlNpZ25hbCg0NDAsdC5UeXBlLkZyZXF1ZW5jeSksdGhpcy5oYXJtb25pY2l0eT1uZXcgdC5NdWx0aXBseShlLmhhcm1vbmljaXR5KSx0aGlzLmhhcm1vbmljaXR5LnVuaXRzPXQuVHlwZS5Qb3NpdGl2ZSx0aGlzLl9tb2R1bGF0aW9uU2NhbGU9bmV3IHQuQXVkaW9Ub0dhaW4sdGhpcy5fbW9kdWxhdGlvbk5vZGU9dGhpcy5jb250ZXh0LmNyZWF0ZUdhaW4oKSx0aGlzLmZyZXF1ZW5jeS5jb25uZWN0KHRoaXMuY2Fycmllci5mcmVxdWVuY3kpLHRoaXMuZnJlcXVlbmN5LmNoYWluKHRoaXMuaGFybW9uaWNpdHksdGhpcy5tb2R1bGF0b3IuZnJlcXVlbmN5KSx0aGlzLm1vZHVsYXRvci5jaGFpbih0aGlzLl9tb2R1bGF0aW9uU2NhbGUsdGhpcy5fbW9kdWxhdGlvbk5vZGUuZ2FpbiksdGhpcy5jYXJyaWVyLmNoYWluKHRoaXMuX21vZHVsYXRpb25Ob2RlLHRoaXMub3V0cHV0KSx0aGlzLl9yZWFkT25seShbXCJjYXJyaWVyXCIsXCJtb2R1bGF0b3JcIixcImZyZXF1ZW5jeVwiLFwiaGFybW9uaWNpdHlcIl0pfSx0LmV4dGVuZCh0LlNpbXBsZUFNLHQuTW9ub3Bob25pYyksdC5TaW1wbGVBTS5kZWZhdWx0cz17aGFybW9uaWNpdHk6MyxjYXJyaWVyOnt2b2x1bWU6LTEwLHBvcnRhbWVudG86MCxvc2NpbGxhdG9yOnt0eXBlOlwic2luZVwifSxlbnZlbG9wZTp7YXR0YWNrOi4wMSxkZWNheTouMDEsc3VzdGFpbjoxLHJlbGVhc2U6LjV9fSxtb2R1bGF0b3I6e3ZvbHVtZTotMTAscG9ydGFtZW50bzowLG9zY2lsbGF0b3I6e3R5cGU6XCJzaW5lXCJ9LGVudmVsb3BlOnthdHRhY2s6LjUsZGVjYXk6LjEsc3VzdGFpbjoxLHJlbGVhc2U6LjV9fX0sdC5TaW1wbGVBTS5wcm90b3R5cGUuX3RyaWdnZXJFbnZlbG9wZUF0dGFjaz1mdW5jdGlvbih0LGUpe3JldHVybiB0PXRoaXMudG9TZWNvbmRzKHQpLHRoaXMuY2Fycmllci5lbnZlbG9wZS50cmlnZ2VyQXR0YWNrKHQsZSksdGhpcy5tb2R1bGF0b3IuZW52ZWxvcGUudHJpZ2dlckF0dGFjayh0KSx0aGlzfSx0LlNpbXBsZUFNLnByb3RvdHlwZS5fdHJpZ2dlckVudmVsb3BlUmVsZWFzZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jYXJyaWVyLnRyaWdnZXJSZWxlYXNlKHQpLHRoaXMubW9kdWxhdG9yLnRyaWdnZXJSZWxlYXNlKHQpLHRoaXN9LHQuU2ltcGxlQU0ucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5Nb25vcGhvbmljLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fd3JpdGFibGUoW1wiY2FycmllclwiLFwibW9kdWxhdG9yXCIsXCJmcmVxdWVuY3lcIixcImhhcm1vbmljaXR5XCJdKSx0aGlzLmNhcnJpZXIuZGlzcG9zZSgpLHRoaXMuY2Fycmllcj1udWxsLHRoaXMubW9kdWxhdG9yLmRpc3Bvc2UoKSx0aGlzLm1vZHVsYXRvcj1udWxsLHRoaXMuZnJlcXVlbmN5LmRpc3Bvc2UoKSx0aGlzLmZyZXF1ZW5jeT1udWxsLHRoaXMuaGFybW9uaWNpdHkuZGlzcG9zZSgpLHRoaXMuaGFybW9uaWNpdHk9bnVsbCx0aGlzLl9tb2R1bGF0aW9uU2NhbGUuZGlzcG9zZSgpLHRoaXMuX21vZHVsYXRpb25TY2FsZT1udWxsLHRoaXMuX21vZHVsYXRpb25Ob2RlLmRpc2Nvbm5lY3QoKSx0aGlzLl9tb2R1bGF0aW9uTm9kZT1udWxsLHRoaXN9LHQuU2ltcGxlQU19KSxNb2R1bGUoZnVuY3Rpb24odCl7cmV0dXJuIHQuU2ltcGxlRk09ZnVuY3Rpb24oZSl7ZT10aGlzLmRlZmF1bHRBcmcoZSx0LlNpbXBsZUZNLmRlZmF1bHRzKSx0Lk1vbm9waG9uaWMuY2FsbCh0aGlzLGUpLHRoaXMuY2Fycmllcj1uZXcgdC5TaW1wbGVTeW50aChlLmNhcnJpZXIpLHRoaXMuY2Fycmllci52b2x1bWUudmFsdWU9LTEwLHRoaXMubW9kdWxhdG9yPW5ldyB0LlNpbXBsZVN5bnRoKGUubW9kdWxhdG9yKSx0aGlzLm1vZHVsYXRvci52b2x1bWUudmFsdWU9LTEwLHRoaXMuZnJlcXVlbmN5PW5ldyB0LlNpZ25hbCg0NDAsdC5UeXBlLkZyZXF1ZW5jeSksdGhpcy5oYXJtb25pY2l0eT1uZXcgdC5NdWx0aXBseShlLmhhcm1vbmljaXR5KSx0aGlzLmhhcm1vbmljaXR5LnVuaXRzPXQuVHlwZS5Qb3NpdGl2ZSx0aGlzLm1vZHVsYXRpb25JbmRleD1uZXcgdC5NdWx0aXBseShlLm1vZHVsYXRpb25JbmRleCksdGhpcy5tb2R1bGF0aW9uSW5kZXgudW5pdHM9dC5UeXBlLlBvc2l0aXZlLHRoaXMuX21vZHVsYXRpb25Ob2RlPXRoaXMuY29udGV4dC5jcmVhdGVHYWluKCksdGhpcy5mcmVxdWVuY3kuY29ubmVjdCh0aGlzLmNhcnJpZXIuZnJlcXVlbmN5KSx0aGlzLmZyZXF1ZW5jeS5jaGFpbih0aGlzLmhhcm1vbmljaXR5LHRoaXMubW9kdWxhdG9yLmZyZXF1ZW5jeSksdGhpcy5mcmVxdWVuY3kuY2hhaW4odGhpcy5tb2R1bGF0aW9uSW5kZXgsdGhpcy5fbW9kdWxhdGlvbk5vZGUpLHRoaXMubW9kdWxhdG9yLmNvbm5lY3QodGhpcy5fbW9kdWxhdGlvbk5vZGUuZ2FpbiksdGhpcy5fbW9kdWxhdGlvbk5vZGUuZ2Fpbi52YWx1ZT0wLHRoaXMuX21vZHVsYXRpb25Ob2RlLmNvbm5lY3QodGhpcy5jYXJyaWVyLmZyZXF1ZW5jeSksdGhpcy5jYXJyaWVyLmNvbm5lY3QodGhpcy5vdXRwdXQpLHRoaXMuX3JlYWRPbmx5KFtcImNhcnJpZXJcIixcIm1vZHVsYXRvclwiLFwiZnJlcXVlbmN5XCIsXCJoYXJtb25pY2l0eVwiLFwibW9kdWxhdGlvbkluZGV4XCJdKX0sdC5leHRlbmQodC5TaW1wbGVGTSx0Lk1vbm9waG9uaWMpLHQuU2ltcGxlRk0uZGVmYXVsdHM9e2hhcm1vbmljaXR5OjMsbW9kdWxhdGlvbkluZGV4OjEwLGNhcnJpZXI6e3ZvbHVtZTotMTAscG9ydGFtZW50bzowLG9zY2lsbGF0b3I6e3R5cGU6XCJzaW5lXCJ9LGVudmVsb3BlOnthdHRhY2s6LjAxLGRlY2F5OjAsc3VzdGFpbjoxLHJlbGVhc2U6LjV9fSxtb2R1bGF0b3I6e3ZvbHVtZTotMTAscG9ydGFtZW50bzowLG9zY2lsbGF0b3I6e3R5cGU6XCJ0cmlhbmdsZVwifSxlbnZlbG9wZTp7YXR0YWNrOi4wMSxkZWNheTowLHN1c3RhaW46MSxyZWxlYXNlOi41fX19LHQuU2ltcGxlRk0ucHJvdG90eXBlLl90cmlnZ2VyRW52ZWxvcGVBdHRhY2s9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdD10aGlzLnRvU2Vjb25kcyh0KSx0aGlzLmNhcnJpZXIuZW52ZWxvcGUudHJpZ2dlckF0dGFjayh0LGUpLHRoaXMubW9kdWxhdG9yLmVudmVsb3BlLnRyaWdnZXJBdHRhY2sodCksdGhpc30sdC5TaW1wbGVGTS5wcm90b3R5cGUuX3RyaWdnZXJFbnZlbG9wZVJlbGVhc2U9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY2Fycmllci50cmlnZ2VyUmVsZWFzZSh0KSx0aGlzLm1vZHVsYXRvci50cmlnZ2VyUmVsZWFzZSh0KSx0aGlzfSx0LlNpbXBsZUZNLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHQuTW9ub3Bob25pYy5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3dyaXRhYmxlKFtcImNhcnJpZXJcIixcIm1vZHVsYXRvclwiLFwiZnJlcXVlbmN5XCIsXCJoYXJtb25pY2l0eVwiLFwibW9kdWxhdGlvbkluZGV4XCJdKSx0aGlzLmNhcnJpZXIuZGlzcG9zZSgpLHRoaXMuY2Fycmllcj1udWxsLHRoaXMubW9kdWxhdG9yLmRpc3Bvc2UoKSx0aGlzLm1vZHVsYXRvcj1udWxsLHRoaXMuZnJlcXVlbmN5LmRpc3Bvc2UoKSx0aGlzLmZyZXF1ZW5jeT1udWxsLHRoaXMubW9kdWxhdGlvbkluZGV4LmRpc3Bvc2UoKSx0aGlzLm1vZHVsYXRpb25JbmRleD1udWxsLHRoaXMuaGFybW9uaWNpdHkuZGlzcG9zZSgpLHRoaXMuaGFybW9uaWNpdHk9bnVsbCx0aGlzLl9tb2R1bGF0aW9uTm9kZS5kaXNjb25uZWN0KCksdGhpcy5fbW9kdWxhdGlvbk5vZGU9bnVsbCx0aGlzfSx0LlNpbXBsZUZNfSksTW9kdWxlKGZ1bmN0aW9uKHQpe3JldHVybiBuYXZpZ2F0b3IuZ2V0VXNlck1lZGlhPW5hdmlnYXRvci5nZXRVc2VyTWVkaWF8fG5hdmlnYXRvci53ZWJraXRHZXRVc2VyTWVkaWF8fG5hdmlnYXRvci5tb3pHZXRVc2VyTWVkaWF8fG5hdmlnYXRvci5tc0dldFVzZXJNZWRpYSx0LkV4dGVybmFsSW5wdXQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnNPYmplY3QoYXJndW1lbnRzLFtcImlucHV0TnVtXCJdLHQuRXh0ZXJuYWxJbnB1dC5kZWZhdWx0cyk7dC5Tb3VyY2UuY2FsbCh0aGlzLGUpLHRoaXMuX21lZGlhU3RyZWFtPW51bGwsdGhpcy5fc3RyZWFtPW51bGwsdGhpcy5fY29uc3RyYWludHM9e2F1ZGlvOiEwfSx0aGlzLl9pbnB1dE51bT1lLmlucHV0TnVtLHRoaXMuX2dhdGU9bmV3IHQuR2FpbigwKS5jb25uZWN0KHRoaXMub3V0cHV0KX0sdC5leHRlbmQodC5FeHRlcm5hbElucHV0LHQuU291cmNlKSx0LkV4dGVybmFsSW5wdXQuZGVmYXVsdHM9e2lucHV0TnVtOjB9LHQuRXh0ZXJuYWxJbnB1dC5wcm90b3R5cGUuX2dldFVzZXJNZWRpYT1mdW5jdGlvbihlKXtpZighdC5FeHRlcm5hbElucHV0LnN1cHBvcnRlZCl0aHJvdyBuZXcgRXJyb3IoXCJicm93c2VyIGRvZXMgbm90IHN1cHBvcnQgJ2dldFVzZXJNZWRpYSdcIik7dC5FeHRlcm5hbElucHV0LnNvdXJjZXNbdGhpcy5faW5wdXROdW1dJiYodGhpcy5fY29uc3RyYWludHM9e2F1ZGlvOntvcHRpb25hbDpbe3NvdXJjZUlkOnQuRXh0ZXJuYWxJbnB1dC5zb3VyY2VzW3RoaXMuX2lucHV0TnVtXS5pZH1dfX0pLG5hdmlnYXRvci5nZXRVc2VyTWVkaWEodGhpcy5fY29uc3RyYWludHMsZnVuY3Rpb24odCl7dGhpcy5fb25TdHJlYW0odCksZSgpfS5iaW5kKHRoaXMpLGZ1bmN0aW9uKHQpe2UodCl9KX0sdC5FeHRlcm5hbElucHV0LnByb3RvdHlwZS5fb25TdHJlYW09ZnVuY3Rpb24odCl7aWYoIXRoaXMuaXNGdW5jdGlvbih0aGlzLmNvbnRleHQuY3JlYXRlTWVkaWFTdHJlYW1Tb3VyY2UpKXRocm93IG5ldyBFcnJvcihcImJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCB0aGUgJ01lZGlhU3RyZWFtU291cmNlTm9kZSdcIik7dGhpcy5fc3RyZWFtfHwodGhpcy5fc3RyZWFtPXQsdGhpcy5fbWVkaWFTdHJlYW09dGhpcy5jb250ZXh0LmNyZWF0ZU1lZGlhU3RyZWFtU291cmNlKHQpLHRoaXMuX21lZGlhU3RyZWFtLmNvbm5lY3QodGhpcy5fZ2F0ZSkpfSx0LkV4dGVybmFsSW5wdXQucHJvdG90eXBlLm9wZW49ZnVuY3Rpb24oZSl7cmV0dXJuIGU9dGhpcy5kZWZhdWx0QXJnKGUsdC5ub09wKSx0LkV4dGVybmFsSW5wdXQuZ2V0U291cmNlcyhmdW5jdGlvbigpe3RoaXMuX2dldFVzZXJNZWRpYShlKX0uYmluZCh0aGlzKSksdGhpc30sdC5FeHRlcm5hbElucHV0LnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbigpe2lmKHRoaXMuX3N0cmVhbSl7dmFyIHQ9dGhpcy5fc3RyZWFtLmdldFRyYWNrcygpW3RoaXMuX2lucHV0TnVtXTt0aGlzLmlzVW5kZWYodCl8fHQuc3RvcCgpLHRoaXMuX3N0cmVhbT1udWxsfXJldHVybiB0aGlzfSx0LkV4dGVybmFsSW5wdXQucHJvdG90eXBlLl9zdGFydD1mdW5jdGlvbih0KXtyZXR1cm4gdD10aGlzLnRvU2Vjb25kcyh0KSx0aGlzLl9nYXRlLmdhaW4uc2V0VmFsdWVBdFRpbWUoMSx0KSx0aGlzfSx0LkV4dGVybmFsSW5wdXQucHJvdG90eXBlLl9zdG9wPWZ1bmN0aW9uKHQpe3JldHVybiB0PXRoaXMudG9TZWNvbmRzKHQpLHRoaXMuX2dhdGUuZ2Fpbi5zZXRWYWx1ZUF0VGltZSgwLHQpLHRoaXN9LHQuRXh0ZXJuYWxJbnB1dC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LlNvdXJjZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuY2xvc2UoKSx0aGlzLl9tZWRpYVN0cmVhbSYmKHRoaXMuX21lZGlhU3RyZWFtLmRpc2Nvbm5lY3QoKSx0aGlzLl9tZWRpYVN0cmVhbT1udWxsKSx0aGlzLl9jb25zdHJhaW50cz1udWxsLHRoaXMuX2dhdGUuZGlzcG9zZSgpLHRoaXMuX2dhdGU9bnVsbCx0aGlzfSx0LkV4dGVybmFsSW5wdXQuc291cmNlcz1bXSx0LkV4dGVybmFsSW5wdXQuX2NhbkdldFNvdXJjZXM9IXQucHJvdG90eXBlLmlzVW5kZWYod2luZG93Lk1lZGlhU3RyZWFtVHJhY2spJiZ0LnByb3RvdHlwZS5pc0Z1bmN0aW9uKE1lZGlhU3RyZWFtVHJhY2suZ2V0U291cmNlcyksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuRXh0ZXJuYWxJbnB1dCxcInN1cHBvcnRlZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdC5wcm90b3R5cGUuaXNGdW5jdGlvbihuYXZpZ2F0b3IuZ2V0VXNlck1lZGlhKX19KSx0LkV4dGVybmFsSW5wdXQuZ2V0U291cmNlcz1mdW5jdGlvbihlKXtyZXR1cm4gMD09PXQuRXh0ZXJuYWxJbnB1dC5zb3VyY2VzLmxlbmd0aCYmdC5FeHRlcm5hbElucHV0Ll9jYW5HZXRTb3VyY2VzP01lZGlhU3RyZWFtVHJhY2suZ2V0U291cmNlcyhmdW5jdGlvbihpKXtmb3IodmFyIHM9MDtzPGkubGVuZ3RoO3MrKylcImF1ZGlvXCI9PT1pW3NdLmtpbmQmJih0LkV4dGVybmFsSW5wdXQuc291cmNlc1tzXT1pW3NdKTtlKHQuRXh0ZXJuYWxJbnB1dC5zb3VyY2VzKX0pOmUodC5FeHRlcm5hbElucHV0LnNvdXJjZXMpLHRoaXN9LHQuRXh0ZXJuYWxJbnB1dH0pLE1vZHVsZShmdW5jdGlvbih0KXtyZXR1cm4gdC5NaWNyb3Bob25lPWZ1bmN0aW9uKCl7dC5FeHRlcm5hbElucHV0LmNhbGwodGhpcywwKX0sdC5leHRlbmQodC5NaWNyb3Bob25lLHQuRXh0ZXJuYWxJbnB1dCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuTWljcm9waG9uZSxcInN1cHBvcnRlZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdC5FeHRlcm5hbElucHV0LnN1cHBvcnRlZH19KSx0Lk1pY3JvcGhvbmV9KSxNb2R1bGUoZnVuY3Rpb24odCl7cmV0dXJuIHQuQ2xpcD1mdW5jdGlvbihlLGkpe2lmKGU+aSl7dmFyIHM9ZTtlPWksaT1zfXRoaXMubWluPXRoaXMuaW5wdXQ9bmV3IHQuTWluKGkpLHRoaXMuX3JlYWRPbmx5KFwibWluXCIpLHRoaXMubWF4PXRoaXMub3V0cHV0PW5ldyB0Lk1heChlKSx0aGlzLl9yZWFkT25seShcIm1heFwiKSx0aGlzLm1pbi5jb25uZWN0KHRoaXMubWF4KX0sdC5leHRlbmQodC5DbGlwLHQuU2lnbmFsQmFzZSksXG50LkNsaXAucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3dyaXRhYmxlKFwibWluXCIpLHRoaXMubWluLmRpc3Bvc2UoKSx0aGlzLm1pbj1udWxsLHRoaXMuX3dyaXRhYmxlKFwibWF4XCIpLHRoaXMubWF4LmRpc3Bvc2UoKSx0aGlzLm1heD1udWxsLHRoaXN9LHQuQ2xpcH0pLE1vZHVsZShmdW5jdGlvbih0KXtyZXR1cm4gdC5Ob3JtYWxpemU9ZnVuY3Rpb24oZSxpKXt0aGlzLl9pbnB1dE1pbj10aGlzLmRlZmF1bHRBcmcoZSwwKSx0aGlzLl9pbnB1dE1heD10aGlzLmRlZmF1bHRBcmcoaSwxKSx0aGlzLl9zdWI9dGhpcy5pbnB1dD1uZXcgdC5BZGQoMCksdGhpcy5fZGl2PXRoaXMub3V0cHV0PW5ldyB0Lk11bHRpcGx5KDEpLHRoaXMuX3N1Yi5jb25uZWN0KHRoaXMuX2RpdiksdGhpcy5fc2V0UmFuZ2UoKX0sdC5leHRlbmQodC5Ob3JtYWxpemUsdC5TaWduYWxCYXNlKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5Ob3JtYWxpemUucHJvdG90eXBlLFwibWluXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pbnB1dE1pbn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2lucHV0TWluPXQsdGhpcy5fc2V0UmFuZ2UoKX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5Ob3JtYWxpemUucHJvdG90eXBlLFwibWF4XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pbnB1dE1heH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2lucHV0TWF4PXQsdGhpcy5fc2V0UmFuZ2UoKX19KSx0Lk5vcm1hbGl6ZS5wcm90b3R5cGUuX3NldFJhbmdlPWZ1bmN0aW9uKCl7dGhpcy5fc3ViLnZhbHVlPS10aGlzLl9pbnB1dE1pbix0aGlzLl9kaXYudmFsdWU9MS8odGhpcy5faW5wdXRNYXgtdGhpcy5faW5wdXRNaW4pfSx0Lk5vcm1hbGl6ZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fc3ViLmRpc3Bvc2UoKSx0aGlzLl9zdWI9bnVsbCx0aGlzLl9kaXYuZGlzcG9zZSgpLHRoaXMuX2Rpdj1udWxsLHRoaXN9LHQuTm9ybWFsaXplfSksTW9kdWxlKGZ1bmN0aW9uKHQpe3QuUm91dGU9ZnVuY3Rpb24oaSl7dmFyIHMsbjtmb3IoaT10aGlzLmRlZmF1bHRBcmcoaSwyKSx0LmNhbGwodGhpcywxLGkpLHRoaXMuZ2F0ZT1uZXcgdC5TaWduYWwoMCksdGhpcy5fcmVhZE9ubHkoXCJnYXRlXCIpLHM9MDtpPnM7cysrKW49bmV3IGUocyksdGhpcy5vdXRwdXRbc109bix0aGlzLmdhdGUuY29ubmVjdChuLnNlbGVjdGVyKSx0aGlzLmlucHV0LmNvbm5lY3Qobil9LHQuZXh0ZW5kKHQuUm91dGUsdC5TaWduYWxCYXNlKSx0LlJvdXRlLnByb3RvdHlwZS5zZWxlY3Q9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdD1NYXRoLmZsb29yKHQpLHRoaXMuZ2F0ZS5zZXRWYWx1ZUF0VGltZSh0LHRoaXMudG9TZWNvbmRzKGUpKSx0aGlzfSx0LlJvdXRlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5fd3JpdGFibGUoXCJnYXRlXCIpLHRoaXMuZ2F0ZS5kaXNwb3NlKCksdGhpcy5nYXRlPW51bGw7Zm9yKHZhciBlPTA7ZTx0aGlzLm91dHB1dC5sZW5ndGg7ZSsrKXRoaXMub3V0cHV0W2VdLmRpc3Bvc2UoKSx0aGlzLm91dHB1dFtlXT1udWxsO3JldHVybiB0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpc307dmFyIGU9ZnVuY3Rpb24oZSl7dGhpcy5zZWxlY3Rlcj1uZXcgdC5FcXVhbChlKSx0aGlzLmdhdGU9dGhpcy5pbnB1dD10aGlzLm91dHB1dD10aGlzLmNvbnRleHQuY3JlYXRlR2FpbigpLHRoaXMuc2VsZWN0ZXIuY29ubmVjdCh0aGlzLmdhdGUuZ2Fpbil9O3JldHVybiB0LmV4dGVuZChlKSxlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuc2VsZWN0ZXIuZGlzcG9zZSgpLHRoaXMuc2VsZWN0ZXI9bnVsbCx0aGlzLmdhdGUuZGlzY29ubmVjdCgpLHRoaXMuZ2F0ZT1udWxsfSx0LlJvdXRlfSksTW9kdWxlKGZ1bmN0aW9uKHQpe3JldHVybiB0LlN3aXRjaD1mdW5jdGlvbihlKXtlPXRoaXMuZGVmYXVsdEFyZyhlLCExKSx0LmNhbGwodGhpcyksdGhpcy5nYXRlPW5ldyB0LlNpZ25hbCgwKSx0aGlzLl9yZWFkT25seShcImdhdGVcIiksdGhpcy5fdGhyZXNoPW5ldyB0LkdyZWF0ZXJUaGFuKC41KSx0aGlzLmlucHV0LmNvbm5lY3QodGhpcy5vdXRwdXQpLHRoaXMuZ2F0ZS5jaGFpbih0aGlzLl90aHJlc2gsdGhpcy5vdXRwdXQuZ2FpbiksZSYmdGhpcy5vcGVuKCl9LHQuZXh0ZW5kKHQuU3dpdGNoLHQuU2lnbmFsQmFzZSksdC5Td2l0Y2gucHJvdG90eXBlLm9wZW49ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZ2F0ZS5zZXRWYWx1ZUF0VGltZSgxLHRoaXMudG9TZWNvbmRzKHQpKSx0aGlzfSx0LlN3aXRjaC5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZ2F0ZS5zZXRWYWx1ZUF0VGltZSgwLHRoaXMudG9TZWNvbmRzKHQpKSx0aGlzfSx0LlN3aXRjaC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fd3JpdGFibGUoXCJnYXRlXCIpLHRoaXMuZ2F0ZS5kaXNwb3NlKCksdGhpcy5nYXRlPW51bGwsdGhpcy5fdGhyZXNoLmRpc3Bvc2UoKSx0aGlzLl90aHJlc2g9bnVsbCx0aGlzfSx0LlN3aXRjaH0pLFwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoZnVuY3Rpb24oKXtyZXR1cm4gVG9uZX0pOlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGU/bW9kdWxlLmV4cG9ydHM9VG9uZTpyb290LlRvbmU9VG9uZX0odGhpcyk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
