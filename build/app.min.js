jQuery(document).ready(function($){"use strict";function changeBgColor(){var el_body=$("body");el_body.css("background-color",bgcolors[Math.floor(8*Math.random()+1)])}function changeNumberColor(){var el_number=$(".number");el_number.css("color",reds[Math.floor(4*Math.random()+1)])}function changeBlueColor(){var el_blue=$(".blueBox");el_blue.css("background-color",blues[Math.floor(Math.random()*blues.length)])}function changeYellowColor(){var el_yellow=$(".yellowBox");el_yellow.css("background-color",yellows[Math.floor(8*Math.random()+1)])}var bgcolors=["#F3F315","#C1FD33","#FF9933","#FC5AB8","#0DD5FC","grey","aqua","cornflower","salmon","orange","black","purple","pink"];new SineWaves({el:document.querySelector(".waves"),speed:4,width:function(){return $(window).width()},height:function(){return $(window).height()},ease:"SineInOut",wavesWidth:"70%",waves:[{timeModifier:4,lineWidth:1,amplitude:-25,wavelength:25},{timeModifier:2,lineWidth:2,amplitude:-50,wavelength:50},{timeModifier:1,lineWidth:1,amplitude:-100,wavelength:100},{timeModifier:.5,lineWidth:1,amplitude:-200,wavelength:200},{timeModifier:.25,lineWidth:2,amplitude:-400,wavelength:400}],resizeEvent:function(){var gradient=this.ctx.createLinearGradient(0,0,this.width,0);gradient.addColorStop(0,"rgba(23, 210, 168, 0.2)"),gradient.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),gradient.addColorStop(1,"rgba(23, 210, 168, 0.2)");for(var index=-1,length=this.waves.length;++index<length;)this.waves[index].strokeStyle=gradient;index=void 0,length=void 0,gradient=void 0}});$("button").on("click",function(event){var userOrOrg=$("input.user-or-org").val(),repoName=$("input.repo-name").val();event.preventDefault(),console.table(userOrOrg,repoName)});var userOrOrgExample="common-gold",repoNameExample="musicalChars",repoURL="https://api.github.com/repos/"+userOrOrgExample+"/"+repoNameExample+"/commits?callback=repo";$.ajax({url:repoURL,dataType:"jsonp",success:function(repo){function speak(text){var msg=new SpeechSynthesisUtterance;msg.text=musicalChars.lyrics.verse1(),msg.volume=parseFloat(9),msg.rate=parseFloat(musicalChars.vocals.rate),msg.pitch=parseFloat(musicalChars.vocals.pitch),window.speechSynthesis.speak(msg)}if(repo.data){console.au("Repository data:"),console.table(repo.data);var musicalChars=(repo.length,{bpm:function(){var calcBPM=120;return calcBPM},timeSignature:function(){return repo.data.commit.message.length>5?[4,4]:repo.data.commit.length>50?[3,4]:void 0},duration:100*repo.length,key:function(){var defaultKey="c",char=repo.data[0].commit.message.substr(0,1);if("a"==char||"A"==char||"1"==char)return"a";if("b"==char||"B"==char||"2"==char)return"b";if("c"==char||"C"==char||"3"==char)return"c";if("d"==char||"D"==char||"4"==char)return"d";if("e"==char||"E"==char||"5"==char)return"e";if("f"==char||"F"==char||"6"==char)return"f";if("g"==char||"G"==char||"7"==char)return"a";return defaultKey},isMinor:function(){return!1},majorMinor:function(){return musicalChars.isMinor?"minor":"major"},hasSpeech:function(){return"speechSynthesis"in window},hasDrums:!0,hasMarimba:!0,hasBass:!0,hasFlute:!0,hasPiano:!0,hasSquare:!0,hasSawtooth:!0,lyrics:{verses:{temp:"not",done:"yet"},verse1:function(){return!!musicalChars.hasSpeech()&&(!!repo.data[0].commit.message&&repo.data[0].commit.message)}},vocals:{pitch:.6,rate:.5},notes:{drums:function(){return[]},marimba:function(){return[]},bass:function(){return[]},flute:function(){return[]},piano:function(){return[]},sawtoothwave:function(){return[]},squarewave:function(){return[]}},ui:{button:function(buttonText,buttonClass){return'<button class="'+buttonClass+'">'+buttonText+"<button>"}},render:function(){$(".out h2").html(repoNameExample+" in "+musicalChars.key()+" "+musicalChars.majorMinor())},init:function(){musicalChars.render();var voices=speechSynthesis.getVoices();voices.forEach(function(voice,i){voice.name})}});musicalChars.init(),window.speechSynthesis.onvoiceschanged=function(e){musicalChars.init()},speak(musicalChars.lyrics.verse1());var snare=new Tone.NoiseSynth({volume:-10,envelope:{attack:.001,decay:.2,sustain:0},filterEnvelope:{attack:.001,decay:.1,sustain:0}}).toMaster(),insMarimba=(new Tone.Part(function(time){snare.triggerAttack(time),changeNumberColor(),changeBlueColor(),$(".button").toggleClass("playing")},musicalChars.notes.drums).start(0),new Tone.PolySynth(4,Tone.Synth,{volume:-5,oscillator:{partials:[1,0,2,0,3]},envelope:{attack:.001,decay:1.2,sustain:0,release:1.2}}).toMaster()),insBass=(new Tone.Part(function(time,note){insMarimba.triggerAttackRelease(note,"8n",time)},musicalChars.notes.marimba).start(),new Tone.PolySynth(4,Tone.SimpleFM,{volume:-3,harmonicity:3.01,modulationIndex:14,carrier:{oscillator:{type:"sawtooth6"},envelope:{attack:.01,decay:.5,sustain:.1,release:1.2}},modulator:{oscillator:{type:"triangle"},envelope:{attack:.01,decay:.5,sustain:.2,release:.1}}}).toMaster()),insFlute=(new Tone.Part(function(time,note){insBass.triggerAttackRelease(note,"4n",time),changeBgColor()},musicalChars.notes.bass).start(0),new Tone.PolySynth(4,Tone.SimpleFM,{volume:-3,harmonicity:3.01,modulationIndex:14,carrier:{oscillator:{type:"triangle"},envelope:{attack:.05,decay:.5,sustain:.1,release:1.2}},modulator:{oscillator:{type:"square"},envelope:{attack:.01,decay:.5,sustain:.2,release:.1}}}).toMaster()),insPiano=(new Tone.Part(function(time,note){insFlute.triggerAttackRelease(note,"4n",time),changeYellowColor()},musicalChars.notes.flute).start(0),new Tone.PolySynth(2,Tone.Synth,{volume:-8.75,oscillator:{partials:[31,23,3,5,5,1]},envelope:{attack:.001,decay:1.1,sustain:0,release:.6}}).toMaster()),insSquarewave=(new Tone.Part(function(time,note){insPiano.triggerAttackRelease(note,"1n",time)},musicalChars.notes.piano).start(0),new Tone.PolySynth(2,Tone.SimpleFM,{volume:-1,harmonicity:3.01,modulationIndex:14,carrier:{oscillator:{type:"sawtooth6"},envelope:{attack:.01,decay:.5,sustain:.1,release:1.2}},modulator:{oscillator:{type:"triangle"},envelope:{attack:.01,decay:.5,sustain:.2,release:.1}}}).toMaster(),new Tone.Part(function(time,note){insSawtootwaveh.triggerAttackRelease(note,"4n",time)},musicalChars.notes.sawtoothwave).start(0),new Tone.PolySynth(3,Tone.SimpleFM,{volume:-12,harmonicity:3.01,modulationIndex:14,carrier:{oscillator:{type:"square"},envelope:{attack:.05,decay:.5,sustain:.1,release:1.2}},modulator:{oscillator:{type:"square"},envelope:{attack:.01,decay:.5,sustain:.2,release:.1}}}).toMaster());new Tone.Part(function(time,note){insSquarewave.triggerAttackRelease(note,"4n",time)},musicalChars.notes.squarewave).start(0);Tone.Transport.timeSignature=[4,4],Tone.Transport.bpm.value=160,Tone.Transport.loop=!0}}})});var commonAU={"debugger":function(errorMessage){return errorMessage="","Common Gold: \n"+errorMessage},debug:!1},auConsoleStyles=["background: linear-gradient(gold, goldenrod)","border: 6px solid gold","color: black","display: block","line-height: 24px","text-align: left","margin: 4px","font-weight: bold"].join(";");console.au=function(message){console.log("%c * Common.au: "+message,auConsoleStyles+" *")};